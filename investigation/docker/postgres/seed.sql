-- Disable FK checks during import
SET session_replication_role = replica;

-- POC Course Data Export
-- Generated: 2025-12-13T20:05:35.971Z
-- Courses (4):
--   fix-common-git-mistakes (state: published)
--   form-validation-in-elm (state: removed)
--   the-beginner-s-guide-to-react (state: published)
--   use-d3-v3-to-build-interactive-charts-with-javascript (state: published)

-- Users (4)
INSERT INTO users (id, email, encrypted_password, reset_password_token, reset_password_sent_at, remember_created_at, sign_in_count, current_sign_in_at, last_sign_in_at, current_sign_in_ip, last_sign_in_ip, created_at, updated_at, first_name, last_name, confirmation_token, confirmed_at, confirmation_sent_at, unconfirmed_email, avatar_url, can_contact, managed_subscription_id, authentication_token, favorite_playlist_id, provider, uid, has_random_password, is_banned, avatar_file_name, avatar_content_type, avatar_file_size, avatar_updated_at, slack_id, is_invited_to_slack, country, city, state, trial_started_at, kvstore, community_status, discord_id) VALUES (1751, 'user1751@test.egghead.io', 'redacted', NULL, NULL, '2016-06-17T18:09:19.870Z', 2741, '2023-11-02T23:32:58.408Z', '2023-11-02T23:32:45.688Z', NULL, NULL, '2013-11-17T07:01:57.149Z', '2023-11-02T23:32:58.409Z', 'Ben', 'User', NULL, NULL, NULL, NULL, NULL, true, NULL, NULL, 127, 'github', '140343', NULL, false, NULL, NULL, NULL, NULL, NULL, false, 'US', 'Los Gatos', 'CA', NULL, NULL, 'joined', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO users (id, email, encrypted_password, reset_password_token, reset_password_sent_at, remember_created_at, sign_in_count, current_sign_in_at, last_sign_in_at, current_sign_in_ip, last_sign_in_ip, created_at, updated_at, first_name, last_name, confirmation_token, confirmed_at, confirmation_sent_at, unconfirmed_email, avatar_url, can_contact, managed_subscription_id, authentication_token, favorite_playlist_id, provider, uid, has_random_password, is_banned, avatar_file_name, avatar_content_type, avatar_file_size, avatar_updated_at, slack_id, is_invited_to_slack, country, city, state, trial_started_at, kvstore, community_status, discord_id) VALUES (15369, 'user15369@test.egghead.io', 'redacted', NULL, NULL, '2020-08-19T05:21:12.441Z', 28405, '2025-12-14T02:56:50.204Z', '2025-12-13T14:46:33.652Z', NULL, NULL, '2014-08-10T02:05:19.208Z', '2025-12-14T02:56:50.208Z', 'Kent', 'C.', NULL, NULL, NULL, NULL, NULL, false, 33, NULL, 1373964, 'github', '1500684', NULL, false, NULL, NULL, NULL, NULL, NULL, false, NULL, NULL, NULL, NULL, NULL, 'joined', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO users (id, email, encrypted_password, reset_password_token, reset_password_sent_at, remember_created_at, sign_in_count, current_sign_in_at, last_sign_in_at, current_sign_in_ip, last_sign_in_ip, created_at, updated_at, first_name, last_name, confirmation_token, confirmed_at, confirmation_sent_at, unconfirmed_email, avatar_url, can_contact, managed_subscription_id, authentication_token, favorite_playlist_id, provider, uid, has_random_password, is_banned, avatar_file_name, avatar_content_type, avatar_file_size, avatar_updated_at, slack_id, is_invited_to_slack, country, city, state, trial_started_at, kvstore, community_status, discord_id) VALUES (28751, 'user28751@test.egghead.io', 'redacted', NULL, NULL, '2017-06-28T01:42:32.186Z', 4073, '2018-12-23T05:35:34.979Z', '2018-12-23T05:35:18.302Z', NULL, NULL, '2015-02-17T06:27:52.334Z', '2018-12-23T05:35:34.983Z', 'enrico', 'User', NULL, NULL, NULL, NULL, NULL, false, NULL, NULL, 7396, 'github', '6834024', false, false, NULL, NULL, NULL, NULL, NULL, false, 'IT', NULL, NULL, NULL, NULL, 'nonmember', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO users (id, email, encrypted_password, reset_password_token, reset_password_sent_at, remember_created_at, sign_in_count, current_sign_in_at, last_sign_in_at, current_sign_in_ip, last_sign_in_ip, created_at, updated_at, first_name, last_name, confirmation_token, confirmed_at, confirmation_sent_at, unconfirmed_email, avatar_url, can_contact, managed_subscription_id, authentication_token, favorite_playlist_id, provider, uid, has_random_password, is_banned, avatar_file_name, avatar_content_type, avatar_file_size, avatar_updated_at, slack_id, is_invited_to_slack, country, city, state, trial_started_at, kvstore, community_status, discord_id) VALUES (265830, 'user265830@test.egghead.io', 'redacted', NULL, NULL, '2018-10-27T08:31:15.827Z', 5693, '2025-08-25T04:35:12.053Z', '2025-08-23T04:02:30.747Z', NULL, NULL, '2018-04-19T07:03:07.301Z', '2025-08-25T04:35:12.164Z', 'Chris', 'User', NULL, NULL, NULL, NULL, NULL, true, NULL, NULL, 239323, NULL, NULL, NULL, false, 'chris_new.png', 'image/png', 361300, '2019-09-27T23:52:34.902Z', NULL, false, 'US', 'Ashburn', 'VA', NULL, NULL, 'joined', NULL) ON CONFLICT (id) DO NOTHING;

-- Instructors (4)
INSERT INTO instructors (id, first_name, last_name, profile_picture_url, twitter, website, bio_short, created_at, updated_at, avatar_file_name, avatar_content_type, avatar_file_size, avatar_updated_at, percentage, user_id, slug, trained_by_instructor_id, slack_id, state, email, gear_tracking_number, contract_id, avatar_processing, slack_group_id, skip_onboarding, internal_note) VALUES (11, 'Kent C.', 'Dodds', NULL, 'kentcdodds', 'http://kentcdodds.com', 'Kent is a JavaScript developer who likes open source and teaching. 

He is currently working for himself as a full-time educator. Before going full-time on education, Kent worked at PayPal. During his time there he represented the company on the TC39 committee and started several Open Source projects, notably glamorousüíÑ, downshift üèéÔ∏è  and dom-testing-library üêô.
', '2014-09-04T09:26:09.765Z', '2024-11-27T02:06:10.921Z', 'photo-512.png', 'image/png', 100571, '2018-08-14T01:41:05.055Z', '0.20', 15369, 'kent-c-dodds', NULL, NULL, 'signed', 'instructor11@test.egghead.io', NULL, NULL, NULL, 'G70JH2Y7P', false, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO instructors (id, first_name, last_name, profile_picture_url, twitter, website, bio_short, created_at, updated_at, avatar_file_name, avatar_content_type, avatar_file_size, avatar_updated_at, percentage, user_id, slug, trained_by_instructor_id, slack_id, state, email, gear_tracking_number, contract_id, avatar_processing, slack_group_id, skip_onboarding, internal_note) VALUES (150, 'Enrico', 'Buonanno', NULL, 'la_yumba', 'https://github.com/la-yumba/', 'I obtained an MS in Computer Science at Columbia University in 2001 and have been working as a software developer and architect since. I worked in FinTech, online auctions and other areas, using a number of different languages and technologies. I wrote a book on Functional Programming in C# with Manning.', '2017-06-28T01:48:09.327Z', '2023-08-08T00:08:23.751Z', 'IMG_0185.jpg', 'image/jpeg', 599649, '2018-08-14T01:41:43.748Z', '0.20', 28751, 'enrico-buonanno', NULL, NULL, 'removed', 'instructor150@test.egghead.io', NULL, NULL, NULL, 'G70JH2Y7P', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO instructors (id, first_name, last_name, profile_picture_url, twitter, website, bio_short, created_at, updated_at, avatar_file_name, avatar_content_type, avatar_file_size, avatar_updated_at, percentage, user_id, slug, trained_by_instructor_id, slack_id, state, email, gear_tracking_number, contract_id, avatar_processing, slack_group_id, skip_onboarding, internal_note) VALUES (210, 'Chris', 'Achard', NULL, 'chrisachard', 'https://chrisachard.com', 'Teaching everything I know about React, React Native, Ruby on Rails, Node.js, and machine learning!', '2018-04-19T07:09:18.947Z', '2022-08-13T02:46:14.208Z', 'chris_new.png', 'image/png', 361300, '2019-09-13T19:54:22.694Z', '0.20', 265830, 'chris-achard', NULL, NULL, 'signed', 'instructor210@test.egghead.io', NULL, '9b2ca1a4defab6378f60162aca14dfa5ec6afa17', false, 'G70JH2Y7P', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO instructors (id, first_name, last_name, profile_picture_url, twitter, website, bio_short, created_at, updated_at, avatar_file_name, avatar_content_type, avatar_file_size, avatar_updated_at, percentage, user_id, slug, trained_by_instructor_id, slack_id, state, email, gear_tracking_number, contract_id, avatar_processing, slack_group_id, skip_onboarding, internal_note) VALUES (1, 'Ben', 'Clinkinbeard', NULL, 'bclinkinbeard', 'http://benclinkinbeard.com/', 'Full stack architect specializing in large scale data and geospatial visualization for ambitious web applications. Front end expert.', '2013-11-27T00:20:59.573Z', '2022-10-22T00:35:38.625Z', 'headShot_large.jpg', 'image/jpeg', 673095, '2018-08-14T01:40:28.277Z', '0.20', 1751, 'ben-clinkinbeard', NULL, NULL, 'signed', NULL, NULL, NULL, NULL, 'G70JH2Y7P', NULL, NULL) ON CONFLICT (id) DO NOTHING;

-- Series/Courses (4)
INSERT INTO series (id, title, description, instructor_id, created_at, updated_at, slug, is_complete, tweeted_on, purchase_price, state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, row_order, published_at, queue_order, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, free_forever, tagline, summary, kvstore, square_cover_processing, publish_subject, publish_body, repo, publish_at, price, revshare_percent, site, visibility_state, resources_id) VALUES (401, 'Fix Common Git Mistakes', 'This workshop will start by breaking down the four states in which a file can exist, and we''ll build up our mental model of git from there. Then, we''ll look at how to move files between those states in different ways.

Once we''ve developed a new model for how git operates, we''ll be able to purposefully get ourselves into some sticky situations, and then gracefully recover from them.

If you can handle git add/commit/push, but not much more - then this workshop is perfect for you.

You can finally get some proper git training, and will never have to worry about losing data or messing up the repo again!', 210, '2019-11-06T04:25:07.214Z', '2021-02-14T03:41:00.385Z', 'fix-common-git-mistakes', false, NULL, NULL, 'published', 'GitMistakes_1000.png', 'image/png', 592168, '2019-11-20T03:44:12.854Z', -8308993, '2019-12-12T02:34:02.743Z', 8372224, NULL, '', '', '', 'git', '', '', '', false, NULL, '', NULL, false, NULL, NULL, NULL, NULL, NULL, NULL, 'egghead.io', 'indexed', '339890') ON CONFLICT (id) DO NOTHING;
INSERT INTO series (id, title, description, instructor_id, created_at, updated_at, slug, is_complete, tweeted_on, purchase_price, state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, row_order, published_at, queue_order, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, free_forever, tagline, summary, kvstore, square_cover_processing, publish_subject, publish_body, repo, publish_at, price, revshare_percent, site, visibility_state, resources_id) VALUES (181, 'Form Validation in Elm', 'Validating forms can be quite a challenge. You not only need to write the logic for validation, but also keep track of the user''s interaction with the form, to ensure a smooth user experience. If you''ve decided that the browsers'' [constraint validation]() is not for you, then this course teaches you how to perform validation using pure Elm code. In the process, we will touch upon several Functional Programming techniques that come in handy 

As a starting point, we take the simple contact form built in [my course on the Elm Architecture](https://egghead.io/courses/learn-the-elm-architecture-by-building-a-simple-form). This course assumes you are familiar with the basics of [the Elm Architecture](https://egghead.io/courses/learn-the-elm-architecture-by-building-a-simple-form) and [the Elm type system](https://egghead.io/courses/understand-the-elm-type-system).', 150, '2017-12-15T04:39:17.200Z', '2023-08-08T00:08:23.754Z', 'form-validation-in-elm', false, NULL, NULL, 'removed', 'EGH_ElmValidation-1000.png', 'image/png', 1041231, '2018-08-14T01:46:30.609Z', 4932885, '2018-02-09T04:50:09.378Z', -276642, NULL, NULL, 'elm', NULL, NULL, NULL, NULL, NULL, false, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'egghead.io', 'hidden', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO series (id, title, description, instructor_id, created_at, updated_at, slug, is_complete, tweeted_on, purchase_price, state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, row_order, published_at, queue_order, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, free_forever, tagline, summary, kvstore, square_cover_processing, publish_subject, publish_body, repo, publish_at, price, revshare_percent, site, visibility_state, resources_id) VALUES (160, 'The Beginner''s Guide to React', 'React got that name for a reason. It‚Äôs a component-based JavaScript library that renders smartly and can seriously simplify your work.

This course is for [React](/q/react) newbies and anyone looking to build a solid foundation. It‚Äôs designed to teach you everything you need to start building web applications in React right away.

Each lesson in this 28-part course is a single `index.html` file. This keeps your focus on learning React, with no distractions. We‚Äôll start with a blank file and add more complexity as we go along, wrapping the course with a lesson on how to move into a more production-ready development environment‚Äîand even deploy your app to a great service like [Netlify](/q/netlify).

You‚Äôll build a solid understanding so when you come across [JavaScript](/q/javascript) challenges down the road, you‚Äôll know how to‚Ä¶react.', 11, '2017-10-19T23:50:34.417Z', '2022-07-16T00:22:57.499Z', 'the-beginner-s-guide-to-react', false, NULL, NULL, 'published', 'EGH_BeginnersReact2.png', 'image/png', 944304, '2020-03-24T21:31:29.732Z', -8277020, '2020-03-25T01:04:48.825Z', -6074853, NULL, '', '', 'react', '', '', '', '', true, NULL, NULL, NULL, false, NULL, NULL, NULL, NULL, NULL, NULL, 'egghead.io', 'indexed', '355045') ON CONFLICT (id) DO NOTHING;
INSERT INTO series (id, title, description, instructor_id, created_at, updated_at, slug, is_complete, tweeted_on, purchase_price, state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, row_order, published_at, queue_order, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, free_forever, tagline, summary, kvstore, square_cover_processing, publish_subject, publish_body, repo, publish_at, price, revshare_percent, site, visibility_state, resources_id) VALUES (1, 'Use D3 (v3) to Build Interactive Charts with JavaScript', 'This course covers D3 v3. If you''d like to learn about v4 of D3 (the latest version) [click here for the course on that](https://egghead.io/courses/build-interactive-javascript-charts-with-d3-v4).

This series will gently guide you through the first steps in getting to know D3. The curve can be steep, but with a few simple tools, you''ll be charting your buns off in no time flat.', 1, '2014-01-24T06:43:32.971Z', '2021-02-14T03:47:30.591Z', 'use-d3-v3-to-build-interactive-charts-with-javascript', true, NULL, NULL, 'published', 'course_image.png', 'image/png', 124516, '2018-08-14T01:44:09.147Z', -4893437, '2015-10-19T22:28:12.800Z', -3454132, NULL, 'd3', '', '', '', '', '', '', false, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'egghead.io', 'indexed', NULL) ON CONFLICT (id) DO NOTHING;

-- Lessons (84)
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2896, 'Refactor Model Validation to Handle Complex Cases in an Elm Form', NULL, 'Previously we created a validation model, however it''s too specific and can''t handle enough cases as our app scales. 

In this lesson we''ll learn how to refactor a validation model and make it more general. We''ll also step through the logic of our types and fix any possible issues. ', 610, NULL, '2017-12-20T16:33:20.785Z', '2023-08-08T00:08:21.245Z', 'elm-refactor-model-validation-to-handle-complex-cases-in-an-elm-form', NULL, 'itbpw7kguu', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG/egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_itbpw7kguu" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG.mp4" /><meta itemprop="duration" content="PT10M9S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/7cb84af08203b0b6e443561a7860a9a87b74b94c.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/d9426d9e3764df38edab4e99d4ec4c74c87a7307.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=609.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7cb84af08203b0b6e443561a7860a9a87b74b94c.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fd9426d9e3764df38edab4e99d4ec4c74c87a7307.bin" /><meta itemprop="uploadDate" content="2017-12-20T08:41:46Z" /><object id="wistia_itbpw7kguu_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=609.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7cb84af08203b0b6e443561a7860a9a87b74b94c.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fd9426d9e3764df38edab4e99d4ec4c74c87a7307.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=609.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7cb84af08203b0b6e443561a7860a9a87b74b94c.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fd9426d9e3764df38edab4e99d4ec4c74c87a7307.bin" name="wistia_itbpw7kguu_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("itbpw7kguu", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/itbpw7kguu/metadata.js"></script>', 'Instructor: [00:01] We were able to come a pretty long way using this very simple field type but there are some aspects of the design that are not entirely satisfactory. For example, notice that we assume that the input is a string, and that then as we validate it we turn it into some more specific type A.

[00:20] That''s great because we can, for example, validate that the string is an int, and then chain that with some more specific validation, for example that that int is positive.

[00:29] What doesn''t work so well is when we have to go the other way around, when we have a valid A and we want to render the string. For one thing, that''s not a very nice API to code for. For example, to display the value of the field, we need to provide a function to render that field.

[00:45] Here, we were using identity to string and so on. We could even run into problems as we convert back and forth between A and string. For example, let''s assume that the age field instead of natural would be of a float. We could pass string to float as a validator, and then change the field to be an option of the field of float.

[01:19] Let''s say I enter 16.50, it calls validation, and now this turned into 16.5. That''s because our validation has converted it to a float, but then to render it, we use the two-string function. Also, if we want to validate related fields, we might have one field causing another field to go from valid A to non-validated string, and again we have this problem of going from A to string.

[01:47] In a sense, all these problems will be cured if we only stored this string that is input by the user here, but then if you look at this type now, then we always store the current input no matter what the state of the validation.

[02:01] Then, perhaps it would make more sense to define this type like this as a record that has a value of type string and a validity. This would be our union type validity A. This revised model encompasses the fact that a field has a current value, that''s the row value passed by the user for the UI, and a validity that has more to do with the business rule of the validation.

[02:39] If you look at this type validity of A, you can see that it''s somewhat similar to a maybe of A, or to a result of string A. It has these three states not validated, which is somewhat like nothing, valid A which is somewhat like a just A or an OK A, and a valid string which is somehow an error state.

[02:59] It''s a bit of a combination of a maybe and a result, but with names that are more specific to the domain of validation. There is a small problem in that, if we were to expose the field type like this, then you could have some client code defining the field value like this.

[03:18] For example, with the value of hello and the validity of valid 10. In this case, the value in the field, and the A in the validity have gone out of sync, and we would like to prevent this. By the way, this would be a type alias.

[03:37] How can we prevent client code from creating such inconsistent values? Instead of a record, we can use a single case union type that holds a string and a validity of A. Instead of these field names, we can have similarly named functions that extract this data from a field. For example, let me define row value. Here, I can destructure this as a field with a row value and a validity.

[04:10] I''m just going to return the row value, and similarly validity picks a field with a row value and a validity, and extracts the validity. To make it production ready, we will export field, and this exports it as an opaque type, meaning that the client code will see the field type, but he will not see this field constructor.

[04:36] In other words, it won''t be possible for any code outside this module to create a bad value like this. Know that we can do this just for now, for convenience, let''s still expose all the values. Another thing is that so far we always assume that the row value is a string, but we could have fields other than inputs.

[04:55] For example, checkbox have a value of Boolean, or date selectors have a value of date. We [inaudible] this should also be parameterized, so we could call this row and a field will have an additional type parameter. Now, I think I''ve achieved a way to model fields that are subject to validation that is slightly more complex, but also more efficient and more general.

[05:18] Now, let''s see how this new model would affect our code. For one thing, this complicated display value would not be necessary. I can just use row value instead, and the same for the other fields. This means, I can get rid of the display value all together. Let me bring this one up so that everything to do with fields is in one place.

[05:50] Here, I have the additional parameter row and remove this value here, and here is the validity of the field. When I declare fields, I now have an additional type parameter that''s a string. To initialize a field, I need to expose a function, let''s call it field.

[06:30] These are all functions to work with validator functions, so these remain unaffected, whereas, we have actually some validation logic. Here, we can destructure the field as a field with a value and a validity. I''m actually going to rewrite this more simply to return a field with the value. Let me call this validate, under, I''m going to validate the value, and this yields a result.

[07:06] Then, I need to do this. Let me extract this into another function.

[07:31] Here, I can feed this to validity, and get rid of all this. Then, the apply function shouldn''t really have anything to do with fields, but only with validity of the field.

[07:48] Let me fix this typo here, and here my types are wrong, so I go from the row value to an A and the field also has its parameter row. Now I''ve sufficiently fixed my validation module so that it compiles. Let''s move on to the client code, the main file.

[08:48] Here, I need to change how I construct these fields of course, but I''m actually going to simplify this code. Instead of clearing everything manually, I''m going to go back to the initial model, with the only change that the status changes to succeeded.

[09:06] Here, instead of not validated, I use the field function. Here, remember that this is an [inaudible] for the apply function, and this takes now not of field, but rather a validity.

[09:38] Now, my revised application compiles. In general, the nice thing about a tight type system like Elms is that, if your code compiles, it generally works, but just to make sure, let me try a few things.

[10:07] It looks like everything is working fine.', NULL, true, '13-egghead-elm-improve-how-you-model-validation-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 66372189
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG/egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG.mp4', 'egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG', 'zlqL', 'https://egghead-pipeline.s3.amazonaws.com/egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG/egghead-improve-how-you-model-validation-in-an-elm-form-SJa8gsvzG.mp3?b25a8c3f52ca8435?9b05', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:19.869Z', NULL, 8388589, NULL, 3710, 0, NULL, 8388595, 'c8224640e56011e7b6f70bf680b76871', 'https://ellie-app.com/embed/532C69vsWa1/6', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383736, '1
00:00:01,570 --> 00:00:02,980
We were able to come a pretty 

2
00:00:02,990 --> 00:00:04,700
long way using this very simple 

3
00:00:04,710 --> 00:00:07,230
field type but there are some 

4
00:00:07,240 --> 00:00:08,690
aspects of the design that are 

5
00:00:08,700 --> 00:00:11,410
not entirely satisfactory. For 

6
00:00:11,410 --> 00:00:13,030
example, notice that we assume 

7
00:00:13,040 --> 00:00:15,830
that the input is a string, and 

8
00:00:15,840 --> 00:00:17,490
that then as we validate it we 

9
00:00:17,500 --> 00:00:19,260
turn it into some more specific 

10
00:00:19,270 --> 00:00:21,270
type A. That''s great because we 

11
00:00:21,280 --> 00:00:22,990
can, for example, validate that 

12
00:00:23,000 --> 00:00:24,780
the string is an int, and then 

13
00:00:24,790 --> 00:00:25,810
chain that with some more 

14
00:00:25,900 --> 00:00:27,900
specific validation, for example 

15
00:00:27,910 --> 00:00:29,800
that that int is positive. What 

16
00:00:29,810 --> 00:00:31,300
doesn''t work so well is when we 

17
00:00:31,310 --> 00:00:32,940
have to go the other way around, 

18
00:00:32,950 --> 00:00:34,730
when we have a valid A and we 

19
00:00:34,740 --> 00:00:36,930
want to render the string. For 

20
00:00:36,940 --> 00:00:37,930
one thing, that''s not a very 

21
00:00:37,940 --> 00:00:39,940
nice API to code for. For 

22
00:00:39,950 --> 00:00:42,440
example, to display the value of 

23
00:00:42,450 --> 00:00:43,790
the field, we need to provide a 

24
00:00:43,800 --> 00:00:45,420
function to render that field. 

25
00:00:45,495 --> 00:00:47,730
Here, we were using identity to 

26
00:00:48,440 --> 00:00:50,720
string and so on. We could even 

27
00:00:50,730 --> 00:00:52,520
run into problems as we convert 

28
00:00:52,560 --> 00:00:54,080
back and forth between A and 

29
00:00:54,090 --> 00:00:56,260
string. For example, let''s 

30
00:00:56,270 --> 00:00:57,530
assume that the age field 

31
00:00:57,540 --> 00:01:00,570
instead of natural would be of a 

32
00:01:00,870 --> 00:01:03,110
float. We could pass string to 

33
00:01:03,120 --> 00:01:09,240
float as a validator, and then 

34
00:01:09,250 --> 00:01:10,640
change the field to be an option 

35
00:01:10,640 --> 00:01:19,790
of the field of float. Let''s 

36
00:01:19,865 --> 00:01:25,990
say I enter 16.50, it calls 

37
00:01:25,990 --> 00:01:28,200
validation, and now this turned 

38
00:01:28,790 --> 00:01:31,180
into 16.5. That''s because our 

39
00:01:31,180 --> 00:01:32,620
validation has converted it to a 

40
00:01:32,630 --> 00:01:34,380
float, but then to render it, we 

41
00:01:34,390 --> 00:01:35,700
use the two-string function. 

42
00:01:36,470 --> 00:01:38,040
Also, if we want to validate 

43
00:01:38,050 --> 00:01:39,570
related fields, we might have 

44
00:01:39,610 --> 00:01:41,550
one field causing another field 

45
00:01:41,650 --> 00:01:43,310
to go from valid A to non-

46
00:01:43,310 --> 00:01:45,010
validated string, and again we 

47
00:01:45,020 --> 00:01:46,350
have this problem of going from 

48
00:01:46,400 --> 00:01:48,630
A to string. In a sense, all 

49
00:01:48,640 --> 00:01:50,260
these problems will be cured if 

50
00:01:50,270 --> 00:01:52,500
we only stored this string that 

51
00:01:52,510 --> 00:01:54,190
is input by the user here, but 

52
00:01:54,200 --> 00:01:55,450
then if you look at this type 

53
00:01:55,450 --> 00:01:57,560
now, then we always store the 

54
00:01:57,570 --> 00:01:59,430
current input no matter what the 

55
00:01:59,440 --> 00:02:01,330
state of the validation. Then, 

56
00:02:01,340 --> 00:02:02,630
perhaps it would make more sense 

57
00:02:02,640 --> 00:02:05,550
to define this type like this as 

58
00:02:05,560 --> 00:02:07,970
a record that has a value of 

59
00:02:07,980 --> 00:02:11,430
type string and a validity. This 

60
00:02:11,440 --> 00:02:13,910
would be our union type validity 

61
00:02:25,740 --> 00:02:27,100
A. This revised model 

62
00:02:27,390 --> 00:02:28,610
encompasses the fact that a 

63
00:02:28,620 --> 00:02:30,120
field has a current value, 

64
00:02:30,420 --> 00:02:32,300
that''s the row value passed by 

65
00:02:32,310 --> 00:02:34,300
the user for the UI, and a 

66
00:02:34,310 --> 00:02:35,960
validity that has more to do 

67
00:02:35,970 --> 00:02:37,380
with the business rule of the 

68
00:02:39,110 --> 00:02:39,880
validation. If you look at this 

69
00:02:39,910 --> 00:02:42,350
type validity of A, you can see 

70
00:02:42,360 --> 00:02:43,690
that it''s somewhat similar to a 

71
00:02:43,700 --> 00:02:45,790
maybe of A, or to a result of 

72
00:02:45,800 --> 00:02:48,000
string A. It has these three 

73
00:02:48,010 --> 00:02:50,450
states not validated, which is 

74
00:02:50,510 --> 00:02:52,910
somewhat like nothing, valid A 

75
00:02:52,920 --> 00:02:54,930
which is somewhat like a just A 

76
00:02:54,970 --> 00:02:57,230
or an OK A, and a valid string 

77
00:02:57,240 --> 00:02:59,220
which is somehow an error state. 

78
00:02:59,450 --> 00:03:01,400
It''s a bit of a combination of a 

79
00:03:01,400 --> 00:03:03,660
maybe and a result, but with 

80
00:03:03,670 --> 00:03:05,340
names that are more specific to 

81
00:03:05,350 --> 00:03:08,330
the domain of validation. There 

82
00:03:08,340 --> 00:03:10,140
is a small problem in that, if 

83
00:03:10,150 --> 00:03:11,740
we were to expose the field type 

84
00:03:11,750 --> 00:03:13,970
like this, then you could have 

85
00:03:14,070 --> 00:03:15,580
some client code defining the 

86
00:03:15,590 --> 00:03:18,680
field value like this. For 

87
00:03:18,690 --> 00:03:21,140
example, with the value of hello 

88
00:03:21,680 --> 00:03:24,450
and the validity of valid 10. In 

89
00:03:25,270 --> 00:03:26,590
this case, the value in the 

90
00:03:26,600 --> 00:03:29,440
field, and the A in the validity 

91
00:03:29,740 --> 00:03:31,480
have gone out of sync, and we 

92
00:03:31,490 --> 00:03:34,250
would like to prevent this. By 

93
00:03:34,260 --> 00:03:35,550
the way, this would be a type 

94
00:03:35,625 --> 00:03:38,680
alias. How can we prevent 

95
00:03:38,720 --> 00:03:40,140
client code from creating such 

96
00:03:40,150 --> 00:03:42,050
inconsistent values? Instead of 

97
00:03:42,060 --> 00:03:44,820
a record, we can use a single 

98
00:03:44,850 --> 00:03:49,010
case union type that holds a 

99
00:03:49,020 --> 00:03:51,920
string and a validity of A. 

100
00:03:52,660 --> 00:03:54,290
Instead of these field names, we 

101
00:03:54,300 --> 00:03:55,730
can have similarly named 

102
00:03:55,740 --> 00:03:58,220
functions that extract this data 

103
00:03:58,230 --> 00:04:00,770
from a field. For example, let 

104
00:04:00,780 --> 00:04:03,100
me define row value. Here, I can 

105
00:04:03,175 --> 00:04:06,480
destructure this as a field with 

106
00:04:06,480 --> 00:04:10,470
a row value and a validity. I''m 

107
00:04:10,480 --> 00:04:11,790
just going to return the row 

108
00:04:11,840 --> 00:04:16,310
value, and similarly validity 

109
00:04:16,385 --> 00:04:18,860
picks a field with a row value 

110
00:04:18,870 --> 00:04:21,720
and a validity, and extracts the 

111
00:04:21,730 --> 00:04:25,460
validity. To make it production 

112
00:04:25,535 --> 00:04:28,560
ready, we will export field, and 

113
00:04:28,570 --> 00:04:30,190
this exports it as an opaque 

114
00:04:30,200 --> 00:04:32,010
type, meaning that the client 

115
00:04:32,020 --> 00:04:33,850
code will see the field type, 

116
00:04:34,080 --> 00:04:35,580
but he will not see this field 

117
00:04:35,590 --> 00:04:37,350
constructor. In other words, it 

118
00:04:37,360 --> 00:04:38,780
won''t be possible for any code 

119
00:04:38,790 --> 00:04:40,260
outside this module to create a 

120
00:04:40,270 --> 00:04:42,090
bad value like this. Know that 

121
00:04:42,165 --> 00:04:44,960
we can do this just for now, for 

122
00:04:45,000 --> 00:04:46,700
convenience, let''s still expose 

123
00:04:46,770 --> 00:04:48,890
all the values. Another thing is 

124
00:04:48,900 --> 00:04:50,760
that so far we always assume 

125
00:04:50,770 --> 00:04:52,370
that the row value is a string, 

126
00:04:52,580 --> 00:04:54,170
but we could have fields other 

127
00:04:54,180 --> 00:04:55,690
than inputs. For example, 

128
00:04:55,765 --> 00:04:58,060
checkbox have a value of Boolean, 

129
00:04:58,100 --> 00:05:00,090
or date selectors have a value 

130
00:05:00,165 --> 00:05:01,100
of date. We  this 

131
00:05:01,110 --> 00:05:02,430
should also be parameterized, so 

132
00:05:02,680 --> 00:05:04,630
we could call this row and a 

133
00:05:04,640 --> 00:05:06,360
field will have an additional 

134
00:05:06,740 --> 00:05:09,990
type parameter. Now, I think 

135
00:05:09,990 --> 00:05:11,410
I''ve achieved a way to model 

136
00:05:11,420 --> 00:05:12,760
fields that are subject to 

137
00:05:12,760 --> 00:05:14,790
validation that is slightly more 

138
00:05:14,790 --> 00:05:16,850
complex, but also more efficient 

139
00:05:16,860 --> 00:05:18,990
and more general. Now, let''s 

140
00:05:19,000 --> 00:05:20,190
see how this new model would 

141
00:05:20,200 --> 00:05:22,780
affect our code. For one thing, 

142
00:05:22,790 --> 00:05:24,670
this complicated display value 

143
00:05:24,680 --> 00:05:26,690
would not be necessary. I can 

144
00:05:26,700 --> 00:05:28,670
just use row value instead, and 

145
00:05:28,745 --> 00:05:32,270
the same for the other fields. 

146
00:05:40,570 --> 00:05:42,070
This means, I can get rid of the 

147
00:05:42,080 --> 00:05:43,870
display value all together. Let 

148
00:05:43,945 --> 00:05:48,070
me bring this one up so that 

149
00:05:48,080 --> 00:05:49,890
everything to do with fields is 

150
00:05:49,900 --> 00:05:56,680
in one place. Here, I have the 

151
00:05:56,690 --> 00:05:58,320
additional parameter row and 

152
00:06:01,450 --> 00:06:03,520
remove this value here, and here 

153
00:06:03,530 --> 00:06:05,540
is the validity of the field. 

154
00:06:06,560 --> 00:06:07,910
When I declare fields, I now 

155
00:06:07,920 --> 00:06:09,390
have an additional type 

156
00:06:09,390 --> 00:06:14,600
parameter that''s a string. To 

157
00:06:14,675 --> 00:06:16,030
initialize a field, I need to 

158
00:06:16,040 --> 00:06:17,830
expose a function, let''s call it 

159
00:06:17,830 --> 00:06:31,550
field. These are all functions 

160
00:06:31,560 --> 00:06:33,500
to work with validator functions, 

161
00:06:34,930 --> 00:06:36,390
so these remain unaffected, 

162
00:06:37,430 --> 00:06:39,010
whereas, we have actually some 

163
00:06:39,020 --> 00:06:43,910
validation logic. Here, we can 

164
00:06:43,985 --> 00:06:46,860
destructure the field as a field 

165
00:06:47,570 --> 00:06:51,980
with a value and a validity. I''m 

166
00:06:51,980 --> 00:06:52,980
actually going to rewrite this 

167
00:06:53,060 --> 00:06:55,760
more simply to return a field 

168
00:06:56,320 --> 00:06:59,080
with the value. Let me call this 

169
00:06:59,130 --> 00:07:01,780
validate, under, I''m going to 

170
00:07:01,810 --> 00:07:05,430
validate the value, and this 

171
00:07:05,440 --> 00:07:08,810
yields a result. Then, I need 

172
00:07:08,810 --> 00:07:11,350
to do this. Let me extract this 

173
00:07:11,360 --> 00:07:32,160
into another function. Here, I 

174
00:07:32,170 --> 00:07:38,080
can feed this to validity, and 

175
00:07:38,090 --> 00:07:38,930
get rid of all this. 

176
00:07:39,540 --> 00:07:42,760
Then, 

177
00:07:42,770 --> 00:07:44,020
the apply function shouldn''t 

178
00:07:44,030 --> 00:07:45,360
really have anything to do with 

179
00:07:45,370 --> 00:07:47,370
fields, but only with validity 

180
00:07:47,445 --> 00:08:19,110
of the field. Let me fix this 

181
00:08:19,120 --> 00:08:22,590
typo here, and here my types are 

182
00:08:22,600 --> 00:08:24,890
wrong, so I go from the row 

183
00:08:24,900 --> 00:08:28,460
value to an A and the field also 

184
00:08:28,470 --> 00:08:40,100
has its parameter row. Now I''ve 

185
00:08:39,410 --> 00:08:41,230
sufficiently fixed my validation 

186
00:08:41,230 --> 00:08:43,060
module so that it compiles. 

187
00:08:43,340 --> 00:08:45,040
Let''s move on to the client code, 

188
00:08:45,090 --> 00:08:48,960
the main file. Here, I need to 

189
00:08:48,970 --> 00:08:50,410
change how I construct these 

190
00:08:50,420 --> 00:08:52,270
fields of course, but I''m 

191
00:08:52,270 --> 00:08:53,630
actually going to simplify this 

192
00:08:53,650 --> 00:08:56,350
code. Instead of clearing 

193
00:08:56,360 --> 00:08:58,710
everything manually, I''m going 

194
00:08:58,720 --> 00:09:01,610
to go back to the initial model, 

195
00:09:01,685 --> 00:09:03,450
with the only change that the 

196
00:09:03,460 --> 00:09:04,890
status changes to succeeded. 

197
00:09:06,360 --> 00:09:07,880
Here, instead of not validated, 

198
00:09:07,930 --> 00:09:19,280
I use the field function. Here, 

199
00:09:19,290 --> 00:09:20,310
remember that this is an 

200
00:09:20,310 --> 00:09:21,240
 for the apply 

201
00:09:21,250 --> 00:09:23,420
function, and this takes now not 

202
00:09:23,420 --> 00:09:26,390
of field, but rather a validity. 

203
00:09:38,620 --> 00:09:39,760
Now, my revised application 

204
00:09:39,810 --> 00:09:41,930
compiles. In general, the nice 

205
00:09:41,940 --> 00:09:44,120
thing about a tight type system 

206
00:09:44,130 --> 00:09:46,280
like Elms is that, if your code 

207
00:09:46,290 --> 00:09:47,910
compiles, it generally works, 

208
00:09:48,730 --> 00:09:50,620
but just to make sure, let me 

209
00:09:50,695 --> 00:10:07,740
try a few things. It looks like 

210
00:10:07,740 --> 00:10:08,930
everything is working fine.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '83445e01', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2885, 'Validate Optional Fields in an Elm Form', NULL, 'We see how to define a validator that will treat an empty input as valid, and perform validation if a non-empty input is given.', 255, NULL, '2017-12-18T17:47:36.491Z', '2023-08-08T00:08:21.615Z', 'elm-validate-optional-fields-in-an-elm-form', NULL, 'q9m1rvtnoy', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM/egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_q9m1rvtnoy" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM.mp4" /><meta itemprop="duration" content="PT4M15S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/85a4cdb01493eff6db89f51a90a2a5df2b61d61b.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/1940dedf8f6269c8ec43a8efcb7b17641615bc78.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=255.08&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F85a4cdb01493eff6db89f51a90a2a5df2b61d61b.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F1940dedf8f6269c8ec43a8efcb7b17641615bc78.bin" /><meta itemprop="uploadDate" content="2017-12-18T09:52:16Z" /><object id="wistia_q9m1rvtnoy_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=255.08&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F85a4cdb01493eff6db89f51a90a2a5df2b61d61b.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F1940dedf8f6269c8ec43a8efcb7b17641615bc78.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=255.08&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F85a4cdb01493eff6db89f51a90a2a5df2b61d61b.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F1940dedf8f6269c8ec43a8efcb7b17641615bc78.bin" name="wistia_q9m1rvtnoy_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("q9m1rvtnoy", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/q9m1rvtnoy/metadata.js"></script>', 'Instructor: [00:01] Let''s look at the optional fields. These are fields that the user can leave blank, but if some input is provided, then the field needs to be validated. The way we usually model optional things in Elm is by using the maybe type. In this case, if we want to make age optional, we could say that it''s a field of a maybe int.

[00:22] To have slightly more elegant and more readable model, we could create a type alias for this. Let me type type alias optional field of A. That will be the same as saying field of maybe of A. Here, I can write that age is an optional field of int.

[00:50] Let''s look at the validation now. Here with age, we''re saying validate that the age is a natural number, but now, we want to change things so that an empty input is also considered a valid input. I want to define a function -- let me call this optional -- that takes a validator from string to A, and returns a validator from string to maybe A.

[01:17] We will take a validator like this is natural, and it will return a softer validator, so to speak, that allows for an empty input. Let me call the first validator validate, then the input, S. This will the string input by the user.

[01:34] I can just say that if S is empty, then we will return an OK with nothing. Nothing is a maybe that has no data. Else, we have run the validation. We''ll validate S. This will return a result of A. What we want is a result of maybe of A. We need to do result.map just to put a result in value into a maybe.

[02:05] The way you would use this is that here, you take the isNatural validator, and you pass it to optional. Let me fix this typo here. This is equals. Now I have a type error, because here, model.age is now a maybe of int. Let me change this here, maybe int. As a result, I also need to change the way in which age is encoded.

[02:32] I will say age, and then I will say maybe.map encode.int. Then, maybe with default encode.null. If age contains an int, then we use encode.int, and otherwise, we use null.

[02:54] Let me also change my view slightly. I''ll put a star next to your email and your message, to give the user some signal that these are mandatory fields. With age, I remove the required true attributes. Let me test this. If I click submit, you can see that these two fields that are mandatory have been validated, but here, there are no validation errors.

[03:16] However, there is a bit of a problem, in that, we get nothing printed out. That''s because here, we''re using toString on a validate now is a maybe. Let me improve this. Rather than using toString, we will say maybe.map toString, and then maybe with default empty string.

[03:41] Let me click submit. Here, you can see that we still have the placeholder, this problem has been fixed. Now, if I say 22, then there''s also no validation. You can see age is a valid 22. If I say, "Hello," then age is invalid, and we get the error label. Most importantly, if there''s no input, then this is valid nothing as we intended.', NULL, true, '09-egghead-elm-validate-optional-fields-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 27360747
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM/egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM.mp4', 'egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM', 'zm0J', 'https://egghead-pipeline.s3.amazonaws.com/egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM/egghead-validate-optional-fields-in-an-elm-form-rySpAbBMM.mp3?caf379a96054cd5c?fea6', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:20.539Z', NULL, 8388585, NULL, 3659, 0, NULL, 8237039, 'ca0229f0e3d811e7a70e5d799bdbb75b', 'https://ellie-app.com/embed/532C69vsWa1/5', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383726, '1
00:00:01,910 --> 00:00:02,630
Let''s look at the optional 

2
00:00:02,630 --> 00:00:04,390
fields. These are fields that 

3
00:00:04,440 --> 00:00:07,080
the user can leave blank, but if 

4
00:00:07,090 --> 00:00:08,960
some input is provided, then the 

5
00:00:08,970 --> 00:00:11,250
field needs to be validated. The 

6
00:00:11,260 --> 00:00:12,960
way we usually model optional 

7
00:00:12,970 --> 00:00:15,300
things in Elm is by using the 

8
00:00:15,310 --> 00:00:17,840
maybe type. In this case, if we 

9
00:00:17,850 --> 00:00:19,480
want to make age optional, we 

10
00:00:19,490 --> 00:00:21,500
could say that it''s a field of a 

11
00:00:21,510 --> 00:00:25,230
maybe int. To have slightly 

12
00:00:25,240 --> 00:00:27,790
more elegant and more readable 

13
00:00:27,800 --> 00:00:29,700
model, we could create a type 

14
00:00:29,700 --> 00:00:32,680
alias for this. Let me type type 

15
00:00:32,730 --> 00:00:37,830
alias optional field of A. That 

16
00:00:37,830 --> 00:00:40,210
will be the same as saying field 

17
00:00:40,520 --> 00:00:44,490
of maybe of A. Here, I can write 

18
00:00:44,500 --> 00:00:48,000
that age is an optional field of 

19
00:00:48,075 --> 00:00:51,750
int. Let''s look at the 

20
00:00:51,825 --> 00:00:53,580
validation now. Here with age, 

21
00:00:53,680 --> 00:00:55,020
we''re saying validate that the 

22
00:00:55,030 --> 00:00:57,690
age is a natural number, but now, 

23
00:00:57,420 --> 00:00:59,190
we want to change things so that 

24
00:00:59,290 --> 00:01:00,630
an empty input is also 

25
00:01:00,640 --> 00:01:03,470
considered a valid input. I want 

26
00:01:03,480 --> 00:01:04,920
to define a function -- let me 

27
00:01:04,930 --> 00:01:07,020
call this optional -- that takes 

28
00:01:07,540 --> 00:01:09,090
a validator from string to A, 

29
00:01:09,165 --> 00:01:13,030
and returns a validator from 

30
00:01:13,040 --> 00:01:17,480
string to maybe A. We will take 

31
00:01:17,480 --> 00:01:19,400
a validator like this is natural, 

32
00:01:19,750 --> 00:01:21,840
and it will return a softer 

33
00:01:21,915 --> 00:01:23,070
validator, so to speak, that 

34
00:01:23,080 --> 00:01:27,280
allows for an empty input. Let 

35
00:01:27,355 --> 00:01:28,470
me call the first validator 

36
00:01:28,545 --> 00:01:32,060
validate, then the input, S. 

37
00:01:32,300 --> 00:01:33,770
This will the string input by 

38
00:01:33,780 --> 00:01:35,790
the user. I can just say that 

39
00:01:36,780 --> 00:01:39,430
if S is empty, then we will 

40
00:01:39,510 --> 00:01:42,350
return an OK with nothing. 

41
00:01:43,000 --> 00:01:45,340
Nothing is a maybe that has no 

42
00:01:45,350 --> 00:01:48,270
data. Else, we have run the 

43
00:01:48,280 --> 00:01:50,350
validation. We''ll validate S. 

44
00:01:52,130 --> 00:01:54,180
This will return a result of A. 

45
00:01:54,210 --> 00:01:55,980
What we want is a result of 

46
00:01:55,990 --> 00:01:58,650
maybe of A. We need to do result.

47
00:01:59,870 --> 00:02:03,300
map just to put a result in 

48
00:02:03,310 --> 00:02:05,540
value into a maybe. The way you 

49
00:02:05,550 --> 00:02:08,040
would use this is that here, you 

50
00:02:08,050 --> 00:02:10,410
take the isNatural validator, 

51
00:02:10,485 --> 00:02:11,680
and you pass it to optional. Let 

52
00:02:11,755 --> 00:02:14,670
me fix this typo here. This is 

53
00:02:14,760 --> 00:02:18,870
equals. Now I have a type error, 

54
00:02:18,930 --> 00:02:21,410
because here, model.age is now a 

55
00:02:21,485 --> 00:02:24,150
maybe of int. Let me change this 

56
00:02:24,160 --> 00:02:28,920
here, maybe int. As a result, I 

57
00:02:28,930 --> 00:02:30,320
also need to change the way in 

58
00:02:30,330 --> 00:02:33,030
which age is encoded. I will 

59
00:02:33,080 --> 00:02:35,620
say age, and then I will say 

60
00:02:35,680 --> 00:02:41,490
maybe.map encode.int. Then, 

61
00:02:41,500 --> 00:02:46,610
maybe with default encode.null. 

62
00:02:48,870 --> 00:02:50,700
If age contains an int, then we 

63
00:02:50,710 --> 00:02:52,780
use encode.int, and otherwise, 

64
00:02:52,790 --> 00:02:55,540
we use null. Let me also change 

65
00:02:55,550 --> 00:02:57,440
my view slightly. I''ll put a 

66
00:02:57,450 --> 00:02:59,210
star next to your email and your 

67
00:02:59,220 --> 00:03:01,240
message, to give the user some 

68
00:03:01,250 --> 00:03:02,590
signal that these are mandatory 

69
00:03:02,710 --> 00:03:04,960
fields. With age, I remove the 

70
00:03:04,970 --> 00:03:08,620
required true attributes. Let me 

71
00:03:08,630 --> 00:03:10,530
test this. If I click submit, 

72
00:03:11,160 --> 00:03:12,170
you can see that these two 

73
00:03:12,180 --> 00:03:13,320
fields that are mandatory have 

74
00:03:13,330 --> 00:03:15,630
been validated, but here, there 

75
00:03:15,640 --> 00:03:16,720
are no validation errors. 

76
00:03:16,870 --> 00:03:17,980
However, there is a bit of a 

77
00:03:17,990 --> 00:03:19,800
problem, in that, we get nothing 

78
00:03:19,810 --> 00:03:22,110
printed out. That''s because here, 

79
00:03:22,120 --> 00:03:23,480
we''re using toString on a 

80
00:03:23,490 --> 00:03:26,120
validate now is a maybe. Let me 

81
00:03:26,130 --> 00:03:29,190
improve this. Rather than using 

82
00:03:29,265 --> 00:03:31,830
toString, we will say maybe.map 

83
00:03:31,905 --> 00:03:38,280
toString, and then maybe with 

84
00:03:38,290 --> 00:03:42,320
default empty string. Let me 

85
00:03:42,395 --> 00:03:48,280
click submit. Here, you can see 

86
00:03:48,290 --> 00:03:49,960
that we still have the 

87
00:03:50,035 --> 00:03:51,100
placeholder, this problem has 

88
00:03:51,110 --> 00:03:53,760
been fixed. Now, if I say 22, 

89
00:03:56,600 --> 00:03:57,720
then there''s also no validation. 

90
00:03:57,795 --> 00:04:00,430
You can see age is a valid 

91
00:04:00,505 --> 00:04:04,650
22. If I say, "Hello," then age 

92
00:04:04,660 --> 00:04:06,910
is invalid, and we get the error 

93
00:04:06,920 --> 00:04:09,830
label. Most importantly, if 

94
00:04:09,840 --> 00:04:11,980
there''s no input, then this is 

95
00:04:12,050 --> 00:04:13,730
valid nothing as we intended.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', 'dd40c665', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2883, 'Define an Infix Operator for the apply Function in Elm', NULL, 'Elm allows you to write terse code by defining your own infix operators. It''s common to do this for the `apply` function of applicatives (some Elm packages call it `andMap` instead of `apply`). 

In this lesson you see how this is done and how this benefits your code as a result.', 135, NULL, '2017-12-17T23:07:49.679Z', '2023-08-08T00:08:21.761Z', 'elm-define-an-infix-operator-for-the-apply-function-in-elm', NULL, 'gsb80ggg0f', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf/egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_gsb80ggg0f" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf.mp4" /><meta itemprop="duration" content="PT2M15S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/7dd902f8ad75fa9c7f80a2ccaf17f466e419922f.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/8b196afa47cc91bf792877d9ea74bb7f3decb682.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=135.68&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7dd902f8ad75fa9c7f80a2ccaf17f466e419922f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F8b196afa47cc91bf792877d9ea74bb7f3decb682.bin" /><meta itemprop="uploadDate" content="2017-12-17T15:10:28Z" /><object id="wistia_gsb80ggg0f_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=135.68&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7dd902f8ad75fa9c7f80a2ccaf17f466e419922f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F8b196afa47cc91bf792877d9ea74bb7f3decb682.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=135.68&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7dd902f8ad75fa9c7f80a2ccaf17f466e419922f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F8b196afa47cc91bf792877d9ea74bb7f3decb682.bin" name="wistia_gsb80ggg0f_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("gsb80ggg0f", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/gsb80ggg0f/metadata.js"></script>', 'Instructor: [00:01] This technique of defining of an apply function that performs function application where all the values are wrapped in some type, like our field type here, and as a result, effects of this type are compounded in a way.

[00:15] This is actually a classic functional programming technique, and it''s called applicative. In jargon, you would say that our field is an applicative factor. The interesting effect is that we end up with a call to submit here that is very similar to a normal function call.

[00:31] In the normal function call, you would have submit model.email, model.message, model.h. We just have to wrap the function into a valid and apply all these other arguments with the apply function.

[00:51] We can make this code look even more like than normal function application by defining an infix operator. In Elm, you can define infix operators if they''re composed of special characters only.

[01:03] A symbol that is used for apply in functional languages like Haskell will be this, but more common in some Elm libraries, you will find this symbol. The type would be the same as here, but the arguments would be the other way around.

[01:20] Let me move this from here to here, and the definition will be as follows. We have an FF and an FA, and we rely on the previous implementation, apply FA FF. In fact, I can write this in a way that''s even more concise.

[01:38] I can say "Flip apply," which yields a new function that is based on apply, but flips the order of the arguments. Now, we can change our code here and just use this symbol pie colon.

[01:50] You can see how my code has become a bit more concise still. Just to check that nothing has changed, if I type "Hello" in all fields and submit, we get validation errors as expected. If I fix these, then I get a successful request.', NULL, true, '08-egghead-elm-define-an-infix-operator-for-the-apply-function-in-elm.mp4', 150, true, false, 181, '---
mp4: 14898425
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf/egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf.mp4', 'egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf', 'zlqH', 'https://egghead-pipeline.s3.amazonaws.com/egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf/egghead-define-an-infix-operator-for-the-apply-function-in-elm-BJNLdbVzf.mp3?4c662fcb5e0b9d6a?bbb8', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:17.761Z', NULL, 8388589, NULL, 3657, 0, NULL, 8085484, '3a2d7510e33c11e79f54ef368a5a8ea1', 'https://ellie-app.com/embed/532C69vsWa1/4', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383724, '1
00:00:01,250 --> 00:00:02,920
This technique of defining of an 

2
00:00:02,930 --> 00:00:04,960
apply function that performs 

3
00:00:05,070 --> 00:00:06,580
function application where all 

4
00:00:06,590 --> 00:00:08,110
the values are wrapped in some 

5
00:00:08,120 --> 00:00:10,000
type, like our field type here, 

6
00:00:10,600 --> 00:00:12,540
and as a result, effects of this 

7
00:00:12,550 --> 00:00:15,060
type are compounded in a way. 

8
00:00:15,810 --> 00:00:17,070
This is actually a classic 

9
00:00:17,080 --> 00:00:18,310
functional programming technique, 

10
00:00:18,310 --> 00:00:20,770
and it''s called applicative. In 

11
00:00:20,780 --> 00:00:22,090
jargon, you would say that our 

12
00:00:22,100 --> 00:00:23,800
field is an applicative factor. 

13
00:00:24,830 --> 00:00:26,080
The interesting effect is that 

14
00:00:26,090 --> 00:00:27,680
we end up with a call to submit 

15
00:00:27,690 --> 00:00:29,680
here that is very similar to a 

16
00:00:29,690 --> 00:00:31,930
normal function call. In the 

17
00:00:31,930 --> 00:00:33,930
normal function call, you would 

18
00:00:33,940 --> 00:00:38,950
have submit model.email, model.

19
00:00:39,040 --> 00:00:44,940
message, model.h. We just have 

20
00:00:44,950 --> 00:00:46,360
to wrap the function into a 

21
00:00:46,370 --> 00:00:48,960
valid and apply all these other 

22
00:00:48,970 --> 00:00:50,000
arguments with the apply 

23
00:00:50,010 --> 00:00:52,130
function. We can make this code 

24
00:00:52,140 --> 00:00:53,510
look even more like than normal 

25
00:00:53,510 --> 00:00:55,430
function application by defining 

26
00:00:55,460 --> 00:00:58,410
an infix operator. In Elm, you 

27
00:00:58,420 --> 00:01:00,700
can define infix operators if 

28
00:01:00,700 --> 00:01:01,770
they''re composed of special 

29
00:01:01,780 --> 00:01:03,520
characters only. A symbol that 

30
00:01:03,520 --> 00:01:05,920
is used for apply in functional 

31
00:01:05,920 --> 00:01:07,700
languages like Haskell will be 

32
00:01:07,710 --> 00:01:10,370
this, but more common in some 

33
00:01:10,440 --> 00:01:12,060
Elm libraries, you will find 

34
00:01:12,070 --> 00:01:14,410
this symbol. The type would be 

35
00:01:14,420 --> 00:01:17,980
the same as here, but the 

36
00:01:17,990 --> 00:01:19,460
arguments would be the other way 

37
00:01:19,220 --> 00:01:21,330
around. Let me move this from 

38
00:01:21,340 --> 00:01:24,040
here to here, and the definition 

39
00:01:24,040 --> 00:01:25,210
will be as follows. We have an 

40
00:01:25,285 --> 00:01:29,410
FF and an FA, and we rely on the 

41
00:01:29,420 --> 00:01:31,800
previous implementation, apply 

42
00:01:31,875 --> 00:01:35,940
FA FF. In fact, I can write this 

43
00:01:35,940 --> 00:01:36,820
in a way that''s even more 

44
00:01:36,870 --> 00:01:39,930
concise. I can say "Flip apply," 

45
00:01:40,850 --> 00:01:42,500
which yields a new function that 

46
00:01:42,510 --> 00:01:44,190
is based on apply, but flips the 

47
00:01:44,200 --> 00:01:46,500
order of the arguments. Now, we 

48
00:01:46,510 --> 00:01:48,680
can change our code here and 

49
00:01:48,690 --> 00:01:50,780
just use this symbol pie colon. 

50
00:01:50,855 --> 00:01:55,050
You can see how my code has 

51
00:01:55,060 --> 00:01:56,890
become a bit more concise still. 

52
00:01:58,370 --> 00:01:59,780
Just to check that nothing has 

53
00:01:59,480 --> 00:02:02,440
changed, if I type "Hello" in 

54
00:02:02,450 --> 00:02:06,220
all fields and submit, we get 

55
00:02:06,310 --> 00:02:07,910
validation errors as expected. 

56
00:02:08,940 --> 00:02:12,700
If I fix these, then I get a 

57
00:02:12,710 --> 00:02:13,830
successful request.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '5c5cfdc5', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2881, 'Apply Several Validation Rules to a Single Field in an Elm Form', NULL, 'You may have several validations that need to be successively applied to the same field. Essentially, you''re _composing_ several validator functions to create a single validator function. In Functional Programming jargon, this is a case of "monadic composition".', 320, NULL, '2017-12-17T04:15:19.219Z', '2023-08-08T00:08:22.129Z', 'elm-apply-several-validation-rules-to-a-single-field-in-an-elm-form', NULL, 'yzjvyfgxeb', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz/egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_yzjvyfgxeb" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz.mp4" /><meta itemprop="duration" content="PT5M20S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/a04d1424c849ee17ec092d8ccfa916581d93fcd8.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/703f9f8490fa8040d8a87a321c68b720c6643ddd.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=320.32&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fa04d1424c849ee17ec092d8ccfa916581d93fcd8.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F703f9f8490fa8040d8a87a321c68b720c6643ddd.bin" /><meta itemprop="uploadDate" content="2017-12-17T10:23:10Z" /><object id="wistia_yzjvyfgxeb_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=320.32&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fa04d1424c849ee17ec092d8ccfa916581d93fcd8.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F703f9f8490fa8040d8a87a321c68b720c6643ddd.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=320.32&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fa04d1424c849ee17ec092d8ccfa916581d93fcd8.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F703f9f8490fa8040d8a87a321c68b720c6643ddd.bin" name="wistia_yzjvyfgxeb_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("yzjvyfgxeb", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/yzjvyfgxeb/metadata.js"></script>', 'Instructor: [00:01] At the moment, we''re using the single validator function isEmail, to validate the email field, and isNotEmpty to validate the message. As a result, if I go to the form and click submit, you will see that here, we have an email validation message. Empty string, of course, is not a valid email.

[00:21] What if I wanted to change this behavior? I want to say that if the user doesn''t enter anything, then the message should also be, "This field is required." Only if he has entered an invalid email, then it should have an email validation message.

[00:36] Somehow, I would like to say that the email field should be validated using isNotEmpty and isEmail. Of course, this won''t compile, because and is for Booleans, but that''s the basic idea.

[00:53] Let me just open the Elm REPL for a moment. Let''s look at this operator with a double arrow, and let''s look at the signature. I''m just going to paste it into my editor. You can see that this function with a double arrow takes a function F from A to B, a function G from B to C, and returns a function from A to C.

[01:26] This, you could view like this. Essentially, what this does is when you get an A, take that A and feed it to the F function. This will produce a value of type B, and then feed that to the G function to return a C. This is basically function composition. Another way to write this would be G of F(A).

[01:50] What I want to do is something very similar, but instead of a function from A to B, I want a validator from A to B, and then a validator from B to C. I want to return a validator from A to C. I don''t need these parentheses.

[02:17] You can see how the idea is very much the same, because a validator is not exactly a function from A to B, but a function from A to a resolved of string of B. Just so that I don''t overload the symbol with a double arrow, let me add an equal in the middle. This will be my function.

[02:36] How could we go about implementing this? When I get a value A, I will pass that to the first validator F, and that will return a result. I can then switch in that result. If it''s an OK, containing a value of type B, then I can pass that B into my second validator, G. If it''s an error with a string, then I will naturally return an error with S.

[03:02] This will apply the first validator, and then only apply the second validator if the first one has succeeded. It turns out that some logic like this already exists in the result package. I could simplify this by saying feed A to the first validator, which will yield a result, and then feed that into result and then function, which will take G as its argument.

[03:30] Since we''ve seen the composition operator earlier, we could write this even more tersely without naming A, and using composition here. This notifies the function that when it will get a value, will feed it to F, then it will feed the result of that to result, and then G.

[03:53] A sample usage of this would be as follows. We have this validator from string to int., and then we could have a validator isPositive. This would be a validator from int. to int. Implementation is trivial. If I is greater or equal, then zero. Then OK I else error with a string.

[04:28] Let''s say that I wanted to define a validator, isNatural, that takes a string and returns an int. that should be a positive number, then I could define this like this. I could say that isNatural is isInt., and then compose that with isPositive.

[04:50] The way I would use this in my code would be to put this here to say that when I validate an email, I want to first check that it''s not empty, and only if that check passes, I want to go on and check if it''s a valid email.

[05:03] Let me save this. I have a little typo here. Let''s see what happens. If I click submit, then I get, "This field is required." If I say, "Hello," and submit, then I get, "Please enter a valid email address."', NULL, true, '06-egghead-elm-apply-several-validation-rules-to-a-single-field-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 29948405
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz/egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz.mp4', 'egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz', 'zm0H', 'https://egghead-pipeline.s3.amazonaws.com/egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz/egghead-apply-several-validation-rules-to-a-single-field-in-an-elm-form-B1WuNTmGz.mp3?9a96f76b6f3c847f?696e', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:16.422Z', NULL, 8388584, NULL, 3655, 0, NULL, 7069674, 'c647fda0e31311e78b5ae93486dd8e79', 'https://ellie-app.com/embed/532C69vsWa1/0', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383722, '1
00:00:01,660 --> 00:00:03,040
At the moment, we''re using the 

2
00:00:03,050 --> 00:00:04,310
single validator function 

3
00:00:04,385 --> 00:00:06,240
isEmail, to validate the email 

4
00:00:06,250 --> 00:00:08,480
field, and isNotEmpty to 

5
00:00:08,490 --> 00:00:11,230
validate the message. As a 

6
00:00:11,240 --> 00:00:13,090
result, if I go to the form and 

7
00:00:13,100 --> 00:00:15,070
click submit, you will see that 

8
00:00:15,080 --> 00:00:16,250
here, we have an email 

9
00:00:16,290 --> 00:00:18,420
validation message. Empty string, 

10
00:00:18,430 --> 00:00:20,560
of course, is not a valid email. 

11
00:00:21,540 --> 00:00:23,020
What if I wanted to change this 

12
00:00:23,030 --> 00:00:25,420
behavior? I want to say that if 

13
00:00:25,430 --> 00:00:27,770
the user doesn''t enter anything, 

14
00:00:27,970 --> 00:00:29,580
then the message should also be, "

15
00:00:29,660 --> 00:00:32,050
This field is required." Only if 

16
00:00:32,060 --> 00:00:33,980
he has entered an invalid email, 

17
00:00:34,240 --> 00:00:35,440
then it should have an email 

18
00:00:35,450 --> 00:00:37,220
validation message. Somehow, I 

19
00:00:37,295 --> 00:00:40,230
would like to say that the email 

20
00:00:40,240 --> 00:00:42,760
field should be validated using 

21
00:00:42,835 --> 00:00:48,630
isNotEmpty and isEmail. Of 

22
00:00:48,640 --> 00:00:49,650
course, this won''t compile, 

23
00:00:49,740 --> 00:00:52,120
because and is for Booleans, but 

24
00:00:52,130 --> 00:00:53,860
that''s the basic idea. Let me 

25
00:00:54,230 --> 00:00:56,240
just open the Elm REPL for a 

26
00:00:56,250 --> 00:00:58,770
moment. Let''s look at this 

27
00:00:58,990 --> 00:01:00,850
operator with a double arrow, 

28
00:01:02,820 --> 00:01:04,120
and let''s look at the signature. 

29
00:01:05,050 --> 00:01:07,160
I''m just going to paste it into 

30
00:01:07,170 --> 00:01:14,610
my editor. You can see that this 

31
00:01:14,830 --> 00:01:16,160
function with a double arrow 

32
00:01:16,420 --> 00:01:18,470
takes a function F from A to B, 

33
00:01:19,390 --> 00:01:22,690
a function G from B to C, and 

34
00:01:22,690 --> 00:01:25,550
returns a function from A to C. 

35
00:01:26,030 --> 00:01:27,970
This, you could view like this. 

36
00:01:28,560 --> 00:01:30,020
Essentially, what this does is 

37
00:01:30,250 --> 00:01:32,180
when you get an A, take that A 

38
00:01:32,520 --> 00:01:34,810
and feed it to the F function. 

39
00:01:35,630 --> 00:01:37,090
This will produce a value of 

40
00:01:37,100 --> 00:01:39,460
type B, and then feed that to 

41
00:01:39,410 --> 00:01:41,850
the G function to return a C. 

42
00:01:41,850 --> 00:01:43,030
This is basically function 

43
00:01:43,040 --> 00:01:44,290
composition. Another way to 

44
00:01:44,300 --> 00:01:50,400
write this would be G of F(A). 

45
00:01:50,400 --> 00:01:52,060
What I want to do is something 

46
00:01:52,070 --> 00:01:53,920
very similar, but instead of a 

47
00:01:53,930 --> 00:01:56,320
function from A to B, I want a 

48
00:01:56,395 --> 00:02:00,700
validator from A to B, and then 

49
00:02:01,330 --> 00:02:05,160
a validator from B to C. I want 

50
00:02:05,170 --> 00:02:07,860
to return a validator from A to 

51
00:02:07,870 --> 00:02:11,680
C. I don''t need these 

52
00:02:11,690 --> 00:02:18,270
parentheses. You can see how 

53
00:02:18,280 --> 00:02:20,120
the idea is very much the same, 

54
00:02:20,600 --> 00:02:22,480
because a validator is not 

55
00:02:22,490 --> 00:02:24,250
exactly a function from A to B, 

56
00:02:24,260 --> 00:02:25,550
but a function from A to a 

57
00:02:25,560 --> 00:02:28,300
resolved of string of B. Just so 

58
00:02:28,310 --> 00:02:30,330
that I don''t overload the symbol 

59
00:02:30,400 --> 00:02:31,980
with a double arrow, let me add 

60
00:02:32,380 --> 00:02:34,610
an equal in the middle. This 

61
00:02:34,685 --> 00:02:36,450
will be my function. How could 

62
00:02:36,450 --> 00:02:37,740
we go about implementing this? 

63
00:02:38,080 --> 00:02:40,290
When I get a value A, I will 

64
00:02:40,210 --> 00:02:42,290
pass that to the first validator 

65
00:02:42,470 --> 00:02:44,580
F, and that will return a result. 

66
00:02:45,580 --> 00:02:46,960
I can then switch in that result. 

67
00:02:49,080 --> 00:02:51,120
If it''s an OK, containing a 

68
00:02:51,195 --> 00:02:53,280
value of type B, then I can pass 

69
00:02:53,290 --> 00:02:55,440
that B into my second validator, 

70
00:02:55,515 --> 00:02:58,150
G. If it''s an error with a 

71
00:02:58,160 --> 00:03:00,260
string, then I will naturally 

72
00:02:59,950 --> 00:03:03,330
return an error with S. This 

73
00:03:03,330 --> 00:03:05,360
will apply the first validator, 

74
00:03:05,280 --> 00:03:06,840
and then only apply the second 

75
00:03:06,915 --> 00:03:08,480
validator if the first one has 

76
00:03:08,490 --> 00:03:11,070
succeeded. It turns out that 

77
00:03:11,080 --> 00:03:12,570
some logic like this already 

78
00:03:12,580 --> 00:03:15,110
exists in the result package. I 

79
00:03:15,360 --> 00:03:17,270
could simplify this by saying 

80
00:03:17,490 --> 00:03:19,380
feed A to the first validator, 

81
00:03:19,970 --> 00:03:22,030
which will yield a result, and 

82
00:03:22,105 --> 00:03:25,000
then feed that into result and 

83
00:03:25,010 --> 00:03:28,940
then function, which will take G 

84
00:03:29,120 --> 00:03:31,350
as its argument. Since we''ve 

85
00:03:31,380 --> 00:03:33,350
seen the composition operator 

86
00:03:33,360 --> 00:03:34,830
earlier, we could write this 

87
00:03:34,840 --> 00:03:37,190
even more tersely without naming 

88
00:03:37,210 --> 00:03:42,300
A, and using composition here. 

89
00:03:43,940 --> 00:03:45,350
This notifies the function that 

90
00:03:45,360 --> 00:03:47,050
when it will get a value, will 

91
00:03:47,060 --> 00:03:49,480
feed it to F, then it will feed 

92
00:03:49,510 --> 00:03:51,710
the result of that to result, 

93
00:03:51,720 --> 00:03:54,900
and then G. A sample usage of 

94
00:03:58,300 --> 00:03:59,940
this would be as follows. We 

95
00:04:00,015 --> 00:03:59,410
have this validator from string 

96
00:03:59,580 --> 00:04:01,160
to int., and then we could have 

97
00:04:01,210 --> 00:04:04,370
a validator isPositive. This 

98
00:04:04,380 --> 00:04:06,240
would be a validator from int. 

99
00:04:06,315 --> 00:04:11,370
to int. Implementation is 

100
00:04:11,380 --> 00:04:14,400
trivial. If I is greater or 

101
00:04:14,410 --> 00:04:18,320
equal, then zero. Then OK I else 

102
00:04:19,290 --> 00:04:28,450
error with a string. Let''s say 

103
00:04:28,460 --> 00:04:29,900
that I wanted to define a 

104
00:04:29,975 --> 00:04:34,320
validator, isNatural, that takes 

105
00:04:34,330 --> 00:04:36,140
a string and returns an int. 

106
00:04:36,215 --> 00:04:37,170
that should be a positive number, 

107
00:04:37,870 --> 00:04:39,000
then I could define this like 

108
00:04:39,020 --> 00:04:42,010
this. I could say that isNatural 

109
00:04:42,085 --> 00:04:46,390
is isInt., and then compose that 

110
00:04:46,480 --> 00:04:50,890
with isPositive. The way I 

111
00:04:50,900 --> 00:04:52,810
would use this in my code would 

112
00:04:52,820 --> 00:04:55,520
be to put this here to say that 

113
00:04:55,620 --> 00:04:56,960
when I validate an email, I want 

114
00:04:56,970 --> 00:04:57,980
to first check that it''s not 

115
00:04:57,980 --> 00:04:59,630
empty, and only if that check 

116
00:04:59,640 --> 00:05:01,420
passes, I want to go on and 

117
00:05:01,430 --> 00:05:02,530
check if it''s a valid email. 

118
00:05:03,870 --> 00:05:05,890
Let me save this. I have a 

119
00:05:05,890 --> 00:05:09,130
little typo here. Let''s see what 

120
00:05:09,140 --> 00:05:11,710
happens. If I click submit, then 

121
00:05:11,720 --> 00:05:13,360
I get, "This field is required." 

122
00:05:13,640 --> 00:05:16,980
If I say, "Hello," and submit, 

123
00:05:17,370 --> 00:05:18,930
then I get, "Please enter a 

124
00:05:18,540 --> 00:05:19,490
valid email address."

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', 'b703fe8d', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2878, 'Add Validation Error Labels to an Elm Form', NULL, 'In this lesson, we''ll simply add labels to the form that will display validation error messages.', 48, NULL, '2017-12-15T06:07:10.235Z', '2023-08-08T00:08:22.417Z', 'elm-add-validation-error-labels-to-an-elm-form', NULL, '5aeu4qt88e', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf/egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_5aeu4qt88e" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf.mp4" /><meta itemprop="duration" content="PT48S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/7d32b45c772ff95cde65a1d6682ff97722729d05.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/acb0b5e3d7bf2cdb990e22ac431af7423cce7170.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=48.12&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7d32b45c772ff95cde65a1d6682ff97722729d05.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Facb0b5e3d7bf2cdb990e22ac431af7423cce7170.bin" /><meta itemprop="uploadDate" content="2017-12-14T22:09:03Z" /><object id="wistia_5aeu4qt88e_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=48.12&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7d32b45c772ff95cde65a1d6682ff97722729d05.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Facb0b5e3d7bf2cdb990e22ac431af7423cce7170.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=48.12&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F7d32b45c772ff95cde65a1d6682ff97722729d05.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Facb0b5e3d7bf2cdb990e22ac431af7423cce7170.bin" name="wistia_5aeu4qt88e_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("5aeu4qt88e", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/5aeu4qt88e/metadata.js"></script>', 'Instructor: [00:01] We now want to add some labels that show the validation errors to the user. We could put these next to the corresponding input and say "Label."

[00:15] We''d probably give it some custom class. For example, say "Label Label Error," so that it shows up in red or something like that.

[00:30] What will be the text for this label? We don''t know yet, because we don''t have this data on the model. Let me just leave this like this for the moment.

[00:44] You can see the validation appears here, but we need to populate this properly...', NULL, true, '04-egghead-elm-add-validation-error-labels-to-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 4693302
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf/egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf.mp4', 'egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf', 'zlqc', 'https://egghead-pipeline.s3.amazonaws.com/egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf/egghead-add-validation-error-labels-to-an-elm-form-HJDGI_gGf.mp3?6b84d83ced9bc7d3?d5eb', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:13.294Z', NULL, 8388589, NULL, 3644, 0, NULL, 4216813, '518f93a0e11b11e78369bf63aa4735d7', NULL, 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383719, '1
00:00:01,840 --> 00:00:03,550
We now want to add some labels 

2
00:00:03,560 --> 00:00:04,910
that show the validation errors 

3
00:00:04,920 --> 00:00:09,710
to the user. We could put these 

4
00:00:09,720 --> 00:00:11,700
next to the corresponding input 

5
00:00:13,130 --> 00:00:15,640
and say "Label." We''d probably 

6
00:00:15,650 --> 00:00:19,890
give it some custom class. For 

7
00:00:19,900 --> 00:00:22,310
example, say "Label Label Error," 

8
00:00:24,010 --> 00:00:25,470
so that it shows up in red or 

9
00:00:25,480 --> 00:00:30,260
something like that. What will 

10
00:00:30,270 --> 00:00:31,650
be the text for this label? We 

11
00:00:31,660 --> 00:00:33,140
don''t know yet, because we don''t 

12
00:00:33,150 --> 00:00:41,090
have this data on the model. Let 

13
00:00:41,165 --> 00:00:42,250
me just leave this like this for 

14
00:00:42,260 --> 00:00:44,870
the moment. You can see the 

15
00:00:44,880 --> 00:00:46,630
validation appears here, but we 

16
00:00:46,640 --> 00:00:48,030
need to populate this properly...

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '6ad33e8b', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2861, 'Prevent Submitting Invalid Data from an Elm Form', NULL, '', 318, NULL, '2017-12-14T04:58:55.037Z', '2023-08-08T00:08:22.669Z', 'elm-prevent-submitting-invalid-data-from-an-elm-form', NULL, 'fsqthuttqr', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf/egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_fsqthuttqr" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf.mp4" /><meta itemprop="duration" content="PT5M18S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/3bf801b0ee297f7aef921200f08a5c9204917eb0.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/975f4d7b922502e19509a5ae401d4e61479d3e84.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=318.52&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F3bf801b0ee297f7aef921200f08a5c9204917eb0.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F975f4d7b922502e19509a5ae401d4e61479d3e84.bin" /><meta itemprop="uploadDate" content="2017-12-14T09:25:18Z" /><object id="wistia_fsqthuttqr_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=318.52&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F3bf801b0ee297f7aef921200f08a5c9204917eb0.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F975f4d7b922502e19509a5ae401d4e61479d3e84.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=318.52&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F3bf801b0ee297f7aef921200f08a5c9204917eb0.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F975f4d7b922502e19509a5ae401d4e61479d3e84.bin" name="wistia_fsqthuttqr_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("fsqthuttqr", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/fsqthuttqr/metadata.js"></script>', 'Instructor: [00:01] Now, let''s see how we can use this approach in a real application to ensure that a form doesn''t submit invalid data. The first thing to do is change our form and add the attribute noValidate, set to true. This will prevent the browser from performing any native validation.

[00:19] Now, let me go to main.elm file, and import the validation module, exposing all the functions. The most important thing I want to ensure is that the form doesn''t submit invalid data. I''ll go to the update function, where the the submit message is being handled.

[00:40] Rather than calling the submit function, I will call another function, saying submitIfValid. Let me implement this here. What I want to do here is run model.email through the isEmail validator, and run model.message through the isNotEmpty validator.

[01:05] Then we''ll have to ensure that both results are OK. I can do this with pattern matching. I can put these two into a tuple. If this is OK with a valid email, and OK with a valid message, then I''ll return the model and submit.

[01:37] The model, and in all other cases, at least one of the results is an error. In this case, I''ll return the model, and command none. Notice, however, that here, we want to put the status to in process, but of course, we only want to do this if the model is valid.

[01:57] Let me actually put this here, and here, we just return submitIsValid model. There''s a slightly more elegant way to write the same. I could change the submit function to take the email and message separately.

[02:21] Here, this would be just email and message. Then I would use the result mapTo function. mapTo takes a binary function -- that''s why I just refactored submit to take two arguments -- then the two arguments to the submit function, which are wrapped into a result.

[02:46] I could put this into a variable called submissionResult. Then let me switch the submission result. This would now be an OK wrapping a command, in which case, I return the tuple with the updated model and the command. The command goes here.

[03:21] Or an error, which I''m going to ignore, in which case we''re not going to send a command. I''m missing some parentheses around my arguments here. Now, it compiles. Let me add some type annotations for clarity.

[03:40] Submit takes a string, the email, and a second string, the message, and returns a command of message. Here, when we pass model email to isEmail, what we get is a result of string string, which we wrap the email, assuming it''s valid, in an OK.

[04:10] The submit function is plain, so to speak, but the arguments are wrapped in a result. What mapTo does, it will provide the arguments to the function, assuming that they are OK. The type of submission result is result string, command message.

[04:31] If any of these validations has failed, we will get the error here. If they are both OK, submit will be evaluated, and we will get the resulting command here. submitIfValid takes the model, and returns the usual tuple required of the update function, which has a potentially updated model and a command message.

[04:59] Let me test the application. If I click submit, nothing happens. If I say hello and hello, hello is not a valid email, of course. Nothing happens. If I say redacted@test.egghead.io and hello, then my request is submitted.', NULL, true, '03-egghead-elm-prevent-submitting-invalid-data-from-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 28368795
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf/egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf.mp4', 'egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf', 'zm4q', 'https://egghead-pipeline.s3.amazonaws.com/egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf/egghead-prevent-submitting-invalid-data-from-an-elm-form-HkcbfaJGf.mp3?23cf6e8bc1b8d902?991c', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:14.788Z', NULL, 8388581, NULL, 3641, 0, NULL, 2076654, '54d54b60e0b011e7850cc9a2fee10845', 'https://ellie-app.com/embed/6ykQTDT9Ka1/0', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383702, '1
00:00:01,440 --> 00:00:02,350
Now, let''s see how we can use 

2
00:00:02,360 --> 00:00:03,310
this approach in a real 

3
00:00:03,320 --> 00:00:05,110
application to ensure that a 

4
00:00:05,120 --> 00:00:06,960
form doesn''t submit invalid data. 

5
00:00:07,720 --> 00:00:09,420
The first thing to do is change 

6
00:00:09,430 --> 00:00:12,020
our form and add the attribute 

7
00:00:12,095 --> 00:00:15,270
noValidate, set to true. This 

8
00:00:15,280 --> 00:00:16,560
will prevent the browser from 

9
00:00:16,570 --> 00:00:18,220
performing any native validation. 

10
00:00:19,150 --> 00:00:21,480
Now, let me go to main.elm file, 

11
00:00:22,300 --> 00:00:25,340
and import the validation module, 

12
00:00:25,840 --> 00:00:30,620
exposing all the functions. The 

13
00:00:30,630 --> 00:00:31,770
most important thing I want to 

14
00:00:31,780 --> 00:00:33,310
ensure is that the form doesn''t 

15
00:00:33,320 --> 00:00:35,220
submit invalid data. I''ll go to 

16
00:00:35,230 --> 00:00:36,350
the update function, where the 

17
00:00:36,425 --> 00:00:38,070
the submit message is being 

18
00:00:38,080 --> 00:00:40,850
handled. Rather than calling 

19
00:00:40,860 --> 00:00:42,800
the submit function, I will call 

20
00:00:42,810 --> 00:00:44,580
another function, saying 

21
00:00:44,655 --> 00:00:48,200
submitIfValid. Let me implement 

22
00:00:48,210 --> 00:00:54,360
this here. What I want to do 

23
00:00:54,530 --> 00:00:57,250
here is run model.email through 

24
00:00:57,325 --> 00:00:59,070
the isEmail validator, and run 

25
00:00:59,320 --> 00:01:02,280
model.message 

26
00:01:02,510 --> 00:01:05,730
through the 

27
00:01:05,805 --> 00:01:05,880
isNotEmpty validator. Then 

28
00:01:05,955 --> 00:01:11,220
we''ll have to ensure that both 

29
00:01:11,230 --> 00:01:13,620
results are OK. I can do this 

30
00:01:13,630 --> 00:01:16,140
with pattern matching. I can put 

31
00:01:16,320 --> 00:01:23,350
these two into a tuple. If this 

32
00:01:23,360 --> 00:01:27,340
is OK with a valid email, and OK 

33
00:01:27,350 --> 00:01:33,470
with a valid message, then I''ll 

34
00:01:33,480 --> 00:01:36,580
return the model and submit. 

35
00:01:37,060 --> 00:01:38,860
The model, and in all other 

36
00:01:38,870 --> 00:01:40,500
cases, at least one of the 

37
00:01:40,510 --> 00:01:42,580
results is an error. In this 

38
00:01:42,600 --> 00:01:46,300
case, I''ll return the model, and 

39
00:01:46,300 --> 00:01:49,800
command none. Notice, however, 

40
00:01:49,810 --> 00:01:51,640
that here, we want to put the 

41
00:01:51,650 --> 00:01:54,060
status to in process, but of 

42
00:01:54,070 --> 00:01:55,670
course, we only want to do this 

43
00:01:55,840 --> 00:01:57,590
if the model is valid. Let me 

44
00:01:57,590 --> 00:02:01,990
actually put this here, and here, 

45
00:02:01,990 --> 00:02:03,790
we just return submitIsValid 

46
00:02:04,040 --> 00:02:08,610
model. There''s a slightly more 

47
00:02:08,650 --> 00:02:11,250
elegant way to write the same. I 

48
00:02:11,270 --> 00:02:12,790
could change the submit function 

49
00:02:13,210 --> 00:02:14,960
to take the email and message 

50
00:02:14,970 --> 00:02:21,610
separately. Here, this would 

51
00:02:21,620 --> 00:02:27,020
be just email and message. Then 

52
00:02:27,120 --> 00:02:29,470
I would use the result mapTo 

53
00:02:29,545 --> 00:02:33,480
function. mapTo takes a binary 

54
00:02:33,580 --> 00:02:35,610
function -- that''s why I just 

55
00:02:35,685 --> 00:02:36,950
refactored submit to take two 

56
00:02:36,960 --> 00:02:39,260
arguments -- then the two 

57
00:02:39,270 --> 00:02:41,310
arguments to the submit function, 

58
00:02:41,420 --> 00:02:43,230
which are wrapped into a result. 

59
00:02:46,030 --> 00:02:48,200
I could put this into a variable 

60
00:02:48,200 --> 00:02:49,410
called submissionResult. Then 

61
00:02:59,790 --> 00:03:01,580
let me switch the submission 

62
00:03:01,590 --> 00:03:08,880
result. This would now be an OK 

63
00:03:09,090 --> 00:03:13,770
wrapping a command, in which 

64
00:03:13,640 --> 00:03:14,920
case, I return the tuple with 

65
00:03:14,930 --> 00:03:16,320
the updated model and the 

66
00:03:16,395 --> 00:03:18,240
command. The command goes here. 

67
00:03:21,120 --> 00:03:24,120
Or an error, which I''m going to 

68
00:03:24,150 --> 00:03:25,640
ignore, in which case we''re not 

69
00:03:25,650 --> 00:03:28,900
going to send a command. I''m 

70
00:03:28,910 --> 00:03:30,250
missing some parentheses around 

71
00:03:30,290 --> 00:03:36,060
my arguments here. Now, it 

72
00:03:36,060 --> 00:03:38,400
compiles. Let me add some type 

73
00:03:38,410 --> 00:03:39,590
annotations for clarity. 

74
00:03:40,200 --> 00:03:43,300
Submit takes a string, the email, 

75
00:03:44,810 --> 00:03:48,310
and a second string, the 

76
00:03:48,320 --> 00:03:50,900
message, and returns a command 

77
00:03:50,900 --> 00:03:54,200
of message. Here, when we pass 

78
00:03:54,210 --> 00:03:56,910
model email to isEmail, what we 

79
00:03:56,910 --> 00:04:00,930
get is a result of string string, 

80
00:04:01,670 --> 00:04:03,080
which we wrap the email, 

81
00:04:03,090 --> 00:04:04,870
assuming it''s valid, in an OK. 

82
00:04:10,330 --> 00:04:12,000
The submit function is plain, so 

83
00:04:12,010 --> 00:04:13,930
to speak, but the arguments are 

84
00:04:13,940 --> 00:04:16,360
wrapped in a result. What mapTo 

85
00:04:16,060 --> 00:04:17,860
does, it will provide the 

86
00:04:17,870 --> 00:04:19,130
arguments to the function, 

87
00:04:19,310 --> 00:04:21,310
assuming that they are OK. The 

88
00:04:21,310 --> 00:04:25,320
type of submission result is 

89
00:04:25,350 --> 00:04:29,880
result string, command message. 

90
00:04:31,020 --> 00:04:32,680
If any of these validations has 

91
00:04:32,690 --> 00:04:33,980
failed, we will get the error 

92
00:04:34,020 --> 00:04:36,050
here. If they are both OK, 

93
00:04:36,120 --> 00:04:38,130
submit will be evaluated, and we 

94
00:04:38,205 --> 00:04:39,260
will get the resulting command 

95
00:04:41,320 --> 00:04:45,530
here. submitIfValid takes the 

96
00:04:45,540 --> 00:04:49,320
model, and returns the usual 

97
00:04:49,395 --> 00:04:50,600
tuple required of the update 

98
00:04:50,610 --> 00:04:52,460
function, which has a 

99
00:04:52,460 --> 00:04:55,440
potentially updated model and a 

100
00:04:55,450 --> 00:05:00,310
command message. Let me test 

101
00:05:00,440 --> 00:05:01,800
the application. If I click 

102
00:05:01,800 --> 00:05:04,270
submit, nothing happens. If I 

103
00:05:04,270 --> 00:05:08,620
say hello and hello, hello is 

104
00:05:08,630 --> 00:05:09,980
not a valid email, of course. 

105
00:05:10,020 --> 00:05:12,950
Nothing happens. If I say hello@

106
00:05:13,025 --> 00:05:15,970
gmail.com and hello, then my 

107
00:05:16,045 --> 00:05:17,170
request is submitted.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', 'fff29832', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (3128, 'Form Validation in Elm: Course Overview', NULL, 'This course will introduce you to common form validation solutions in Elm. You will see how to validate an email string, strong passwords, and make the confirmation password matches.

The UI simple and logic for validation will be kept straight forward so you can focus on managing the state of the form in relation to user interaction.

You will also see a few solid approaches to solving complex problems in a functional style. We will compose validation rules together (Kleisli composition) and combine several validations in a form (applicatives).', 89, NULL, '2018-02-05T18:23:38.918Z', '2023-08-08T00:08:23.735Z', 'elm-form-validation-in-elm-course-overview', NULL, 'u63640a2us', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-form-validation-in-elm-course-overview-HyOnx3S8z/egghead-form-validation-in-elm-course-overview-HyOnx3S8z.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_u63640a2us" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-form-validation-in-elm-course-overview-HyOnx3S8z.mp4" /><meta itemprop="duration" content="PT1M29S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/38e2d23038d82347a7da401bc86ef8056d6f1a65.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/7c8969eb29667ca8dcc99474664d369954f49732.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=89.52&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F38e2d23038d82347a7da401bc86ef8056d6f1a65.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F7c8969eb29667ca8dcc99474664d369954f49732.bin" /><meta itemprop="uploadDate" content="2018-02-05T10:25:21Z" /><object id="wistia_u63640a2us_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=89.52&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F38e2d23038d82347a7da401bc86ef8056d6f1a65.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F7c8969eb29667ca8dcc99474664d369954f49732.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=89.52&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F38e2d23038d82347a7da401bc86ef8056d6f1a65.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F7c8969eb29667ca8dcc99474664d369954f49732.bin" name="wistia_u63640a2us_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-form-validation-in-elm-course-overview-HyOnx3S8z.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("u63640a2us", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/u63640a2us/metadata.js"></script>', 'Instructor: [00:01] This course, as the title suggests, teaches you to do form validation in Elm. Naturally, we look at some common validation scenarios, such as validating email addresses, numbers, validating that a password is strong enough, that two passwords match, and so on.

[00:18] We''ll keep the UI as simple as possible, and logic for each validation is also straightforward. This allows us to concentrate on the more challenging issues, namely managing the state of the form in relation with the user interaction.

[00:33] On another level, this course also teaches you how to approach complex problems in a functional style. We spend a good portion of the time to find the best way to model validation, taking advantage of Elm''s static type system.

[00:47] We also use several classic functional techniques. For example, this piece of code shows you how to compose two validation rules -- that the field should not be empty and that it should be a valid email address. This way of combing two rules is an instance of a wider technique called Kleisli composition.

[01:05] This other snippet shows you how to combine the validation of several fields on a form and only submit the form if all fields are valid. Here, this is achieved using another functional technique, that of applicatives.

[01:19] I definitely recommend this course if you''re writing forms in Elm, but I also recommend it if you''re more generally interested in Elm and in functional programming.', NULL, false, '01-egghead-elm-form-validation-in-elm-course-overview.mp4', 150, true, false, 181, '---
mp4: 8440793
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-form-validation-in-elm-course-overview-HyOnx3S8z/egghead-form-validation-in-elm-course-overview-HyOnx3S8z.mp4', 'egghead-form-validation-in-elm-course-overview-HyOnx3S8z', 'zlc4', 'https://egghead-pipeline.s3.amazonaws.com/egghead-form-validation-in-elm-course-overview-HyOnx3S8z/egghead-form-validation-in-elm-course-overview-HyOnx3S8z.mp3?4470175c98c0a955?2671', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:14.016Z', NULL, 8388604, NULL, 3983, 0, NULL, -4771846, 'baccaee00a5e11e8a21595bcba1ffd94', NULL, 28751, 'free', '', 'elm', '', '', '', '', '', NULL, 8383935, '1
00:00:01,430 --> 00:00:02,980
This course, as the title 

2
00:00:02,660 --> 00:00:04,950
suggests, teaches you to do form 

3
00:00:04,960 --> 00:00:07,770
validation in Elm. Naturally, we 

4
00:00:07,780 --> 00:00:09,160
look at some common validation 

5
00:00:09,190 --> 00:00:11,210
scenarios, such as validating 

6
00:00:11,220 --> 00:00:13,020
email addresses, numbers, 

7
00:00:13,480 --> 00:00:14,970
validating that a password is 

8
00:00:14,980 --> 00:00:16,360
strong enough, that two 

9
00:00:16,370 --> 00:00:17,890
passwords match, and so on. 

10
00:00:18,830 --> 00:00:20,230
We''ll keep the UI as simple as 

11
00:00:20,240 --> 00:00:22,140
possible, and logic for each 

12
00:00:22,140 --> 00:00:23,200
validation is also 

13
00:00:23,210 --> 00:00:25,470
straightforward. This allows us 

14
00:00:25,480 --> 00:00:26,690
to concentrate on the more 

15
00:00:26,700 --> 00:00:28,360
challenging issues, namely 

16
00:00:28,560 --> 00:00:30,390
managing the state of the form 

17
00:00:30,580 --> 00:00:31,740
in relation with the user 

18
00:00:31,750 --> 00:00:34,010
interaction. On another level, 

19
00:00:34,020 --> 00:00:35,890
this course also teaches you how 

20
00:00:35,900 --> 00:00:37,810
to approach complex problems in 

21
00:00:37,820 --> 00:00:39,780
a functional style. We spend a 

22
00:00:39,790 --> 00:00:41,470
good portion of the time to find 

23
00:00:41,480 --> 00:00:43,030
the best way to model validation, 

24
00:00:43,730 --> 00:00:45,610
taking advantage of Elm''s static 

25
00:00:45,620 --> 00:00:48,260
type system. We also use 

26
00:00:48,270 --> 00:00:49,520
several classic functional 

27
00:00:49,530 --> 00:00:52,130
techniques. For example, this 

28
00:00:52,140 --> 00:00:53,470
piece of code shows you how to 

29
00:00:53,480 --> 00:00:55,240
compose two validation rules -- 

30
00:00:55,410 --> 00:00:56,750
that the field should not be 

31
00:00:56,760 --> 00:00:58,360
empty and that it should be a 

32
00:00:58,370 --> 00:01:00,350
valid email address. This way of 

33
00:01:00,380 --> 00:01:02,950
combing two rules is an instance 

34
00:01:02,960 --> 00:01:04,390
of a wider technique called 

35
00:01:04,465 --> 00:01:06,360
Kleisli composition. This other 

36
00:01:06,370 --> 00:01:08,460
snippet shows you how to combine 

37
00:01:08,470 --> 00:01:10,040
the validation of several fields 

38
00:01:10,050 --> 00:01:12,060
on a form and only submit the 

39
00:01:12,070 --> 00:01:13,840
form if all fields are valid. 

40
00:01:14,300 --> 00:01:15,650
Here, this is achieved using 

41
00:01:15,660 --> 00:01:16,940
another functional technique, 

42
00:01:17,220 --> 00:01:19,800
that of applicatives. I 

43
00:01:19,810 --> 00:01:21,340
definitely recommend this course 

44
00:01:21,470 --> 00:01:22,820
if you''re writing forms in Elm, 

45
00:01:23,090 --> 00:01:24,690
but I also recommend it if 

46
00:01:24,700 --> 00:01:25,940
you''re more generally interested 

47
00:01:26,070 --> 00:01:27,480
in Elm and in functional 

48
00:01:27,490 --> 00:01:27,960
programming.

', true, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '7598f42b', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2902, 'Handle Server Validation Errors in an Elm Form', NULL, 'Some validation can only be done on the server, such as email validation. The client also needs to give the user clear feedback to what is going on. 

In this lesson we''ll setup server-side validation, briefly go over decoding JSON in Elm, and setup proper client feedback. ', 513, NULL, '2017-12-22T18:04:00.604Z', '2023-08-08T00:08:20.657Z', 'elm-handle-server-validation-errors-in-an-elm-form', NULL, 'b0nve9lh69', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG/egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_b0nve9lh69" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG.mp4" /><meta itemprop="duration" content="PT8M32S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/d15864a21e7741ca0db6ef3aea9b750c4921f570.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/e8a5f6e1614b131a6a7c76e863e62f04f4523a9c.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=512.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fd15864a21e7741ca0db6ef3aea9b750c4921f570.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe8a5f6e1614b131a6a7c76e863e62f04f4523a9c.bin" /><meta itemprop="uploadDate" content="2017-12-22T10:12:34Z" /><object id="wistia_b0nve9lh69_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=512.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fd15864a21e7741ca0db6ef3aea9b750c4921f570.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe8a5f6e1614b131a6a7c76e863e62f04f4523a9c.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=512.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fd15864a21e7741ca0db6ef3aea9b750c4921f570.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe8a5f6e1614b131a6a7c76e863e62f04f4523a9c.bin" name="wistia_b0nve9lh69_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("b0nve9lh69", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/b0nve9lh69/metadata.js"></script>', 'Instructor: [00:00] Now I''ve built a very simple backend for our registration form, and this is to post requests on the route API register. It performs some server-side validation, namely, it checks if a list of registered emails contains the email that has been sent in which case it sends some JSON with the success fields at the false, and an error email already registered.

[00:23] Otherwise, it adds the email to the list of registered emails, and sends some JSON with the field success set to true. Now, let''s go to our Elm code and see how it could deal with this server-side validation. Firstly, I need to change my route. Secondly, I wanted to change the decoder that I''m using to parse the response body.

[00:46] Firstly, let''s see how we could model the response body in Elm. Let me paste in a couple of sample values about the JSON will look like. We have a success field that''s a Boolean, and in the case of failure, we have an additional field errors with the list of strings.

[01:03] We could say that these JSON API is representing an outcome, and to represent the same, we could use the result type in Elm. The first type parameter will be a list of strings. There will be the errors in the error case, and in the case of success, we have unit since there is no data.

[01:22] We could even define a type alias, response body, and this is how you could represent response body in Elm. We can still improve on this, because we''re not expecting a list of arbitrary strings, but presumably a finite set of strings that the server can return as errors.

[01:43] Instead, let''s create a dedicated type. This is a union type where you can represent older error values that could be returned by your server. You could add other error types here, but for simplicity, let''s just deal with this one type of error. We can now use this type in our definition of response body, and we now have a nice Elm type to represent the data that is returned from our server.

[02:17] We now need to write a decoder that will translate the JSON to this response body type, and we can call this decode response body. The type will be JSON.decoder, parameterized with the response body type. Decoding JSON into Elm is a pretty vast topic in itself, so let me just paste some decoders that I''ve written.

[02:47] I''ll only go through this very briefly. Notice how here, we''re looking at the field called success and decoding it as a Boolean. Here, we have this function that says, if success, then we construct an OK. Otherwise, we construct a result in the error case, and the errors come from the errors field.

[03:08] This is wrapped in the maybe because the field is optional. We''re also using this decoder to translate these strings into our type server validation error. Now, let me remove this sample values.

[03:23] Instead of this decoder here, let me use decode response body. List that here, we get an error, that''s because of our submit response message was expecting a type of unit, and so here, rather than unit, we have a response body.

[03:49] Now, we have a compiler error in the code that handles the submit response message. This can no longer be unit since it''s a response body. Let me just call it underscore to disregard the payload. Now it compiles and we can take it for a spin.

[04:07] Let me try to register myself with email and recall at egghead.io, and a password. Here, you can see the status code of 200, so the request for successful. But if we look at the response data, it says success false. The form on the other hand is giving positive feedback to the user, so it says your request has been received.

[04:37] What we would like instead, is that the form should tell the user that he cannot register, because the email has already been registered. Let''s go to our update function and change it to deal with the case of failure.

[04:52] We want to split this case, so this underscore here, remember this is our response body which is just the result type. This could in turn be on OK with unit, and he would want to succeed as before. Otherwise, he would be an error with a list of errors. This is where we want to do things differently. We don''t want the initial model. We want just the model.

[05:22] The status should be the initial state which is not submitted. Furthermore, we want to show the user that his email is already registered. Let me pass this model to a function, and let me call this apply server validation errors. Pass in it the errors to apply. Let me define this just below. This takes a list of server validation errors and a model, and returns an updated version of the model.

[06:03] Because errors is a list, we want to traverse this list, and do something to the model to reflect each error that has occurred. We can do this with a fold, so we pass by list of errors to the list.fold Elm function. As a reducer function, I''d say, apply error, and I will need to define this function apply error that applies a single error.

[06:31] This will take a single error and the model. Then, we can switch on the error. If the error is email already registered, then let''s return the model with the email field in an invalid state. We don''t have a way to do this exactly. Let''s assume I have a function that says set error with the string that says this email is already registered.

[07:04] Actually, this needs to be model.email. This is the only error we''ve defined, so that concludes our pattern matching. Now, we just need to write the in to conclude our let close. This of cause doesn''t compile, because the set error function doesn''t exist, so let''s enrich our validation module to expose this.

[07:27] This takes a field with a value and a validity, which we''re going to change. We can create the new field with same value as before, but the new validity will be invalid with the given error, which I need to have as an argument here.

[07:47] I have another little compilation error, because here, I forgot to pass in the model as the initial states to my folder. Now the code compiles, and let me try to do the same as before. Now you see that the form gives some feedback that this email is already registered and it hasn''t cleared the data. This makes it pretty clear to the user that his data has not been submitted.

[08:19] Let me change this to a redacted@test.egghead.io, let me try submitting it again, and you can see that now the form was cleared and the request was successful.', NULL, true, '16-egghead-elm-handle-server-validation-errors-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 50195203
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG/egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG.mp4', 'egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG', 'zlqR', 'https://egghead-pipeline.s3.amazonaws.com/egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG/egghead-handle-server-validation-errors-in-an-elm-form-Hy6q_IcMG.mp3?c5f6a15423f35d3b?3456', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:24.384Z', NULL, 8388589, NULL, 3716, 0, NULL, 8388604, 'fa909dc0e6ff11e7bb39353f3faa4ee3', 'https://ellie-app.com/embed/532C69vsWa1/11', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383742, '1
00:00:00,670 --> 00:00:01,700
Now I''ve built a very simple 

2
00:00:01,710 --> 00:00:03,220
backend for our registration 

3
00:00:03,230 --> 00:00:05,410
form, and this is to post 

4
00:00:05,420 --> 00:00:07,220
requests on the route API 

5
00:00:07,310 --> 00:00:09,080
register. It performs some 

6
00:00:09,090 --> 00:00:10,960
server-side validation, namely, 

7
00:00:10,970 --> 00:00:12,670
it checks if a list of 

8
00:00:12,680 --> 00:00:14,550
registered emails contains the 

9
00:00:14,560 --> 00:00:16,420
email that has been sent in 

10
00:00:16,430 --> 00:00:18,520
which case it sends some JSON 

11
00:00:18,130 --> 00:00:19,390
with the success fields at the 

12
00:00:19,400 --> 00:00:21,480
false, and an error email 

13
00:00:21,540 --> 00:00:23,390
already registered. Otherwise, 

14
00:00:23,400 --> 00:00:25,490
it adds the email to the list of 

15
00:00:25,500 --> 00:00:27,150
registered emails, and sends 

16
00:00:27,150 --> 00:00:28,680
some JSON with the field success 

17
00:00:28,780 --> 00:00:31,500
set to true. Now, let''s go to 

18
00:00:31,510 --> 00:00:33,320
our Elm code and see how it 

19
00:00:33,040 --> 00:00:34,420
could deal with this server-side 

20
00:00:34,495 --> 00:00:36,970
validation. Firstly, I need to 

21
00:00:36,980 --> 00:00:41,050
change my route. Secondly, I 

22
00:00:41,050 --> 00:00:42,520
wanted to change the decoder 

23
00:00:42,630 --> 00:00:44,100
that I''m using to parse the 

24
00:00:44,110 --> 00:00:47,000
response body. Firstly, let''s 

25
00:00:47,010 --> 00:00:48,180
see how we could model the 

26
00:00:48,190 --> 00:00:50,300
response body in Elm. Let me 

27
00:00:50,530 --> 00:00:52,200
paste in a couple of sample 

28
00:00:52,210 --> 00:00:54,320
values about the JSON will look 

29
00:00:54,395 --> 00:00:56,620
like. We have a success field 

30
00:00:56,630 --> 00:00:58,590
that''s a Boolean, and in the 

31
00:00:58,600 --> 00:01:00,230
case of failure, we have an 

32
00:01:00,305 --> 00:01:02,230
additional field errors with the 

33
00:01:01,740 --> 00:01:03,840
list of strings. We could say 

34
00:01:03,850 --> 00:01:05,470
that these JSON API is 

35
00:01:05,545 --> 00:01:05,540
representing an outcome, and to 

36
00:01:05,610 --> 00:01:09,010
represent the same, we could use 

37
00:01:09,020 --> 00:01:11,350
the result type in Elm. The 

38
00:01:11,360 --> 00:01:13,420
first type parameter will be a 

39
00:01:13,430 --> 00:01:16,710
list of strings. There will be 

40
00:01:16,720 --> 00:01:18,260
the errors in the error case, 

41
00:01:18,335 --> 00:01:19,870
and in the case of success, we 

42
00:01:19,880 --> 00:01:21,360
have unit since there is no data. 

43
00:01:22,380 --> 00:01:23,830
We could even define a type 

44
00:01:23,840 --> 00:01:28,260
alias, response body, and this 

45
00:01:28,335 --> 00:01:29,670
is how you could represent 

46
00:01:29,680 --> 00:01:32,450
response body in Elm. We can 

47
00:01:32,450 --> 00:01:33,910
still improve on this, because 

48
00:01:33,920 --> 00:01:35,380
we''re not expecting a list of 

49
00:01:35,430 --> 00:01:37,450
arbitrary strings, but 

50
00:01:37,460 --> 00:01:39,310
presumably a finite set of 

51
00:01:39,320 --> 00:01:40,610
strings that the server can 

52
00:01:40,620 --> 00:01:43,970
return as errors. Instead, 

53
00:01:43,970 --> 00:01:45,750
let''s create a dedicated type. 

54
00:01:54,530 --> 00:01:55,990
This is a union type where you 

55
00:01:55,990 --> 00:01:58,130
can represent older error values 

56
00:01:58,140 --> 00:01:59,170
that could be returned by your 

57
00:01:59,180 --> 00:02:01,860
server. You could add other 

58
00:02:01,870 --> 00:02:03,990
error types here, but for 

59
00:02:04,240 --> 00:02:05,600
simplicity, let''s just deal with 

60
00:02:05,610 --> 00:02:08,220
this one type of error. We can 

61
00:02:08,230 --> 00:02:09,400
now use this type in our 

62
00:02:09,410 --> 00:02:11,260
definition of response body, and 

63
00:02:11,520 --> 00:02:13,740
we now have a nice Elm type to 

64
00:02:13,740 --> 00:02:15,050
represent the data that is 

65
00:02:15,060 --> 00:02:17,970
returned from our server. We 

66
00:02:18,010 --> 00:02:19,600
now need to write a decoder that 

67
00:02:19,610 --> 00:02:21,490
will translate the JSON to this 

68
00:02:21,500 --> 00:02:23,600
response body type, and we can 

69
00:02:23,600 --> 00:02:25,850
call this decode response body. 

70
00:02:25,925 --> 00:02:28,250
The type will be JSON.decoder, 

71
00:02:28,325 --> 00:02:35,930
parameterized with the response 

72
00:02:35,940 --> 00:02:41,010
body type. Decoding JSON into 

73
00:02:41,020 --> 00:02:42,930
Elm is a pretty vast topic in 

74
00:02:42,940 --> 00:02:45,480
itself, so let me just paste 

75
00:02:45,490 --> 00:02:46,990
some decoders that I''ve written. 

76
00:02:47,470 --> 00:02:48,800
I''ll only go through this very 

77
00:02:48,810 --> 00:02:51,300
briefly. Notice how here, we''re 

78
00:02:51,310 --> 00:02:52,520
looking at the field called 

79
00:02:52,530 --> 00:02:54,390
success and decoding it as a 

80
00:02:54,400 --> 00:02:56,830
Boolean. Here, we have this 

81
00:02:56,840 --> 00:02:58,550
function that says, if success, 

82
00:02:58,560 --> 00:02:59,900
then we construct an OK. 

83
00:03:00,900 --> 00:03:02,800
Otherwise, we construct a result 

84
00:03:02,810 --> 00:03:04,910
in the error case, and the 

85
00:03:04,920 --> 00:03:06,670
errors come from the errors 

86
00:03:06,680 --> 00:03:08,890
field. This is wrapped in the 

87
00:03:08,900 --> 00:03:10,490
maybe because the field is 

88
00:03:10,500 --> 00:03:12,570
optional. We''re also using this 

89
00:03:12,580 --> 00:03:14,510
decoder to translate these 

90
00:03:14,550 --> 00:03:17,780
strings into our type server 

91
00:03:17,855 --> 00:03:20,790
validation error. Now, let me 

92
00:03:20,800 --> 00:03:22,230
remove this sample values. 

93
00:03:23,930 --> 00:03:25,410
Instead of this decoder here, 

94
00:03:25,485 --> 00:03:29,550
let me use decode response body. 

95
00:03:35,110 --> 00:03:36,890
List that here, we get an error, 

96
00:03:37,430 --> 00:03:38,470
that''s because of our submit 

97
00:03:38,480 --> 00:03:40,680
response message was expecting a 

98
00:03:40,690 --> 00:03:42,810
type of unit, and so here, 

99
00:03:42,820 --> 00:03:44,910
rather than unit, we have a 

100
00:03:45,000 --> 00:03:50,140
response body. Now, we have a 

101
00:03:50,150 --> 00:03:51,870
compiler error in the code that 

102
00:03:51,880 --> 00:03:53,480
handles the submit response 

103
00:03:53,490 --> 00:03:55,920
message. This can no longer be 

104
00:03:55,930 --> 00:03:57,780
unit since it''s a response body. 

105
00:03:58,710 --> 00:04:00,240
Let me just call it underscore 

106
00:04:00,610 --> 00:04:02,670
to disregard the payload. Now it 

107
00:04:02,670 --> 00:04:03,960
compiles and we can take it for 

108
00:04:03,970 --> 00:04:08,800
a spin. Let me try to register 

109
00:04:08,810 --> 00:04:11,450
myself with email and recall at 

110
00:04:11,460 --> 00:04:23,180
egghead.io, and a password. Here, 

111
00:04:23,255 --> 00:04:24,970
you can see the status code of 

112
00:04:25,045 --> 00:04:26,430
200, so the request for 

113
00:04:26,430 --> 00:04:28,830
successful. But if we look at 

114
00:04:28,905 --> 00:04:29,860
the response data, it says 

115
00:04:29,870 --> 00:04:33,260
success false. The form on the 

116
00:04:33,270 --> 00:04:34,560
other hand is giving positive 

117
00:04:34,570 --> 00:04:36,240
feedback to the user, so it says 

118
00:04:36,250 --> 00:04:37,840
your request has been received. 

119
00:04:37,915 --> 00:04:40,090
What we would like instead, is 

120
00:04:40,100 --> 00:04:41,120
that the form should tell the 

121
00:04:41,130 --> 00:04:43,010
user that he cannot register, 

122
00:04:43,070 --> 00:04:44,310
because the email has already 

123
00:04:44,320 --> 00:04:47,710
been registered. Let''s go to our 

124
00:04:47,720 --> 00:04:49,420
update function and change it to 

125
00:04:49,430 --> 00:04:50,530
deal with the case of failure. 

126
00:04:52,240 --> 00:04:55,540
We want to split this case, so 

127
00:04:55,550 --> 00:04:57,090
this underscore here, remember 

128
00:04:57,100 --> 00:04:59,140
this is our response body which 

129
00:04:59,150 --> 00:05:01,530
is just the result type. This 

130
00:05:01,540 --> 00:05:05,150
could in turn be on OK with unit, 

131
00:05:05,225 --> 00:05:07,200
and he would want to succeed as 

132
00:05:07,260 --> 00:05:09,580
before. Otherwise, he would be 

133
00:05:09,670 --> 00:05:13,640
an error with a list of errors. 

134
00:05:14,960 --> 00:05:15,970
This is where we want to do 

135
00:05:15,980 --> 00:05:17,710
things differently. We don''t 

136
00:05:17,710 --> 00:05:19,550
want the initial model. We want 

137
00:05:19,560 --> 00:05:22,530
just the model. The status 

138
00:05:22,540 --> 00:05:24,070
should be the initial state 

139
00:05:24,080 --> 00:05:25,440
which is not submitted. 

140
00:05:28,370 --> 00:05:29,600
Furthermore, we want to show the 

141
00:05:29,610 --> 00:05:31,340
user that his email is already 

142
00:05:31,415 --> 00:05:33,190
registered. Let me pass this 

143
00:05:33,200 --> 00:05:36,030
model to a function, and let me 

144
00:05:35,390 --> 00:05:37,550
call this apply server 

145
00:05:37,560 --> 00:05:42,280
validation errors. Pass in it 

146
00:05:42,290 --> 00:05:46,840
the errors to apply. Let me 

147
00:05:46,840 --> 00:05:49,370
define this just below. This 

148
00:05:49,380 --> 00:05:51,870
takes a list of server 

149
00:05:51,870 --> 00:05:54,060
validation errors and a model, 

150
00:05:54,135 --> 00:05:56,670
and returns an updated version 

151
00:05:56,680 --> 00:06:04,660
of the model. Because errors is 

152
00:06:04,670 --> 00:06:06,150
a list, we want to traverse this 

153
00:06:06,160 --> 00:06:07,750
list, and do something to the 

154
00:06:07,760 --> 00:06:09,480
model to reflect each error that 

155
00:06:09,490 --> 00:06:11,370
has occurred. We can do this 

156
00:06:11,380 --> 00:06:13,420
with a fold, so we pass by list 

157
00:06:13,420 --> 00:06:16,690
of errors to the list.fold Elm 

158
00:06:17,010 --> 00:06:19,200
function. As a reducer function, 

159
00:06:19,275 --> 00:06:23,770
I''d say, apply error, and I will 

160
00:06:23,770 --> 00:06:25,540
need to define this function 

161
00:06:25,550 --> 00:06:26,910
apply error that applies a 

162
00:06:26,920 --> 00:06:32,160
single error. This will take a 

163
00:06:32,170 --> 00:06:35,020
single error and the model. Then, 

164
00:06:35,200 --> 00:06:39,090
we can switch on the error. If 

165
00:06:39,090 --> 00:06:40,580
the error is email already 

166
00:06:40,690 --> 00:06:43,870
registered, then let''s return 

167
00:06:43,880 --> 00:06:46,220
the model with the email field 

168
00:06:46,610 --> 00:06:49,010
in an invalid state. We don''t 

169
00:06:49,010 --> 00:06:50,480
have a way to do this exactly. 

170
00:06:51,560 --> 00:06:53,150
Let''s assume I have a function 

171
00:06:53,160 --> 00:06:56,610
that says set error with the 

172
00:06:56,690 --> 00:07:00,080
string that says this email is 

173
00:07:00,090 --> 00:07:04,770
already registered. Actually, 

174
00:07:04,770 --> 00:07:08,010
this needs to be model.email. 

175
00:07:08,700 --> 00:07:09,940
This is the only error we''ve 

176
00:07:09,950 --> 00:07:11,490
defined, so that concludes our 

177
00:07:11,500 --> 00:07:13,050
pattern matching. Now, we just 

178
00:07:13,050 --> 00:07:14,530
need to write the in to conclude 

179
00:07:14,540 --> 00:07:17,410
our let close. This of cause 

180
00:07:17,410 --> 00:07:18,710
doesn''t compile, because the set 

181
00:07:18,720 --> 00:07:21,160
error function doesn''t exist, so 

182
00:07:21,170 --> 00:07:22,820
let''s enrich our validation 

183
00:07:22,820 --> 00:07:27,610
module to expose this. This 

184
00:07:27,620 --> 00:07:30,800
takes a field with a value and a 

185
00:07:30,810 --> 00:07:32,560
validity, which we''re going to 

186
00:07:32,630 --> 00:07:34,550
change. We can create the new 

187
00:07:34,560 --> 00:07:36,960
field with same value as before, 

188
00:07:37,250 --> 00:07:38,870
but the new validity will be 

189
00:07:38,970 --> 00:07:41,950
invalid with the given error, 

190
00:07:42,220 --> 00:07:43,530
which I need to have as an 

191
00:07:43,540 --> 00:07:47,630
argument here. I have another 

192
00:07:47,640 --> 00:07:48,960
little compilation error, 

193
00:07:49,100 --> 00:07:50,740
because here, I forgot to pass 

194
00:07:50,750 --> 00:07:52,790
in the model as the initial 

195
00:07:52,800 --> 00:07:55,660
states to my folder. Now the 

196
00:07:55,670 --> 00:07:57,660
code compiles, and let me try to 

197
00:07:57,670 --> 00:08:09,670
do the same as before. Now you 

198
00:08:09,670 --> 00:08:11,030
see that the form gives some 

199
00:08:11,040 --> 00:08:12,570
feedback that this email is 

200
00:08:12,645 --> 00:08:14,660
already registered and it hasn''t 

201
00:08:14,670 --> 00:08:16,610
cleared the data. This makes it 

202
00:08:16,710 --> 00:08:18,040
pretty clear to the user that 

203
00:08:18,050 --> 00:08:19,620
his data has not been submitted. 

204
00:08:19,695 --> 00:08:23,610
Let me change this to a enrico@

205
00:08:23,685 --> 00:08:27,340
Gmail.com, let me try submitting 

206
00:08:27,350 --> 00:08:29,160
it again, and you can see that 

207
00:08:29,235 --> 00:08:30,820
now the form was cleared and the 

208
00:08:30,895 --> 00:08:32,020
request was successful.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '884afb31', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2879, 'Model a Field Requiring Validation in an Elm Form', NULL, 'As is often the case in a statically typed programming language like Elm, the best solutions are achieved by taking advantage of the type system to accurately model the problem at hand. 

In this lesson, we define a type that can represent the various states and the data for a validatable field. We then let the compiler guide us and work through to a satisfactory solution.', 907, NULL, '2017-12-15T06:10:51.459Z', '2023-08-08T00:08:22.296Z', 'elm-model-a-field-requiring-validation-in-an-elm-form', NULL, '3fk22xubwl', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG/egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_3fk22xubwl" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG.mp4" /><meta itemprop="duration" content="PT15M6S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/59164d7f94a7e056e9861ce1445ff0020854acf4.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/1f164ea1ee3e58575ca2fa8c52aee7eb69b5fa7e.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=906.88&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F59164d7f94a7e056e9861ce1445ff0020854acf4.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F1f164ea1ee3e58575ca2fa8c52aee7eb69b5fa7e.bin" /><meta itemprop="uploadDate" content="2017-12-15T11:07:25Z" /><object id="wistia_3fk22xubwl_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=906.88&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F59164d7f94a7e056e9861ce1445ff0020854acf4.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F1f164ea1ee3e58575ca2fa8c52aee7eb69b5fa7e.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=906.88&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F59164d7f94a7e056e9861ce1445ff0020854acf4.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F1f164ea1ee3e58575ca2fa8c52aee7eb69b5fa7e.bin" name="wistia_3fk22xubwl_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("3fk22xubwl", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/3fk22xubwl/metadata.js"></script>', 'Instructor: [00:00] One approach to my try would be to say, well, since I''m using result to represent the result of my validation functions, let me put a result on the model. For example, result string string, it should be OK if the email has been validated correctly or an error, and I would be able to render that invaluable.

[00:21] Now, let me try compiling this and see what breaks. In the initial model, this now would need to be a result. Here we have the first problem, because if I say, "OK" with an empty string, then this contradicts a validation logic, since this is a mandatory field.

[00:35] If I pass it an error, so for example, if I say, "isEmail," empty string, this will return an error, but then it will mean that as soon as the user allows my form, he already receives validation errors.

[00:52] This is not the only problem, because if we go here, where the user has changed his input in the email field, we would now need to validate the field. If his input at the moment was not a valid email, we''d be effectively discard in the user''s input.

[01:06] For all these reasons, result is not good enough type to represent the state of a field of my form. Let me go to my validation model and define the new type. I''ll call this field and I''ll say that a field can be valid and contain a value of type A, so we need A as a type argument, or it can be invalid in which case we have a string and error message.

[01:36] We also need a second parameter, so another string which is the user''s current input. Just for clarity, let me add the comment to clarify what is each string is. Then, we also need another state which are called not validated with the string.

[02:00] Now, let me open these files side by side. Instead of a result, here I will have a field, so email would be a field of string. The same for message also field of string. When I first load the model, the value is not validated with an empty string, same for message.

[02:23] Now, let me go to the update function. Whenever the user changes the input of the email field, we will have not validated E and the same for the message. Let''s go down to the view, where we want to display the label. I want to say model.email, and I want to have a function that somehow extracts the error message from this field.

[02:54] Let me add this function to my library, extract error which takes a field of A, and returns a string. You can just switch in the value. If it''s invalid with an error and the value, then we return an error. What about the other cases? We don''t have an error in the other cases, so rather than returning a string, let''s return a Maybe String. If it''s invalid, we return just error. In all other cases, we return nothing.

[03:44] Now, extract the error we return a Maybe, and I''ll say Maybe with default empty string. This will show the error if it''s invalid, and otherwise, it will be an empty string, so the label won''t be visible.

[04:06] I''m going to have the same code for other validations. Let me just extract this into a function. We call this error label. This will take a field of A and returns an HTML of A. Let me place the code to the just extracted. We get a field and here is my field, so we extract the error from the field, and then we show that or an empty string.

[04:56] Here, I''ll put error label for model.email, and next of the message, I''ll put an error label for model.message. Now for the value, model.email is now a field, so I somehow need to extract the current input.

[05:21] I''ll have a function similar to this one that are called display value that takes the field of A, and returns a string. Let''s switch on the state of the field. If it''s invalid with an error and the val, and it''s just the val, if it''s not validated with the val that it also val.

[06:03] If it''s a valid val, then you would like to return val, but the problem is that val can be any type A not just the string. Additionally, let''s also add the function here that will render A as a string. No need to call this render and here it would be rendered val.

[06:30] Let me call this "S" for string. Let me call this A, since it''s a value of type A. Here the value would be model email, but let me feed this to display value with identity as a function, and parentheses here. Let me do the same with the message.

[07:09] I also have a type of here Maybe, and let''s see what breaks, so here we always need to return HTML message. Now on the submit response, when we clear these fields we need to say, "Not a validated empty string."

[07:34] Now comes the interesting part, so the actual validation called. Here, we were feeding the strings to these validation functions, and we were using results and using result Math2 to combine these results together. Now, model.email a message are of few types, so that we''ll over the contain validation errors, so the validation has to be done previously.

[07:56] I''ll remove these, and assume I can combine these with validation Math2, which we need to define later. These are now of type field string, and field string. This is also part of the problem of again comments, is that they don''t cause compile errors, so let me remove this.

[08:22] However, let''s keep in mind that these fields could be in the not validated state, so somehow in we need to force the validation on the model. Let me write the function and call it validate model that takes the model and returns an updated model.

[08:48] This will return the model, and I''ll set the email field to be model.email and pass in that to a validate function yet to be defined that validates isEmail. Similarly, the message field on the model will be set to model.mesage. This will also go through validate taking as a validator is not empty.

[09:29] The idea is that, when the user submits the form, we take the model and we pass it this validate model of function. This will ensure that any fields whether in the not validated state or validated, so that they go either into the valid or the invalid state, and we pass this to submit if valid.

[09:52] What we need to do now is to implement these functions validate and Math2. Let me start with the validate function. Let''s look the signature. The first argument as you can see is a validator. Let''s call this validator string A. I can fix the first parameter to string, because we''re validating values that come from input fields.

[10:20] The second argument is a field A, and return value would be a field A. Let me call these arguments, validator, and field. I''m going to switch on the field. If it''s not validated with the value, then we''ll apply the validation, so I say, validator value.

[10:53] Then, I''ll switch on this value which is of type result. If this isn''t OK with an A, then I will produce a valid A. If it''s an error with an error message, then I will produce an invalid with error as error message and value as a current input value.

[11:28] If the field is in the valid or invalid case, we''ll then, validation has already been performed, and I can just return the field as it is. Next, I''m going to implement the Math2 function for validation.

[11:51] If we look at the usage of Math2 over here, we can see that this takes a binary function, so we''ll take an A, and a B, and return a C. The second argument would be a field of A, and a field of B, and return value would be a field of C.

[12:22] Let''s call the function F, and let''s call the first parameter FA and second one FB. Now, I can switch on FA. If this is not validated with the string, then we do nothing. We return not validated with the same string. If it''s invalid with error and S, we likewise return invalid error and S.

[12:59] In the valid case, we have an A, and we can supply this A to the F function. In this case, I can still switch on FB. This is not validated as above, similarly stay, but not validated F. Finally, if it''s a valid that wraps a value B, then I can apply it to arguments A and B to the F function and wrap this into a valid.

[13:42] This type annotation is wrong, because this is actually a field of command message that will remove this annotation as well, because it''s a bit over qual. Because submission result is now a field, then it can be a valid with the command in which case we proceed to submit.

[14:01] In the other case, we do not submit, so we''ll return the unchanged model, and no command to perform. As you have a little compilation error, where I''m constructing my error labels, and this is because this is a string, and I need to feed this to the text function.

[14:21] Now, my application compiles. You can see that the initial state email message are not validated. If I try to submit, they go to invalid, and we see the error messages appear. Let me refresh the page to go back to the initial state, and let me type a valid email, and click submit.

[14:46] You can see that the field email now has gone to valid with email of input and message is invalid, because it''s required. Let me now open network tab to see, if a valid message is submitted, and indeed we see that it is.', NULL, true, '05-egghead-elm-model-a-field-requiring-validation-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 96837701
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG/egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG.mp4', 'egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG', 'zlqB', 'https://egghead-pipeline.s3.amazonaws.com/egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG/egghead-model-a-field-requiring-validation-in-an-elm-form-rkZAHQWfG.mp3?8690a9ebd357e8f4?8fe7', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:17.080Z', NULL, 8388589, NULL, 3645, 0, NULL, 6189035, 'e1875720e18611e7b46cb11bcaa54662', 'https://ellie-app.com/embed/7cTBnBKX3a1/0', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383720, '1
00:00:00,360 --> 00:00:01,810
One approach to my try would be 

2
00:00:01,820 --> 00:00:03,700
to say, well, since I''m using 

3
00:00:03,730 --> 00:00:05,940
result to represent the result 

4
00:00:05,940 --> 00:00:07,760
of my validation functions, let 

5
00:00:07,760 --> 00:00:09,250
me put a result on the model. 

6
00:00:10,390 --> 00:00:12,930
For example, result string 

7
00:00:12,940 --> 00:00:15,630
string, it should be OK if the 

8
00:00:15,640 --> 00:00:16,890
email has been validated 

9
00:00:16,900 --> 00:00:18,790
correctly or an error, and I 

10
00:00:18,800 --> 00:00:20,030
would be able to render that 

11
00:00:20,070 --> 00:00:21,750
invaluable. Now, let me try 

12
00:00:21,750 --> 00:00:23,020
compiling this and see what 

13
00:00:23,030 --> 00:00:24,840
breaks. In the initial model, 

14
00:00:24,920 --> 00:00:26,080
this now would need to be a 

15
00:00:26,090 --> 00:00:28,040
result. Here we have the first 

16
00:00:28,050 --> 00:00:30,160
problem, because if I say, "OK" 

17
00:00:30,210 --> 00:00:31,780
with an empty string, then this 

18
00:00:31,790 --> 00:00:33,480
contradicts a validation logic, 

19
00:00:33,490 --> 00:00:34,980
since this is a mandatory field. 

20
00:00:35,540 --> 00:00:37,460
If I pass it an error, so for 

21
00:00:37,470 --> 00:00:39,040
example, if I say, "isEmail," 

22
00:00:40,760 --> 00:00:42,000
empty string, this will return 

23
00:00:42,010 --> 00:00:43,970
an error, but then it will mean 

24
00:00:43,980 --> 00:00:45,160
that as soon as the user allows 

25
00:00:45,360 --> 00:00:47,170
my form, he already receives 

26
00:00:47,170 --> 00:00:52,800
validation errors. This is not 

27
00:00:52,810 --> 00:00:54,110
the only problem, because if we 

28
00:00:54,120 --> 00:00:55,990
go here, where the user has 

29
00:00:56,000 --> 00:00:57,980
changed his input in the email 

30
00:00:57,990 --> 00:00:59,760
field, we would now need to 

31
00:00:59,770 --> 00:01:01,930
validate the field. If his input 

32
00:01:01,940 --> 00:01:03,300
at the moment was not a valid 

33
00:01:03,380 --> 00:01:04,590
email, we''d be effectively 

34
00:01:04,600 --> 00:01:06,140
discard in the user''s input. 

35
00:01:06,840 --> 00:01:08,520
For all these reasons, result is 

36
00:01:08,530 --> 00:01:09,930
not good enough type to 

37
00:01:09,940 --> 00:01:11,490
represent the state of a field 

38
00:01:11,500 --> 00:01:13,630
of my form. Let me go to my 

39
00:01:13,470 --> 00:01:15,370
validation model and define the 

40
00:01:15,380 --> 00:01:17,810
new type. I''ll call this field 

41
00:01:18,740 --> 00:01:20,640
and I''ll say that a field can be 

42
00:01:20,650 --> 00:01:22,210
valid and contain a value of 

43
00:01:22,220 --> 00:01:24,460
type A, so we need A as a type 

44
00:01:24,470 --> 00:01:28,490
argument, or it can be invalid 

45
00:01:29,800 --> 00:01:31,980
in which case we have a string 

46
00:01:33,370 --> 00:01:37,100
and error message. We also need 

47
00:01:37,610 --> 00:01:39,360
a second parameter, so another 

48
00:01:39,370 --> 00:01:41,090
string which is the user''s 

49
00:01:41,100 --> 00:01:44,150
current input. Just for clarity, 

50
00:01:46,030 --> 00:01:49,740
let me add the comment to 

51
00:01:49,750 --> 00:01:52,080
clarify what is each string is. 

52
00:01:54,100 --> 00:01:56,070
Then, we also need another state 

53
00:01:56,470 --> 00:01:58,820
which are called not validated 

54
00:01:59,420 --> 00:02:01,010
with the string. Now, let me 

55
00:02:01,020 --> 00:02:02,850
open these files side by side. 

56
00:02:03,150 --> 00:02:05,480
Instead of a result, here I will 

57
00:02:05,555 --> 00:02:08,630
have a field, so email would be 

58
00:02:08,640 --> 00:02:10,970
a field of string. The same for 

59
00:02:10,980 --> 00:02:13,910
message also field of string. 

60
00:02:14,780 --> 00:02:16,340
When I first load the model, the 

61
00:02:16,350 --> 00:02:19,220
value is not validated with an 

62
00:02:19,230 --> 00:02:20,930
empty string, same for message. 

63
00:02:23,530 --> 00:02:24,900
Now, let me go to the update 

64
00:02:24,910 --> 00:02:26,580
function. Whenever the user 

65
00:02:26,550 --> 00:02:28,190
changes the input of the email 

66
00:02:28,200 --> 00:02:29,960
field, we will have not 

67
00:02:30,000 --> 00:02:33,120
validated E and the same for the 

68
00:02:33,130 --> 00:02:38,450
message. Let''s go down to the 

69
00:02:38,525 --> 00:02:40,180
view, where we want to display 

70
00:02:40,190 --> 00:02:43,180
the label. I want to say model.

71
00:02:43,760 --> 00:02:45,760
email, and I want to have a 

72
00:02:45,770 --> 00:02:48,620
function that somehow extracts 

73
00:02:48,660 --> 00:02:51,610
the error message from this 

74
00:02:51,620 --> 00:02:55,830
field. Let me add this function 

75
00:02:55,840 --> 00:02:58,360
to my library, extract error 

76
00:02:59,360 --> 00:03:03,730
which takes a field of A, and 

77
00:03:03,740 --> 00:03:11,820
returns a string. You can just 

78
00:03:11,820 --> 00:03:16,320
switch in the value. If it''s 

79
00:03:16,520 --> 00:03:20,690
invalid with an error and the 

80
00:03:20,765 --> 00:03:25,280
value, then we return an error. 

81
00:03:26,630 --> 00:03:27,980
What about the other cases? We 

82
00:03:27,990 --> 00:03:28,840
don''t have an error in the other 

83
00:03:28,850 --> 00:03:30,290
cases, so rather than returning 

84
00:03:30,300 --> 00:03:32,540
a string, let''s return a Maybe 

85
00:03:32,550 --> 00:03:37,030
String. If it''s invalid, we 

86
00:03:37,040 --> 00:03:42,430
return just error. In all other 

87
00:03:42,440 --> 00:03:44,740
cases, we return nothing. Now, 

88
00:03:44,815 --> 00:03:50,010
extract the error we return a 

89
00:03:50,020 --> 00:03:54,510
Maybe, and I''ll say Maybe with 

90
00:03:54,520 --> 00:03:59,920
default empty string. This will 

91
00:03:59,930 --> 00:04:01,650
show the error if it''s invalid, 

92
00:04:02,160 --> 00:04:03,240
and otherwise, it will be an 

93
00:04:03,250 --> 00:04:04,910
empty string, so the label won''t 

94
00:04:04,920 --> 00:04:06,720
be visible. I''m going to have 

95
00:04:06,730 --> 00:04:07,920
the same code for other 

96
00:04:07,995 --> 00:04:10,460
validations. Let me just extract 

97
00:04:10,470 --> 00:04:14,940
this into a function. We call 

98
00:04:14,950 --> 00:04:20,170
this error label. This will take 

99
00:04:20,210 --> 00:04:24,120
a field of A and returns an 

100
00:04:24,160 --> 00:04:35,220
HTML of A. Let me place the code 

101
00:04:37,350 --> 00:04:39,830
to the just extracted. We get a 

102
00:04:39,830 --> 00:04:46,460
field and here is my field, so 

103
00:04:46,460 --> 00:04:47,550
we extract the error from the 

104
00:04:47,560 --> 00:04:54,430
field, and then we show that or 

105
00:04:54,440 --> 00:04:58,080
an empty string. Here, I''ll put 

106
00:04:58,320 --> 00:05:02,300
error label for model.email, 

107
00:05:04,620 --> 00:05:06,350
and next of the message, I''ll 

108
00:05:07,100 --> 00:05:10,590
put an error label for model.

109
00:05:12,290 --> 00:05:15,730
message. Now for the value, 

110
00:05:15,820 --> 00:05:17,770
model.email is now a field, so I 

111
00:05:17,780 --> 00:05:19,650
somehow need to extract the 

112
00:05:19,660 --> 00:05:21,390
current input. I''ll have a 

113
00:05:21,400 --> 00:05:23,120
function similar to this one 

114
00:05:24,330 --> 00:05:26,370
that are called display value 

115
00:05:28,950 --> 00:05:32,620
that takes the field of A, and 

116
00:05:32,630 --> 00:05:40,770
returns a string. Let''s switch 

117
00:05:40,780 --> 00:05:43,440
on the state of the field. If 

118
00:05:43,450 --> 00:05:46,330
it''s invalid with an error and 

119
00:05:46,340 --> 00:05:50,290
the val, and it''s just the val, 

120
00:05:54,130 --> 00:05:57,810
if it''s not validated with the 

121
00:05:57,900 --> 00:06:03,540
val that it also val. If it''s a 

122
00:06:03,540 --> 00:06:09,060
valid val, then you would like 

123
00:06:09,070 --> 00:06:12,130
to return val, but the problem 

124
00:06:12,140 --> 00:06:14,990
is that val can be any type A 

125
00:06:15,030 --> 00:06:15,960
not just the string. 

126
00:06:16,670 --> 00:06:18,280
Additionally, let''s also add the 

127
00:06:18,290 --> 00:06:20,940
function here that will render A 

128
00:06:21,540 --> 00:06:24,700
as a string. No need to call 

129
00:06:24,710 --> 00:06:29,050
this render and here it would be 

130
00:06:29,050 --> 00:06:32,550
rendered val. Let me call this "

131
00:06:32,560 --> 00:06:41,650
S" for string. Let me call this 

132
00:06:41,760 --> 00:06:43,650
A, since it''s a value of type A. 

133
00:06:45,980 --> 00:06:49,030
Here the value would be model 

134
00:06:49,110 --> 00:06:52,150
email, but let me feed this to 

135
00:06:53,180 --> 00:06:57,800
display value with identity as a 

136
00:06:57,810 --> 00:07:01,330
function, and parentheses here. 

137
00:07:02,020 --> 00:07:04,200
Let me do the same with the 

138
00:07:04,210 --> 00:07:10,210
message. I also have a type of 

139
00:07:10,220 --> 00:07:13,060
here Maybe, and let''s see what 

140
00:07:13,070 --> 00:07:15,150
breaks, so here we always need 

141
00:07:15,160 --> 00:07:20,230
to return HTML message. Now on 

142
00:07:20,305 --> 00:07:22,480
the submit response, when we 

143
00:07:22,480 --> 00:07:24,040
clear these fields we need to 

144
00:07:24,115 --> 00:07:27,130
say, "Not a validated empty 

145
00:07:27,280 --> 00:07:35,520
string." Now comes the 

146
00:07:35,530 --> 00:07:36,740
interesting part, so the actual 

147
00:07:36,750 --> 00:07:38,730
validation called. Here, we were 

148
00:07:38,740 --> 00:07:40,230
feeding the strings to these 

149
00:07:40,320 --> 00:07:42,620
validation functions, and we 

150
00:07:42,695 --> 00:07:44,210
were using results and using 

151
00:07:44,220 --> 00:07:45,920
result Math2 to combine these 

152
00:07:45,930 --> 00:07:48,080
results together. Now, model.

153
00:07:48,110 --> 00:07:50,170
email a message are of few types, 

154
00:07:50,180 --> 00:07:51,860
so that we''ll over the contain 

155
00:07:51,870 --> 00:07:53,840
validation errors, so the 

156
00:07:53,850 --> 00:07:54,990
validation has to be done 

157
00:07:55,200 --> 00:07:57,690
previously. I''ll remove these, 

158
00:07:57,700 --> 00:07:59,500
and assume I can combine these 

159
00:07:59,575 --> 00:08:02,570
with validation Math2, which we 

160
00:08:02,580 --> 00:08:05,550
need to define later. These are 

161
00:08:05,600 --> 00:08:10,950
now of type field string, and 

162
00:08:10,960 --> 00:08:14,540
field string. This is also part 

163
00:08:14,550 --> 00:08:15,950
of the problem of again comments, 

164
00:08:15,960 --> 00:08:18,000
is that they don''t cause compile 

165
00:08:18,010 --> 00:08:19,830
errors, so let me remove this. 

166
00:08:22,200 --> 00:08:23,820
However, let''s keep in mind that 

167
00:08:24,080 --> 00:08:25,720
these fields could be in the not 

168
00:08:25,730 --> 00:08:27,580
validated state, so somehow in 

169
00:08:27,590 --> 00:08:29,130
we need to force the validation 

170
00:08:29,140 --> 00:08:33,500
on the model. Let me write the 

171
00:08:33,510 --> 00:08:37,060
function and call it validate 

172
00:08:37,140 --> 00:08:41,380
model that takes the model and 

173
00:08:41,455 --> 00:08:49,310
returns an updated model. This 

174
00:08:49,320 --> 00:08:53,300
will return the model, and I''ll 

175
00:08:53,310 --> 00:08:57,480
set the email field to be model.

176
00:08:58,120 --> 00:09:01,190
email and pass in that to a 

177
00:09:01,570 --> 00:09:03,690
validate function yet to be 

178
00:09:03,860 --> 00:09:06,660
defined that validates isEmail. 

179
00:09:10,660 --> 00:09:13,060
Similarly, the message field on 

180
00:09:13,070 --> 00:09:15,290
the model will be set to model.

181
00:09:15,365 --> 00:09:20,410
mesage. This will also go 

182
00:09:20,420 --> 00:09:23,950
through validate taking as a 

183
00:09:24,025 --> 00:09:29,450
validator is not empty. The 

184
00:09:29,450 --> 00:09:31,520
idea is that, when the user 

185
00:09:31,560 --> 00:09:33,870
submits the form, we take the 

186
00:09:33,945 --> 00:09:37,590
model and we pass it this 

187
00:09:37,850 --> 00:09:41,220
validate model of function. This 

188
00:09:41,220 --> 00:09:42,570
will ensure that any fields 

189
00:09:42,670 --> 00:09:43,800
whether in the not validated 

190
00:09:43,970 --> 00:09:45,910
state or validated, so that they 

191
00:09:45,920 --> 00:09:47,830
go either into the valid or the 

192
00:09:47,870 --> 00:09:50,120
invalid state, and we pass this 

193
00:09:50,130 --> 00:09:52,980
to submit if valid. What we 

194
00:09:52,980 --> 00:09:54,510
need to do now is to implement 

195
00:09:54,550 --> 00:09:56,780
these functions validate and 

196
00:09:56,855 --> 00:09:59,640
Math2. Let me start with the 

197
00:09:59,650 --> 00:10:03,600
validate function. Let''s look 

198
00:10:03,610 --> 00:10:06,000
the signature. The first 

199
00:10:06,010 --> 00:10:07,930
argument as you can see is a 

200
00:10:08,005 --> 00:10:10,090
validator. Let''s call this 

201
00:10:10,165 --> 00:10:15,200
validator string A. I can fix 

202
00:10:15,210 --> 00:10:16,860
the first parameter to string, 

203
00:10:17,010 --> 00:10:18,490
because we''re validating values 

204
00:10:18,460 --> 00:10:20,040
that come from input fields. 

205
00:10:20,830 --> 00:10:23,140
The second argument is a field A, 

206
00:10:23,340 --> 00:10:25,480
and return value would be a 

207
00:10:25,490 --> 00:10:30,860
field A. Let me call these 

208
00:10:33,050 --> 00:10:33,500
arguments, validator, and field. 

209
00:10:33,500 --> 00:10:40,190
I''m going to switch on the field. 

210
00:10:44,270 --> 00:10:47,670
If it''s not validated with the 

211
00:10:47,270 --> 00:10:50,700
value, then we''ll apply the 

212
00:10:50,700 --> 00:10:52,780
validation, so I say, validator 

213
00:10:52,855 --> 00:10:57,610
value. Then, I''ll switch on 

214
00:10:57,620 --> 00:11:00,090
this value which is of type 

215
00:11:00,130 --> 00:11:04,400
result. If this isn''t OK with an 

216
00:11:04,410 --> 00:11:08,060
A, then I will produce a valid A. 

217
00:11:09,260 --> 00:11:11,990
If it''s an error with an error 

218
00:11:12,000 --> 00:11:14,720
message, then I will produce an 

219
00:11:15,140 --> 00:11:18,910
invalid with error as error 

220
00:11:18,920 --> 00:11:25,120
message and value as a current 

221
00:11:25,130 --> 00:11:29,680
input value. If the field is in 

222
00:11:29,720 --> 00:11:32,730
the valid or invalid case, we''ll 

223
00:11:32,730 --> 00:11:34,380
then, validation has already 

224
00:11:34,430 --> 00:11:36,870
been performed, and I can just 

225
00:11:36,880 --> 00:11:42,580
return the field as it is. Next, 

226
00:11:42,590 --> 00:11:44,040
I''m going to implement the Math2 

227
00:11:44,220 --> 00:11:51,530
function for validation. If we 

228
00:11:51,530 --> 00:11:53,440
look at the usage of Math2 over 

229
00:11:53,515 --> 00:11:55,550
here, we can see that this takes 

230
00:11:55,560 --> 00:12:00,650
a binary function, so we''ll take 

231
00:12:00,650 --> 00:12:04,900
an A, and a B, and return a C. 

232
00:12:06,630 --> 00:12:09,690
The second argument would be a 

233
00:12:09,700 --> 00:12:14,560
field of A, and a field of B, 

234
00:12:16,500 --> 00:12:17,580
and return value would be a 

235
00:12:17,590 --> 00:12:22,600
field of C. Let''s call the 

236
00:12:22,610 --> 00:12:24,980
function F, and let''s call the 

237
00:12:25,070 --> 00:12:29,100
first parameter FA and second 

238
00:12:29,110 --> 00:12:35,040
one FB. Now, I can switch on FA. 

239
00:12:39,520 --> 00:12:43,520
If this is not validated with 

240
00:12:43,530 --> 00:12:45,980
the string, then we do nothing. 

241
00:12:45,990 --> 00:12:49,470
We return not validated with the 

242
00:12:49,480 --> 00:12:56,490
same string. If it''s invalid 

243
00:12:56,490 --> 00:12:58,880
with error and S, we likewise 

244
00:12:58,955 --> 00:12:59,240
return invalid error and S. In 

245
00:12:59,250 --> 00:13:02,300
the valid case, we have an A, 

246
00:13:02,375 --> 00:13:04,250
and we can supply this A to the 

247
00:13:04,290 --> 00:13:07,010
F function. In this case, I can 

248
00:13:07,020 --> 00:13:12,320
still switch on FB. This is not 

249
00:13:12,330 --> 00:13:16,430
validated as above, similarly 

250
00:13:16,970 --> 00:13:25,530
stay, but not validated F. 

251
00:13:25,540 --> 00:13:27,920
Finally, if it''s a valid that 

252
00:13:27,930 --> 00:13:33,080
wraps a value B, then I can 

253
00:13:33,120 --> 00:13:35,900
apply it to arguments A and B to 

254
00:13:35,910 --> 00:13:37,870
the F function and wrap this 

255
00:13:37,880 --> 00:13:42,680
into a valid. This type 

256
00:13:42,690 --> 00:13:44,060
annotation is wrong, because 

257
00:13:44,070 --> 00:13:47,260
this is actually a field of 

258
00:13:47,260 --> 00:13:48,990
command message that will remove 

259
00:13:48,990 --> 00:13:50,440
this annotation as well, because 

260
00:13:50,450 --> 00:13:52,750
it''s a bit over qual. Because 

261
00:13:52,760 --> 00:13:54,530
submission result is now a field, 

262
00:13:55,160 --> 00:13:57,290
then it can be a valid with the 

263
00:13:57,300 --> 00:13:59,400
command in which case we proceed 

264
00:13:59,410 --> 00:14:02,280
to submit. In the other case, 

265
00:14:02,500 --> 00:14:04,130
we do not submit, so we''ll 

266
00:14:03,530 --> 00:14:05,300
return the unchanged model, and 

267
00:14:05,310 --> 00:14:09,600
no command to perform. As you 

268
00:14:09,600 --> 00:14:11,000
have a little compilation error, 

269
00:14:11,590 --> 00:14:12,830
where I''m constructing my error 

270
00:14:12,840 --> 00:14:15,010
labels, and this is because this 

271
00:14:15,020 --> 00:14:17,460
is a string, and I need to feed 

272
00:14:17,470 --> 00:14:21,590
this to the text function. Now, 

273
00:14:21,590 --> 00:14:23,670
my application compiles. You can 

274
00:14:23,670 --> 00:14:25,800
see that the initial state email 

275
00:14:25,800 --> 00:14:28,460
message are not validated. If I 

276
00:14:28,460 --> 00:14:31,320
try to submit, they go to 

277
00:14:31,320 --> 00:14:32,700
invalid, and we see the error 

278
00:14:32,710 --> 00:14:35,290
messages appear. Let me refresh 

279
00:14:35,300 --> 00:14:36,560
the page to go back to the 

280
00:14:36,600 --> 00:14:39,070
initial state, and let me type a 

281
00:14:39,070 --> 00:14:45,180
valid email, and click submit. 

282
00:14:46,730 --> 00:14:48,110
You can see that the field email 

283
00:14:48,120 --> 00:14:51,380
now has gone to valid with email 

284
00:14:51,420 --> 00:14:53,790
of input and message is invalid, 

285
00:14:53,800 --> 00:14:56,040
because it''s required. Let me 

286
00:14:56,040 --> 00:14:58,200
now open network tab to see, if 

287
00:14:58,360 --> 00:15:00,140
a valid message is submitted, 

288
00:15:03,140 --> 00:15:04,410
and indeed we see that it is.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '8734158b', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6254, 'Style React Components with className and inline Styles
', NULL, 'Application layout is only one part of the user interface equation. Another part is styling. In this lesson we‚Äôll explore the `className` and `style` prop for styling our components. This lesson goes much deeper than that. We‚Äôll learn why `className` is `className` and not `class` (like it is in HTML), and we‚Äôll learn why the `style` prop accepts an object of camelCase styles rather than a string of css (like it does in HTML). We‚Äôll take it even further by creating a reusable component that encapsulates these styles and composes the given `className` and `style` prop together. You‚Äôre going to love this one.

Finally, when you actually build a full application, a tool you‚Äôll find invaluable is [Tailwind.css](https://tailwindcss.com/).', 643, NULL, '2020-03-11T02:38:19.398Z', '2025-12-13T00:54:53.678Z', 'react-style-react-components-with-classname-and-inline-styles', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU/egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU.jpg', true, NULL, 'Instructor: [00:00] We have a bunch of CSS in our HTML document, and we want to style this div with that CSS. To apply that CSS, we''re going to add a className of Box to get that box around this small, light-blue box. Because we want it to be small, let''s also add a box--small, and we''ll save that.

[00:26] Then, I want it to be light blue, but we don''t have any CSS for light blue. We could add it, but I want to show you the style prop which accepts an object rather than a string of styles. We''re going to pass this object, and it will be the same property names that you get if you use getComputedStyle for this element, that is, CSS properties that are camel-cased instead of kebab-cased. 

[00:51] For us to get a background color, we''re going to say background color, and then we want lightblue. With that, we get a small, light-blue box. Let''s also add a font style italic right there. Now we have a small, light-blue box in italics.

[01:10] We also have CSS for large and medium boxes, so let''s go ahead and create some more of these boxes. We''ll make this one be medium, and using our multiple cursors here, we''ll use large for that one. Instead of light blue for our medium, let''s do pink. Instead of the light blue of our large, we''ll use orange. We''ll save that, and we have this stack of boxes.

[01:35] There''s a fair amount of duplication in these, so what I''m going to do is make a new function component called Box. This is going to take some props, and then will return a div, and we''ll spread all the props. Right now, this Box component basically functions as a div. We could replace all of these divs, with multiple cursors here, with a box. We save that, and we get the exact same result.

[02:02] Now, let''s make this box a little bit more useful by taking the repetition from each one of these and putting it within the Box component. First off, we have a className, and then it has a box--, but then the size is different. Let''s go ahead and just take the className Box. We''ll put className Box, we''ll save that. 

[02:26] Once we save that -- and we can get rid of these as well -- then we''ll notice that the Box className is no longer being applied because we''re not getting that border. We can verify that by inspecting this, looking our application. We see class Box small, but we don''t see the Box className here. Think for a moment why that might be. 

[02:48] The reason might be a little more clear if I take this spread of props and put it on the other side of the className. We save that, and now we get the opposite problem where we have the border the className Box provides, but we don''t have the small, medium, or large classNames applies. 

[03:05] The reason is, because of this spread of props, we''re getting an override of the className prop that''s being provided to the Box component. What we can do is combine the classNames into a single className that will work for all of our boxes. Instead of just taking the props object as it is, I''m going to destructure it in-place, and we''ll take the className out of here. 

[03:28] Then I''ll put a ...rest to say that these are the rest of the props. Then we''ll remove this, and we''ll put the spread at the end. Then we''ll manually combine the className that we want to provide for boxes in general with the className that''s provided to us through the props.

[03:46] We''ll make a template literal here. We''ll say Box, and then we''ll put className. We''ll save that, and now everything''s working as it should be. One problem here is that if I take off the className on one of these boxes, then I''m going to get "box undefined." 

[04:03] That''s probably not areally big issue, but it''s pretty simple to fix by adding a default value for this className to be an empty string. Now we get Box with a space. I''m not as worried about the space. If you were, then you could add a .trim right here, and that would get rid of our space. I don''t think that''s a big deal, so we''ll get rid of that. Let''s restore this small box to its former glory.

[04:26] The other thing that''s common across all these boxes is the font style italic. Let''s have that be provided here. We''ll say style fontStyle italic. With that, we can now remove the font style from all of these. We''ll save that, and we''ve made things a lot more terse for users of this box component.

[04:47] You might notice we no longer have that font style of italic. The reason that''s happening is the exact same as with the className. If I move this rest up here before the style, now we''re going to get the italic, but we won''t get the custom styles that the user of our box component is trying to specify.

[05:04] Again, we do need to compose these manually. I''m going to pluck off the style prop from our props here, and we''ll combine the style prop from those with the style prop that we specify by using object spread syntax. Then I''m going to put rest at the bottom here again. 

[05:23] We''ll save that, and we get our italics and we get our special color, which is exactly what we''re looking for. Now anyone that wants to have a box can use this component, and it will have the Box className and italics applied automatically for them. 

[05:39] One useful feature of creating components like this is we can use it to separate our user code from the styling concerns of our specific component. Rather than a className, it would actually be better to accept a size prop. We could say the size is small, medium, or large. 

[05:57] Let''s make that work. I''ll remove the className here. We''ll save this. Let''s scroll up to the top, and we''ll see that our small, light-blue box is no longer small. Now I''m going to take the size prop, and we''re going to generate a size className. If the size prop is specified, then we''ll say box--size. Otherwise, we''ll do an empty string.

[06:24] Then we can put that size className inside of our className list here. If we save that, then we get a small, light-blue box, and users of our box component no longer need to concern themselves with the className that needs to be applied to create a small box. 

[06:41] This Box component can deal with the implementation details of what it takes to make a small box. This means that we could change the classNames that we use. We could use a third-party CSS library, and we could change that CSS library. Any component that''s using the box just needs to follow the API that the box creates for it. 

[06:59] We can separate our components from the classNames used to style them. That said, we can still apply our own classNames if we want to, and we can apply our styles if we want to because those are going to be combined with whatever is happening in the box. Let''s go ahead and update the classNames for both of these because I like the size prop better. 

[07:20] We''ll save that, and now we have a small, light-blue box, a medium pink box, and a large orange box with a reusable Box component that merges the className, the style prop, forwards along all of the props, like the children prop that we''re passing for each one of these, and accepts a special size prop so that you can size the box appropriately.

[07:43] One thing that I want to note here about the className prop in HTML. We would normally use class instead of className. ClassName is the dom property that you use to access the class attribute on dom nodes. If we go here and say $0which will access the element that we have currently selected in our elements tab, then we can say .className, and that will give us that className list.

[08:09] In addition, if we were to take all of our props and make a props object here, we just move all of this right here, convert it to JavaScript rather than JSX syntax, and then spread those props. That will work just as well. Then let''s say that this were class instead of className.

[08:29] If we wanted to extract this and use shorthand syntax here, then we''d make it class variable. This wouldn''t work because class is a reserved word. In addition, if we wanted to leave this here and then destructure the class property from the props, then this also wouldn''t work because class is a reserved keyword as well. For that reason and others, it is the className prop rather than the class prop. 

[08:56] One thing that I really like about this style prop being an object of styles rather than a string of styles is because it''s a lot easier to combine objects of styles. With className, we have a string. I don''t mind that because the order in which I apply these classNames has no bearing on which one of these is going to be applied. 

[09:13] However, the order in which I apply these styles does have a bearing in what''s going to be applied. If I were to apply this first, then there''d be no way for me, as a user of the box component, to override that to control what styles are actually going to be applied.

[09:27] Let''s put everything back where it was and review. We had a bunch of CSS that we wanted to apply to our divs here to make a small, light-blue box, a medium pink box, and a large orange box. We did that manually by making divs for each one of these and applying the appropriate classNames and style value.

[09:45] Then, in an effort to reduce duplication, we created this function component called Box, which accepts a className, combines that with the className necessary to make a box, accepts a style prop, and combines that with the style necessary to make a box with a font style of italic. 

[10:02] Also accepting a size prop to separate the code for the users of the Box component from the code necessary to make a box of that specified style. Then we take the rest of the props, and spread that on the underlying div so that users can provide additional props like ID is root as well as the children prop for the contents of the box.

[10:24] One last thing that I want to show you is Tailwind CSS, which I recommend you take a look at for building consistent user interfaces. Definitely give this a look for building and styling your applications. You can apply the same principles that we learned to building custom components that utilize these classNames.', NULL, false, '11-egghead-react-style-react-components-with-classname-and-inline-styles.mp4', 11, true, false, 160, '---
mp4: 77541929
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU/egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU.mp4', 'egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU', 'zcji', 'https://egghead-pipeline.s3.amazonaws.com/egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU/egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU.mp3?d23a17fde9b5258d?5cf2', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.681Z', NULL, 8388599, NULL, 7809, 0, NULL, -6474163, '8813a6d4de384b3ca0e258df0c87bfc8', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/10-styling?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 392495236, '1
00:00:00,470 --> 00:00:03,040
We have a bunch of CSS in our 

2
00:00:03,130 --> 00:00:05,170
HTML document, and we want to 

3
00:00:05,170 --> 00:00:09,900
style this div with that CSS. To 

4
00:00:09,950 --> 00:00:11,580
apply that CSS, we''re going to 

5
00:00:11,580 --> 00:00:15,540
add a className of Box to get 

6
00:00:15,540 --> 00:00:17,780
that box around this small, 

7
00:00:17,810 --> 00:00:20,020
light-blue box. Because we want 

8
00:00:20,020 --> 00:00:21,920
it to be small, let''s also add a 

9
00:00:21,920 --> 00:00:25,450
box--small, and we''ll save that. 

10
00:00:26,280 --> 00:00:27,960
Then, I want it to be light blue, 

11
00:00:27,960 --> 00:00:29,580
but we don''t have any CSS for 

12
00:00:29,580 --> 00:00:31,290
light blue. We could add it, but 

13
00:00:31,290 --> 00:00:32,630
I want to show you the style 

14
00:00:32,630 --> 00:00:34,820
prop which accepts an object 

15
00:00:35,130 --> 00:00:37,600
rather than a string of styles. 

16
00:00:38,010 --> 00:00:39,240
We''re going to pass this object, 

17
00:00:39,610 --> 00:00:41,220
and it will be the same property 

18
00:00:41,220 --> 00:00:43,190
names that you get if you use 

19
00:00:43,190 --> 00:00:44,540
getComputedStyle for this 

20
00:00:44,540 --> 00:00:47,520
element, that is, CSS properties 

21
00:00:47,710 --> 00:00:49,430
that are camel-cased instead of 

22
00:00:49,430 --> 00:00:52,360
kebab-cased. For us to get a 

23
00:00:52,360 --> 00:00:53,670
background color, we''re going to 

24
00:00:53,670 --> 00:00:56,530
say background color, and then 

25
00:00:56,530 --> 00:00:59,370
we want lightblue. With that, we 

26
00:00:59,370 --> 00:01:01,730
get a small, light-blue box. 

27
00:01:02,230 --> 00:01:04,410
Let''s also add a font style 

28
00:01:05,070 --> 00:01:07,890
italic right there. Now we have 

29
00:01:07,890 --> 00:01:09,400
a small, light-blue box in 

30
00:01:09,400 --> 00:01:11,930
italics. We also have CSS for 

31
00:01:11,930 --> 00:01:14,070
large and medium boxes, so let''s 

32
00:01:14,070 --> 00:01:16,290
go ahead and create some more of 

33
00:01:16,290 --> 00:01:18,840
these boxes. We''ll make this one 

34
00:01:18,840 --> 00:01:21,430
be medium, and using our 

35
00:01:21,430 --> 00:01:23,080
multiple cursors here, we''ll use 

36
00:01:23,080 --> 00:01:25,720
large for that one. Instead of 

37
00:01:25,720 --> 00:01:27,110
light blue for our medium, let''s 

38
00:01:27,110 --> 00:01:29,730
do pink. Instead of the light 

39
00:01:29,730 --> 00:01:31,830
blue of our large, we''ll use 

40
00:01:31,940 --> 00:01:33,900
orange. We''ll save that, and we 

41
00:01:33,900 --> 00:01:35,640
have this stack of boxes. 

42
00:01:35,950 --> 00:01:36,690
There''s a fair amount of 

43
00:01:36,710 --> 00:01:38,470
duplication in these, so what 

44
00:01:38,470 --> 00:01:40,140
I''m going to do is make a new 

45
00:01:40,140 --> 00:01:43,570
function component called Box. 

46
00:01:43,570 --> 00:01:45,620
This is going to take some props, 

47
00:01:46,110 --> 00:01:48,800
and then will return a div, and 

48
00:01:48,800 --> 00:01:50,080
we''ll spread all the props. 

49
00:01:50,750 --> 00:01:52,320
Right now, this Box component 

50
00:01:52,320 --> 00:01:55,260
basically functions as a div. We 

51
00:01:55,260 --> 00:01:57,210
could replace all of these divs, 

52
00:01:57,580 --> 00:01:59,250
with multiple cursors here, with 

53
00:01:59,250 --> 00:02:01,230
a box. We save that, and we get 

54
00:02:01,230 --> 00:02:03,280
the exact same result. Now, 

55
00:02:03,280 --> 00:02:04,960
let''s make this box a little bit 

56
00:02:04,960 --> 00:02:07,110
more useful by taking the 

57
00:02:07,110 --> 00:02:08,590
repetition from each one of 

58
00:02:08,590 --> 00:02:10,590
these and putting it within the 

59
00:02:10,590 --> 00:02:12,880
Box component. First off, we 

60
00:02:12,880 --> 00:02:14,450
have a className, and then it 

61
00:02:14,450 --> 00:02:17,640
has a box--, but then the size 

62
00:02:17,700 --> 00:02:19,100
is different. Let''s go ahead and 

63
00:02:19,100 --> 00:02:20,770
just take the className Box. 

64
00:02:22,010 --> 00:02:23,600
We''ll put className Box, we''ll 

65
00:02:23,600 --> 00:02:27,240
save that. Once we save that -- 

66
00:02:27,600 --> 00:02:28,810
and we can get rid of these as 

67
00:02:28,810 --> 00:02:30,830
well -- then we''ll notice that 

68
00:02:30,830 --> 00:02:32,390
the Box className is no longer 

69
00:02:32,390 --> 00:02:33,940
being applied because we''re not 

70
00:02:33,940 --> 00:02:35,560
getting that border. We can 

71
00:02:35,560 --> 00:02:37,450
verify that by inspecting this, 

72
00:02:37,640 --> 00:02:40,220
looking our application. We see 

73
00:02:40,450 --> 00:02:42,580
class Box small, but we don''t 

74
00:02:42,580 --> 00:02:44,930
see the Box className here. 

75
00:02:45,770 --> 00:02:47,000
Think for a moment why that 

76
00:02:47,000 --> 00:02:49,040
might be. The reason might 

77
00:02:49,040 --> 00:02:50,330
be a little more clear if I take 

78
00:02:50,330 --> 00:02:51,760
this spread of props and put it 

79
00:02:51,820 --> 00:02:52,790
on the other side of the 

80
00:02:52,790 --> 00:02:54,670
className. We save that, and now 

81
00:02:54,670 --> 00:02:56,010
we get the opposite problem 

82
00:02:56,390 --> 00:02:58,420
where we have the border the 

83
00:02:58,420 --> 00:03:01,260
className Box provides, but we 

84
00:03:01,260 --> 00:03:03,150
don''t have the small, medium, or 

85
00:03:03,150 --> 00:03:04,450
large classNames applies. 

86
00:03:05,530 --> 00:03:07,170
The reason is, because of this 

87
00:03:07,170 --> 00:03:08,820
spread of props, we''re getting 

88
00:03:08,890 --> 00:03:10,500
an override of the className 

89
00:03:10,500 --> 00:03:12,320
prop that''s being provided to 

90
00:03:12,320 --> 00:03:14,280
the Box component. What we can 

91
00:03:14,280 --> 00:03:16,600
do is combine the classNames 

92
00:03:16,600 --> 00:03:18,370
into a single className that 

93
00:03:18,370 --> 00:03:20,220
will work for all of our boxes. 

94
00:03:21,000 --> 00:03:22,430
Instead of just taking the props 

95
00:03:22,490 --> 00:03:24,230
object as it is, I''m going to 

96
00:03:24,230 --> 00:03:25,880
destructure it in-place, and 

97
00:03:25,880 --> 00:03:27,660
we''ll take the className out of 

98
00:03:27,720 --> 00:03:29,260
here. Then I''ll put a ...

99
00:03:29,830 --> 00:03:32,160
rest to say that these are the 

100
00:03:32,160 --> 00:03:33,800
rest of the props. Then we''ll 

101
00:03:33,800 --> 00:03:35,760
remove this, and we''ll put the 

102
00:03:35,760 --> 00:03:38,130
spread at the end. Then we''ll 

103
00:03:38,130 --> 00:03:40,190
manually combine the className 

104
00:03:40,340 --> 00:03:41,610
that we want to provide for 

105
00:03:41,610 --> 00:03:43,280
boxes in general with the 

106
00:03:43,280 --> 00:03:45,060
className that''s provided to us 

107
00:03:45,060 --> 00:03:46,600
through the props. We''ll make 

108
00:03:46,600 --> 00:03:48,740
a template literal here. We''ll 

109
00:03:48,740 --> 00:03:50,350
say Box, and then we''ll put 

110
00:03:50,520 --> 00:03:53,980
className. We''ll save that, and 

111
00:03:53,980 --> 00:03:55,620
now everything''s working as it 

112
00:03:55,620 --> 00:03:57,730
should be. One problem here is 

113
00:03:57,730 --> 00:03:59,470
that if I take off the className 

114
00:03:59,470 --> 00:04:01,270
on one of these boxes, then I''m 

115
00:04:01,270 --> 00:04:02,890
going to get "box undefined." 

116
00:04:03,220 --> 00:04:04,810
That''s probably not areally big 

117
00:04:04,810 --> 00:04:06,300
issue, but it''s pretty simple to 

118
00:04:06,300 --> 00:04:08,400
fix by adding a default value 

119
00:04:08,400 --> 00:04:10,280
for this className to be an 

120
00:04:10,280 --> 00:04:12,280
empty string. Now we get Box 

121
00:04:12,330 --> 00:04:14,300
with a space. I''m not as worried 

122
00:04:14,300 --> 00:04:15,820
about the space. If you were, 

123
00:04:15,820 --> 00:04:18,060
then you could add a .trim right 

124
00:04:18,060 --> 00:04:19,490
here, and that would get rid of 

125
00:04:19,490 --> 00:04:21,540
our space. I don''t think that''s 

126
00:04:21,540 --> 00:04:22,630
a big deal, so we''ll get rid of 

127
00:04:22,630 --> 00:04:24,800
that. Let''s restore this small 

128
00:04:24,800 --> 00:04:26,810
box to its former glory. The 

129
00:04:26,870 --> 00:04:28,050
other thing that''s common across 

130
00:04:28,050 --> 00:04:29,490
all these boxes is the font 

131
00:04:29,490 --> 00:04:31,720
style italic. Let''s have that be 

132
00:04:31,720 --> 00:04:34,070
provided here. We''ll say style 

133
00:04:34,920 --> 00:04:38,120
fontStyle italic. With that, we 

134
00:04:38,120 --> 00:04:40,020
can now remove the font style 

135
00:04:40,020 --> 00:04:41,730
from all of these. We''ll save 

136
00:04:41,730 --> 00:04:43,810
that, and we''ve made things a 

137
00:04:43,810 --> 00:04:45,930
lot more terse for users of this 

138
00:04:45,930 --> 00:04:47,630
box component. You might 

139
00:04:47,630 --> 00:04:49,530
notice we no longer have that 

140
00:04:49,530 --> 00:04:52,000
font style of italic. The reason 

141
00:04:52,000 --> 00:04:53,440
that''s happening is the exact 

142
00:04:53,440 --> 00:04:55,200
same as with the className. If I 

143
00:04:55,200 --> 00:04:57,230
move this rest up here before 

144
00:04:57,230 --> 00:04:58,660
the style, now we''re going to 

145
00:04:58,660 --> 00:05:00,430
get the italic, but we won''t get 

146
00:05:00,430 --> 00:05:02,640
the custom styles that the user 

147
00:05:02,640 --> 00:05:03,910
of our box component is trying 

148
00:05:03,910 --> 00:05:06,090
to specify. Again, we do need 

149
00:05:06,090 --> 00:05:08,440
to compose these manually. I''m 

150
00:05:08,440 --> 00:05:10,880
going to pluck off the style 

151
00:05:10,960 --> 00:05:13,420
prop from our props here, and 

152
00:05:13,420 --> 00:05:15,390
we''ll combine the style prop 

153
00:05:15,390 --> 00:05:17,580
from those with the style prop 

154
00:05:17,580 --> 00:05:19,890
that we specify by using object 

155
00:05:19,890 --> 00:05:21,660
spread syntax. Then I''m going to 

156
00:05:21,660 --> 00:05:22,910
put rest at the bottom here 

157
00:05:22,910 --> 00:05:25,460
again. We''ll save that, and 

158
00:05:25,460 --> 00:05:27,390
we get our italics and we get 

159
00:05:27,390 --> 00:05:29,210
our special color, which is 

160
00:05:29,210 --> 00:05:30,400
exactly what we''re looking for. 

161
00:05:30,880 --> 00:05:32,320
Now anyone that wants to have a 

162
00:05:32,400 --> 00:05:34,280
box can use this component, and 

163
00:05:34,280 --> 00:05:35,780
it will have the Box className 

164
00:05:36,070 --> 00:05:37,390
and italics applied 

165
00:05:37,390 --> 00:05:39,810
automatically for them. One 

166
00:05:39,810 --> 00:05:41,190
useful feature of creating 

167
00:05:41,190 --> 00:05:42,670
components like this is we can 

168
00:05:42,670 --> 00:05:44,770
use it to separate our user code 

169
00:05:45,120 --> 00:05:47,310
from the styling concerns of our 

170
00:05:47,310 --> 00:05:49,630
specific component. Rather than 

171
00:05:49,860 --> 00:05:51,230
a className, it would actually 

172
00:05:51,230 --> 00:05:53,610
be better to accept a size prop. 

173
00:05:54,050 --> 00:05:55,680
We could say the size is small, 

174
00:05:55,890 --> 00:05:58,040
medium, or large. Let''s make 

175
00:05:58,080 --> 00:05:59,100
that work. I''ll remove the 

176
00:05:59,100 --> 00:06:01,120
className here. We''ll save this. 

177
00:06:01,210 --> 00:06:03,040
Let''s scroll up to the top, and 

178
00:06:03,040 --> 00:06:04,440
we''ll see that our small, light-

179
00:06:04,440 --> 00:06:07,010
blue box is no longer small. Now 

180
00:06:07,010 --> 00:06:09,090
I''m going to take the size prop, 

181
00:06:09,490 --> 00:06:11,100
and we''re going to generate a 

182
00:06:11,290 --> 00:06:14,980
size className. If the size prop 

183
00:06:15,020 --> 00:06:18,370
is specified, then we''ll say box--

184
00:06:19,570 --> 00:06:22,720
size. Otherwise, we''ll do an 

185
00:06:22,760 --> 00:06:25,160
empty string. Then we can put 

186
00:06:25,160 --> 00:06:27,360
that size className inside of 

187
00:06:27,360 --> 00:06:28,960
our className list here. If we 

188
00:06:28,960 --> 00:06:31,220
save that, then we get a small, 

189
00:06:31,220 --> 00:06:33,580
light-blue box, and users of our 

190
00:06:33,580 --> 00:06:35,400
box component no longer need to 

191
00:06:35,400 --> 00:06:36,870
concern themselves with the 

192
00:06:36,870 --> 00:06:37,960
className that needs to be 

193
00:06:37,960 --> 00:06:40,630
applied to create a small box. 

194
00:06:41,060 --> 00:06:42,570
This Box component can deal with 

195
00:06:42,570 --> 00:06:44,240
the implementation details of 

196
00:06:44,240 --> 00:06:45,860
what it takes to make a small 

197
00:06:45,860 --> 00:06:47,420
box. This means that we could 

198
00:06:47,420 --> 00:06:48,630
change the classNames that we 

199
00:06:48,630 --> 00:06:50,500
use. We could use a third-party 

200
00:06:50,500 --> 00:06:52,220
CSS library, and we could change 

201
00:06:52,220 --> 00:06:54,420
that CSS library. Any component 

202
00:06:54,420 --> 00:06:56,210
that''s using the box just needs 

203
00:06:56,210 --> 00:06:58,390
to follow the API that the box 

204
00:06:58,570 --> 00:06:59,930
creates for it. We can 

205
00:06:59,930 --> 00:07:01,510
separate our components from the 

206
00:07:01,510 --> 00:07:03,080
classNames used to style them. 

207
00:07:03,420 --> 00:07:05,080
That said, we can still apply 

208
00:07:05,110 --> 00:07:07,020
our own classNames if we want to, 

209
00:07:07,310 --> 00:07:09,240
and we can apply our styles if 

210
00:07:09,240 --> 00:07:10,830
we want to because those are 

211
00:07:10,830 --> 00:07:12,470
going to be combined with 

212
00:07:12,470 --> 00:07:14,780
whatever is happening in the box. 

213
00:07:15,030 --> 00:07:16,420
Let''s go ahead and update the 

214
00:07:16,420 --> 00:07:17,700
classNames for both of these 

215
00:07:17,700 --> 00:07:18,890
because I like the size prop 

216
00:07:18,890 --> 00:07:22,500
better. We''ll save that, and 

217
00:07:22,500 --> 00:07:23,720
now we have a small, light-blue 

218
00:07:23,720 --> 00:07:25,590
box, a medium pink box, and a 

219
00:07:25,590 --> 00:07:28,420
large orange box with a reusable 

220
00:07:28,420 --> 00:07:30,470
Box component that merges the 

221
00:07:30,470 --> 00:07:32,670
className, the style prop, 

222
00:07:32,890 --> 00:07:34,460
forwards along all of the props, 

223
00:07:34,980 --> 00:07:36,160
like the children prop that 

224
00:07:36,160 --> 00:07:37,130
we''re passing for each one of 

225
00:07:37,130 --> 00:07:38,970
these, and accepts a special 

226
00:07:38,970 --> 00:07:40,900
size prop so that you can size 

227
00:07:40,900 --> 00:07:43,280
the box appropriately. One 

228
00:07:43,280 --> 00:07:44,520
thing that I want to note here 

229
00:07:44,590 --> 00:07:47,050
about the className prop in HTML. 

230
00:07:47,050 --> 00:07:48,800
We would normally use class 

231
00:07:49,230 --> 00:07:51,810
instead of className. ClassName 

232
00:07:51,810 --> 00:07:53,910
is the dom property that you use 

233
00:07:54,070 --> 00:07:56,090
to access the class attribute on 

234
00:07:56,120 --> 00:07:58,960
dom nodes. If we go here and say $

235
00:07:59,035 --> 00:08:01,260
0which will access the element 

236
00:08:01,260 --> 00:08:03,020
that we have currently selected 

237
00:08:03,440 --> 00:08:05,200
in our elements tab, then we can 

238
00:08:05,200 --> 00:08:07,520
say .className, and that will 

239
00:08:07,520 --> 00:08:09,190
give us that className list. 

240
00:08:09,420 --> 00:08:10,880
In addition, if we were to take 

241
00:08:10,880 --> 00:08:13,530
all of our props and make a 

242
00:08:13,530 --> 00:08:15,810
props object here, we just move 

243
00:08:15,810 --> 00:08:17,640
all of this right here, convert 

244
00:08:17,640 --> 00:08:19,700
it to JavaScript rather than JSX 

245
00:08:19,800 --> 00:08:22,990
syntax, and then spread those 

246
00:08:22,990 --> 00:08:25,150
props. That will work just as 

247
00:08:25,150 --> 00:08:26,850
well. Then let''s say that this 

248
00:08:26,850 --> 00:08:28,660
were class instead of className. 

249
00:08:29,010 --> 00:08:30,540
If we wanted to extract this and 

250
00:08:30,540 --> 00:08:32,620
use shorthand syntax here, then 

251
00:08:32,620 --> 00:08:34,190
we''d make it class variable. 

252
00:08:35,120 --> 00:08:36,870
This wouldn''t work because class 

253
00:08:36,870 --> 00:08:39,240
is a reserved word. In addition, 

254
00:08:39,560 --> 00:08:41,240
if we wanted to leave this here 

255
00:08:42,210 --> 00:08:44,650
and then destructure the class 

256
00:08:44,720 --> 00:08:47,340
property from the props, then 

257
00:08:47,340 --> 00:08:48,670
this also wouldn''t work because 

258
00:08:48,670 --> 00:08:50,280
class is a reserved keyword as 

259
00:08:50,280 --> 00:08:52,590
well. For that reason and others, 

260
00:08:52,880 --> 00:08:55,190
it is the className prop rather 

261
00:08:55,190 --> 00:08:56,690
than the class prop. One 

262
00:08:56,690 --> 00:08:57,900
thing that I really like about 

263
00:08:57,900 --> 00:08:59,610
this style prop being an object 

264
00:08:59,610 --> 00:09:01,740
of styles rather than a string 

265
00:09:01,740 --> 00:09:03,420
of styles is because it''s a lot 

266
00:09:03,420 --> 00:09:04,970
easier to combine objects of 

267
00:09:04,970 --> 00:09:06,400
styles. With className, we have 

268
00:09:06,400 --> 00:09:07,740
a string. I don''t mind that 

269
00:09:07,740 --> 00:09:09,050
because the order in which I 

270
00:09:09,050 --> 00:09:10,710
apply these classNames has no 

271
00:09:10,710 --> 00:09:12,310
bearing on which one of these is 

272
00:09:12,310 --> 00:09:13,900
going to be applied. However, 

273
00:09:13,900 --> 00:09:15,130
the order in which I apply these 

274
00:09:15,130 --> 00:09:16,770
styles does have a bearing in 

275
00:09:16,770 --> 00:09:18,390
what''s going to be applied. If I 

276
00:09:18,460 --> 00:09:20,170
were to apply this first, then 

277
00:09:20,170 --> 00:09:22,040
there''d be no way for me, as a 

278
00:09:22,040 --> 00:09:23,560
user of the box component, to 

279
00:09:23,560 --> 00:09:25,390
override that to control what 

280
00:09:25,390 --> 00:09:26,580
styles are actually going to be 

281
00:09:26,580 --> 00:09:28,550
applied. Let''s put everything 

282
00:09:28,550 --> 00:09:30,980
back where it was and review. We 

283
00:09:30,980 --> 00:09:32,370
had a bunch of CSS that we 

284
00:09:32,370 --> 00:09:34,720
wanted to apply to our divs here 

285
00:09:34,840 --> 00:09:36,230
to make a small, light-blue box, 

286
00:09:36,230 --> 00:09:37,700
a medium pink box, and a large 

287
00:09:37,770 --> 00:09:39,930
orange box. We did that manually 

288
00:09:39,930 --> 00:09:41,590
by making divs for each one of 

289
00:09:41,590 --> 00:09:42,600
these and applying the 

290
00:09:42,600 --> 00:09:44,330
appropriate classNames and style 

291
00:09:44,330 --> 00:09:46,630
value. Then, in an effort to 

292
00:09:46,630 --> 00:09:48,470
reduce duplication, we created 

293
00:09:48,470 --> 00:09:50,430
this function component called 

294
00:09:50,460 --> 00:09:52,580
Box, which accepts a className, 

295
00:09:52,700 --> 00:09:54,180
combines that with the className 

296
00:09:54,180 --> 00:09:56,160
necessary to make a box, accepts 

297
00:09:56,160 --> 00:09:58,000
a style prop, and combines that 

298
00:09:58,000 --> 00:09:59,900
with the style necessary to make 

299
00:10:00,000 --> 00:10:01,540
a box with a font style of 

300
00:10:01,540 --> 00:10:03,570
italic. Also accepting a 

301
00:10:03,570 --> 00:10:05,480
size prop to separate the code 

302
00:10:05,480 --> 00:10:06,750
for the users of the Box 

303
00:10:06,750 --> 00:10:08,160
component from the code 

304
00:10:08,160 --> 00:10:10,140
necessary to make a box of that 

305
00:10:10,140 --> 00:10:12,250
specified style. Then we take 

306
00:10:12,280 --> 00:10:13,650
the rest of the props, and 

307
00:10:13,650 --> 00:10:15,430
spread that on the underlying 

308
00:10:15,430 --> 00:10:17,620
div so that users can provide 

309
00:10:17,770 --> 00:10:20,390
additional props like ID is root 

310
00:10:20,750 --> 00:10:22,570
as well as the children prop for 

311
00:10:22,570 --> 00:10:24,590
the contents of the box. One 

312
00:10:24,590 --> 00:10:25,570
last thing that I want to show 

313
00:10:25,570 --> 00:10:28,060
you is Tailwind CSS, which I 

314
00:10:28,060 --> 00:10:30,180
recommend you take a look at for 

315
00:10:30,180 --> 00:10:31,650
building consistent user 

316
00:10:31,650 --> 00:10:33,580
interfaces. Definitely give this 

317
00:10:33,580 --> 00:10:35,040
a look for building and styling 

318
00:10:35,040 --> 00:10:37,080
your applications. You can apply 

319
00:10:37,080 --> 00:10:38,170
the same principles that we 

320
00:10:38,170 --> 00:10:39,820
learned to building custom 

321
00:10:39,820 --> 00:10:41,720
components that utilize these 

322
00:10:41,795 --> 00:10:42,120
classNames.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- The application layout is only one part of the user interface equation. Another part is **styling**.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <style>
    .box {
      border: 1px solid #333;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
    }
    .box--large {
      width: 270px;
      height: 270px;
    }
    .box--medium {
      width: 180px;
      height: 180px;
    }
    .box--small {
      width: 90px;
      height: 90px;
    }
  </style>
  <script type="text/babel">
    function Box({ style, size, className = '''', ...rest }) {
      const sizeClassName = size ? `box--${size}` : '''';
      return (
        <div
          className={`box ${className} ${sizeClassName}`}
          style={{ fontStyle: ''italic'', ...style }}
          {...rest}
        />
      );
    }

    const element = (
      <div>
        <Box size="small" style={{ backgroundColor: ''lightblue'' }}>
          small lightblue box
        </Box>
        <Box size="medium" style={{ backgroundColor: ''pink'' }}>
          medium pink box
        </Box>
        <Box size="large" style={{ backgroundColor: ''orange'' }}>
          large orange box
        </Box>
        <Box>sizeless box</Box>
      </div>
    );

    ReactDOM.render(element, document.getElementById(''root''));
  </script>
</body>
```

- One of the most basic ways to style React components is with inline CSS. JSX elements can take a style attribute which takes in an object:

```js
const element = (
  <div>
    <div
      className="box box--small"
      style={{ fontStyle: ''italic'', backgroundColor: ''lightblue'' }}
    >
      small lightblue box
    </div>
  </div>
);
```

- The style property is wrapped in **two sets of curly braces**, one to interpolate JavaScript and the second to define the object.

```js
function Box({ style, size, className = '''', ...rest }) {
  return (
    <div
      className={`box ${className}`}
      style={{ fontStyle: ''italic'', ...style }}
      {...rest}
    />
  );
}
```

The next thing we''ll do is make a reusable Box component. It would be better if the author could just define a size like `small`, `medium` or `large`. In this example we destructure size instead of `className`. That''s why we could replace `className` with a size property that takes in a string:

```js
function Box({ style, size, className = '''', ...rest }) {
  const sizeClassName = size ? `box--${size}` : '''';
  return (
    <div
      className={`box ${className} ${sizeClassName}`}
      style={{ fontStyle: ''italic'', ...style }}
      {...rest}
    />
  );
}

const element = (
  <div>
    <Box size="small" style={{ backgroundColor: ''lightblue'' }}>
      small lightblue box
    </Box>
    <Box size="medium" style={{ backgroundColor: ''pink'' }}>
      medium pink box
    </Box>
    <Box size="large" style={{ backgroundColor: ''orange'' }}>
      large orange box
    </Box>
    <Box>sizeless box</Box>
  </div>
);
```

## Additional resource

- [Tailwind CSS Docs](https://tailwindcss.com)
- [styled-components](https://github.com/styled-components/styled-components)
- [React Docs - Styling and CSS](https://reactjs.org/docs/faq-styling.html)
- [Why do I have to use "className" instead of "class" in ReactJs components done in JSX?](https://www.quora.com/Why-do-I-have-to-use-className-instead-of-class-in-ReactJs-components-done-in-JSX-JSX-is-preprocessed-so-shouldnt-that-conversion-happen-when-JSX-is-converted-to-JavaScript)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'd8ba710d', 'https://d2c5owlt6rorc3.cloudfront.net/egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU/dash/egghead-v2-10-style-react-components-with-classname-and-inline-styles-B1QzWK8rU.mpd', 'https://stream.mux.com/NOrv800NU9W6t8M36KXgI2J2LkUwVjFvVHDGlIA8BKQw.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/10-react-style-react-components-with-classname-and-inline-styles.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2882, 'Validate All Fields in an Elm Form Using Applicatives', NULL, 'We have run into the problem of of having too many inputs and `map2` only being a binary function. We could make a ternary `map3` function but eventually we''ll run into the same issue. 

In this lesson we''ll learn to write a function that will validate an arbitrary number of fields on the form, and compute an overall result that tells you whether the form is valid as a whole. ', 360, NULL, '2017-12-17T22:24:13.083Z', '2023-08-08T00:08:21.920Z', 'elm-validate-all-fields-in-an-elm-form-using-applicatives', NULL, 'vjw7jiwvgx', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM/egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_vjw7jiwvgx" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM.mp4" /><meta itemprop="duration" content="PT6M" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/a1a8c1a763547ebb0676d86e49bd0548977f5607.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/632470e80a1c99e25b70a8327433b8df2f3db8e2.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=360.72&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fa1a8c1a763547ebb0676d86e49bd0548977f5607.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F632470e80a1c99e25b70a8327433b8df2f3db8e2.bin" /><meta itemprop="uploadDate" content="2017-12-17T14:30:20Z" /><object id="wistia_vjw7jiwvgx_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=360.72&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fa1a8c1a763547ebb0676d86e49bd0548977f5607.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F632470e80a1c99e25b70a8327433b8df2f3db8e2.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=360.72&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fa1a8c1a763547ebb0676d86e49bd0548977f5607.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F632470e80a1c99e25b70a8327433b8df2f3db8e2.bin" name="wistia_vjw7jiwvgx_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("vjw7jiwvgx", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/vjw7jiwvgx/metadata.js"></script>', 'Instructor: [00:01] Let me now add another field to the form. Since the fields we''ve added so far were both strings, let''s do something else and add a field of type int. Let''s call this Age. We''re asking the user to enter their age into the form.

[00:17] The initial value, of course, will be empty and not validated. Let''s have a message, "input age" and let''s handle this message here, so when the input age changes, the age on the model goes to "not validated."

[00:45] When we validate the model, we want to validate that the age is an actual number. isNatural is a function that we defined in the previous lesson.

[01:06] Let me create a visual element to represent the age. This would be an input with a placeholder, "your age." This will raise a message of type input age.

[01:19] The current value would be model.age, and we display the value. Here, instead of the identify function, we use toString to convert an int to a string. We''ll pass the model.age field to get the proper error, and this is really it.

[01:34] You can see that in the form we have a new field of type age. If you say, "Hello," and submit, we get a validation error here, as well as the previous fields. So far, so good.

[01:49] What we still need to do is to send the age into our message to the back end. Here we would add a new field to our request body with the name age.

[02:00] Here, we would use encode int, age, and we would need an extra parameter age that is of type int. This is where we will have a problem. We were calling map2 with submit as a binary function, and model.email and message as the arguments.

[02:19] Somehow what we''d like to say is now submit takes another parameter. Let me just add this here, model.age. These parentheses are not required.

[02:36] Of course, this also doesn''t compile. This is because if I open the definition of map2, you can see it expects a binary function and now we have submit defined as a ternary function.

[02:49] One possibility would be to define a new function map3 that takes a ternary function. Then, of course, we would run into the same problem. We would need to define map4, map5, depending on how many fields we have.

[03:02] Let me introduce a different approach. Imagine that we have a function called Apply. It takes a value of type A, and then it takes a function fromAtoB and returns a B.

[03:19] We could call the first parameter A and the second F. The way to implement this would be to say simply F, A. We''ll apply the given function to the given argument, and we get the required results.

[03:30] The interesting thing is that, because of how function application works in Elm, even though we are here defining this as a unary function, this could really be any function. For example, if I had a function F that takes three ints and returns a result of int, also, then I could say take F and apply one, then apply two, and then apply three. If you look at this for a while, this is exactly the same as saying F, one, two, three. Let me remove this.

[04:14] What I want to do is define this function Apply, but in the world of the fields. I''m going to have a field of A, and then the second argument will be a field that contains a function fromAtoB. The return value will be a field of B. Let me call these arguments FofA and FofF, so a field wrapped in an A and a field wrapped in a function F.

[04:39] Let me copy this code here, because the implementation is going to be very similar. I''m going to switch on the case of the field. If the field is valid and it has a value of type A, then I switch on the state of the function. I''ve decided it will contain a function, and then I can apply the argument A to the function F.

[05:02] I can use this very much like I was doing before with the function that was taking three integers, but in the world of fields. To create a function like this wrapped in a field, I could take the submit function and wrap it into a valid. I will call this function, apply model.email, similarly apply model.message, and apply model.age.

[05:31] I can even delete map2, because it''s always possible to achieve the same using the apply function. If I save, this now compiles.

[05:41] Let me enter some data. Let''s look at the payload of the submit request. You can see that you indeed have an additional field -- age of 22.', NULL, true, '07-egghead-elm-validate-all-fields-in-an-elm-form-using-applicatives.mp4', 150, true, false, 181, '---
mp4: 34208501
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM/egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM.mp4', 'egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM', 'zlqF', 'https://egghead-pipeline.s3.amazonaws.com/egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM/egghead-validate-all-fields-in-an-elm-form-using-applicatives-rkTGRlNMM.mp3?c1ba0e6bc8b8ddfb?b9fe', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:15.550Z', NULL, 8388589, NULL, 3656, 0, NULL, 7684075, '49616bf0e33611e79d664d9290a81cc5', 'https://ellie-app.com/embed/532C69vsWa1/1', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383723, '1
00:00:01,340 --> 00:00:02,710
Let me now add another field to 

2
00:00:02,720 --> 00:00:04,550
the form. Since the fields we''ve 

3
00:00:04,560 --> 00:00:06,230
added so far were both strings, 

4
00:00:06,570 --> 00:00:08,180
let''s do something else and add 

5
00:00:08,190 --> 00:00:10,240
a field of type int. Let''s call 

6
00:00:10,250 --> 00:00:13,310
this Age. We''re asking the user 

7
00:00:13,320 --> 00:00:15,020
to enter their age into the form. 

8
00:00:17,150 --> 00:00:18,520
The initial value, of course, 

9
00:00:18,560 --> 00:00:20,890
will be empty and not validated. 

10
00:00:23,770 --> 00:00:28,200
Let''s have a message, "input age" 

11
00:00:30,370 --> 00:00:31,710
and let''s handle this message 

12
00:00:31,720 --> 00:00:38,860
here, so when the input age 

13
00:00:38,870 --> 00:00:42,770
changes, the age on the model 

14
00:00:43,400 --> 00:00:46,360
goes to "not validated." When 

15
00:00:46,360 --> 00:00:53,330
we validate the model, we want 

16
00:00:53,330 --> 00:00:55,420
to validate that the age is an 

17
00:00:55,430 --> 00:01:00,360
actual number. isNatural is a 

18
00:01:00,370 --> 00:01:01,880
function that we defined in the 

19
00:01:01,890 --> 00:01:07,680
previous lesson. Let me create 

20
00:01:07,750 --> 00:01:09,400
a visual element to represent 

21
00:01:09,410 --> 00:01:13,280
the age. This would be an input 

22
00:01:13,280 --> 00:01:15,090
with a placeholder, "your age." 

23
00:01:16,100 --> 00:01:17,910
This will raise a message of 

24
00:01:17,920 --> 00:01:19,530
type input age. The current 

25
00:01:19,540 --> 00:01:22,680
value would be model.age, and we 

26
00:01:22,680 --> 00:01:24,340
display the value. Here, instead 

27
00:01:24,340 --> 00:01:26,150
of the identify function, we use 

28
00:01:26,225 --> 00:01:28,340
toString to convert an int to a 

29
00:01:28,350 --> 00:01:31,290
string. We''ll pass the model.age 

30
00:01:31,290 --> 00:01:33,290
field to get the proper error, 

31
00:01:33,620 --> 00:01:36,410
and this is really it. You can 

32
00:01:36,420 --> 00:01:37,940
see that in the form we have a 

33
00:01:37,950 --> 00:01:41,810
new field of type age. If you 

34
00:01:41,810 --> 00:01:45,120
say, "Hello," and submit, we get 

35
00:01:45,120 --> 00:01:46,850
a validation error here, as well 

36
00:01:46,860 --> 00:01:49,350
as the previous fields. So far, 

37
00:01:49,360 --> 00:01:51,360
so good. What we still need to 

38
00:01:51,370 --> 00:01:54,180
do is to send the age into our 

39
00:01:54,220 --> 00:01:56,640
message to the back end. Here we 

40
00:01:56,650 --> 00:01:58,820
would add a new field to our 

41
00:01:58,830 --> 00:02:00,750
request body with the name age. 

42
00:02:00,825 --> 00:02:03,230
Here, we would use encode int, 

43
00:02:04,080 --> 00:02:05,510
age, and we would need an extra 

44
00:02:05,520 --> 00:02:07,650
parameter age that is of type 

45
00:02:07,725 --> 00:02:10,880
int. This is where we will have 

46
00:02:10,880 --> 00:02:13,260
a problem. We were calling map2 

47
00:02:13,710 --> 00:02:15,360
with submit as a binary function, 

48
00:02:15,950 --> 00:02:17,990
and model.email and message as 

49
00:02:18,000 --> 00:02:20,630
the arguments. Somehow what 

50
00:02:20,630 --> 00:02:22,660
we''d like to say is now submit 

51
00:02:23,220 --> 00:02:25,460
takes another parameter. Let me 

52
00:02:25,130 --> 00:02:27,730
just add this here, model.age. 

53
00:02:29,620 --> 00:02:31,200
These parentheses are not 

54
00:02:31,210 --> 00:02:37,970
required. Of course, this also 

55
00:02:37,980 --> 00:02:40,380
doesn''t compile. This is because 

56
00:02:40,550 --> 00:02:42,910
if I open the definition of map2, 

57
00:02:42,530 --> 00:02:44,590
you can see it expects a binary 

58
00:02:44,600 --> 00:02:46,630
function and now we have submit 

59
00:02:46,700 --> 00:02:48,050
defined as a ternary function. 

60
00:02:49,050 --> 00:02:50,730
One possibility would be to 

61
00:02:50,960 --> 00:02:52,760
define a new function map3 that 

62
00:02:52,835 --> 00:02:53,750
takes a ternary function. Then, 

63
00:02:53,750 --> 00:02:56,440
of course, we would run into the 

64
00:02:56,450 --> 00:02:57,650
same problem. We would need to 

65
00:02:57,725 --> 00:03:00,500
define map4, map5, depending on 

66
00:03:00,510 --> 00:03:03,050
how many fields we have. Let me 

67
00:03:03,125 --> 00:03:04,840
introduce a different approach. 

68
00:03:04,840 --> 00:03:06,090
Imagine that we have a function 

69
00:03:06,100 --> 00:03:08,980
called Apply. It takes a value 

70
00:03:09,055 --> 00:03:11,370
of type A, and then it takes a 

71
00:03:11,380 --> 00:03:16,560
function fromAtoB and returns a 

72
00:03:16,570 --> 00:03:20,120
B. We could call the first 

73
00:03:20,130 --> 00:03:22,200
parameter A and the second F. 

74
00:03:22,275 --> 00:03:23,460
The way to implement this would 

75
00:03:23,470 --> 00:03:25,450
be to say simply F, A. We''ll 

76
00:03:25,525 --> 00:03:26,900
apply the given function to the 

77
00:03:26,910 --> 00:03:28,700
given argument, and we get the 

78
00:03:28,710 --> 00:03:30,780
required results. The 

79
00:03:30,855 --> 00:03:32,170
interesting thing is that, 

80
00:03:32,220 --> 00:03:33,250
because of how function 

81
00:03:33,325 --> 00:03:34,870
application works in Elm, even 

82
00:03:34,945 --> 00:03:36,460
though we are here defining this 

83
00:03:36,470 --> 00:03:38,800
as a unary function, this could 

84
00:03:38,810 --> 00:03:40,590
really be any function. For 

85
00:03:40,600 --> 00:03:42,500
example, if I had a function F 

86
00:03:43,310 --> 00:03:45,000
that takes three ints and 

87
00:03:48,210 --> 00:03:50,560
returns a result of int, also, 

88
00:03:52,030 --> 00:03:54,750
then I could say take F and 

89
00:03:54,800 --> 00:04:01,470
apply one, then apply two, and 

90
00:04:01,480 --> 00:04:04,750
then apply three. If you look at 

91
00:04:04,750 --> 00:04:06,400
this for a while, this is 

92
00:04:06,410 --> 00:04:09,010
exactly the same as saying F, 

93
00:04:09,210 --> 00:04:13,560
one, two, three. Let me remove 

94
00:04:13,570 --> 00:04:15,390
this. What I want to do is 

95
00:04:16,260 --> 00:04:18,140
define this function Apply, but 

96
00:04:18,240 --> 00:04:20,390
in the world of the fields. I''m 

97
00:04:20,465 --> 00:04:23,610
going to have a field of A, and 

98
00:04:23,620 --> 00:04:24,870
then the second argument will be 

99
00:04:24,880 --> 00:04:27,400
a field that contains a function 

100
00:04:27,475 --> 00:04:29,640
fromAtoB. The return value will 

101
00:04:29,650 --> 00:04:32,700
be a field of B. Let me call 

102
00:04:32,710 --> 00:04:34,730
these arguments FofA and FofF, 

103
00:04:33,820 --> 00:04:37,010
so a field wrapped in an A and a 

104
00:04:37,020 --> 00:04:38,750
field wrapped in a function F. 

105
00:04:39,470 --> 00:04:41,390
Let me copy this code here, 

106
00:04:41,770 --> 00:04:42,740
because the implementation is 

107
00:04:42,750 --> 00:04:44,300
going to be very similar. I''m 

108
00:04:44,375 --> 00:04:46,880
going to switch on the case of 

109
00:04:46,890 --> 00:04:49,350
the field. If the field is valid 

110
00:04:49,360 --> 00:04:51,040
and it has a value of type A, 

111
00:04:51,310 --> 00:04:52,950
then I switch on the state of 

112
00:04:52,960 --> 00:04:54,670
the function. I''ve decided it 

113
00:04:54,680 --> 00:04:56,730
will contain a function, and 

114
00:04:56,740 --> 00:04:59,350
then I can apply the argument A 

115
00:04:59,840 --> 00:05:02,970
to the function F. I can use 

116
00:05:02,980 --> 00:05:04,830
this very much like I was doing 

117
00:05:04,840 --> 00:05:06,010
before with the function that 

118
00:05:06,020 --> 00:05:08,590
was taking three integers, but 

119
00:05:08,600 --> 00:05:10,210
in the world of fields. To 

120
00:05:10,220 --> 00:05:11,440
create a function like this 

121
00:05:11,450 --> 00:05:13,440
wrapped in a field, I could take 

122
00:05:13,450 --> 00:05:16,340
the submit function and wrap it 

123
00:05:16,350 --> 00:05:20,550
into a valid. I will call this 

124
00:05:20,560 --> 00:05:25,570
function, apply model.email, 

125
00:05:26,650 --> 00:05:28,430
similarly apply model.message, 

126
00:05:29,410 --> 00:05:32,260
and apply model.age. I can even 

127
00:05:32,630 --> 00:05:34,090
delete map2, because it''s always 

128
00:05:34,090 --> 00:05:35,320
possible to achieve the same 

129
00:05:35,360 --> 00:05:39,800
using the apply function. If I 

130
00:05:39,800 --> 00:05:41,570
save, this now compiles. Let me 

131
00:05:41,580 --> 00:05:51,010
enter some data. Let''s look at 

132
00:05:51,020 --> 00:05:52,990
the payload of the submit 

133
00:05:53,000 --> 00:05:55,900
request. You can see that you 

134
00:05:55,990 --> 00:05:57,450
indeed have an additional field -- 

135
00:05:57,530 --> 00:05:58,390
age of 22.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '813f7f1d', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2862, 'Write Simple Validation Functions Using Elm''s Result Type', NULL, 'We start by writing some validation functions that use Elm''s `Result` type to represent successful or failed validation. If you are unfamiliar with or need a refresher on the `Result` type, watch [this lesson](https://egghead.io/lessons/elm-handle-errors-with-elm-s-result-type) first.', 231, NULL, '2017-12-14T05:36:31.601Z', '2023-08-08T00:08:23.011Z', 'elm-write-simple-validation-functions-using-elm-s-result-type', NULL, 'd83yvffkel', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG/egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_d83yvffkel" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG.mp4" /><meta itemprop="duration" content="PT3M51S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/bb4298191b26d019ff8cd8ac9b1780bd8c3ca261.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/3c7029d48533e04810cf3abcfb5ae0c18baf4d9f.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=231.72&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fbb4298191b26d019ff8cd8ac9b1780bd8c3ca261.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F3c7029d48533e04810cf3abcfb5ae0c18baf4d9f.bin" /><meta itemprop="uploadDate" content="2017-12-13T21:54:27Z" /><object id="wistia_d83yvffkel_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=231.72&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fbb4298191b26d019ff8cd8ac9b1780bd8c3ca261.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F3c7029d48533e04810cf3abcfb5ae0c18baf4d9f.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=231.72&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fbb4298191b26d019ff8cd8ac9b1780bd8c3ca261.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F3c7029d48533e04810cf3abcfb5ae0c18baf4d9f.bin" name="wistia_d83yvffkel_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("d83yvffkel", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/d83yvffkel/metadata.js"></script>', 'Instructor: [00:02] The way you represent an operation that can fail in Elm is with the result type. For instance, if I open the REPL and look at the signature of the string to int function, this is a function that takes a string and returns a result.

[00:20] The result is parameterized by string, meaning that if the conversion fails, we would get a string error message, and int, which is the payload, in case the conversion is successful.

[00:32] If you''ve seen my course on the Elm type system, you may remember a function with the same structure which validates an email address. It takes a string, and in case of failure, returns a string error message, and otherwise, wraps the string in a strongly typed address.

[00:49] Next, I''m going to create a file called validation.elm. This is where I will write my validation code. Let me call this module validation. For now, let me expose all the members.

[01:03] I''ll start by writing some simple functions that validate that my data is correct. I''ll write the function isNotEmpty that takes a string and returns a result, string string. Implementation is straightforward. If the value is an empty string, then I return an error saying, "This field is required." Otherwise, I return an OK wrapping the value.

[01:43] To make a couple of more examples, let me also write isEmail. This has the same signature as above. I''m going to perform a very simple check. I''m going to say that if the value contains an @, then it''s OK. I''m going to wrap the value, and otherwise, "Please enter a valid email address."

[02:22] To show how we can deal with a different type, let''s say isInt. In this case, the signature will be string to result string int. In this case, I will just reuse string.toInt. Notice the pattern. We always take in a value, in this case, is always a string, and returning a result, potentially performing a type conversion in the process.

[02:51] Let me capture this in an abstraction. I''m going to create a type alias validator. I''m going to say the validator takes a value of type A, it has a generic parameter A, and it returns a result of string -- that''s the potential error -- or another type, B. I also have a generic parameter, B.

[03:17] In the case of the int function, A is string, and B is int. I can rewrite the signatures, isNotEmpty is a validator string string, and the same is 1 of isEmail. isInt is a validator string int, because we''re going from string to int.

[03:37] Let me compile this. I have a little compilation error, because this needs to be exposing. Also, here I forgot to wrap this into an error.', NULL, true, '02-egghead-elm-write-simple-validation-functions-using-elm-s-result-type.mp4', 150, true, false, 181, '---
mp4: 12952956
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG/egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG.mp4', 'egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG', 'zm0F', 'https://egghead-pipeline.s3.amazonaws.com/egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG/egghead-write-simple-validation-functions-using-elm-s-result-type-HyowpGkMG.mp3?6833695753d25a26?9155', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:12.583Z', NULL, 8388583, NULL, 3625, 0, NULL, -1155086, 'ced05f10e04f11e7bcc9192da1a3dc30', 'https://ellie-app.com/embed/7kMwP8MJka1/0', 28751, 'free', '', 'elm', '', '', '', '', '', NULL, 8383703, '1
00:00:02,270 --> 00:00:03,610
The way you represent an 

2
00:00:03,620 --> 00:00:05,640
operation that can fail in Elm 

3
00:00:05,720 --> 00:00:09,470
is with the result type. For 

4
00:00:09,480 --> 00:00:12,010
instance, if I open the REPL and 

5
00:00:12,070 --> 00:00:13,700
look at the signature of the 

6
00:00:13,775 --> 00:00:17,260
string to int function, this is 

7
00:00:17,270 --> 00:00:18,490
a function that takes a string 

8
00:00:18,500 --> 00:00:20,410
and returns a result. The 

9
00:00:20,420 --> 00:00:21,740
result is parameterized by 

10
00:00:21,210 --> 00:00:23,700
string, meaning that if the 

11
00:00:23,710 --> 00:00:25,400
conversion fails, we would get a 

12
00:00:25,410 --> 00:00:28,040
string error message, and int, 

13
00:00:27,700 --> 00:00:29,520
which is the payload, in case 

14
00:00:29,530 --> 00:00:30,930
the conversion is successful. 

15
00:00:32,540 --> 00:00:33,940
If you''ve seen my course on the 

16
00:00:33,950 --> 00:00:35,470
Elm type system, you may 

17
00:00:35,480 --> 00:00:36,830
remember a function with the 

18
00:00:36,840 --> 00:00:38,730
same structure which validates 

19
00:00:38,740 --> 00:00:40,350
an email address. It takes a 

20
00:00:40,360 --> 00:00:42,050
string, and in case of failure, 

21
00:00:42,150 --> 00:00:43,590
returns a string error message, 

22
00:00:43,770 --> 00:00:45,490
and otherwise, wraps the string 

23
00:00:45,790 --> 00:00:47,490
in a strongly typed address. 

24
00:00:49,810 --> 00:00:51,540
Next, I''m going to create a file 

25
00:00:51,590 --> 00:00:54,560
called validation.elm. This is 

26
00:00:54,560 --> 00:00:55,870
where I will write my validation 

27
00:00:56,810 --> 00:00:58,070
code. Let me call this module 

28
00:00:58,360 --> 00:01:00,770
validation. For now, let me 

29
00:01:00,780 --> 00:01:03,460
expose all the members. I''ll 

30
00:01:03,470 --> 00:01:04,570
start by writing some simple 

31
00:01:04,580 --> 00:01:06,220
functions that validate that my 

32
00:01:06,230 --> 00:01:07,980
data is correct. I''ll write the 

33
00:01:08,040 --> 00:01:11,060
function isNotEmpty that takes a 

34
00:01:11,070 --> 00:01:14,510
string and returns a result, 

35
00:01:14,730 --> 00:01:21,630
string string. Implementation is 

36
00:01:21,640 --> 00:01:25,250
straightforward. If the value is 

37
00:01:25,260 --> 00:01:28,040
an empty string, then I 

38
00:01:28,050 --> 00:01:31,490
return an error saying, "This 

39
00:01:31,500 --> 00:01:40,130
field is required." Otherwise, I 

40
00:01:40,140 --> 00:01:42,570
return an OK wrapping the value. 

41
00:01:43,600 --> 00:01:45,060
To make a couple of more 

42
00:01:45,135 --> 00:01:46,450
examples, let me also write 

43
00:01:46,525 --> 00:01:48,890
isEmail. This has the same 

44
00:01:49,080 --> 00:01:56,650
signature as above. I''m going to 

45
00:01:56,660 --> 00:02:01,670
perform a very simple check. I''m 

46
00:02:01,745 --> 00:02:05,190
going to say that if the value 

47
00:02:05,200 --> 00:02:12,260
contains an @, then it''s OK. I''m 

48
00:02:12,270 --> 00:02:15,330
going to wrap the value, and 

49
00:02:15,340 --> 00:02:18,570
otherwise, "Please enter a valid 

50
00:02:18,570 --> 00:02:22,660
email address." To show how we 

51
00:02:22,670 --> 00:02:23,930
can deal with a different type, 

52
00:02:24,500 --> 00:02:28,710
let''s say isInt. In this case, 

53
00:02:28,750 --> 00:02:31,530
the signature will be string to 

54
00:02:31,540 --> 00:02:37,240
result string int. In this case, 

55
00:02:37,315 --> 00:02:39,690
I will just reuse string.toInt. 

56
00:02:42,350 --> 00:02:43,890
Notice the pattern. We always 

57
00:02:43,890 --> 00:02:45,420
take in a value, in this case, 

58
00:02:45,430 --> 00:02:46,360
is always a string, and 

59
00:02:46,370 --> 00:02:48,150
returning a result, potentially 

60
00:02:48,160 --> 00:02:49,860
performing a type conversion in 

61
00:02:49,935 --> 00:02:52,080
the process. Let me capture 

62
00:02:52,090 --> 00:02:54,250
this in an abstraction. I''m 

63
00:02:54,250 --> 00:02:56,610
going to create a type alias 

64
00:02:56,685 --> 00:03:01,420
validator. I''m going to say the 

65
00:03:01,495 --> 00:03:03,130
validator takes a value of type 

66
00:03:03,130 --> 00:03:05,470
A, it has a generic parameter A, 

67
00:03:05,780 --> 00:03:08,670
and it returns a result of 

68
00:03:08,680 --> 00:03:10,260
string -- that''s the potential 

69
00:03:10,270 --> 00:03:14,200
error -- or another type, B. I 

70
00:03:14,210 --> 00:03:16,520
also have a generic parameter, B. 

71
00:03:17,180 --> 00:03:18,510
In the case of the int function, 

72
00:03:18,850 --> 00:03:21,950
A is string, and B is int. I can 

73
00:03:21,950 --> 00:03:23,060
rewrite the signatures, 

74
00:03:23,135 --> 00:03:25,560
isNotEmpty is a validator string 

75
00:03:25,570 --> 00:03:27,680
string, and the same is 1 of 

76
00:03:27,755 --> 00:03:29,680
isEmail. isInt is a validator 

77
00:03:29,755 --> 00:03:35,270
string int, because we''re going 

78
00:03:35,280 --> 00:03:38,040
from string to int. Let me 

79
00:03:38,040 --> 00:03:41,240
compile this. I have a little 

80
00:03:41,240 --> 00:03:42,910
compilation error, because this 

81
00:03:42,920 --> 00:03:47,770
needs to be exposing. Also, here 

82
00:03:47,780 --> 00:03:49,470
I forgot to wrap this into an 

83
00:03:49,480 --> 00:03:49,790
error.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '89516818', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2907, 'List All Validation Errors at the top of an Elm Form', NULL, 'If you validate errors on submit, and have a very long form that may not fit on the screen, you can list all errors at the top of the form, to inform the user of everything she must fix before trying to resubmit.', 275, NULL, '2017-12-27T18:51:55.057Z', '2023-08-08T00:08:20.329Z', 'elm-list-all-validation-errors-at-the-top-of-an-elm-form', NULL, 'xuqcjndyyo', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz/egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_xuqcjndyyo" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz.mp4" /><meta itemprop="duration" content="PT4M35S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/e4c67c8bbc0315083913de558f0eb630ed2f294e.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/22efa770e9189796dfa2ceb7e435c16d45143bf9.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=275.28&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe4c67c8bbc0315083913de558f0eb630ed2f294e.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F22efa770e9189796dfa2ceb7e435c16d45143bf9.bin" /><meta itemprop="uploadDate" content="2017-12-27T12:06:20Z" /><object id="wistia_xuqcjndyyo_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=275.28&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe4c67c8bbc0315083913de558f0eb630ed2f294e.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F22efa770e9189796dfa2ceb7e435c16d45143bf9.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=275.28&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe4c67c8bbc0315083913de558f0eb630ed2f294e.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F22efa770e9189796dfa2ceb7e435c16d45143bf9.bin" name="wistia_xuqcjndyyo_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("xuqcjndyyo", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/xuqcjndyyo/metadata.js"></script>', 'Instructor: [00:01] sometimes, you might get a requirement to list all the validation errors at top of your form. This can be helpful if the form is very long, it might not fit on one page and especially if you''re not validating on blur.

[00:14] Let''s see how we could go about implementing this feature. Let''s go to the view and where we''re building the header section. Let''s add a new element, which I''ll call list errors. I''ll pass this to model for which it can get the errors.

[00:29] I''ll define this here. First, let me list all the fields in the model, everything that might have errors associated. Next, let me find out all the errors. Let me start with fields which is a list. I use list.map. I could map the extract error function. This will extract the error for each field.

[01:11] Now, the problem is that extract error returns a maybe. Errors at this moment will be a list of maybes. What I still need to do is to get rid of all the maybes that are nothing and just keep the errors that are there.

[01:23] For this, I can use a function called to list. To list is a function that converts a maybe into a list. If the maybe is nothing, it would be an empty list. If the maybe is just, then it would be a list with that one element.

[01:39] But now, this is a function that returns a list. If I map that onto a list, what I get is a list of lists. To flatten that into a list instead of map, I can use another function. That''s called concat map. In standard functional programming jargon, that will be called bind.

[01:56] The to list function is not available in the core library. For this, I need to install an additional package. Let me type Elm package install Elm community. That''s the author. The package is called maybe extra. These are just some useful function for working with maybe values. Now in my code, I need an additional import.

[02:29] Now, I can finish implementing the list errors function. Now, I have a errors that''s a list of strings. I can say if it''s an empty list, then I just return an empty HTML note, text with empty string. Otherwise, I return a div with some text that says, "Please fix the following errors," and then a numbered list.

[03:11] Here, I''ll have my errors. I will map those with list.map. I''ll map a function called create list item. Let me find this here. It will take a string. It''ll return a list item with the string inside. I have a typo here, concat map.

[03:49] Now, the compiler is complaining because this fields list that I''ve created mixes different types. I have accept policy that''s a field of bool. The others are fields of string. This doesn''t work.

[04:01] To fix this, let me do extract error here. Here, I just need to do to list. I don''t need parentheses anymore. Let''s just call this errors. Now it compiles.

[04:20] Let''s see if I submit with everything wrong. Then you see at the top of the form, we get this list with all the errors. If I fix the errors, you see that the list is updated accordingly. That''s because we''re validating on input...', NULL, true, '18-egghead-elm-list-all-validation-errors-at-the-top-of-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 22877008
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz/egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz.mp4', 'egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz', 'zlqX', 'https://egghead-pipeline.s3.amazonaws.com/egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz/egghead-list-all-validation-errors-at-the-top-of-an-elm-form-ry_Z2bWQz.mp3?e1f5d56d8da6e56f?a9dd', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:25.420Z', NULL, 8388589, NULL, 3724, 0, NULL, 8388606, '079e7f30eafe11e7b93ec3decc5dedbb', 'https://ellie-app.com/embed/cKymxmvZWa1/0', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383747, '1
00:00:01,560 --> 00:00:02,660
sometimes, you might get a 

2
00:00:02,660 --> 00:00:04,490
requirement to list all the 

3
00:00:04,565 --> 00:00:05,930
validation errors at top of your 

4
00:00:05,940 --> 00:00:07,920
form. This can be helpful if the 

5
00:00:07,930 --> 00:00:09,630
form is very long, it might not 

6
00:00:09,640 --> 00:00:11,710
fit on one page and especially 

7
00:00:11,785 --> 00:00:14,220
if you''re not validating on blur. 

8
00:00:14,220 --> 00:00:15,300
Let''s see how we could go about 

9
00:00:15,310 --> 00:00:18,380
implementing this feature. Let''s 

10
00:00:18,410 --> 00:00:19,640
go to the view and where we''re 

11
00:00:19,650 --> 00:00:20,970
building the header section. 

12
00:00:21,690 --> 00:00:23,410
Let''s add a new element, which 

13
00:00:23,420 --> 00:00:27,140
I''ll call list errors. I''ll pass 

14
00:00:27,150 --> 00:00:28,850
this to model for which it can 

15
00:00:28,860 --> 00:00:30,250
get the errors. I''ll define 

16
00:00:30,260 --> 00:00:36,290
this here. First, let me list 

17
00:00:36,300 --> 00:00:37,860
all the fields in the model, 

18
00:00:38,210 --> 00:00:39,250
everything that might have 

19
00:00:39,260 --> 00:00:53,770
errors associated. Next, let me 

20
00:00:53,780 --> 00:00:57,240
find out all the errors. Let me 

21
00:00:57,240 --> 00:01:01,200
start with fields which is a 

22
00:01:01,200 --> 00:01:03,890
list. I use list.map. I could 

23
00:01:03,900 --> 00:01:06,080
map the extract error function. 

24
00:01:07,870 --> 00:01:09,380
This will extract the error for 

25
00:01:09,390 --> 00:01:11,970
each field. Now, the problem is 

26
00:01:11,980 --> 00:01:13,520
that extract error returns a 

27
00:01:13,530 --> 00:01:15,760
maybe. Errors at this moment 

28
00:01:15,770 --> 00:01:17,040
will be a list of maybes. What I 

29
00:01:17,040 --> 00:01:19,910
still need to do is to get rid 

30
00:01:19,920 --> 00:01:21,080
of all the maybes that are 

31
00:01:21,090 --> 00:01:22,750
nothing and just keep the errors 

32
00:01:22,760 --> 00:01:25,480
that are there. For this, I can 

33
00:01:25,490 --> 00:01:27,730
use a function called to list. 

34
00:01:29,140 --> 00:01:30,150
To list is a function that 

35
00:01:30,160 --> 00:01:32,960
converts a maybe into a list. If 

36
00:01:32,970 --> 00:01:34,800
the maybe is nothing, it would 

37
00:01:34,450 --> 00:01:36,390
be an empty list. If the maybe 

38
00:01:36,400 --> 00:01:38,240
is just, then it would be a list 

39
00:01:38,240 --> 00:01:40,120
with that one element. But now, 

40
00:01:40,130 --> 00:01:41,150
this is a function that returns 

41
00:01:41,160 --> 00:01:43,370
a list. If I map that onto a 

42
00:01:42,980 --> 00:01:44,370
list, what I get is a list of 

43
00:01:44,380 --> 00:01:46,530
lists. To flatten that into a 

44
00:01:46,870 --> 00:01:48,240
list instead of map, I can use 

45
00:01:48,250 --> 00:01:49,670
another function. That''s called 

46
00:01:49,745 --> 00:01:52,430
concat map. In standard 

47
00:01:52,430 --> 00:01:53,660
functional programming jargon, 

48
00:01:53,660 --> 00:01:56,340
that will be called bind. The 

49
00:01:56,350 --> 00:01:57,460
to list function is not 

50
00:01:57,500 --> 00:01:58,610
available in the core library. 

51
00:01:59,190 --> 00:02:00,780
For this, I need to install an 

52
00:02:00,855 --> 00:02:02,880
additional package. Let me type 

53
00:02:03,050 --> 00:02:05,900
Elm package install Elm 

54
00:02:05,960 --> 00:02:08,370
community. That''s the author. 

55
00:02:08,445 --> 00:02:11,600
The package is called maybe 

56
00:02:11,620 --> 00:02:14,200
extra. These are just some 

57
00:02:14,210 --> 00:02:15,740
useful function for working with 

58
00:02:15,750 --> 00:02:19,670
maybe values. Now in my code, I 

59
00:02:19,680 --> 00:02:30,150
need an additional import. Now, 

60
00:02:30,150 --> 00:02:31,400
I can finish implementing the 

61
00:02:31,410 --> 00:02:33,130
list errors function. Now, I 

62
00:02:33,180 --> 00:02:34,760
have a errors that''s a list of 

63
00:02:34,770 --> 00:02:42,760
strings. I can say if it''s an 

64
00:02:42,770 --> 00:02:44,970
empty list, then I just return 

65
00:02:44,980 --> 00:02:48,820
an empty HTML note, text with 

66
00:02:48,830 --> 00:02:51,590
empty string. Otherwise, I 

67
00:02:51,590 --> 00:02:58,760
return a div with some text that 

68
00:02:58,770 --> 00:03:02,050
says, "Please fix the following 

69
00:03:02,060 --> 00:03:08,440
errors," and then a numbered 

70
00:03:08,450 --> 00:03:12,770
list. Here, I''ll have my errors. 

71
00:03:14,730 --> 00:03:17,430
I will map those with list.map. 

72
00:03:18,430 --> 00:03:19,740
I''ll map a function called 

73
00:03:20,010 --> 00:03:24,740
create list item. Let me find 

74
00:03:24,740 --> 00:03:31,280
this here. It will take a string. 

75
00:03:33,010 --> 00:03:41,620
It''ll return a list item with 

76
00:03:41,630 --> 00:03:44,830
the string inside. I have a typo 

77
00:03:44,840 --> 00:03:49,740
here, concat map. Now, the 

78
00:03:49,750 --> 00:03:51,490
compiler is complaining because 

79
00:03:51,500 --> 00:03:53,030
this fields list that I''ve 

80
00:03:53,040 --> 00:03:55,320
created mixes different types. I 

81
00:03:55,340 --> 00:03:56,600
have accept policy that''s a 

82
00:03:56,610 --> 00:03:58,520
field of bool. The others are 

83
00:03:58,530 --> 00:04:00,240
fields of string. This doesn''t 

84
00:04:00,250 --> 00:04:02,990
work. To fix this, let me do 

85
00:04:03,000 --> 00:04:07,800
extract error here. Here, I just 

86
00:04:07,810 --> 00:04:09,800
need to do to list. I don''t need 

87
00:04:09,810 --> 00:04:11,650
parentheses anymore. Let''s just 

88
00:04:12,000 --> 00:04:18,860
call this errors. Now it 

89
00:04:18,870 --> 00:04:21,190
compiles. Let''s see if I submit 

90
00:04:21,200 --> 00:04:23,070
with everything wrong. Then you 

91
00:04:23,080 --> 00:04:24,240
see at the top of the form, we 

92
00:04:24,250 --> 00:04:25,280
get this list with all the 

93
00:04:25,280 --> 00:04:30,260
errors. If I fix the errors, you 

94
00:04:30,270 --> 00:04:31,400
see that the list is updated 

95
00:04:31,520 --> 00:04:32,970
accordingly. That''s because 

96
00:04:32,980 --> 00:04:34,270
we''re validating on input...

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', 'b4f9271c', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2905, 'Validate Errors onInput in an Elm Form', NULL, 'Validating input as soon as the user starts typing is considered a bad idea. On the other hand, clearing an error as soon as the user has fixed her input improves the user experience. So, _sometimes_ you want to perform validation on input.

In this lesson we''ll ensure the error message is only displayed after submit, and only displayed on input if there was a prior error.', 506, NULL, '2017-12-26T23:59:32.550Z', '2023-08-08T00:08:20.827Z', 'elm-validate-errors-oninput-in-an-elm-form', NULL, 'am48lw7ey2', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG/egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_am48lw7ey2" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG.mp4" /><meta itemprop="duration" content="PT8M26S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/fb6782d36191b37083b54a14b5b102f8225a8c19.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/5f81818cad0e0468176a0bc468c923dde7ddad7c.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=506.6&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Ffb6782d36191b37083b54a14b5b102f8225a8c19.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F5f81818cad0e0468176a0bc468c923dde7ddad7c.bin" /><meta itemprop="uploadDate" content="2017-12-26T16:11:31Z" /><object id="wistia_am48lw7ey2_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=506.6&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Ffb6782d36191b37083b54a14b5b102f8225a8c19.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F5f81818cad0e0468176a0bc468c923dde7ddad7c.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=506.6&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Ffb6782d36191b37083b54a14b5b102f8225a8c19.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F5f81818cad0e0468176a0bc468c923dde7ddad7c.bin" name="wistia_am48lw7ey2_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("am48lw7ey2", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/am48lw7ey2/metadata.js"></script>', 'Instructor: [00:00] The advantage of validating a form or submit is that you can ensure that the data is valid before you send it to the server. On the other hand, the user experience is not always optimal.

[00:10] Imagine the user enters some data like this. Now he gets a validation message and he says, "Oh, I need to fix this," I type two and he''s a bit fiddly, so again he goes to submit. Oh, and again it''s invalid. Notice that as we type here, the validation is always clear so the user never really knows whether the data is valid or invalid as he types.

[00:42] Somehow, what would be nice is that, once have this error, the error stays until I''ve actually fixed my input. I notice how the current behavior is determined by the fact that as the user types, we get this input email message, and this creates a new field that would be in the not validated state.

[01:01] What if we said create a new field and then validate it? We''ve defined it somewhere here, so we''ll just need to move this to finishing up to top level. Let''s try now, and I''ll notice that, as soon as I start typing, I get a validation error.

[01:26] This is considered very bad user experience. You''re giving a user some negative feedback before he even gets a chance to complete his input. In fact, what we need is completely different validation logic on submit and on input.

[01:41] On submit, we always want to validate no matter what. On input, we only want to validate if the field has somehow been committed before. Let me find a way to express this in my code. Let me write the new type, we shall call event, and this can be on submit or on change, so when the row value changes.

[02:04] On change, we have a payload, let''s call this row. This is the new value coming from the UI. Now, this function validates. Let me just duplicate it. I''m going to rename this validate always, because this always performs validation.

[02:21] Let me have a more generic validate function that additionally takes an event. Then, we can switch on the type of event. On submit, we do the same logic as before, so we always validate, given validate and the field.

[02:51] What about on change? With the value, let''s call this new value. Let''s say validate if validated, with the validated function, the field that has the new value and the current validity. The signature would be the same as this, but the name is validate if validated.

[03:21] Here, we can return a field with the new value, value. For the new validity, let''s switch on the existing validity. If it''s not validated, then we want to leave it as not validated, and otherwise, we want to perform validation. That''s the idea, let me just fix a couple of errors. Here I need parentheses, and this yields a result. Let me pass this to the validity.

[03:52] Here, I forgot to put the row type variable. Now, I can refract to the code in my Elm file to use this new signature for the validate function.

[04:26] Let''s see how this changes, let''s say I''ve a typo here and submit. When I go back, notice that as a type the application keeps checking for the validity, and error goes a way as soon as my input is fixed. Now, let me do the same refactoring for the other two fields.

[04:59] Notice that in confirm password validation, we need this extra parameter that''s the pass out field. Let me add that here. Here, I need to call it with password. Next, let me change the update function.

[05:51] Let''s test the application. Let''s see, if I change this input, it''s still being invalidated at every key stroke. The user is getting some feedback for when the errors are fixed. Notice however that for the two related fields, we''re asked to do any validation only when the form is submitted.

[06:25] Let''s see how we could address this. Essentially, when the user changes his password, we should again check that the two passwords match. Let me copy this validation here and perform this on input password as well. Now this is not the model.password, but rather the newly validated password, essentially this. Let me put this into a variable.

[06:48] Notice that the event is not on change because the confirm password field hasn''t really changed. What happened is that a related field changed, so you could call this on related change. Let me now create it for this new type of event.

[07:17] I''ll use validate if validated, this would prevent any annoying errors when the user is first filling out the form. The only difference is that, we don''t have a new value. Let''s see how this changes. Let me enter Hello1 and Hello2.

[07:47] Here the passwords don''t match. Now, let me fix this to the Hello2, and now the error went away. If I enter Hello22, then the password don''t match. We have validation as the user types.

[08:05] Notice that we still have a no annoying errors while the user is first filling out his form. Hello22 and Hello2, these don''t match, but the error won''t show until you click submit. Only afterwards, when you might need a bit of a hand to correct your input does the validation occur.', NULL, true, '15-egghead-elm-validate-errors-oninput-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 55280361
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG/egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG.mp4', 'egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG', 'zlqT', 'https://egghead-pipeline.s3.amazonaws.com/egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG/egghead-validate-errors-oninput-in-an-elm-form-Sy1xMllQG.mp3?4a3a330f90ce27b0?14db', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:22.158Z', NULL, 8388589, NULL, 3722, 0, NULL, 8388602, 'c3eb6340ea5611e7a15787c9f718acfd', 'https://ellie-app.com/embed/h5ZyMPLtga1/1', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383745, '1
00:00:00,630 --> 00:00:02,300
The advantage of validating a 

2
00:00:02,300 --> 00:00:04,230
form or submit is that you can 

3
00:00:04,240 --> 00:00:05,980
ensure that the data is valid 

4
00:00:05,990 --> 00:00:07,220
before you send it to the server. 

5
00:00:07,860 --> 00:00:08,880
On the other hand, the user 

6
00:00:08,890 --> 00:00:10,530
experience is not always optimal. 

7
00:00:10,990 --> 00:00:12,230
Imagine the user enters some 

8
00:00:12,240 --> 00:00:20,250
data like this. Now he gets a 

9
00:00:20,260 --> 00:00:22,640
validation message and he says, "

10
00:00:22,660 --> 00:00:24,150
Oh, I need to fix this," I type 

11
00:00:24,280 --> 00:00:26,760
two and he''s a bit fiddly, so 

12
00:00:26,770 --> 00:00:29,720
again he goes to submit. Oh, and 

13
00:00:29,730 --> 00:00:33,490
again it''s invalid. Notice that 

14
00:00:33,500 --> 00:00:35,450
as we type here, the validation 

15
00:00:35,460 --> 00:00:36,900
is always clear so the user 

16
00:00:36,910 --> 00:00:38,220
never really knows whether the 

17
00:00:38,230 --> 00:00:40,540
data is valid or invalid as he 

18
00:00:40,570 --> 00:00:44,330
types. Somehow, what would be 

19
00:00:43,940 --> 00:00:45,680
nice is that, once have this 

20
00:00:45,690 --> 00:00:48,260
error, the error stays until 

21
00:00:48,260 --> 00:00:51,360
I''ve actually fixed my input. I 

22
00:00:51,410 --> 00:00:52,620
notice how the current behavior 

23
00:00:52,790 --> 00:00:53,940
is determined by the fact that 

24
00:00:54,000 --> 00:00:55,840
as the user types, we get this 

25
00:00:55,850 --> 00:00:57,200
input email message, and this 

26
00:00:57,210 --> 00:00:58,640
creates a new field that would 

27
00:00:58,650 --> 00:01:00,280
be in the not validated state. 

28
00:01:01,970 --> 00:01:03,780
What if we said create a new 

29
00:01:03,790 --> 00:01:05,380
field and then validate it? 

30
00:01:12,790 --> 00:01:14,480
We''ve defined it somewhere here, 

31
00:01:14,490 --> 00:01:16,600
so we''ll just need to move this 

32
00:01:16,610 --> 00:01:18,400
to finishing up to top level. 

33
00:01:21,430 --> 00:01:24,180
Let''s try now, and I''ll notice 

34
00:01:24,230 --> 00:01:25,890
that, as soon as I start typing, 

35
00:01:25,930 --> 00:01:27,310
I get a validation error. This 

36
00:01:28,120 --> 00:01:29,920
is considered very bad user 

37
00:01:30,250 --> 00:01:31,890
experience. You''re giving a user 

38
00:01:31,900 --> 00:01:33,500
some negative feedback before he 

39
00:01:33,510 --> 00:01:34,680
even gets a chance to complete 

40
00:01:34,690 --> 00:01:37,500
his input. In fact, what we need 

41
00:01:37,510 --> 00:01:38,540
is completely different 

42
00:01:38,615 --> 00:01:40,520
validation logic on submit and 

43
00:01:40,530 --> 00:01:42,680
on input. On submit, we always 

44
00:01:42,680 --> 00:01:44,200
want to validate no matter what. 

45
00:01:44,790 --> 00:01:45,920
On input, we only want to 

46
00:01:45,930 --> 00:01:47,950
validate if the field has 

47
00:01:47,960 --> 00:01:49,390
somehow been committed before. 

48
00:01:51,190 --> 00:01:52,690
Let me find a way to express 

49
00:01:52,700 --> 00:01:54,710
this in my code. Let me write 

50
00:01:54,720 --> 00:01:56,320
the new type, we shall call 

51
00:01:56,330 --> 00:01:59,210
event, and this can be on submit 

52
00:02:00,690 --> 00:02:02,730
or on change, so when the row 

53
00:02:02,740 --> 00:02:04,760
value changes. On change, we 

54
00:02:04,770 --> 00:02:06,910
have a payload, let''s call this 

55
00:02:06,920 --> 00:02:08,710
row. This is the new value 

56
00:02:08,720 --> 00:02:11,150
coming from the UI. Now, this 

57
00:02:11,160 --> 00:02:13,980
function validates. Let me just 

58
00:02:13,990 --> 00:02:16,290
duplicate it. I''m going to 

59
00:02:16,290 --> 00:02:18,490
rename this validate always, 

60
00:02:19,120 --> 00:02:20,300
because this always performs 

61
00:02:20,330 --> 00:02:22,390
validation. Let me have a more 

62
00:02:22,550 --> 00:02:24,890
generic validate function that 

63
00:02:24,900 --> 00:02:26,470
additionally takes an event. 

64
00:02:30,930 --> 00:02:32,190
Then, we can switch on the type 

65
00:02:32,200 --> 00:02:38,010
of event. On submit, we do the 

66
00:02:38,020 --> 00:02:41,040
same logic as before, so we 

67
00:02:41,115 --> 00:02:46,170
always validate, given validate 

68
00:02:47,700 --> 00:02:52,460
and the field. What about on 

69
00:02:52,470 --> 00:02:54,850
change? With the value, let''s 

70
00:02:54,860 --> 00:02:57,850
call this new value. Let''s say 

71
00:02:57,850 --> 00:03:01,910
validate if validated, with the 

72
00:03:01,985 --> 00:03:05,750
validated function, the field 

73
00:03:05,760 --> 00:03:09,570
that has the new value and the 

74
00:03:09,580 --> 00:03:16,060
current validity. The signature 

75
00:03:16,070 --> 00:03:19,240
would be the same as this, but 

76
00:03:19,250 --> 00:03:20,700
the name is validate if 

77
00:03:20,710 --> 00:03:23,320
validated. Here, we can return 

78
00:03:23,330 --> 00:03:25,600
a field with the new value, 

79
00:03:25,700 --> 00:03:28,500
value. For the new validity, 

80
00:03:28,650 --> 00:03:30,200
let''s switch on the existing 

81
00:03:30,210 --> 00:03:34,990
validity. If it''s not validated, 

82
00:03:35,065 --> 00:03:37,470
then we want to leave it as not 

83
00:03:37,480 --> 00:03:39,790
validated, and otherwise, we 

84
00:03:39,800 --> 00:03:41,200
want to perform validation. 

85
00:03:44,530 --> 00:03:45,880
That''s the idea, let me just fix 

86
00:03:45,890 --> 00:03:48,010
a couple of errors. Here I need 

87
00:03:48,020 --> 00:03:49,770
parentheses, and this yields a 

88
00:03:49,770 --> 00:03:51,520
result. Let me pass this to the 

89
00:03:51,530 --> 00:03:53,950
validity. Here, I forgot to put 

90
00:03:53,960 --> 00:03:57,010
the row type variable. Now, I 

91
00:03:57,060 --> 00:03:58,140
can refract to the code in my 

92
00:03:58,150 --> 00:03:59,690
Elm file to use this new 

93
00:03:59,700 --> 00:04:01,090
signature for the validate 

94
00:04:01,100 --> 00:04:27,550
function. Let''s see how this 

95
00:04:27,550 --> 00:04:29,320
changes, let''s say I''ve a typo 

96
00:04:29,330 --> 00:04:36,880
here and submit. When I go back, 

97
00:04:37,260 --> 00:04:38,580
notice that as a type the 

98
00:04:38,655 --> 00:04:39,840
application keeps checking for 

99
00:04:39,850 --> 00:04:41,710
the validity, and error goes a 

100
00:04:41,720 --> 00:04:43,700
way as soon as my input is fixed. 

101
00:04:45,250 --> 00:04:46,620
Now, let me do the same 

102
00:04:46,695 --> 00:04:47,140
refactoring for the other two 

103
00:04:47,150 --> 00:05:00,870
fields. Notice that in confirm 

104
00:05:00,870 --> 00:05:01,910
password validation, we need 

105
00:05:01,920 --> 00:05:03,140
this extra parameter that''s the 

106
00:05:03,190 --> 00:05:06,020
pass out field. Let me add that 

107
00:05:06,030 --> 00:05:10,340
here. Here, I need to call it 

108
00:05:10,350 --> 00:05:14,570
with password. Next, let me 

109
00:05:14,580 --> 00:05:15,930
change the update function. 

110
00:05:51,620 --> 00:05:52,840
Let''s test the application. 

111
00:05:59,870 --> 00:06:00,760
Let''s see, if I change this 

112
00:06:00,760 --> 00:06:02,360
input, it''s still being 

113
00:06:02,435 --> 00:06:04,060
invalidated at every key stroke. 

114
00:06:14,690 --> 00:06:15,530
The user is getting some 

115
00:06:15,540 --> 00:06:16,890
feedback for when the errors are 

116
00:06:16,900 --> 00:06:19,520
fixed. Notice however that for 

117
00:06:19,530 --> 00:06:21,460
the two related fields, we''re 

118
00:06:21,470 --> 00:06:23,200
asked to do any validation only 

119
00:06:23,200 --> 00:06:25,780
when the form is submitted. 

120
00:06:25,855 --> 00:06:26,550
Let''s see how we could address 

121
00:06:26,560 --> 00:06:28,050
this. Essentially, when the user 

122
00:06:28,060 --> 00:06:29,820
changes his password, we should 

123
00:06:29,830 --> 00:06:30,780
again check that the two 

124
00:06:30,855 --> 00:06:32,780
passwords match. Let me copy 

125
00:06:32,900 --> 00:06:34,910
this validation here and perform 

126
00:06:34,920 --> 00:06:36,700
this on input password as well. 

127
00:06:38,840 --> 00:06:40,530
Now this is not the model.

128
00:06:41,160 --> 00:06:43,220
password, but rather the newly 

129
00:06:43,295 --> 00:06:44,420
validated password, essentially 

130
00:06:44,495 --> 00:06:48,300
this. Let me put this into a 

131
00:06:48,310 --> 00:07:02,630
variable. Notice that the event 

132
00:07:02,640 --> 00:07:04,980
is not on change because the 

133
00:07:04,990 --> 00:07:06,310
confirm password field hasn''t 

134
00:07:06,320 --> 00:07:07,620
really changed. What happened is 

135
00:07:07,630 --> 00:07:09,790
that a related field changed, so 

136
00:07:09,865 --> 00:07:11,150
you could call this on related 

137
00:07:11,180 --> 00:07:15,880
change. Let me now create it for 

138
00:07:15,980 --> 00:07:17,900
this new type of event. I''ll 

139
00:07:23,410 --> 00:07:25,870
use validate if validated, this 

140
00:07:25,880 --> 00:07:27,110
would prevent any annoying 

141
00:07:27,120 --> 00:07:28,610
errors when the user is first 

142
00:07:28,620 --> 00:07:30,520
filling out the form. The only 

143
00:07:30,520 --> 00:07:32,040
difference is that, we don''t 

144
00:07:32,050 --> 00:07:37,020
have a new value. Let''s see how 

145
00:07:37,030 --> 00:07:41,670
this changes. Let me enter 

146
00:07:41,745 --> 00:07:47,580
Hello1 and Hello2. Here the 

147
00:07:47,580 --> 00:07:49,720
passwords don''t match. Now, let 

148
00:07:49,795 --> 00:07:51,810
me fix this to the Hello2, and 

149
00:07:53,870 --> 00:07:55,780
now the error went away. If I 

150
00:07:55,855 --> 00:07:57,780
enter Hello22, then the password 

151
00:07:57,855 --> 00:07:59,780
don''t match. We have validation 

152
00:08:01,170 --> 00:08:05,940
as the user types. Notice that 

153
00:08:05,950 --> 00:08:06,980
we still have a no annoying 

154
00:08:07,000 --> 00:08:08,760
errors while the user is first 

155
00:08:08,835 --> 00:08:10,090
filling out his form. Hello22 

156
00:08:10,165 --> 00:08:16,280
and Hello2, these don''t match, 

157
00:08:16,680 --> 00:08:18,050
but the error won''t show until 

158
00:08:18,060 --> 00:08:19,670
you click submit. Only 

159
00:08:19,680 --> 00:08:20,930
afterwards, when you might need 

160
00:08:20,940 --> 00:08:22,260
a bit of a hand to correct your 

161
00:08:22,280 --> 00:08:24,400
input does the validation occur.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '9a0a5a0d', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (3129, 'Use Regex to Validate an Email in Elm', NULL, 'The `Regex` package provides functionality required to carry out regex-based validation.', 73, NULL, '2018-02-05T19:08:35.619Z', '2023-08-08T00:08:21.371Z', 'elm-use-regex-to-validate-an-email-in-elm', NULL, '2vlli5wtew', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG/egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_2vlli5wtew" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG.mp4" /><meta itemprop="duration" content="PT1M13S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/213eb4c7a0773c7794b04c4c61e042b6c9d13315.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/819c35e522461cd16b3a4519d901bd907f11edeb.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=73.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F213eb4c7a0773c7794b04c4c61e042b6c9d13315.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F819c35e522461cd16b3a4519d901bd907f11edeb.bin" /><meta itemprop="uploadDate" content="2018-02-05T11:10:14Z" /><object id="wistia_2vlli5wtew_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=73.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F213eb4c7a0773c7794b04c4c61e042b6c9d13315.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F819c35e522461cd16b3a4519d901bd907f11edeb.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=73.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F213eb4c7a0773c7794b04c4c61e042b6c9d13315.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F819c35e522461cd16b3a4519d901bd907f11edeb.bin" name="wistia_2vlli5wtew_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("2vlli5wtew", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/2vlli5wtew/metadata.js"></script>', 'Instructor: [00:01] At the moment, our validation for emails is very simplistic. It just checks that the @ is there. If we want a more realistic Regex-based implementation, then we need to improve that. To do this, first we need to import the Regex module, and then let me change the implementation.

[00:21] I create a regular expression. The Regex function converts a string to a regular expression, and I''ve just copied in a suitable string. Then we can make this case insensitive with the caseInsensitive function. Now, rather than string.contains, we can say regex.contains, using our Regex and given value.

[00:52] I have a typo here. Now, let me check that it works as intended. If I just type @, this will have passed validation in the previous implementation, but now it fails. If I type a valid email, you can see this now passes validation.', NULL, true, '11-egghead-elm-use-regex-to-validate-an-email-in-elm.mp4', 150, true, false, 181, '---
mp4: 6158048
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG/egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG.mp4', 'egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG', 'zlc0', 'https://egghead-pipeline.s3.amazonaws.com/egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG/egghead-use-regex-to-validate-an-email-in-elm-HyT4s2BIG.mp3?91efc9f8b5b01ac2?e792', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:21.419Z', NULL, 8388604, NULL, 3984, 0, NULL, 8388593, '0878f6c00a6511e8b562c5de1b97e933', 'https://ellie-app.com/embed/jZp3LpMsYa1/1', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383936, '1
00:00:01,800 --> 00:00:03,000
At the moment, our validation 

2
00:00:03,010 --> 00:00:04,720
for emails is very simplistic. 

3
00:00:04,880 --> 00:00:07,060
It just checks that the @ is 

4
00:00:07,070 --> 00:00:08,620
there. If we want a more 

5
00:00:08,630 --> 00:00:10,230
realistic Regex-based 

6
00:00:10,440 --> 00:00:11,780
implementation, then we need to 

7
00:00:11,790 --> 00:00:13,670
improve that. To do this, first 

8
00:00:13,680 --> 00:00:16,780
we need to import the Regex 

9
00:00:16,560 --> 00:00:19,900
module, and then let me change 

10
00:00:19,910 --> 00:00:21,880
the implementation. I create a 

11
00:00:29,770 --> 00:00:31,360
regular expression. The Regex 

12
00:00:31,435 --> 00:00:32,820
function converts a string to a 

13
00:00:32,420 --> 00:00:34,200
regular expression, and I''ve 

14
00:00:34,275 --> 00:00:35,690
just copied in a suitable string. 

15
00:00:35,790 --> 00:00:36,950
Then we can make this case 

16
00:00:36,960 --> 00:00:38,340
insensitive with the 

17
00:00:38,415 --> 00:00:43,680
caseInsensitive function. Now, 

18
00:00:43,690 --> 00:00:45,660
rather than string.contains, we 

19
00:00:45,670 --> 00:00:48,700
can say regex.contains, using 

20
00:00:48,780 --> 00:00:52,830
our Regex and given value. I 

21
00:00:53,010 --> 00:00:56,280
have a typo here. Now, let me 

22
00:00:56,350 --> 00:00:58,180
check that it works as intended. 

23
00:00:58,380 --> 00:00:59,690
If I just type @, this will have 

24
00:01:00,910 --> 00:01:02,270
passed validation in the 

25
00:01:02,280 --> 00:01:04,040
previous implementation, but now 

26
00:01:04,050 --> 00:01:06,310
it fails. If I type a valid 

27
00:01:06,310 --> 00:01:11,470
email, you can see this now 

28
00:01:11,480 --> 00:01:12,370
passes validation.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '39490cc0', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2906, 'Validate Errors onBlur in an Elm Form', NULL, 'It''s poor user experience to only be told if an input is invalid after the form gets submitted. However, it is also best to let the user finish his input before validation occurs. 

Thus, in this lesson, we''ll learn how to validate user inputs `onBlur`', 218, NULL, '2017-12-27T01:32:53.650Z', '2023-08-08T00:08:20.539Z', 'elm-validate-errors-onblur-in-an-elm-form', NULL, 'bo19t480ua', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG/egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_bo19t480ua" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG.mp4" /><meta itemprop="duration" content="PT3M38S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/93c14d1482d61aba81ccff2c89a81d21381c71bd.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/90ffd8c64afae390ad0812ff46aa99379d2f3b39.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=218.32&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F93c14d1482d61aba81ccff2c89a81d21381c71bd.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F90ffd8c64afae390ad0812ff46aa99379d2f3b39.bin" /><meta itemprop="uploadDate" content="2017-12-26T17:35:56Z" /><object id="wistia_bo19t480ua_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=218.32&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F93c14d1482d61aba81ccff2c89a81d21381c71bd.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F90ffd8c64afae390ad0812ff46aa99379d2f3b39.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=218.32&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F93c14d1482d61aba81ccff2c89a81d21381c71bd.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F90ffd8c64afae390ad0812ff46aa99379d2f3b39.bin" name="wistia_bo19t480ua_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("bo19t480ua", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/bo19t480ua/metadata.js"></script>', 'Instructor: [00:01] Generally, I think it''s nice to validate on blur as well, so when the user leaves a field, consider this example. Here, I type an email. Then I type hello, which is not a valid password, but now I didn''t get any feedback that it''s not a valid password.

[00:18] I''m going to type hello again. Then, when I submit, only then do I get feedback that that password is not good enough. Then I have to go back and change it and change the confirmed password as well.

[00:32] We can add validation on blur. Let''s just import the onBlur function. Then we''ll need the respective messages.

[00:50] Then let''s go to the view where we raise these messages.

[01:08] Finally, we need to handle these new messages in the applet function. Let me duplicate this. This will be blur email, there''s no payload. All we want to do is perform validation. It''s not onChange, but let''s assume we have a new type of event, onBlur. Let me go to my validation module and define this onBlur event. Then I need to handle this when I validate.

[01:41] What we want to do is exactly the same on submit. In a sense, when the user leaves the field, he''s committed to that value, so we can actually force the validation. Now, back in my Main.elm file, let me add cases for the remaining message types.

[02:30] Let''s see what happens now. Let me type an invalid email and an invalid password. Now it says, "Your password isn''t strong enough." Before I spend the time to retype the password, let me fix it first. Then I can say hello1 again. Before I go to submit, let me fix the email as well. Now I have a successful submission.

[03:03] Notice that if I look at my applet function now, it''s actually pretty long. That''s because we are now handling two message types for each input. Because the type of validation we want to do on input and on blur is different, there''s no easy way to unify these messages.

[03:18] There is a benefit in terms of user experience, but there is definitely a cost in terms of writing and maintaining the code. Also notice that even though the validation that we perform on blur is exactly the same as we do on submit, we still need to validate on submit because it might be that the user clicks submit without having visited all the fields.', NULL, true, '17-egghead-elm-validate-errors-onblur-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 18878842
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG/egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG.mp4', 'egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG', 'zlqV', 'https://egghead-pipeline.s3.amazonaws.com/egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG/egghead-validate-errors-onblur-in-an-elm-form-HyyRP-eXG.mp3?131beaecb903577f?81e7', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:23.546Z', NULL, 8388589, NULL, 3723, 0, NULL, 8388605, 'f4a729e0ea6211e79c61ab107be26c33', 'https://ellie-app.com/embed/h5ZyMPLtga1/2', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383746, '1
00:00:01,370 --> 00:00:02,540
Generally, I think it''s nice to 

2
00:00:02,550 --> 00:00:04,380
validate on blur as well, so 

3
00:00:04,390 --> 00:00:05,940
when the user leaves a field, 

4
00:00:06,820 --> 00:00:08,140
consider this example. Here, I 

5
00:00:08,150 --> 00:00:12,780
type an email. Then I type hello, 

6
00:00:12,890 --> 00:00:14,290
which is not a valid password, 

7
00:00:14,420 --> 00:00:15,660
but now I didn''t get any 

8
00:00:15,670 --> 00:00:17,580
feedback that it''s not a valid 

9
00:00:17,655 --> 00:00:19,250
password. I''m going to type 

10
00:00:19,260 --> 00:00:22,200
hello again. Then, when I submit, 

11
00:00:22,310 --> 00:00:23,990
only then do I get feedback that 

12
00:00:24,060 --> 00:00:26,440
that password is not good enough. 

13
00:00:27,730 --> 00:00:28,620
Then I have to go back and 

14
00:00:28,630 --> 00:00:30,410
change it and change the 

15
00:00:30,485 --> 00:00:32,920
confirmed password as well. We 

16
00:00:32,930 --> 00:00:34,240
can add validation on blur. 

17
00:00:34,315 --> 00:00:35,840
Let''s just import the onBlur 

18
00:00:35,915 --> 00:00:38,190
function. Then we''ll need the 

19
00:00:38,200 --> 00:00:50,850
respective messages. Then let''s 

20
00:00:50,860 --> 00:00:52,740
go to the view where we raise 

21
00:00:52,750 --> 00:01:08,740
these messages. Finally, we 

22
00:01:08,740 --> 00:01:09,580
need to handle these new 

23
00:01:09,590 --> 00:01:11,120
messages in the applet function. 

24
00:01:11,880 --> 00:01:15,720
Let me duplicate this. This will 

25
00:01:15,730 --> 00:01:18,570
be blur email, there''s no 

26
00:01:18,570 --> 00:01:20,580
payload. All we want to do is 

27
00:01:20,590 --> 00:01:22,170
perform validation. It''s not 

28
00:01:22,245 --> 00:01:24,090
onChange, but let''s assume we 

29
00:01:24,100 --> 00:01:26,180
have a new type of event, onBlur. 

30
00:01:26,255 --> 00:01:29,770
Let me go to my validation 

31
00:01:29,780 --> 00:01:31,660
module and define this onBlur 

32
00:01:31,735 --> 00:01:34,940
event. Then I need to handle 

33
00:01:34,950 --> 00:01:42,680
this when I validate. What we 

34
00:01:42,755 --> 00:01:43,590
want to do is exactly the same 

35
00:01:43,630 --> 00:01:45,660
on submit. In a sense, when the 

36
00:01:45,670 --> 00:01:46,910
user leaves the field, he''s 

37
00:01:46,920 --> 00:01:48,620
committed to that value, so we 

38
00:01:48,630 --> 00:01:49,800
can actually force the 

39
00:01:49,810 --> 00:01:53,140
validation. Now, back in my Main.

40
00:01:53,320 --> 00:01:55,110
elm file, let me add cases for 

41
00:01:55,120 --> 00:02:30,470
the remaining message types. 

42
00:02:30,980 --> 00:02:32,580
Let''s see what happens now. Let 

43
00:02:32,400 --> 00:02:35,990
me type an invalid email and an 

44
00:02:35,990 --> 00:02:40,780
invalid password. Now it says, "

45
00:02:40,860 --> 00:02:41,970
Your password isn''t strong 

46
00:02:41,980 --> 00:02:43,790
enough." Before I spend the time 

47
00:02:43,800 --> 00:02:46,040
to retype the password, let me 

48
00:02:45,930 --> 00:02:49,310
fix it first. Then I can say 

49
00:02:49,385 --> 00:02:52,400
hello1 again. Before I go to 

50
00:02:52,410 --> 00:02:54,390
submit, let me fix the email as 

51
00:02:54,400 --> 00:03:00,240
well. Now I have a successful 

52
00:03:00,250 --> 00:03:04,110
submission. Notice that if I 

53
00:03:04,110 --> 00:03:05,520
look at my applet function now, 

54
00:03:05,960 --> 00:03:07,190
it''s actually pretty long. 

55
00:03:07,550 --> 00:03:08,370
That''s because we are now 

56
00:03:08,380 --> 00:03:10,080
handling two message types for 

57
00:03:10,090 --> 00:03:11,930
each input. Because the type of 

58
00:03:11,940 --> 00:03:13,410
validation we want to do on 

59
00:03:13,420 --> 00:03:15,570
input and on blur is different, 

60
00:03:15,610 --> 00:03:16,840
there''s no easy way to unify 

61
00:03:16,850 --> 00:03:18,820
these messages. There is a 

62
00:03:18,830 --> 00:03:20,090
benefit in terms of user 

63
00:03:20,100 --> 00:03:21,480
experience, but there is 

64
00:03:21,490 --> 00:03:22,990
definitely a cost in terms of 

65
00:03:23,000 --> 00:03:24,730
writing and maintaining the code. 

66
00:03:25,030 --> 00:03:26,970
Also notice that even though the 

67
00:03:26,980 --> 00:03:28,180
validation that we perform on 

68
00:03:28,190 --> 00:03:29,830
blur is exactly the same as we 

69
00:03:29,840 --> 00:03:31,480
do on submit, we still need to 

70
00:03:31,555 --> 00:03:33,010
validate on submit because it 

71
00:03:33,020 --> 00:03:34,150
might be that the user clicks 

72
00:03:34,160 --> 00:03:35,750
submit without having visited 

73
00:03:35,760 --> 00:03:36,560
all the fields.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', 'e205cd12', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (66, 'Get Started With D3', '', 'This is the first video in a series on D3 from Ben Clinkinbeard. D3 can be... dense, but Ben breaks down the bare essentials and will guide you to D3 mastery.', 124, NULL, '2013-11-17T03:52:37.301Z', '2025-12-13T00:54:53.678Z', 'd3-get-started-with-d3', '', '9ps74f1h1f', 'https://dcv19h61vib2d.cloudfront.net/thumbs/d3-get-started-with-d3-BJ_WE-TUb/d3-get-started-with-d3-BJ_WE-TUb.jpg', true, '<div class="wistia_responsive_padding" style="padding:62.5% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_9ps74f1h1f" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="d3-get-started-with-d3-BJ_WE-TUb.mp4" /><meta itemprop="duration" content="PT2M5S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/fb007de6622c815d950430d8596cfcbeeb9f086e.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/f869128392feaf79c5af26028ab43e96ac5ce7f8.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=125.018&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Ffb007de6622c815d950430d8596cfcbeeb9f086e.bin%3Fimage_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Ff869128392feaf79c5af26028ab43e96ac5ce7f8.bin" /><meta itemprop="uploadDate" content="2017-07-31T19:27:34Z" /><object id="wistia_9ps74f1h1f_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:600px;position:relative;width:960px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=125.018&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Ffb007de6622c815d950430d8596cfcbeeb9f086e.bin%3Fimage_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Ff869128392feaf79c5af26028ab43e96ac5ce7f8.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=125.018&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Ffb007de6622c815d950430d8596cfcbeeb9f086e.bin%3Fimage_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Ff869128392feaf79c5af26028ab43e96ac5ce7f8.bin" name="wistia_9ps74f1h1f_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">d3-get-started-with-d3-BJ_WE-TUb.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("9ps74f1h1f", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/9ps74f1h1f/metadata.js"></script>', '[00:00] In this video, we''re going to use D3 to create a simple column chart using the dataset array you see defined. To do that we''re going to say D3.select. We''re going to tell it to select the body because that''s where we want out visualization to be defined.

[00:17] We''re then going to select all of the divs that it can find, and tell it which data to use which is just our dataset array. You will notice there are no divs defined on the page yet, and the way we''re going to fix that is by using D3''s enter selection mechanism and tell it whenever it goes into the enter selection.

[00:39] Which means that it has found a date element that doesn''t have a UI element corresponding to it. In that case we want you to append the div. After you append the div we want you to set an attribute.

[00:54] In this case it''s the class attribute, and we want that class attribute to be bar which you''ll see here has already come up, and that was thanks to the style defined up here which just sets a width and a height and a margin and a color.

[01:12] Once we do that we can actually get a little bit more control and we''ll say, "I want your height to actually be 30 pixels." We''re going to override that style that''s defined there. Now, we have our column chart defined, but it''s not terribly useful to have everything be the same size, and we''re not really using the data that we have there.

[01:36] Let''s change that by changing that static stream to a function. Each one of our data elements is going to be passed in here, and we can use that to create a dynamic value. We''ll say D * 7, and then add on the pixel units. Now we have a chart that is actually using our data.

[01:58] Obviously, you can play with the value here to modify the scaling of the chart, but that''s it.', '', false, '01-egghead-d3-get-started-with-d3.mp4', 1, true, false, 1, '---
mp4: 33013801
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/d3-get-started-with-d3-BJ_WE-TUb/d3-get-started-with-d3-BJ_WE-TUb.mp4', 'd3-get-started-with-d3-BJ_WE-TUb', 'znaZ', 'https://egghead-pipeline.s3.amazonaws.com/d3-get-started-with-d3-BJ_WE-TUb/d3-get-started-with-d3-BJ_WE-TUb.mp3?dda90a22769db5e7?fec1debb5df4cf05', 0, '', '', 'quqaze/2', '', '', NULL, 'published', '2013-11-17T03:52:37.301Z', NULL, 8387216, '', 2951, 0, NULL, 0, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/01-d3-get-started-with-d3?show=lib%2Fscript.js,preview', NULL, 'free, d3', 'd3', '', '', '', '', '', '', NULL, -1834427595, '1
00:00:00,740 --> 00:00:02,240
In this video, we''re going to 

2
00:00:02,315 --> 00:00:03,340
use D3 to create a simple column 

3
00:00:03,350 --> 00:00:05,460
chart using the dataset array 

4
00:00:05,470 --> 00:00:08,640
you see defined. To do that 

5
00:00:08,715 --> 00:00:11,040
we''re going to say D3.select. 

6
00:00:11,115 --> 00:00:13,840
We''re going to tell it to select 

7
00:00:13,915 --> 00:00:13,910
the body because that''s where we 

8
00:00:13,910 --> 00:00:16,060
want out visualization to be 

9
00:00:16,070 --> 00:00:18,580
defined. We''re then going to 

10
00:00:18,700 --> 00:00:19,950
select all of the divs that it 

11
00:00:19,960 --> 00:00:23,050
can find, and tell it which data 

12
00:00:23,060 --> 00:00:24,800
to use which is just our dataset 

13
00:00:24,920 --> 00:00:27,830
array. You will notice there are 

14
00:00:27,905 --> 00:00:30,880
no divs defined on the page yet, 

15
00:00:30,955 --> 00:00:32,070
and the way we''re going to fix 

16
00:00:32,080 --> 00:00:34,010
that is by using D3''s enter 

17
00:00:34,020 --> 00:00:36,920
selection mechanism and tell it 

18
00:00:38,130 --> 00:00:39,390
whenever it goes into the enter 

19
00:00:39,400 --> 00:00:41,670
selection. Which means that it 

20
00:00:41,680 --> 00:00:43,010
has found a date element that 

21
00:00:43,020 --> 00:00:44,290
doesn''t have a UI element 

22
00:00:44,210 --> 00:00:46,420
corresponding to it. In that 

23
00:00:46,430 --> 00:00:47,970
case we want you to append the 

24
00:00:48,045 --> 00:00:52,150
div. After you append the div we 

25
00:00:52,150 --> 00:00:54,260
want you to set an attribute. 

26
00:00:54,260 --> 00:00:56,300
In this case it''s the class 

27
00:00:56,375 --> 00:00:59,100
attribute, and we want that 

28
00:00:59,110 --> 00:01:01,370
class attribute to be bar which 

29
00:01:01,420 --> 00:01:03,300
you''ll see here has already come 

30
00:01:03,310 --> 00:01:04,720
up, and that was thanks to the 

31
00:01:04,730 --> 00:01:07,060
style defined up here which just 

32
00:01:07,070 --> 00:01:09,890
sets a width and a height and a 

33
00:01:09,900 --> 00:01:13,010
margin and a color. Once we do 

34
00:01:13,020 --> 00:01:14,990
that we can actually get a 

35
00:01:15,000 --> 00:01:17,210
little bit more control and 

36
00:01:17,210 --> 00:01:19,790
we''ll say, "I want your height 

37
00:01:19,800 --> 00:01:22,120
to actually be 30 pixels." We''re 

38
00:01:22,120 --> 00:01:23,530
going to override that style 

39
00:01:23,540 --> 00:01:25,580
that''s defined there. Now, we 

40
00:01:25,580 --> 00:01:27,690
have our column chart defined, 

41
00:01:29,180 --> 00:01:30,800
but it''s not terribly useful to 

42
00:01:30,810 --> 00:01:33,090
have everything be the same size, 

43
00:01:33,100 --> 00:01:34,270
and we''re not really using the 

44
00:01:34,280 --> 00:01:36,630
data that we have there. Let''s 

45
00:01:36,640 --> 00:01:38,540
change that by changing that 

46
00:01:39,020 --> 00:01:40,530
static stream to a function. 

47
00:01:41,230 --> 00:01:43,560
Each one of our data elements is 

48
00:01:43,570 --> 00:01:45,870
going to be passed in here, and 

49
00:01:45,945 --> 00:01:47,000
we can use that to create a 

50
00:01:47,010 --> 00:01:49,550
dynamic value. We''ll say D * 7, 

51
00:01:49,625 --> 00:01:52,860
and then add on the pixel units. 

52
00:01:53,100 --> 00:01:54,850
Now we have a chart that is 

53
00:01:54,860 --> 00:01:56,600
actually using our data. 

54
00:01:58,140 --> 00:01:59,320
Obviously, you can play with the 

55
00:01:59,330 --> 00:02:02,110
value here to modify the scaling 

56
00:02:02,120 --> 00:02:03,840
of the chart, but that''s it.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, 'https://stream.mux.com/B6Ub00bS00WKHhnU0243faMGobhocL1SDD7J4006woZnOyU.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5765, 'Change a Commit Message that Hasn''t Been Pushed Yet', NULL, 'If you make a mistake in a commit message but HAVEN''T pushed it yet, you can change that commit message with --amend:

`git commit --amend -m "New message"`

This won''t change any of the files in your commit - but will rewrite the commit with the new message.', 107, NULL, '2019-11-28T03:51:11.019Z', '2025-12-13T00:54:53.678Z', 'git-change-a-commit-message-that-hasn-t-been-pushed-yet', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B/git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B.jpg', true, NULL, 'Instructor: [0:00] Let''s start a new git project by going to New on GitHub and entering a repository name of git_mistakes. I''ll make that public and initialize it with a README.

[0:14] Once it''s created, I can find the clone link and in a terminal I will git clone that repository. Then I can cd into it. I''m going to touch index.html, which''ll be the first file that we make. In a text editor, we can open that folder.

[0:35] In our index.html file, let''s paste in some HTML. Now we want to add this to a commit. First, let''s do a git status to see that we have index.html that is not tracked yet. It''s untracked. We can add index.html. Now if we do a git status, we have it as changes to be committed.

[0:56] This is what we call staged or in the index. We can commit that with git commit -m. We''ll say adding index.html to git mistooks.

[1:08] As soon as I type that, I realize that I said mistooks instead of mistakes, so I want to change that commit message. Since I haven''t pushed this yet, I can just say git commit --ammend. Now I can say that I want to give it a new message of adding index.html to git mistakes.

[1:30] If I do a git log --oneline, I can see I have my initial commit that GitHub made when it made the project, and then I have my adding index.html to git mistakes. It actually rewrote the commit message that had a typo in it.', NULL, false, '01-egghead-git-change-a-commit-message-that-hasn-t-been-pushed-yet.mp4', 210, true, false, 401, '---
mp4: 10514175
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B/git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B.mp4', 'git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B', 'zduw', 'https://egghead-pipeline.s3.amazonaws.com/git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B/git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B.mp3?55651d9a664e5347?098c', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:03.603Z', NULL, 8388602, NULL, 7252, 0, NULL, -2752511, 'e0cfe3e909a84610846ee1c7fe102331', NULL, 265830, 'free', '', '', '', 'git', 'github', '', '', NULL, 141111736, '1
00:00:00,430 --> 00:00:02,300
Let''s start a new git project by 

2
00:00:02,300 --> 00:00:04,540
going to New on GitHub and 

3
00:00:04,540 --> 00:00:06,250
entering a repository name of 

4
00:00:06,330 --> 00:00:09,190
git_mistakes. I''ll make that 

5
00:00:09,190 --> 00:00:10,950
public and initialize it with a 

6
00:00:10,950 --> 00:00:15,120
README. Once it''s created, I 

7
00:00:15,120 --> 00:00:18,250
can find the clone link and in a 

8
00:00:18,250 --> 00:00:20,850
terminal I will git clone that 

9
00:00:20,850 --> 00:00:24,090
repository. Then I can cd into 

10
00:00:25,090 --> 00:00:27,320
it. I''m going to touch index.

11
00:00:27,520 --> 00:00:29,300
html, which''ll be the first file 

12
00:00:29,300 --> 00:00:31,720
that we make. In a text editor, 

13
00:00:31,930 --> 00:00:35,850
we can open that folder. In our 

14
00:00:35,850 --> 00:00:38,260
index.html file, let''s paste in 

15
00:00:38,260 --> 00:00:40,500
some HTML. Now we want to add 

16
00:00:40,500 --> 00:00:42,800
this to a commit. First, let''s 

17
00:00:42,800 --> 00:00:44,360
do a git status to see that we 

18
00:00:44,360 --> 00:00:46,730
have index.html that is not 

19
00:00:47,070 --> 00:00:49,490
tracked yet. It''s untracked. We 

20
00:00:49,490 --> 00:00:52,760
can add index.html. Now if we do 

21
00:00:52,760 --> 00:00:54,780
a git status, we have it as 

22
00:00:54,780 --> 00:00:56,350
changes to be committed. This 

23
00:00:56,350 --> 00:00:58,020
is what we call staged or in the 

24
00:00:58,020 --> 00:01:00,130
index. We can commit that with 

25
00:01:00,190 --> 00:01:03,030
git commit -m. We''ll say adding 

26
00:01:03,100 --> 00:01:08,460
index.html to git mistooks. As 

27
00:01:08,460 --> 00:01:09,760
soon as I type that, I realize 

28
00:01:09,760 --> 00:01:11,350
that I said mistooks instead of 

29
00:01:11,350 --> 00:01:13,000
mistakes, so I want to change 

30
00:01:13,000 --> 00:01:14,870
that commit message. Since I 

31
00:01:14,870 --> 00:01:16,080
haven''t pushed this yet, I can 

32
00:01:16,080 --> 00:01:18,810
just say git commit --ammend. 

33
00:01:19,470 --> 00:01:21,780
Now I can say that I want to 

34
00:01:21,780 --> 00:01:23,590
give it a new message of adding 

35
00:01:23,880 --> 00:01:30,430
index.html to git mistakes. If 

36
00:01:30,430 --> 00:01:34,030
I do a git log --oneline, I can 

37
00:01:34,030 --> 00:01:35,350
see I have my initial commit 

38
00:01:35,550 --> 00:01:36,790
that GitHub made when it made 

39
00:01:36,790 --> 00:01:39,090
the project, and then I have my 

40
00:01:39,150 --> 00:01:40,890
adding index.html to git 

41
00:01:41,000 --> 00:01:42,750
mistakes. It actually rewrote 

42
00:01:42,750 --> 00:01:43,950
the commit message that had a 

43
00:01:43,950 --> 00:01:44,780
typo in it.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'To start a new Git project, go to `New` on Github and enter a repository name. After creating the repository, find the clone link for the repo and `git clone <repo-link>`. You can then `cd` into that folder and `touch index.html` to create your first file. Inside your `index.html` file you can insert code and add the file to your commit.

## index.html
```html
<html>
  <head>
  </head>
  <body>

    <h1>Fixing git mistakes</h1>

  </body>
</html>  
```

You can do a `git status` and see that the `index.html` is an untracked file. Once you `git add index.html`, it stages the file and prepares it for a commit. You can commit that with a message like `git commit -m "Adding index.html to git-mistokes"`.

After typing the commit message, we see we typed it incorrectly and want to change it. Since we haven''t pushed it yet, you can use `git commit --amend -m "Adding index.html to git-mistakes"` to change the message. Now, if we `git log --oneline`, we can see the initial commit Github made to the project along with our rewritten message `Adding index.html to git-mistakes`.

# Personal Take

`git commit --amend` is a very useful feature I know I''ll use in the future should I mess up my commit messages. There are plenty of times I would simply just abandon a commit to retype a message, as I had no idea this feature existed. I like the simplicity of this lesson, the approach helps all levels of experience.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '54b22329', 'https://d2c5owlt6rorc3.cloudfront.net/git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B/dash/git-change-a-commit-message-that-hasn-t-been-pushed-yet-rJ__noh2B.mpd', 'https://stream.mux.com/RhrJbClGWX1ag02HTvmfMERnVV74vp2eBMf004nil8CEc.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5766, 'Add More Files and Changes to a Commit Before Pushing', NULL, 'To add more files to the most recent commit, we can add them to the staging area with:

`git add -A`

and then rewrite the most recent commit to include them with:

`git commit --amend -m "My new message"`

Caution: only do this BEFORE you''ve pushed the commits - otherwise you will be re-writing history for people who may have already pulled down the old commits.', 94, NULL, '2019-11-28T04:15:22.652Z', '2025-12-13T00:54:53.678Z', 'git-add-more-files-and-changes-to-a-commit-before-pushing', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr/scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr.jpg', true, NULL, 'Instructor: [0:00] I have a project with one HTML file and if I do git log oneline here, we can see that HTML file was added in this commit. Let''s say I want to add a couple more files to that same commit. We can touch app.js for example and open that up. Inside of here, this will be our App.js code.

[0:20] To see that, we need to add it in the head, so we can type script, [inaudible] text.JavaScript. The actual files we''re making here don''t matter so much, but for our project, we want to have at least two files.

[0:36] Now we have the script tag added to our HTML. If we do a git status here, we can see that we have one untracked file. That''s our new app.js file and one modified file, that''s index.html. We want to add those to the same commit. If we do git log again, we only want one commit here.

[0:56] What we can do is actually add this to the stage, so we can do git add -a for add all. Now if we do a git status, we have changes to be committed and we can use git commit.

[1:10] If we want to add them to that same commit, this commit, then we can do --amend and we can change the git message by saying adding index.html and app.js. Now if we do a git status, we have no changes to be committed. If we do a git log oneline, all of those files were added to the same commit and it re-wrote the commit message.', NULL, false, '02-egghead-git-add-more-files-and-changes-to-a-commit-before-pushing.mp4', 210, true, false, 401, '---
mp4: 9250457
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr/scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr.mp4', 'scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr', 'zduN', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr/scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr.mp3?bfe0c0027c25f6c2?4730', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:03.669Z', NULL, 8388602, NULL, 7234, 0, NULL, 1441793, 'fb1521e18af34be9b592aef618caed56', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 141782092, '1
00:00:00,440 --> 00:00:02,190
I have a project with one HTML 

2
00:00:02,190 --> 00:00:04,330
file and if I do git log oneline 

3
00:00:04,330 --> 00:00:06,460
here, we can see that HTML file 

4
00:00:06,650 --> 00:00:08,990
was added in this commit. Let''s 

5
00:00:08,990 --> 00:00:10,270
say I want to add a couple more 

6
00:00:10,270 --> 00:00:12,140
files to that same commit. We 

7
00:00:12,140 --> 00:00:14,730
can touch app.js for example and 

8
00:00:14,730 --> 00:00:16,690
open that up. Inside of here, 

9
00:00:16,690 --> 00:00:18,790
this will be our App.js code. 

10
00:00:20,220 --> 00:00:22,400
To see that, we need to add it 

11
00:00:22,470 --> 00:00:24,740
in the head, so we can type 

12
00:00:25,030 --> 00:00:27,610
script,  text.

13
00:00:27,650 --> 00:00:29,900
JavaScript. The actual files 

14
00:00:29,900 --> 00:00:30,970
we''re making here don''t matter 

15
00:00:30,970 --> 00:00:33,650
so much, but for our project, we 

16
00:00:33,650 --> 00:00:35,380
want to have at least two files. 

17
00:00:36,250 --> 00:00:38,070
Now we have the script tag added 

18
00:00:38,070 --> 00:00:40,270
to our HTML. If we do a git 

19
00:00:40,270 --> 00:00:42,100
status here, we can see that we 

20
00:00:42,100 --> 00:00:43,590
have one untracked file. That''s 

21
00:00:43,590 --> 00:00:46,360
our new app.js file and one 

22
00:00:46,360 --> 00:00:48,730
modified file, that''s index.html. 

23
00:00:49,750 --> 00:00:51,180
We want to add those to the same 

24
00:00:51,180 --> 00:00:52,790
commit. If we do git log again, 

25
00:00:54,110 --> 00:00:55,930
we only want one commit here. 

26
00:00:56,960 --> 00:00:58,420
What we can do is actually add 

27
00:00:58,420 --> 00:01:00,770
this to the stage, so we can do 

28
00:01:00,770 --> 00:01:04,160
git add -a for add all. Now if 

29
00:01:04,160 --> 00:01:05,950
we do a git status, we have 

30
00:01:05,950 --> 00:01:08,080
changes to be committed and we 

31
00:01:08,080 --> 00:01:10,930
can use git commit. If we want 

32
00:01:10,930 --> 00:01:12,250
to add them to that same commit, 

33
00:01:12,360 --> 00:01:14,050
this commit, then we can do --

34
00:01:14,300 --> 00:01:16,490
amend and we can change the git 

35
00:01:16,600 --> 00:01:19,020
message by saying adding index.

36
00:01:19,060 --> 00:01:23,720
html and app.js. Now if we do a 

37
00:01:23,720 --> 00:01:26,270
git status, we have no changes 

38
00:01:26,270 --> 00:01:27,760
to be committed. If we do a git 

39
00:01:27,760 --> 00:01:30,760
log oneline, all of those files 

40
00:01:30,760 --> 00:01:31,880
were added to the same commit 

41
00:01:32,130 --> 00:01:33,140
and it re-wrote the commit 

42
00:01:33,215 --> 00:01:33,540
message.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'We can use `git log --oneline` to see information about our previous commits like what files were added to certain commits. There is something we can do if we want to add more than one file to the same commit. We can `touch app.js` and edit it.

## app.js
```js
// our app js code
```

To see that, we need to add it in the `<head>` of the `index.html` in our previous commit. We type `<script type="text/javascript" src="/app.js"></script>`.

## index.html
```html
<html>
  <head>
    <script type="text/javascript" src="/app.js"></script>
  </head>
  <body>

    <h1>Fixing git mistakes</h1>

  </body>
</html>  
```

Now that we have our `script` tag added to our `index.html`, when we do `git status` we have one untracked file and one modified file. However, we want to add those to the same commit. To do this, we add both to the stage with `git add -A` and we have both as a change to be committed. We then `git commit --amend -m "Adding index.html and app.js"` to add them to the same previous commit. Now, with `git status`, we have no changes to be committed. A `git log --oneline`, all files were added to the same commit along with a rewritten commit message.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '4f005c36', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr/dash/scikit-learn-add-more-files-and-changes-to-a-commit-before-pushing-HJDwFLnhr.mpd', 'https://stream.mux.com/mPhDfOFFFa2Rnjlc00kZO6Xplx2F6HLczVWsZHLizzW8.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5770, 'Remove Files from Staging Before Committing', NULL, 'If you''ve added files to the staging area (the Index) accidentally - you can remove them using `git reset`.

We''ll first add a file to staging, but then back it out with:

`git reset HEAD filename`

in order to pull it back to the working directory, so it doesn''t end up in a commit when we don''t want it to.', 94, NULL, '2019-11-28T05:32:36.950Z', '2025-12-13T00:54:53.678Z', 'git-remove-files-from-staging-before-committing', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-remove-files-from-staging-before-committing-SJbKownnS/scikit-learn-remove-files-from-staging-before-committing-SJbKownnS.jpg', true, NULL, 'Instructor: [00:00] Now, let''s add another JavaScript file called limb.js and inside of limb.js, we can say that, "This is my limb file." Then, we want to do a Git status to see that it''s on tract. Let''s add the limb JS file and we''re about to commit.

[00:19] We have some changes to be committed, but then we maybe realize that we don''t actually want to commit them. We''ve added it to staging, but we don''t actually want to commit this limb file at all. The good news is that Git tells us how to fix it right here.

[00:33] We can do a Git reset HEAD and then the file name. Let''s figure out first what this head is. If we do a Git log one line, then we can see that head is a pointer to a branch and that branch is just a pointer to the commit specified by this hash.

[00:52] If we say git reset HEAD, then give it a file, it will reset this file back to what it was in this commit, which means it won''t exist. We can do git reset HEAD lib.js. Now, if we do a git status, we can see that it''s untracked. It''s removed from the staging area because it doesn''t exist in this commit.

[01:16] Now, if we want to get rid of it entirely, we can remove lib.js. If we do a git status, then we''re back to normal. We can just have our index.html and our app.js. The lib.js file is gone.', NULL, true, '03-egghead-git-remove-files-from-staging-before-committing.mp4', 210, true, false, 401, '---
mp4: 9440748
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-remove-files-from-staging-before-committing-SJbKownnS/scikit-learn-remove-files-from-staging-before-committing-SJbKownnS.mp4', 'scikit-learn-remove-files-from-staging-before-committing-SJbKownnS', 'zduP', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-remove-files-from-staging-before-committing-SJbKownnS/scikit-learn-remove-files-from-staging-before-committing-SJbKownnS.mp3?49d3c2851373449c?140d', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.296Z', NULL, 8388602, NULL, 7238, 0, NULL, 4980736, '4dfbdce063f048508d998953c6911418', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 147144940, '1
00:00:00,180 --> 00:00:01,330
Now, let''s add another 

2
00:00:01,330 --> 00:00:04,000
JavaScript file called limb.js 

3
00:00:04,790 --> 00:00:07,040
and inside of limb.js, we can 

4
00:00:07,040 --> 00:00:09,800
say that, "This is my limb file." 

5
00:00:10,780 --> 00:00:12,520
Then, we want to do a Git status 

6
00:00:12,920 --> 00:00:15,310
to see that it''s on tract. Let''s 

7
00:00:15,380 --> 00:00:17,820
add the limb JS file and we''re 

8
00:00:17,870 --> 00:00:19,780
about to commit. We have some 

9
00:00:19,780 --> 00:00:21,610
changes to be committed, but 

10
00:00:21,610 --> 00:00:22,730
then we maybe realize that we 

11
00:00:22,730 --> 00:00:23,880
don''t actually want to commit 

12
00:00:23,880 --> 00:00:26,560
them. We''ve added it to staging, 

13
00:00:26,760 --> 00:00:27,920
but we don''t actually want to 

14
00:00:27,920 --> 00:00:29,420
commit this limb file at all. 

15
00:00:30,350 --> 00:00:31,790
The good news is that Git tells 

16
00:00:31,790 --> 00:00:34,090
us how to fix it right here. We 

17
00:00:34,090 --> 00:00:36,050
can do a Git reset HEAD and then 

18
00:00:36,050 --> 00:00:38,200
the file name. Let''s figure out 

19
00:00:38,200 --> 00:00:41,310
first what this head is. If we 

20
00:00:41,310 --> 00:00:43,620
do a Git log one line, then we 

21
00:00:43,620 --> 00:00:45,240
can see that head is a pointer 

22
00:00:45,240 --> 00:00:47,810
to a branch and that branch is 

23
00:00:47,810 --> 00:00:49,430
just a pointer to the commit 

24
00:00:49,580 --> 00:00:52,280
specified by this hash. If we 

25
00:00:52,280 --> 00:00:54,630
say git reset HEAD, then give it 

26
00:00:54,630 --> 00:00:56,990
a file, it will reset this file 

27
00:00:57,060 --> 00:00:58,580
back to what it was in this 

28
00:00:58,580 --> 00:01:01,000
commit, which means it won''t 

29
00:01:01,000 --> 00:01:04,370
exist. We can do git reset HEAD 

30
00:01:04,710 --> 00:01:07,860
lib.js. Now, if we do a git 

31
00:01:07,860 --> 00:01:09,870
status, we can see that it''s 

32
00:01:09,920 --> 00:01:12,190
untracked. It''s removed from the 

33
00:01:12,190 --> 00:01:13,670
staging area because it doesn''t 

34
00:01:13,670 --> 00:01:16,720
exist in this commit. Now, if 

35
00:01:16,720 --> 00:01:17,590
we want to get rid of it 

36
00:01:17,640 --> 00:01:21,210
entirely, we can remove lib.js. 

37
00:01:22,210 --> 00:01:24,370
If we do a git status, then 

38
00:01:24,370 --> 00:01:26,380
we''re back to normal. We can 

39
00:01:26,380 --> 00:01:29,070
just have our index.html and our 

40
00:01:29,070 --> 00:01:32,580
app.js. The lib.js file is gone.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'We can add another Javascript file to our project with `touch lib.js`. After doing so, we can `git status` to confirm it is untracked. Then, a `git add lib.js` will stage it for a commit. However, we might realize after adding it that we may not want to commit that file at all.

Although Git tells us how to do it in the terminal (`git reset HEAD <file>...`), we want to figure out what the `HEAD` means. With `git log --oneline` we find the `HEAD` is just a pointer to a branch and that branch is just a pointer to the commit specified by a hash on the left.

After running `git reset HEAD lib.js`, we can check if we successfully removed it from being staged for a commit with `git status`.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', 'f06577f6', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-remove-files-from-staging-before-committing-SJbKownnS/dash/scikit-learn-remove-files-from-staging-before-committing-SJbKownnS.mpd', 'https://stream.mux.com/02EJH0254hPcv9FmI00h00FRT96tvIgtCNvpFT9021k300J8Q.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5776, 'Undo a Commit that has Already Been Pushed', NULL, 'Once a commit is pushed, you do NOT want to use `git reset` to undo it - because `reset` will rewrite the history tree, and anyone who has already pulled that branch will have a bad tree.

Instead, we''ll use `git revert` to make a "revert commit" (like a merge commit), which will "undo" a specific commit.  So the syntax is:

`git revert [HASH-TO-UNDO]`
', 103, NULL, '2019-11-28T06:36:25.110Z', '2025-12-13T00:54:53.678Z', 'git-undo-a-commit-that-has-already-been-pushed', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r/scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r.jpg', true, NULL, 'Instructor: [00:00] In our project, we''ve just made a push to GitHub. If we do a git log oneline, we see that our HEAD is pointing to our local branch master, which is also where our origin master and origin HEAD are, which means our local branch is up to date with our origin.

[00:16] Say we have this take three commit here where we edit this function and we want to change something about that. We will not use git reset here though, because we''ve already pushed this and someone else may have pulled it. If we reset, that means we''re re-writing history and we don''t want to do that once it''s already pushed.

[00:33] Instead, we are going to do a git revert. We can do a git revert. Here we want to give it the hash of the commit that we want to revert. That''s this one right here. Let''s revert this hash, and it brings up a text editor here and it wants us to make a revert commit.

[00:50] This is like a merge commit, meaning it adds another commit to the tree, and we have to give it a message. Revert take three, that''s a fine message. I''m going to hit <esc> :wq to save that.

[01:02] Now, if I do a git log oneline, we can see that it has reverted take three. If I check out app.js, that function is gone. What happened is, between here and here, I added the function. The revert of that is to remove the function.

[01:20] The really important thing here is that the history is still there. If we went back to this take three commit, we would get our function back. Crucially, anyone who''s already pulled the origin/master branch will have a clean history tree because we used revert here instead of reset.

[01:36] We can git push this, and now all of our collaborators will have this file empty, as well.', NULL, true, '07-egghead-git-undo-a-commit-that-has-already-been-pushed.mp4', 210, true, false, 401, '---
mp4: 8752461
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r/scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r.mp4', 'scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r', 'zduq', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r/scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r.mp3?b04883ccd09cf69c?57c5', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:03.840Z', NULL, 8388602, NULL, 7243, 0, NULL, 8175616, '3cbf577cde9641e880c73c43ed41bc42', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 153178144, '1
00:00:00,550 --> 00:00:01,790
In our project, we''ve just made 

2
00:00:01,790 --> 00:00:03,440
a push to GitHub. If we do a git 

3
00:00:03,440 --> 00:00:06,180
log oneline, we see that our 

4
00:00:06,420 --> 00:00:07,710
HEAD is pointing to our local 

5
00:00:07,710 --> 00:00:09,620
branch master, which is also 

6
00:00:09,620 --> 00:00:11,330
where our origin master and 

7
00:00:11,330 --> 00:00:13,690
origin HEAD are, which means our 

8
00:00:13,690 --> 00:00:15,160
local branch is up to date with 

9
00:00:15,160 --> 00:00:17,370
our origin. Say we have this 

10
00:00:17,570 --> 00:00:19,560
take three commit here where we 

11
00:00:19,770 --> 00:00:21,350
edit this function and we want 

12
00:00:21,350 --> 00:00:22,570
to change something about that. 

13
00:00:23,070 --> 00:00:24,630
We will not use git reset here 

14
00:00:24,630 --> 00:00:25,710
though, because we''ve already 

15
00:00:25,710 --> 00:00:26,970
pushed this and someone else may 

16
00:00:26,970 --> 00:00:28,670
have pulled it. If we reset, 

17
00:00:28,670 --> 00:00:29,720
that means we''re re-writing 

18
00:00:29,720 --> 00:00:31,230
history and we don''t want to do 

19
00:00:31,230 --> 00:00:32,410
that once it''s already pushed. 

20
00:00:33,230 --> 00:00:34,380
Instead, we are going to do a 

21
00:00:34,380 --> 00:00:36,390
git revert. We can do a git 

22
00:00:36,420 --> 00:00:38,330
revert. Here we want to give it 

23
00:00:38,330 --> 00:00:40,060
the hash of the commit that we 

24
00:00:40,060 --> 00:00:42,300
want to revert. That''s this one 

25
00:00:42,300 --> 00:00:44,670
right here. Let''s revert this 

26
00:00:44,670 --> 00:00:46,960
hash, and it brings up a text 

27
00:00:46,960 --> 00:00:48,690
editor here and it wants us to 

28
00:00:48,690 --> 00:00:50,520
make a revert commit. This is 

29
00:00:50,520 --> 00:00:52,630
like a merge commit, meaning it 

30
00:00:52,630 --> 00:00:54,270
adds another commit to the tree, 

31
00:00:54,720 --> 00:00:55,990
and we have to give it a message. 

32
00:00:56,640 --> 00:00:58,260
Revert take three, that''s a fine 

33
00:00:58,260 --> 00:01:00,430
message. I''m going to hit <esc> :

34
00:01:00,780 --> 00:01:03,450
wq to save that. Now, if I do a 

35
00:01:03,450 --> 00:01:06,780
git log oneline, we can see that 

36
00:01:06,820 --> 00:01:09,360
it has reverted take three. If I 

37
00:01:09,360 --> 00:01:11,530
check out app.js, that function 

38
00:01:11,530 --> 00:01:13,930
is gone. What happened is, 

39
00:01:14,530 --> 00:01:15,990
between here and here, I added 

40
00:01:15,990 --> 00:01:18,780
the function. The revert of that 

41
00:01:18,780 --> 00:01:21,030
is to remove the function. The 

42
00:01:21,030 --> 00:01:22,330
really important thing here is 

43
00:01:22,330 --> 00:01:23,910
that the history is still there. 

44
00:01:24,310 --> 00:01:26,020
If we went back to this take 

45
00:01:26,020 --> 00:01:27,050
three commit, we would get our 

46
00:01:27,050 --> 00:01:29,370
function back. Crucially, anyone 

47
00:01:29,370 --> 00:01:30,640
who''s already pulled the origin/

48
00:01:30,640 --> 00:01:32,520
master branch will have a clean 

49
00:01:32,520 --> 00:01:33,930
history tree because we used 

50
00:01:33,980 --> 00:01:35,390
revert here instead of reset. 

51
00:01:36,670 --> 00:01:39,310
We can git push this, and now 

52
00:01:39,310 --> 00:01:40,470
all of our collaborators will 

53
00:01:40,470 --> 00:01:42,190
have this file empty, as well.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'If we just made a push to Github, we can use `git log --oneline` to see our local branch is up to date with our origin. We are presented with a problem when we try to undo a commit that''s already been pushed. **We have to be careful because if we undo a commit already pushed, we would affect those who pulled the changes, effectively rewriting history.**

We are going to use `git revert {HASH}` with the hash being the commit we want to revert. After doing so, it''ll want you to make a revert commit. It''s similar to a merge commit because it adds another commit to the tree, plus we have to give it a message. After entering the message, running `git log --oneline` we find that it successfully reverted the last commit.

**The important thing is that when using `git revert`, the history is still there.** You can go back to an earlier commit to revive previous work/code. In addition, anyone who pulled the origin/master branch during the time it took to revert will have a clean history tree because we used `git revert {HASH}` instead of `git reset --hard {HASH}`.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '52b14e84', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r/dash/scikit-learn-undo-a-commit-that-has-already-been-pushed-S1Lu9dn3r.mpd', 'https://stream.mux.com/kjiEt02qtV4Z8xPWY4yi7BTKMWAMAwMT4xUcaizVu5Ok.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5774, 'Recover Local Changes from `git reset --hard` with `git reflog`', NULL, 'If you''ve removed a commit with `git reset --hard`, it''s still possible to recover the commit using `git reflog` to look up the commit hash.

Once we find the right commit hash, we can reset our branch _back_ to that commit hash with `git reset --hard [HASH]`

NOTE!  git will actually garbage collect abandoned commits (every 30 days or so - so not very often) - so you can''t recover from a `reset --hard` forever; which is why it''s recommended to avoid `--hard` if you ever want to references those changes.', 88, NULL, '2019-11-28T06:29:41.276Z', '2025-12-13T00:54:53.678Z', 'git-recover-local-changes-from-git-reset-hard-with-git-reflog', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH/scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH.jpg', true, NULL, 'Instructor: [0:00] We just did a git reset --hard back one which removed our function from app.js. We really want to get that function back so let''s take a look at how we might do that. For that, we''re going to use git rough log which is a really powerful way to look at all the different things you''ve done in your local Git repository.

[0:21] For example, you can see the three latest resets that we''ve done and this last one was the reset hard. Now, we want to recover this commit here, this take three commit, but one thing to note is that this commit, because we reset hard, is now abandoned and will actually get garbage collected eventually if we don''t save it.

[0:40] Rough log will work to save commits but only if they haven''t been garbage collected by Git yet. We want to reset master to this commit to recover it so we can take the hash and we can git reset --hard back to that hash. Now we have our function back in app. If we do a git log oneline, we can see that we have our regular commits, and then we have the take three commit back on as master.

[1:10] We used reset --hard both to get rid of this commit by resetting to this commit, but also to recover it again from the ref log. Let''s push this up to GitHub before we make any more mistakes. This is up in GitHub, so we can check it out there, as well.', NULL, true, '06-egghead-git-recover-local-changes-from-git-reset-hard-with-git-reflog.mp4', 210, true, false, 401, '---
mp4: 10640748
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH/scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH.mp4', 'scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH', 'zduR', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH/scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH.mp3?d60cfb7c23b7d75d?4595', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:03.654Z', NULL, 8388602, NULL, 7242, 0, NULL, 7892992, 'f0ada1a9d9ee4762b677e491d7bf6e42', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 151837432, '1
00:00:00,630 --> 00:00:02,610
We just did a git reset --hard 

2
00:00:02,960 --> 00:00:04,980
back one which removed our 

3
00:00:04,980 --> 00:00:07,820
function from app.js. We really 

4
00:00:07,820 --> 00:00:08,840
want to get that function back 

5
00:00:09,350 --> 00:00:10,640
so let''s take a look at how we 

6
00:00:10,640 --> 00:00:12,670
might do that. For that, we''re 

7
00:00:12,670 --> 00:00:16,240
going to use git rough log which 

8
00:00:16,240 --> 00:00:17,740
is a really powerful way to look 

9
00:00:17,740 --> 00:00:18,790
at all the different things 

10
00:00:18,790 --> 00:00:19,880
you''ve done in your local Git 

11
00:00:19,880 --> 00:00:21,840
repository. For example, you 

12
00:00:21,840 --> 00:00:24,130
can see the three latest resets 

13
00:00:24,130 --> 00:00:25,450
that we''ve done and this last 

14
00:00:25,490 --> 00:00:28,320
one was the reset hard. Now, we 

15
00:00:28,320 --> 00:00:30,830
want to recover this commit here, 

16
00:00:30,850 --> 00:00:32,750
this take three commit, but one 

17
00:00:32,750 --> 00:00:33,610
thing to note is that this 

18
00:00:33,610 --> 00:00:35,170
commit, because we reset hard, 

19
00:00:35,580 --> 00:00:36,980
is now abandoned and will 

20
00:00:36,980 --> 00:00:38,180
actually get garbage collected 

21
00:00:38,180 --> 00:00:39,830
eventually if we don''t save it. 

22
00:00:40,130 --> 00:00:41,320
Rough log will work to save 

23
00:00:41,320 --> 00:00:42,700
commits but only if they haven''t 

24
00:00:42,700 --> 00:00:44,030
been garbage collected by Git 

25
00:00:45,350 --> 00:00:48,020
yet. We want to reset master to 

26
00:00:48,020 --> 00:00:49,930
this commit to recover it so we 

27
00:00:49,930 --> 00:00:52,560
can take the hash and we can git 

28
00:00:52,750 --> 00:00:56,220
reset --hard back to that hash. 

29
00:00:57,660 --> 00:00:59,980
Now we have our function back in 

30
00:00:59,980 --> 00:01:02,410
app. If we do a git log oneline, 

31
00:01:03,750 --> 00:01:05,020
we can see that we have our 

32
00:01:05,020 --> 00:01:06,190
regular commits, and then we 

33
00:01:06,190 --> 00:01:07,620
have the take three commit back 

34
00:01:07,690 --> 00:01:10,620
on as master. We used reset --

35
00:01:10,620 --> 00:01:11,990
hard both to get rid of this 

36
00:01:11,990 --> 00:01:13,670
commit by resetting to this 

37
00:01:13,670 --> 00:01:15,240
commit, but also to recover it 

38
00:01:15,240 --> 00:01:18,610
again from the ref log. Let''s 

39
00:01:18,910 --> 00:01:20,430
push this up to GitHub before we 

40
00:01:20,430 --> 00:01:25,000
make any more mistakes. This is 

41
00:01:25,000 --> 00:01:26,350
up in GitHub, so we can check it 

42
00:01:26,350 --> 00:01:27,160
out there, as well.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'After doing a `git reset --hard HEAD~1`, it removed the code in our `app.js`, but we want to get it back. We can look at `git reflog`, something used to look at all the different things you have done in your local git repository. You can see the latest resets you''ve done with that command, note the hashes which you''ll be using later.

One thing to note is that we are trying to recover a hard reset, so the commit is considered abandoned and will get garbage collected eventually if we don''t save it. **`git reflog` will work to save commits, but only if they haven''t been garbage collected by git yet.**

Once you find the commit you need to return to to recover your code, use that hash and run `git reset --hard {HASH}`. It will then return your code back to its state. Using `git log --oneline` shows the regular commits, as well the old commit. After successfully recovering, remember to `git push` to store in Github to view.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '11e22f56', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH/dash/scikit-learn-recover-local-changes-from-git-reset-hard-with-git-reflog-BkbJtu2hH.mpd', 'https://stream.mux.com/eNWwU7026jeRnuavR6DEVsdDCZB2ZLWWhpPNTIW1Hbvk.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5779, 'Copy a Commit from One Branch to Another', NULL, 'If you want to pull over just a single commit from one branch onto another, you can do that with `git cherry-pick [HASH-TO-MOVE]`

We''ll demonstrate that by making a commit on a feature branch, and then copying that commit (but not the entire branch) onto master.', 83, NULL, '2019-11-28T07:49:35.721Z', '2025-12-13T00:54:53.678Z', 'git-copy-a-commit-from-one-branch-to-another', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH/scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH.jpg', true, NULL, 'Instructor: [00:00] If we do git branch, we see we have two different branches here. If we do git log one line, we can see that our latest branch has adsHelloWorld as the commit, and that is diverse from master, which is the reversion of the take three commit.

[00:17] This is our app.js on the JSChanges branch. Let''s check out master. Now our app.js is empty. Let''s say we''re on master and we really want that function on master, but we don''t want to pull over the entire JSChanges branch yet. What we really want is just to pick this commit and move it over to master.

[00:38] If we do a git log one line now, we see that the latest is revert take three, and we want this adsHelloWorld. We''re going to get the hash of the commit that we want, and we''re going to do git cherry-pick, and then we''re going to do the hash that we want.

[00:56] If we do a git log one line, we can see that our head is pointing at adsHelloWorld, but the hash is different. It''s made a new commit hash as it came over and we have our function here.

[01:11] If we are happy with what we have now, we can do a git push. Now, we''ve copied the commit from js.changes over the master and pushed it up. The commit now exists in both trees.', NULL, true, '09-egghead-git-copy-a-commit-from-one-branch-to-another.mp4', 210, true, false, 401, '---
mp4: 8752276
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH/scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH.mp4', 'scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH', 'zduV', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH/scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH.mp3?0aa62cd2bcbd3e02?3d49', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.201Z', NULL, 8388602, NULL, 7247, 0, NULL, 8306688, '425787dd49634422a7110b3aa40ccba7', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 155189212, '1
00:00:00,950 --> 00:00:02,810
If we do git branch, we see we 

2
00:00:02,810 --> 00:00:03,910
have two different branches here. 

3
00:00:04,500 --> 00:00:07,420
If we do git log one line, we 

4
00:00:07,420 --> 00:00:09,430
can see that our latest branch 

5
00:00:09,520 --> 00:00:11,750
has adsHelloWorld as the commit, 

6
00:00:12,370 --> 00:00:13,910
and that is diverse from master, 

7
00:00:13,950 --> 00:00:15,840
which is the reversion of the 

8
00:00:15,840 --> 00:00:18,020
take three commit. This is our 

9
00:00:18,060 --> 00:00:20,520
app.js on the JSChanges branch. 

10
00:00:20,730 --> 00:00:25,070
Let''s check out master. Now our 

11
00:00:25,070 --> 00:00:27,470
app.js is empty. Let''s say we''re 

12
00:00:27,470 --> 00:00:29,060
on master and we really want 

13
00:00:29,060 --> 00:00:31,050
that function on master, but we 

14
00:00:31,050 --> 00:00:32,090
don''t want to pull over the 

15
00:00:32,090 --> 00:00:33,940
entire JSChanges branch yet. 

16
00:00:34,450 --> 00:00:35,370
What we really want is just to 

17
00:00:35,370 --> 00:00:37,320
pick this commit and move it 

18
00:00:37,360 --> 00:00:39,430
over to master. If we do a git 

19
00:00:39,430 --> 00:00:42,790
log one line now, we see that 

20
00:00:43,120 --> 00:00:44,980
the latest is revert take three, 

21
00:00:45,230 --> 00:00:46,920
and we want this adsHelloWorld. 

22
00:00:47,270 --> 00:00:48,730
We''re going to get the hash of 

23
00:00:48,730 --> 00:00:50,460
the commit that we want, and 

24
00:00:50,460 --> 00:00:52,440
we''re going to do git cherry-

25
00:00:52,440 --> 00:00:54,460
pick, and then we''re going to do 

26
00:00:54,590 --> 00:00:57,480
the hash that we want. If we do 

27
00:00:57,480 --> 00:01:00,770
a git log one line, we can see 

28
00:01:00,770 --> 00:01:03,070
that our head is pointing at 

29
00:01:03,140 --> 00:01:05,660
adsHelloWorld, but the hash is 

30
00:01:05,660 --> 00:01:07,260
different. It''s made a new 

31
00:01:07,260 --> 00:01:08,970
commit hash as it came over and 

32
00:01:08,970 --> 00:01:11,680
we have our function here. If 

33
00:01:11,680 --> 00:01:12,750
we are happy with what we have 

34
00:01:12,750 --> 00:01:16,340
now, we can do a git push. Now, 

35
00:01:16,340 --> 00:01:18,370
we''ve copied the commit from js.

36
00:01:18,370 --> 00:01:19,860
changes over the master and 

37
00:01:19,860 --> 00:01:21,370
pushed it up. The commit now 

38
00:01:21,370 --> 00:01:22,510
exists in both trees.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'If we do `git branch`, we notice we have two branches. In addition, `git log --oneline` shows us our latest branch has our commit diverging from `master`, the reversion of the `take 3` commit. We can switch over to `master` with `git checkout master` leaving our `app.js` empty.

A problem we could face is that we want the function we created on our separate branch `js-changes` transferred/copied to `master` without pulling the entire branch. We simply want to pick the individual commit to `js-changes` and move it to `master`.

`git log --oneline` shows us our current latest commit in `master` isn''t up to date with the separate branch. **What we can do to match the commit in our branches is use cherry picking. We run `git cherry-pick {HASH}` with the hash being the desired commit.** Now, our `git log --oneline` actually shows there was a new commit hash created as it came over. **What happened is we copied the commit from `js-changes` over to `master` and pushed it up, so the commit exists in both trees.**

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', 'de0f919c', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH/dash/scikit-learn-copy-a-commit-from-one-branch-to-another-r1n9sK2nH.mpd', 'https://stream.mux.com/XWCfZwj8iW9PZU46YjfeH7Ah3k1aP2aQ2VaxEOXiZ78.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5780, 'Move a Commit that was Committed on the Wrong Branch', NULL, 'We''ll do some work and commit it - but then realize it was on the wrong branch!

To move a commit from one branch to another, we''ll first `git cherry-pick` the commit we want, and then use `git reset` to remove the commit from the master branch.  

Then we''ll be able to manually delete the changes that we don''t want on the master branch.', 165, NULL, '2019-11-28T07:59:37.982Z', '2025-12-13T00:54:53.678Z', 'git-move-a-commit-that-was-committed-on-the-wrong-branch', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr/scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr.jpg', true, NULL, 'Instructor: [00:00] We have two branches here and we are currently on our master branch. Let''s write a function like second function. That''s just going to alert this is number two. Save that. If we do a git status, we have modified app JS, so let''s add that and commit that as my second function.

[00:24] Before pushing, we do a git branch and realize we made this change on the master branch and we meant to do it on the JS changes branch. If we do a git log --oneline now, we can see that we want to move this commit from master over to JS changes. The problem is master is pointing here. We have to be able to move master back here as well.

[00:46] There are several ways we can do this. Many of them involve a git reset hard at some point. Beware of those because if you do reset hard incorrectly, you can lose data. We''re going to use git reset, but not a git reset hard.

[01:00] Let''s look at our branches again. We''re going to switch to the JS changes branch, so git checkout JS changes. What we want to do to get this function into it is copy this commit hash. We''re going to cherry pick that commit hash. We''re going to cherry pick the commit hash that we want to move over.

[01:19] Now, on the JS changes branch, we have the code we want so we can push that. Now JS changes is correct. Let''s switch back to master.

[01:33] If we look at master, we still have the code here. If we do a log one line, we still have that commit because cherry pick just copies over the commit. It doesn''t remove it from the other branch. What we want to do is switch master to be back at this commit.

[01:50] We''re going to do a git reset here, but not a reset hard, back to this commit hash. We could do that commit hash or we could go to the head and go back one. We''ll do that. Now if we do a git status, we have app.js, which is still modified. This is because we didn''t do a reset hard.

[02:11] Now what we can do, since we don''t want this function in here, is we can manually do this remediation, which is git checkout app.js. That will reset app.js to whatever it is at the hash that we reset to.

[02:27] If we do a git status now, app.js is not changed. If we do a git log --oneline, that commit is gone. This is like manually doing a reset hard, but I like this better because we get to choose exactly what files we get to reset.', NULL, true, '10-egghead-git-move-a-commit-that-was-committed-on-the-wrong-branch.mp4', 210, true, false, 401, '---
mp4: 18462492
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr/scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr.mp4', 'scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr', 'zduo', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr/scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr.mp3?67d8f1c9e041535b?46cc', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.110Z', NULL, 8388602, NULL, 7248, 0, NULL, 8369408, '54ad6cad636d4bb48e87f390be6b561f', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 155859568, '1
00:00:00,480 --> 00:00:02,150
We have two branches here and we 

2
00:00:02,150 --> 00:00:03,370
are currently on our master 

3
00:00:03,370 --> 00:00:05,540
branch. Let''s write a function 

4
00:00:05,700 --> 00:00:08,290
like second function. That''s 

5
00:00:08,290 --> 00:00:10,170
just going to alert this is 

6
00:00:10,770 --> 00:00:14,100
number two. Save that. If we do 

7
00:00:14,130 --> 00:00:16,270
a git status, we have modified 

8
00:00:16,270 --> 00:00:19,480
app JS, so let''s add that and 

9
00:00:19,480 --> 00:00:22,160
commit that as my second 

10
00:00:22,210 --> 00:00:25,850
function. Before pushing, we do 

11
00:00:25,850 --> 00:00:27,610
a git branch and realize we made 

12
00:00:27,610 --> 00:00:28,960
this change on the master branch 

13
00:00:29,110 --> 00:00:30,610
and we meant to do it on the JS 

14
00:00:30,610 --> 00:00:33,020
changes branch. If we do a git 

15
00:00:33,050 --> 00:00:35,620
log --oneline now, we can see 

16
00:00:35,620 --> 00:00:37,080
that we want to move this commit 

17
00:00:37,610 --> 00:00:40,010
from master over to JS changes. 

18
00:00:40,400 --> 00:00:41,500
The problem is master is 

19
00:00:41,680 --> 00:00:43,080
pointing here. We have to be 

20
00:00:43,080 --> 00:00:45,080
able to move master back here as 

21
00:00:45,080 --> 00:00:47,010
well. There are several ways we 

22
00:00:47,010 --> 00:00:48,420
can do this. Many of them 

23
00:00:48,500 --> 00:00:50,340
involve a git reset hard at some 

24
00:00:50,340 --> 00:00:52,200
point. Beware of those because 

25
00:00:52,200 --> 00:00:54,060
if you do reset hard incorrectly, 

26
00:00:54,190 --> 00:00:56,250
you can lose data. We''re going 

27
00:00:56,250 --> 00:00:58,380
to use git reset, but not a git 

28
00:00:58,380 --> 00:01:00,850
reset hard. Let''s look at our 

29
00:01:00,850 --> 00:01:02,860
branches again. We''re going to 

30
00:01:02,920 --> 00:01:04,510
switch to the JS changes branch, 

31
00:01:04,610 --> 00:01:08,570
so git checkout JS changes. What 

32
00:01:08,570 --> 00:01:09,580
we want to do to get this 

33
00:01:09,580 --> 00:01:11,520
function into it is copy this 

34
00:01:11,520 --> 00:01:13,150
commit hash. We''re going to 

35
00:01:13,150 --> 00:01:14,640
cherry pick that commit hash. 

36
00:01:15,030 --> 00:01:16,650
We''re going to cherry pick the 

37
00:01:16,650 --> 00:01:18,200
commit hash that we want to move 

38
00:01:18,200 --> 00:01:20,790
over. Now, on the JS changes 

39
00:01:20,790 --> 00:01:22,400
branch, we have the code we want 

40
00:01:23,010 --> 00:01:28,510
so we can push that. Now JS 

41
00:01:28,510 --> 00:01:30,790
changes is correct. Let''s switch 

42
00:01:30,790 --> 00:01:34,120
back to master. If we look at 

43
00:01:34,120 --> 00:01:35,310
master, we still have the code 

44
00:01:35,310 --> 00:01:37,360
here. If we do a log one line, 

45
00:01:38,170 --> 00:01:39,320
we still have that commit 

46
00:01:39,940 --> 00:01:41,920
because cherry pick just copies 

47
00:01:41,980 --> 00:01:42,950
over the commit. It doesn''t 

48
00:01:43,090 --> 00:01:44,380
remove it from the other branch. 

49
00:01:44,960 --> 00:01:46,960
What we want to do is switch 

50
00:01:46,960 --> 00:01:49,500
master to be back at this commit. 

51
00:01:50,190 --> 00:01:51,380
We''re going to do a git reset 

52
00:01:51,380 --> 00:01:53,500
here, but not a reset hard, back 

53
00:01:53,500 --> 00:01:56,340
to this commit hash. We could do 

54
00:01:56,340 --> 00:01:58,460
that commit hash or we could go 

55
00:01:58,460 --> 00:02:00,630
to the head and go back one. 

56
00:02:01,740 --> 00:02:03,320
We''ll do that. Now if we do a 

57
00:02:03,320 --> 00:02:06,710
git status, we have app.js, 

58
00:02:06,710 --> 00:02:08,630
which is still modified. This is 

59
00:02:08,630 --> 00:02:09,890
because we didn''t do a reset 

60
00:02:09,890 --> 00:02:12,150
hard. Now what we can do, since 

61
00:02:12,150 --> 00:02:13,390
we don''t want this function in 

62
00:02:13,390 --> 00:02:15,550
here, is we can manually do this 

63
00:02:15,550 --> 00:02:16,680
remediation, which is git 

64
00:02:16,840 --> 00:02:20,230
checkout app.js. That will reset 

65
00:02:20,320 --> 00:02:22,970
app.js to whatever it is at the 

66
00:02:22,970 --> 00:02:27,720
hash that we reset to. If we do 

67
00:02:27,720 --> 00:02:31,200
a git status now, app.js is not 

68
00:02:31,200 --> 00:02:32,780
changed. If we do a git log --

69
00:02:33,000 --> 00:02:35,420
oneline, that commit is gone. 

70
00:02:35,950 --> 00:02:37,880
This is like manually doing a 

71
00:02:37,880 --> 00:02:39,380
reset hard, but I like this 

72
00:02:39,380 --> 00:02:40,880
better because we get to choose 

73
00:02:40,880 --> 00:02:42,340
exactly what files we get to 

74
00:02:42,415 --> 00:02:42,740
reset.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'Using `git branch` shows us we have two branches, `js-changes` and `master`, and we are on `master`. We can write a second function in our `app.js`.

## app.js
```js
// our app js code

function helloWorld() {
  alert("Hi!")
}

function secondFunction() {
  alert("This is number 2")
}
```

After modifying, we add and commit it.

## Terminal Input
```
git add -A
git commit -m "My second function"
```

However, after doing so, doing `git branch` shows us we made this commit on `master` branch and we meant to do it on the `js-changes` branch. `git log --oneline` shows us which commit we need to move from `master` to `js-changes`, but the problem is master is pointing to it. **A lot of solutions to this involve `git reset --hard`, but beware because they can cause a loss of data.**

What we want to do is switch to the `js-changes` branch with `git checkout js-changes`. Now, to get the function into it, we copy the commit hash and cherry pick that commit hash we want to move over with `git cherry-pick {HASH}`. Now, on the `js-changes` branch, we have the code we want and can push that with `git push`.

At this moment, our code on `js-changes` is correct, but `master` still contains that old commit, as **cherry picking copies the commit but doesn''t remove it**. To switch `master` to be back at a previous commit, we do a `git reset {HASH}` to the commit we want to return to. An alternative to returning the hash would be making the it `HEAD~1`.

Now, `git status` shows `app.js` is still a modified file. **However, after resetting we can `git checkout app.js` to reset it whatever it was at the hash we reset to.** After entering that, `git status` shows `app.js` is not changed and `git log --oneline` shows the commit is gone. This approach is like manually doing a reset hard, but we can choose exactly what files we want to reset making it a safe and powerful option.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', 'e6cda6ed', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr/dash/scikit-learn-move-a-commit-that-was-committed-on-the-wrong-branch-BkLx0K3hr.mpd', 'https://stream.mux.com/9MQDXopKwZrLO5IU4gezWwyFijeg63ZPQBPcSxGh01xA.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5781, 'Use `git stash` to Save Local Changes While Pulling', NULL, 'If we make a change to the same function both locally and remotely, then when we try to pull down the remote changes, we''ll run into a conflict - and git won''t pull the remote changes down.

So first, we''ll use `git stash` to stash the local changes, and then `git pull` to get the remote changes.  To apply the stashed changed, we''ll then use `git stash pop`

Since we changed the same function however, we''ll get a merge conflict!  So we''ll fix the merge conflict, and then add and commit that change.

Finally, we''ll drop the change from the stash with: `git stash drop stash@{0}`', 213, NULL, '2019-11-28T08:45:59.428Z', '2025-12-13T00:54:53.678Z', 'git-use-git-stash-to-save-local-changes-while-pulling', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r/scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r.jpg', true, NULL, 'Instructor: [00:00] We are in a feature branch here called JS changes. I want to change my "Hello, world" function to say, "Alert. Hi from local." I will save that. Now if I do a git status, I have unstaged changes.

[00:16] What happens if someone else changes that file? If we go over to GitHub here and go to our JS changes branch, we can check out the app.js file. This is the last version that was pushed. We can actually edit it right here on GitHub.

[00:32] Here I can say, "Alert. Hi from GitHub." Down here, I can commit that change. I can say, "Hi from GitHub change." I will commit directly to the JS changes branch. Now our app.js on GitHub says "Hi from GitHub."

[00:55] Let''s go back to our code here, then, and try a git pull. What we get is that our local changes will be overwritten by the merge. We have to do something to prevent our local changes from being overwritten for now. It says here our two options are to stash them or commit them. We''re going to show how to stash them here.

[01:15] If we do git stash, then it will take the code we just wrote and put it in a special stash. If we do git status, we can see we have no changes right here. If we do a git stash list, we can see our change was added over to the stash at zero.

[01:34] Now we can do a git pull. Here is our "Hello from GitHub" that we added. Now we have to git our stashed changes back. We can always do git --help stash to see how to get it back. The two ways we might do that are pop and apply.

[01:51] Pop and apply are similar, but pop will remove the change from the stash and applies the change from the stash but keeps it in the stash as well, in case you want to use it later. We''re going to git stash pop. Here, we have another problem, which is a merge conflict.

[02:08] What happened is like we committed this into the stash. Now when we''re popping it off, we get the same thing that we would if we committed it, which is a merge conflict. We have to fix it.

[02:18] The way to fix merge conflicts is just to manually go in and do it. You have to figure out what code you want to keep and what code you want to get rid of. In this case, we want both. We are going to remove the merge conflict lines. Now we have both lines, "Alert from GitHub" and "Alert from local." We can save that.

[02:37] If we do a git status, we see that we have both branches modified app.js. We have to add app.js, and then we can commit the "Hello from local" merged with GitHub. Then we can push that. Now the changes are both locally and on GitHub.

[02:59] There''s one last thing, which is, if we do a git stash list right now, we still see our stash. We did git stash pop, and it didn''t come off. That''s because, if there''s a merge conflict, the code stays in the stash even if you do a pop, in case you mess up the merge conflict somehow. We have to get rid of this stash manually if we want to do that.

[03:18] We can do git stash drop. Then we''ll do the stash@{0and it dropped that stash. Now if we do a git stash list, it''s not in the stash anymore, so that''s cleaned up, and we still have it in our code over here.', NULL, true, '11-egghead-git-use-git-stash-to-save-local-changes-while-pulling.mp4', 210, true, false, 401, '---
mp4: 24558248
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r/scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r.mp4', 'scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r', 'zduX', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r/scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r.mp3?4ca863d2c9dc41cf?8407', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:03.998Z', NULL, 8388602, NULL, 7249, 0, NULL, 8374784, '2c5d3760c508481ea24b79b2540251f2', NULL, 265830, 'free', '', '', '', 'git', 'github', '', '', NULL, 156529924, '1
00:00:00,740 --> 00:00:02,210
We are in a feature branch here 

2
00:00:02,210 --> 00:00:04,460
called JS changes. I want to 

3
00:00:04,550 --> 00:00:05,890
change my "Hello, world" 

4
00:00:05,890 --> 00:00:08,840
function to say, "Alert. Hi from 

5
00:00:08,840 --> 00:00:12,330
local." I will save that. Now if 

6
00:00:12,330 --> 00:00:14,460
I do a git status, I have 

7
00:00:14,720 --> 00:00:17,180
unstaged changes. What happens 

8
00:00:17,180 --> 00:00:18,210
if someone else changes that 

9
00:00:18,210 --> 00:00:20,480
file? If we go over to GitHub 

10
00:00:20,480 --> 00:00:22,700
here and go to our JS changes 

11
00:00:22,700 --> 00:00:24,970
branch, we can check out the app.

12
00:00:25,260 --> 00:00:27,970
js file. This is the last 

13
00:00:27,970 --> 00:00:29,470
version that was pushed. We can 

14
00:00:29,470 --> 00:00:30,820
actually edit it right here on 

15
00:00:30,820 --> 00:00:33,910
GitHub. Here I can say, "Alert. 

16
00:00:34,690 --> 00:00:39,270
Hi from GitHub." Down here, I 

17
00:00:39,270 --> 00:00:40,870
can commit that change. I can 

18
00:00:40,870 --> 00:00:45,090
say, "Hi from GitHub change." I 

19
00:00:45,090 --> 00:00:46,670
will commit directly to the JS 

20
00:00:46,670 --> 00:00:52,490
changes branch. Now our app.js 

21
00:00:52,510 --> 00:00:54,190
on GitHub says "Hi from GitHub." 

22
00:00:55,460 --> 00:00:56,960
Let''s go back to our code here, 

23
00:00:56,960 --> 00:01:00,610
then, and try a git pull. What 

24
00:01:00,610 --> 00:01:02,920
we get is that our local changes 

25
00:01:02,920 --> 00:01:04,380
will be overwritten by the merge. 

26
00:01:05,290 --> 00:01:06,760
We have to do something to 

27
00:01:06,760 --> 00:01:08,110
prevent our local changes from 

28
00:01:08,110 --> 00:01:09,720
being overwritten for now. It 

29
00:01:09,760 --> 00:01:10,940
says here our two options are to 

30
00:01:10,940 --> 00:01:13,210
stash them or commit them. We''re 

31
00:01:13,210 --> 00:01:14,570
going to show how to stash them 

32
00:01:14,600 --> 00:01:16,800
here. If we do git stash, then 

33
00:01:18,190 --> 00:01:19,080
it will take the code we just 

34
00:01:19,080 --> 00:01:20,500
wrote and put it in a special 

35
00:01:20,500 --> 00:01:22,860
stash. If we do git status, we 

36
00:01:22,860 --> 00:01:24,470
can see we have no changes right 

37
00:01:24,470 --> 00:01:28,290
here. If we do a git stash list, 

38
00:01:28,750 --> 00:01:30,390
we can see our change was added 

39
00:01:30,460 --> 00:01:34,400
over to the stash at zero. Now 

40
00:01:34,400 --> 00:01:37,590
we can do a git pull. Here is 

41
00:01:37,590 --> 00:01:39,040
our "Hello from GitHub" that we 

42
00:01:39,040 --> 00:01:40,820
added. Now we have to git our 

43
00:01:40,820 --> 00:01:42,780
stashed changes back. We can 

44
00:01:42,780 --> 00:01:45,980
always do git --help stash to 

45
00:01:45,980 --> 00:01:47,710
see how to get it back. The two 

46
00:01:47,710 --> 00:01:48,900
ways we might do that are pop 

47
00:01:49,470 --> 00:01:52,090
and apply. Pop and apply are 

48
00:01:52,090 --> 00:01:54,280
similar, but pop will remove the 

49
00:01:54,280 --> 00:01:55,920
change from the stash and 

50
00:01:55,920 --> 00:01:57,700
applies the change from the 

51
00:01:57,700 --> 00:01:59,290
stash but keeps it in the stash 

52
00:01:59,290 --> 00:02:00,720
as well, in case you want to use 

53
00:02:00,720 --> 00:02:02,960
it later. We''re going to git 

54
00:02:03,060 --> 00:02:06,290
stash pop. Here, we have another 

55
00:02:06,290 --> 00:02:07,420
problem, which is a merge 

56
00:02:07,420 --> 00:02:10,010
conflict. What happened is like 

57
00:02:10,010 --> 00:02:11,710
we committed this into the stash. 

58
00:02:12,310 --> 00:02:13,390
Now when we''re popping it off, 

59
00:02:13,390 --> 00:02:14,520
we get the same thing that we 

60
00:02:14,520 --> 00:02:15,690
would if we committed it, which 

61
00:02:15,690 --> 00:02:17,520
is a merge conflict. We have to 

62
00:02:17,520 --> 00:02:19,410
fix it. The way to fix merge 

63
00:02:19,410 --> 00:02:21,300
conflicts is just to manually go 

64
00:02:21,300 --> 00:02:22,990
in and do it. You have to figure 

65
00:02:22,990 --> 00:02:24,440
out what code you want to keep 

66
00:02:24,760 --> 00:02:26,300
and what code you want to get 

67
00:02:26,300 --> 00:02:27,670
rid of. In this case, we want 

68
00:02:27,670 --> 00:02:30,780
both. We are going to remove the 

69
00:02:30,780 --> 00:02:32,540
merge conflict lines. Now we 

70
00:02:32,540 --> 00:02:33,800
have both lines, "Alert from 

71
00:02:33,800 --> 00:02:35,190
GitHub" and "Alert from local." 

72
00:02:36,150 --> 00:02:38,120
We can save that. If we do a 

73
00:02:38,120 --> 00:02:40,740
git status, we see that we have 

74
00:02:41,770 --> 00:02:43,840
both branches modified app.js. 

75
00:02:43,940 --> 00:02:46,200
We have to add app.js, and then 

76
00:02:46,200 --> 00:02:49,380
we can commit the "Hello from 

77
00:02:49,450 --> 00:02:53,680
local" merged with GitHub. Then 

78
00:02:53,790 --> 00:02:56,290
we can push that. Now the 

79
00:02:56,290 --> 00:02:58,240
changes are both locally and on 

80
00:02:58,240 --> 00:03:00,470
GitHub. There''s one last thing, 

81
00:03:00,470 --> 00:03:01,820
which is, if we do a git stash 

82
00:03:01,880 --> 00:03:04,390
list right now, we still see our 

83
00:03:04,390 --> 00:03:07,150
stash. We did git stash pop, and 

84
00:03:07,150 --> 00:03:08,250
it didn''t come off. That''s 

85
00:03:08,250 --> 00:03:09,440
because, if there''s a merge 

86
00:03:09,440 --> 00:03:11,030
conflict, the code stays in the 

87
00:03:11,030 --> 00:03:13,480
stash even if you do a pop, in 

88
00:03:13,480 --> 00:03:14,550
case you mess up the merge 

89
00:03:14,550 --> 00:03:16,090
conflict somehow. We have to get 

90
00:03:16,190 --> 00:03:17,670
rid of this stash manually if we 

91
00:03:17,670 --> 00:03:19,140
want to do that. We can do git 

92
00:03:19,140 --> 00:03:22,400
stash drop. Then we''ll do the 

93
00:03:22,400 --> 00:03:26,090
stash@{0and it dropped that 

94
00:03:26,090 --> 00:03:27,800
stash. Now if we do a git stash 

95
00:03:27,800 --> 00:03:29,440
list, it''s not in the stash 

96
00:03:29,440 --> 00:03:30,510
anymore, so that''s cleaned up, 

97
00:03:31,160 --> 00:03:32,590
and we still have it in our code 

98
00:03:32,590 --> 00:03:33,150
over here.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
# Save the local changes,
git stash

# Get remote changes
git pull

# To apply the stashed changed
git stash pop

# You will need to  fix the merge conflict
# Then drop the change from the stash
git stash drop stash@{0}
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', 'fab4b59c', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r/dash/scikit-learn-use-git-stash-to-save-local-changes-while-pulling-SyVAOqn3r.mpd', 'https://stream.mux.com/ZatpP4jMx02AVmCxJZXB53rDcb0200k7sFYy24602NyiQUM.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5782, 'Explore Old Commits with a Detached HEAD, and then Recover', NULL, 'To poke around in old code, we can checkout the hash of an old commit with `git checkout [HASH]` - but then we''ll be in a "detached HEAD" state.

Detached HEAD just means that HEAD is not pointing to a branch.  That''s problematic if we want to save the work that we do in that state - so we first have to make a new branch where we are with `git checkout -b my-new-branch`

Then, any changes we make can be committed to that new branched and saved.', 84, NULL, '2019-11-28T08:51:30.737Z', '2025-12-13T00:54:53.678Z', 'git-explore-old-commits-with-a-detached-head-and-then-recover', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS/scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS.jpg', true, NULL, 'Instructor: [00:00] Let''s look at our local git log with git log one line. Let''s go all the way back to where we added the index.html and app.js files.

[00:10] If we want to explore what the code looked like at that time, we can gitCheckout this hash. Now, it says we''re in a detached head state. If we go look at our app.js code, this is when we first edited, just had the comment at the top.

[00:25] What a detached head means if we do a git log one line, we can see that our head is not pointing to a branch right now. Instead, it''s pointing to a commit. This is problematic because if we make changes right now, and then move our head away, then those changes could be lost.

[00:42] We could just poke around and then switch to a branch, and that would be fine. If we want to make changes here, then what we have to do is do what it says right here, which is to check out a new branch at this hash. We''re going to gitCheckout a new branch, and we''ll just call this exploring a JS feature.

[00:59] If we do get status, we''re no longer in a detached head state. If we do git log online, we can see that our head is now successfully pointing to a branch. Now, any changes we make here won''t get lost. If you do get branch -vv now, you can see our new branch here, which is not a remote branch, and it''s different than the other two branches, which are remote branches.', NULL, true, '12-egghead-git-explore-old-commits-with-a-detached-head-and-then-recover.mp4', 210, true, false, 401, '---
mp4: 9416966
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS/scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS.mp4', 'scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS', 'zduZ', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS/scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS.mp3?0361afe3044ee100?7dc1', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.028Z', NULL, 8388602, NULL, 7250, 0, NULL, 8380928, '3e5b7d3362be4449afb5d235dd0ac10d', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 157200280, '1
00:00:00,800 --> 00:00:02,280
Let''s look at our local git log 

2
00:00:02,280 --> 00:00:04,700
with git log one line. Let''s go 

3
00:00:04,700 --> 00:00:06,140
all the way back to where we 

4
00:00:06,190 --> 00:00:09,690
added the index.html and app.js 

5
00:00:09,690 --> 00:00:11,580
files. If we want to explore 

6
00:00:11,580 --> 00:00:12,630
what the code looked like at 

7
00:00:12,630 --> 00:00:14,160
that time, we can gitCheckout 

8
00:00:14,820 --> 00:00:18,850
this hash. Now, it says we''re in 

9
00:00:18,850 --> 00:00:20,960
a detached head state. If we go 

10
00:00:20,960 --> 00:00:22,520
look at our app.js code, this is 

11
00:00:22,520 --> 00:00:24,190
when we first edited, just had 

12
00:00:24,190 --> 00:00:26,150
the comment at the top. What a 

13
00:00:26,150 --> 00:00:28,090
detached head means if we do a 

14
00:00:28,090 --> 00:00:30,150
git log one line, we can see 

15
00:00:30,150 --> 00:00:31,770
that our head is not pointing to 

16
00:00:31,770 --> 00:00:33,420
a branch right now. Instead, 

17
00:00:33,420 --> 00:00:35,450
it''s pointing to a commit. This 

18
00:00:35,450 --> 00:00:36,700
is problematic because if we 

19
00:00:36,700 --> 00:00:38,470
make changes right now, and then 

20
00:00:38,470 --> 00:00:40,670
move our head away, then those 

21
00:00:40,670 --> 00:00:42,550
changes could be lost. We could 

22
00:00:42,550 --> 00:00:44,070
just poke around and then switch 

23
00:00:44,070 --> 00:00:45,010
to a branch, and that would be 

24
00:00:45,010 --> 00:00:46,980
fine. If we want to make changes 

25
00:00:46,980 --> 00:00:48,700
here, then what we have to do is 

26
00:00:48,780 --> 00:00:49,780
do what it says right here, 

27
00:00:49,780 --> 00:00:51,820
which is to check out a new 

28
00:00:51,820 --> 00:00:53,670
branch at this hash. We''re going 

29
00:00:53,670 --> 00:00:55,830
to gitCheckout a new branch, and 

30
00:00:55,830 --> 00:00:57,400
we''ll just call this exploring a 

31
00:00:57,400 --> 00:01:00,610
JS feature. If we do get status, 

32
00:01:01,150 --> 00:01:02,510
we''re no longer in a detached 

33
00:01:02,510 --> 00:01:04,360
head state. If we do git log 

34
00:01:04,360 --> 00:01:06,740
online, we can see that our head 

35
00:01:06,740 --> 00:01:08,400
is now successfully pointing to 

36
00:01:08,470 --> 00:01:10,480
a branch. Now, any changes we 

37
00:01:10,480 --> 00:01:12,300
make here won''t get lost. If you 

38
00:01:12,300 --> 00:01:15,580
do get branch -vv now, you can 

39
00:01:15,580 --> 00:01:17,590
see our new branch here, which 

40
00:01:17,590 --> 00:01:19,920
is not a remote branch, and it''s 

41
00:01:19,920 --> 00:01:20,860
different than the other two 

42
00:01:20,860 --> 00:01:21,950
branches, which are remote 

43
00:01:22,025 --> 00:01:22,350
branches.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
# checkout the hash of an old commit
git checkout [HASH]

# we''ll be in a "detached HEAD" state
# Save the work by creating a new branch
git checkout -b my-new-branch
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '4ac6593d', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS/dash/scikit-learn-explore-old-commits-with-a-detached-head-and-then-recover-By1m992hS.mpd', 'https://stream.mux.com/01Dm701vOaa9Aeex49pNawfvzDrka2cDn1GgrH025ySvkU.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5784, 'Cleanup and Delete Branches After a Pull Request', NULL, 'We''ve made a pull request and now we can clean up the branches by deleting the feature branch.

Branches are just pointers to commits - so we can safely delete branches without losing the underlying commits (once the commits are merged back into master).

So we''ll use the github interface to delete the branch remotely, and to delete it locally we''ll use `git remote prune origin --dry-run` and then `git remote prune origin`

That will tell us that the remote is gone, and we can finally clean up the feature branch with: `git branch -d feature-branch`', 131, NULL, '2019-11-28T10:21:14.577Z', '2025-12-13T00:54:53.678Z', 'git-cleanup-and-delete-branches-after-a-pull-request', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B/scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B.jpg', true, NULL, 'Instructor: [0:00] We have just successfully merged this pull request and now we can click delete branch to clean it up. Let''s take a look at why we can do that. Back in our code, we can do git branch -vv to see that master and that jsChanges both point to origin.

[0:17] If we do a git log oneline and we can add graph here to see our merge graph, we can see that these branches are really just pointers to these hashes. Deleting a branch is just deleting the pointer and not deleting the actual commit.

[0:33] Importantly, the jsChanges branch is pointing to a commit, which is in the master tree now. Deleting this branch won''t lose the commit because the commit''s in this tree. However, if we do git branch here, we see that jsChanges still exists locally. If we do git branch -vv, it even thinks that it exists in the origin still, but we''ve deleted that on GitHub.

[0:55] We can tell it that it''s gone by doing git remote prune origin. If we want, we can do a dry run first, and it will go to GitHub and say that it would prune the jsChanges branch, because that no longer exists on our remote. Let''s do that. We do git remote prune origin, and it has pruned the jsChanges branch.

[1:18] If we do branch -vv, we still have the jsChanges branch. It points to origin jsChanges, but it says it''s gone. This is how we know that we can now successfully delete the jsChanges branch. We can do git branch -d, or delete, jsChanges. Now if we do git branch -vv, that branch is now gone. We just have the exploring jsFeature branch and the master branch left.

[1:48] Now, notice it gives the hash here, so we can get that branch back if we wanted to. We can even go to git reflog and see all of the changes that we just made. Reflog is a way to get back to a commit even if you''ve deleted the branch that it was on. We could check out any of these hashes that we want and get back to code even if we''ve deleted the branch that it was on.', NULL, true, '14-egghead-git-cleanup-and-delete-branches-after-a-pull-request.mp4', 210, true, false, 401, '---
mp4: 16263231
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B/scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B.mp4', 'scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B', 'zdu8', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B/scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B.mp3?c961d4738e848d65?0d0a', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.437Z', NULL, 8388602, NULL, 7253, 0, NULL, 8387616, '45ec47a3779d4e0f8e8aa363c271420a', NULL, 265830, 'free', '', '', '', 'git', 'github', '', '', NULL, 158540992, '1
00:00:00,200 --> 00:00:01,560
We have just successfully merged 

2
00:00:01,560 --> 00:00:03,090
this pull request and now we can 

3
00:00:03,090 --> 00:00:05,890
click delete branch to clean it 

4
00:00:05,890 --> 00:00:07,600
up. Let''s take a look at why we 

5
00:00:07,600 --> 00:00:09,560
can do that. Back in our code, 

6
00:00:09,560 --> 00:00:12,780
we can do git branch -vv to see 

7
00:00:12,780 --> 00:00:15,440
that master and that jsChanges 

8
00:00:15,800 --> 00:00:18,100
both point to origin. If we do 

9
00:00:18,100 --> 00:00:20,790
a git log oneline and we can add 

10
00:00:20,790 --> 00:00:22,410
graph here to see our merge 

11
00:00:22,410 --> 00:00:24,650
graph, we can see that these 

12
00:00:24,650 --> 00:00:25,740
branches are really just 

13
00:00:25,810 --> 00:00:27,310
pointers to these hashes. 

14
00:00:28,150 --> 00:00:29,480
Deleting a branch is just 

15
00:00:29,480 --> 00:00:31,000
deleting the pointer and not 

16
00:00:31,000 --> 00:00:32,360
deleting the actual commit. 

17
00:00:33,080 --> 00:00:35,190
Importantly, the jsChanges 

18
00:00:35,220 --> 00:00:36,910
branch is pointing to a commit, 

19
00:00:37,020 --> 00:00:38,740
which is in the master tree now. 

20
00:00:39,550 --> 00:00:40,940
Deleting this branch won''t lose 

21
00:00:40,940 --> 00:00:42,090
the commit because the commit''s 

22
00:00:42,140 --> 00:00:44,180
in this tree. However, if we do 

23
00:00:44,180 --> 00:00:46,100
git branch here, we see that 

24
00:00:46,170 --> 00:00:48,050
jsChanges still exists locally. 

25
00:00:48,710 --> 00:00:50,910
If we do git branch -vv, it even 

26
00:00:50,910 --> 00:00:52,410
thinks that it exists in the 

27
00:00:52,440 --> 00:00:54,540
origin still, but we''ve deleted 

28
00:00:54,540 --> 00:00:56,670
that on GitHub. We can tell it 

29
00:00:56,670 --> 00:00:58,000
that it''s gone by doing git 

30
00:00:58,030 --> 00:01:01,380
remote prune origin. If we want, 

31
00:01:01,380 --> 00:01:04,280
we can do a dry run first, and 

32
00:01:04,280 --> 00:01:05,710
it will go to GitHub and say 

33
00:01:05,970 --> 00:01:06,970
that it would prune the 

34
00:01:07,180 --> 00:01:08,560
jsChanges branch, because that 

35
00:01:08,560 --> 00:01:10,220
no longer exists on our remote. 

36
00:01:11,090 --> 00:01:12,750
Let''s do that. We do git remote 

37
00:01:13,100 --> 00:01:16,520
prune origin, and it has pruned 

38
00:01:16,520 --> 00:01:19,310
the jsChanges branch. If we do 

39
00:01:19,310 --> 00:01:22,100
branch -vv, we still have the 

40
00:01:22,310 --> 00:01:25,180
jsChanges branch. It points to 

41
00:01:25,180 --> 00:01:26,960
origin jsChanges, but it says 

42
00:01:27,060 --> 00:01:29,440
it''s gone. This is how we know 

43
00:01:29,660 --> 00:01:30,950
that we can now successfully 

44
00:01:30,950 --> 00:01:33,310
delete the jsChanges branch. We 

45
00:01:33,310 --> 00:01:37,040
can do git branch -d, or delete, 

46
00:01:37,360 --> 00:01:40,230
jsChanges. Now if we do git 

47
00:01:40,250 --> 00:01:43,470
branch -vv, that branch is now 

48
00:01:43,470 --> 00:01:45,350
gone. We just have the exploring 

49
00:01:45,350 --> 00:01:46,970
jsFeature branch and the master 

50
00:01:46,970 --> 00:01:49,410
branch left. Now, notice it 

51
00:01:49,410 --> 00:01:51,350
gives the hash here, so we can 

52
00:01:51,540 --> 00:01:52,790
get that branch back if we 

53
00:01:52,790 --> 00:01:55,050
wanted to. We can even go to git 

54
00:01:55,260 --> 00:01:57,950
reflog and see all of the 

55
00:01:57,950 --> 00:01:59,050
changes that we just made. 

56
00:01:59,810 --> 00:02:01,590
Reflog is a way to get back to a 

57
00:02:01,590 --> 00:02:02,940
commit even if you''ve deleted 

58
00:02:02,940 --> 00:02:04,700
the branch that it was on. We 

59
00:02:04,700 --> 00:02:05,790
could check out any of these 

60
00:02:05,790 --> 00:02:07,600
hashes that we want and get back 

61
00:02:07,630 --> 00:02:09,170
to code even if we''ve deleted 

62
00:02:09,170 --> 00:02:10,280
the branch that it was on.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
# use the github interface to delete the branch remotely

# Locally
# Confirm that remote is gone
git remote prune origin --dry-run
git remote prune origin

#clean up the feature branch
git branch -d feature-branch
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '3630f106', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B/dash/scikit-learn-cleanup-and-delete-branches-after-a-pull-request-S1PQJh33B.mpd', 'https://stream.mux.com/93cPolHhIJc99KpPZpjzmEkBGkhaVnBAa9WQb52Zgdg.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5785, 'Change the Commit Message of a Previous Commit with Interactive Rebase', NULL, 'We''ll go back into our history with

`git log --oneline`

and then we can pick a previous commit and change its commit message with an interactive rebase.  (Note: you shouldn''t try to do this on commits that have already been pushed - only commits you still have locally)

To start the interactive rebase, we''ll use:

`git rebase -i HEAD~3`

and then change `pick` to `reword`.  Then we can reword the commit message and the commit will be rewritten for us.', 155, NULL, '2019-11-28T10:46:27.488Z', '2025-12-13T00:54:53.678Z', 'git-change-the-commit-message-of-a-previous-commit-with-interactive-rebase', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H/scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H.jpg', true, NULL, 'Instructor: [00:00] We are on the master branch of our project and if we do a log one line, we can see all of the commits we have.

[00:07] Let''s say we want to change an old commit message. The first thing I''ll say is that we shouldn''t want to change commit messages that are in the past on the origin. That means we''ve already pushed them and someone may have pulled them and we don''t want to rewrite history that someone may have already pulled. Instead, we''re going to make some new changes so we can play with that.

[00:26] We''re going to alert this is our first change, let''s save that. If we do a status, then that has been changed. We''re going to add app.js and commit our change one. We''re going to duplicate that for change two, do the same thing, we''re going to add app.js and commit change two. Do the same thing for a third change. We''re going to add app.js and commit change three.

[00:57] Now if we do a log one line, we have some commits here that are in front of the origin master. We can change this without worrying about rewriting history that someone else may have pulled.

[01:09] What if I want to change this change one message to something else? For that, we''re going to use rebase interactive. I''m going to do a git rebase and a - i for interactive. I want to go back three commits to change it.

[01:22] I''m going to do head ~ 3, which is going to rebase all the way back to this commit, but leave that one alone and just give me access to these three. I hit enter here. This is the git rebase interactive interface. Just open the text editor here and the default is pick, which means leave this commits alone.

[01:44] I also have all these options for my commits. In this case, I want to reword the commit. I''m going to hit I to enter insert mode and I''m going to change this pick to reword and hit escape:wq because this is VI and I need to save it. I''ve entered the commit message for change one.

[02:05] You can see over here, we just have change one in our editor because we''re on the change one commit. Over here, I could hit I again for insert and this is the change one new commit message. I can hit escape wq.

[02:20] Now, if I do a git log one line, we can see first of all that we''ve successfully rebased. Our commit message here was changed and two and three were left alone and we''re back on master, which has all three changes.', NULL, true, '15-egghead-git-change-the-commit-message-of-a-previous-commit-with-interactive-rebase.mp4', 210, true, false, 401, '---
mp4: 19347786
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H/scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H.mp4', 'scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H', 'zdug', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H/scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H.mp3?745451703a24e261?9e47', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.214Z', NULL, 8388602, NULL, 7254, 0, NULL, 8388000, 'a34c0b9328674d8ab7aa5bebdcd26d23', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 159211348, '1
00:00:00,150 --> 00:00:01,610
We are on the master branch of 

2
00:00:01,610 --> 00:00:03,620
our project and if we do a log 

3
00:00:03,800 --> 00:00:05,790
one line, we can see all of the 

4
00:00:05,790 --> 00:00:07,990
commits we have. Let''s say we 

5
00:00:07,990 --> 00:00:09,420
want to change an old commit 

6
00:00:09,420 --> 00:00:11,130
message. The first thing I''ll 

7
00:00:11,130 --> 00:00:12,470
say is that we shouldn''t want to 

8
00:00:12,470 --> 00:00:14,160
change commit messages that are 

9
00:00:14,160 --> 00:00:16,470
in the past on the origin. That 

10
00:00:16,520 --> 00:00:17,750
means we''ve already pushed them 

11
00:00:18,180 --> 00:00:19,300
and someone may have pulled them 

12
00:00:19,820 --> 00:00:20,810
and we don''t want to rewrite 

13
00:00:20,810 --> 00:00:21,860
history that someone may have 

14
00:00:21,860 --> 00:00:24,030
already pulled. Instead, we''re 

15
00:00:24,030 --> 00:00:25,290
going to make some new changes 

16
00:00:25,290 --> 00:00:26,530
so we can play with that. We''re 

17
00:00:26,530 --> 00:00:28,150
going to alert this is our first 

18
00:00:28,150 --> 00:00:30,940
change, let''s save that. If we 

19
00:00:30,940 --> 00:00:32,090
do a status, then that has been 

20
00:00:32,090 --> 00:00:33,700
changed. We''re going to add app.

21
00:00:33,770 --> 00:00:36,620
js and commit our change one. 

22
00:00:38,440 --> 00:00:39,910
We''re going to duplicate that 

23
00:00:40,000 --> 00:00:41,880
for change two, do the same 

24
00:00:41,880 --> 00:00:43,490
thing, we''re going to add app.js 

25
00:00:44,050 --> 00:00:47,520
and commit change two. Do the 

26
00:00:47,520 --> 00:00:49,420
same thing for a third change. 

27
00:00:49,540 --> 00:00:52,490
We''re going to add app.js and 

28
00:00:52,490 --> 00:00:57,930
commit change three. Now if we 

29
00:00:57,930 --> 00:01:01,270
do a log one line, we have some 

30
00:01:01,270 --> 00:01:02,800
commits here that are in front 

31
00:01:02,860 --> 00:01:04,460
of the origin master. We can 

32
00:01:04,460 --> 00:01:05,920
change this without worrying 

33
00:01:05,950 --> 00:01:07,570
about rewriting history that 

34
00:01:07,570 --> 00:01:08,530
someone else may have pulled. 

35
00:01:09,510 --> 00:01:11,100
What if I want to change this 

36
00:01:11,270 --> 00:01:12,840
change one message to something 

37
00:01:12,840 --> 00:01:14,170
else? For that, we''re going to 

38
00:01:14,170 --> 00:01:16,230
use rebase interactive. I''m 

39
00:01:16,230 --> 00:01:18,620
going to do a git rebase and a - 

40
00:01:18,820 --> 00:01:21,240
i for interactive. I want to go 

41
00:01:21,240 --> 00:01:22,960
back three commits to change it. 

42
00:01:22,960 --> 00:01:26,240
I''m going to do head ~ 3, which 

43
00:01:26,240 --> 00:01:27,980
is going to rebase all the way 

44
00:01:27,980 --> 00:01:30,330
back to this commit, but leave 

45
00:01:30,330 --> 00:01:31,740
that one alone and just give me 

46
00:01:31,760 --> 00:01:34,250
access to these three. I hit 

47
00:01:34,250 --> 00:01:36,540
enter here. This is the git 

48
00:01:36,540 --> 00:01:38,410
rebase interactive interface. 

49
00:01:39,070 --> 00:01:40,600
Just open the text editor here 

50
00:01:40,840 --> 00:01:42,740
and the default is pick, which 

51
00:01:42,740 --> 00:01:44,160
means leave this commits alone. 

52
00:01:44,940 --> 00:01:46,820
I also have all these options 

53
00:01:47,190 --> 00:01:48,960
for my commits. In this case, I 

54
00:01:48,960 --> 00:01:51,190
want to reword the commit. I''m 

55
00:01:51,190 --> 00:01:52,670
going to hit I to enter insert 

56
00:01:52,670 --> 00:01:54,500
mode and I''m going to change 

57
00:01:54,500 --> 00:01:57,740
this pick to reword and hit 

58
00:01:57,740 --> 00:02:01,310
escape:wq because this is VI and 

59
00:02:01,310 --> 00:02:03,240
I need to save it. I''ve entered 

60
00:02:03,240 --> 00:02:05,220
the commit message for change 

61
00:02:05,220 --> 00:02:06,680
one. You can see over here, we 

62
00:02:06,680 --> 00:02:07,900
just have change one in our 

63
00:02:07,930 --> 00:02:09,570
editor because we''re on the 

64
00:02:09,570 --> 00:02:11,720
change one commit. Over here, I 

65
00:02:11,720 --> 00:02:13,860
could hit I again for insert and 

66
00:02:13,860 --> 00:02:15,940
this is the change one new 

67
00:02:16,020 --> 00:02:18,580
commit message. I can hit escape 

68
00:02:18,780 --> 00:02:22,110
wq. Now, if I do a git log one 

69
00:02:22,110 --> 00:02:24,090
line, we can see first of all 

70
00:02:24,090 --> 00:02:25,570
that we''ve successfully rebased. 

71
00:02:26,830 --> 00:02:28,610
Our commit message here was 

72
00:02:28,610 --> 00:02:30,460
changed and two and three were 

73
00:02:30,460 --> 00:02:32,520
left alone and we''re back on 

74
00:02:32,520 --> 00:02:33,920
master, which has all three 

75
00:02:33,995 --> 00:02:34,320
changes.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
git log --oneline

# start the interactive rebase
git rebase -i HEAD~3
# and then change pick to reword.
# We can now reword the commit message
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '43110292', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H/dash/scikit-learn-change-the-commit-message-of-a-previous-commit-with-interactive-rebase-B1gGH3n3H.mpd', 'https://stream.mux.com/5IwJERGmRC01J001TZOr2r5TUCH5rrZtsZLB01uHd7O202U.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5786, 'Add a File to a Previous Commit with Interactive Rebase', NULL, 'We''re going to pick a previous commit and enter an interactive rebase with:

`git rebase -i HEAD~2`

and change the word `pick` to `edit` on the commit where we want to add a file.

Then during the interactive rebase, we can add the file, and amend the commit we stopped on with:

`git commit --amend --no-edit`

and then once we''re happy, continue the rebase with:

`git rebase --continue`', 116, NULL, '2019-11-28T10:56:18.738Z', '2025-12-13T00:54:53.678Z', 'git-add-a-file-to-a-previous-commit-with-interactive-rebase', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B/scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B.jpg', true, NULL, 'Instructor: [0:00] Let''s do a git log oneline here. We can see three commits that we haven''t pushed yet. Let''s say we want to add a file to this change to commit. I''m going to do a rebase interactive, so git rebase -i, and I want to go back two commits, so I want to go HEAD~2. I enter rebase interactive mode.

[0:24] Instead of pick, I''m going to choose edit for this top commit. I''m going to enter i for insert mode, and I''m going to change pick to edit, and I''m going to hit <esc> :wq to save the file. Now I am currently in a rebase. It says it stopped at, and then it has the #. If I do a git status, it tells me I''m in an interactive rebase that''s in progress.

[0:48] Let''s make a new file here. I''m going to touch secondapp.js. If I go into secondapp.js, I can say, "This is an interactive rebase." Let''s save that now and do a git status.

[1:04] We have secondapp. We are still in our interactive rebase. Let''s add secondapp.js. Then we can do git commit. We''re in a commit currently. I want to amend that commit. I''m going to say no edit because I want to keep the message the same.

[1:23] If I do a git status, it says we''re still in the interactive rebase but there''s nothing to add because we''ve added this to the commit. Now it tells me here that I can do git rebase continue to continue the rebase. Git rebase continue will successfully rebase.

[1:41] If I do a log oneline now, then the commit here is the same, but the hash has changed. My secondapp still exists on master now. I''ve effectively added secondapp to this commit.', NULL, true, '17-egghead-git-add-a-file-to-a-previous-commit-with-interactive-rebase.mp4', 210, true, false, 401, '---
mp4: 14031876
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B/scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B.mp4', 'scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B', 'zduc', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B/scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B.mp3?b2094ebb2dfefea7?5121', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.351Z', NULL, 8388602, NULL, 7255, 0, NULL, 8388392, '57a49edd4ea5459dbb2a4b38d1d09257', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 159881704, '1
00:00:00,750 --> 00:00:02,580
Let''s do a git log oneline here. 

2
00:00:04,540 --> 00:00:06,210
We can see three commits that we 

3
00:00:06,210 --> 00:00:08,150
haven''t pushed yet. Let''s say we 

4
00:00:08,150 --> 00:00:10,230
want to add a file to this 

5
00:00:10,270 --> 00:00:12,450
change to commit. I''m going to 

6
00:00:12,450 --> 00:00:14,350
do a rebase interactive, so git 

7
00:00:14,460 --> 00:00:17,470
rebase -i, and I want to go back 

8
00:00:17,540 --> 00:00:18,670
two commits, so I want to go 

9
00:00:18,670 --> 00:00:23,010
HEAD~2. I enter rebase 

10
00:00:23,010 --> 00:00:24,960
interactive mode. Instead of 

11
00:00:24,960 --> 00:00:26,770
pick, I''m going to choose edit 

12
00:00:26,970 --> 00:00:28,370
for this top commit. I''m going 

13
00:00:28,370 --> 00:00:29,820
to enter i for insert mode, and 

14
00:00:30,430 --> 00:00:32,130
I''m going to change pick to edit, 

15
00:00:33,260 --> 00:00:35,710
and I''m going to hit <esc> :wq 

16
00:00:35,880 --> 00:00:38,370
to save the file. Now I am 

17
00:00:38,370 --> 00:00:40,030
currently in a rebase. It says 

18
00:00:40,030 --> 00:00:41,690
it stopped at, and then it has 

19
00:00:41,690 --> 00:00:44,860
the #. If I do a git status, it 

20
00:00:44,860 --> 00:00:46,520
tells me I''m in an interactive 

21
00:00:46,520 --> 00:00:47,760
rebase that''s in progress. 

22
00:00:48,540 --> 00:00:50,070
Let''s make a new file here. I''m 

23
00:00:50,070 --> 00:00:54,090
going to touch secondapp.js. If 

24
00:00:54,090 --> 00:00:56,380
I go into secondapp.js, I can 

25
00:00:56,380 --> 00:00:58,920
say, "This is an interactive 

26
00:00:59,170 --> 00:01:02,580
rebase." Let''s save that now and 

27
00:01:02,580 --> 00:01:04,830
do a git status. We have 

28
00:01:04,830 --> 00:01:06,380
secondapp. We are still in our 

29
00:01:06,380 --> 00:01:08,490
interactive rebase. Let''s add 

30
00:01:09,270 --> 00:01:12,580
secondapp.js. Then we can do git 

31
00:01:12,670 --> 00:01:14,770
commit. We''re in a commit 

32
00:01:14,930 --> 00:01:17,050
currently. I want to amend that 

33
00:01:17,050 --> 00:01:19,900
commit. I''m going to say no edit 

34
00:01:20,110 --> 00:01:21,000
because I want to keep the 

35
00:01:21,000 --> 00:01:23,930
message the same. If I do a git 

36
00:01:23,930 --> 00:01:26,210
status, it says we''re still in 

37
00:01:26,210 --> 00:01:27,590
the interactive rebase but 

38
00:01:27,590 --> 00:01:29,450
there''s nothing to add because 

39
00:01:29,450 --> 00:01:30,980
we''ve added this to the commit. 

40
00:01:31,750 --> 00:01:32,930
Now it tells me here that I can 

41
00:01:32,930 --> 00:01:35,800
do git rebase continue to 

42
00:01:35,800 --> 00:01:37,600
continue the rebase. Git rebase 

43
00:01:37,720 --> 00:01:40,750
continue will successfully 

44
00:01:40,800 --> 00:01:43,380
rebase. If I do a log oneline 

45
00:01:43,380 --> 00:01:46,990
now, then the commit here is the 

46
00:01:46,990 --> 00:01:48,780
same, but the hash has changed. 

47
00:01:49,650 --> 00:01:51,700
My secondapp still exists on 

48
00:01:51,700 --> 00:01:53,740
master now. I''ve effectively 

49
00:01:53,800 --> 00:01:55,700
added secondapp to this commit.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
git rebase -i HEAD~2

# during the interactive rebase, we can add the file, and amend the commi
git commit --amend --no-edit

git rebase --continue
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', 'f574ce4b', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B/dash/scikit-learn-add-a-file-to-a-previous-commit-with-interactive-rebase-r1eDPhh2B.mpd', 'https://stream.mux.com/Ht5HOHvjOxW8dbYpe8eZXjAZFhpHvUNddYPAjTQuHWA.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5787, 'Fix Merge Conflicts While Changing Commits During an Interactive Rebase', NULL, 'We''ll enter a more complicated interactive rebase with:

`git rebase -i HEAD~2`

and intentionally cause a merge conflict in a previous commit.

Then we can fix that merge conflict like normal, but finish up the rebase with:

`git rebase --continue`', 156, NULL, '2019-11-28T11:04:23.294Z', '2025-12-13T00:54:53.678Z', 'git-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS/scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS.jpg', true, NULL, 'Instructor: [0:00] If we do git log oneline, we have our three commits which are not pushed yet. Let''s say we want to change this commit2 and do a more complicated change here.

[0:11] We''re going to rebase -i, for interactive, we''re going to say HEAD~2, and we want to edit instead of pick the change2. I''m going to enter insert mode with i in vi here, change that to edit, and hit <esc> :wq. Now I''m in an interactive rebase. We can see that with git status. We''re currently in a rebase onto this hash.

[0:42] Let''s go to app.js. I''m going to change my change2 to say change2-inARebase, and save that. If I look at git status, my app has changed. I''m going to add app.js, and then commit it with --amend, because we want to add it to the current commit that we''re rebasing. I''m going to say --no-edit, to not change the message.

[1:11] If I look at the instructions, it says I can git rebase --continue, so let''s try to do that. If we do git rebase --continue, we''ll get into a merge conflict during a rebase. This is going to happen if you go back in time and change a file that also gets changed later, which is exactly what happened.

[1:29] Let''s take a look. We see both modified app.js, so let''s go into app.js to change that. Just like any other merge conflict, we have to clean this up manually. There''s no easy way to do this. We''re going to get rid of the merge conflict lines. We have both change2 and the change2-inARebase. We just want that top one, so we''ll get rid of change2. We can save that.

[1:54] We have app.js that needs to be added, so we can add app.js again. We can commit it now with a new message that is the, "Merge rebase changes2 into changes3." We could have amended the current commit we''re in, or we can make a new one like this. Then, we can rebase --continue. It says we''ve successfully rebased all the way to the top.

[2:21] Let''s check it out. Let''s do git log oneline. We have change1, change2. This now is the merge commit for both 2 and 3. That is a more complicated interactive rebase, but it gets us to the code that we finally wanted.', NULL, true, '18-egghead-git-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase.mp4', 210, true, false, 401, '---
mp4: 19782188
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS/scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS.mp4', 'scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS', 'zduD', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS/scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS.mp3?160af2bbb5c5f17f?2448', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.263Z', NULL, 8388602, NULL, 7256, 0, NULL, 8388548, 'c238f05f8a67452f84c91ece586bafb3', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 160552060, '1
00:00:00,490 --> 00:00:03,140
If we do git log oneline, we 

2
00:00:03,140 --> 00:00:05,130
have our three commits which are 

3
00:00:05,130 --> 00:00:07,310
not pushed yet. Let''s say we 

4
00:00:07,310 --> 00:00:09,700
want to change this commit2 and 

5
00:00:09,700 --> 00:00:11,240
do a more complicated change 

6
00:00:11,240 --> 00:00:14,070
here. We''re going to rebase -i, 

7
00:00:14,070 --> 00:00:17,050
for interactive, we''re going to 

8
00:00:18,780 --> 00:00:23,070
say HEAD~2, and we want to edit 

9
00:00:23,570 --> 00:00:25,430
instead of pick the change2. I''m 

10
00:00:25,430 --> 00:00:26,550
going to enter insert mode with 

11
00:00:26,550 --> 00:00:29,160
i in vi here, change that to 

12
00:00:29,160 --> 00:00:34,500
edit, and hit <esc> :wq. Now I''m 

13
00:00:34,620 --> 00:00:36,420
in an interactive rebase. We can 

14
00:00:36,420 --> 00:00:39,280
see that with git status. We''re 

15
00:00:39,280 --> 00:00:41,830
currently in a rebase onto this 

16
00:00:41,830 --> 00:00:45,490
hash. Let''s go to app.js. I''m 

17
00:00:45,490 --> 00:00:47,450
going to change my change2 to 

18
00:00:47,450 --> 00:00:52,030
say change2-inARebase, and save 

19
00:00:52,030 --> 00:00:55,430
that. If I look at git status, 

20
00:00:56,060 --> 00:00:58,330
my app has changed. I''m going to 

21
00:00:58,390 --> 00:01:01,730
add app.js, and then commit it 

22
00:01:02,620 --> 00:01:04,410
with --amend, because we want to 

23
00:01:04,490 --> 00:01:05,900
add it to the current commit 

24
00:01:05,900 --> 00:01:07,410
that we''re rebasing. I''m going 

25
00:01:07,410 --> 00:01:09,580
to say --no-edit, to not change 

26
00:01:09,580 --> 00:01:12,060
the message. If I look at the 

27
00:01:12,060 --> 00:01:13,820
instructions, it says I can git 

28
00:01:13,820 --> 00:01:15,410
rebase --continue, so let''s try 

29
00:01:15,410 --> 00:01:17,500
to do that. If we do git rebase --

30
00:01:17,500 --> 00:01:19,920
continue, we''ll get into a merge 

31
00:01:19,920 --> 00:01:22,420
conflict during a rebase. This 

32
00:01:22,720 --> 00:01:24,060
is going to happen if you go 

33
00:01:24,060 --> 00:01:25,930
back in time and change a file 

34
00:01:26,010 --> 00:01:27,290
that also gets changed later, 

35
00:01:27,410 --> 00:01:28,490
which is exactly what happened. 

36
00:01:29,610 --> 00:01:31,830
Let''s take a look. We see both 

37
00:01:31,830 --> 00:01:33,930
modified app.js, so let''s go 

38
00:01:33,930 --> 00:01:36,260
into app.js to change that. Just 

39
00:01:36,260 --> 00:01:37,320
like any other merge conflict, 

40
00:01:37,320 --> 00:01:38,000
we have to clean this up 

41
00:01:38,000 --> 00:01:39,480
manually. There''s no easy way to 

42
00:01:39,480 --> 00:01:41,080
do this. We''re going to get rid 

43
00:01:41,080 --> 00:01:43,210
of the merge conflict lines. We 

44
00:01:43,210 --> 00:01:45,150
have both change2 and the 

45
00:01:45,150 --> 00:01:47,950
change2-inARebase. We just want 

46
00:01:48,160 --> 00:01:49,400
that top one, so we''ll get rid 

47
00:01:49,400 --> 00:01:53,480
of change2. We can save that. 

48
00:01:54,830 --> 00:01:56,990
We have app.js that needs to be 

49
00:01:56,990 --> 00:01:58,640
added, so we can add app.js 

50
00:01:58,640 --> 00:02:01,740
again. We can commit it now with 

51
00:02:01,810 --> 00:02:03,650
a new message that is the, "

52
00:02:03,860 --> 00:02:07,140
Merge rebase changes2 into 

53
00:02:07,880 --> 00:02:11,230
changes3." We could have amended 

54
00:02:11,230 --> 00:02:12,530
the current commit we''re in, or 

55
00:02:12,530 --> 00:02:13,580
we can make a new one like this. 

56
00:02:14,720 --> 00:02:16,830
Then, we can rebase --continue. 

57
00:02:18,720 --> 00:02:20,000
It says we''ve successfully 

58
00:02:20,030 --> 00:02:21,240
rebased all the way to the top. 

59
00:02:21,480 --> 00:02:23,000
Let''s check it out. Let''s do git 

60
00:02:23,000 --> 00:02:26,040
log oneline. We have change1, 

61
00:02:26,040 --> 00:02:28,440
change2. This now is the merge 

62
00:02:28,440 --> 00:02:31,090
commit for both 2 and 3. That is 

63
00:02:31,090 --> 00:02:32,300
a more complicated interactive 

64
00:02:32,300 --> 00:02:34,260
rebase, but it gets us to the 

65
00:02:34,260 --> 00:02:35,560
code that we finally wanted.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
# ennter interactive rebase
git rebase -i HEAD~2

# Then we can fix that merge conflict like normal, but finish up the rebase
git rebase --continue
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '9f0ae161', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS/dash/scikit-learn-fix-merge-conflicts-while-changing-commits-during-an-interactive-rebase-By7BYn3nS.mpd', 'https://stream.mux.com/02x2DS01227Yq9JQcU9jMNdVBFtYn5lKQudG018OmXIOe8.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5788, 'Squash Commits Before they are Pushed with Interactive Rebase', NULL, 'We have created 3 commits that we want to squash together before we push them to github.  We can enter an interactive rebase with:

`git rebase -i HEAD~3`

and then change `pick` to `squash` for the last two commits (we want to squash "down" into the first one).

Then we''ll be given the chance to make the commit message for that commit, and once we save the message we''ll be left with just a single commit that contains the changes from all three commits.', 100, NULL, '2019-11-28T11:15:16.898Z', '2025-12-13T00:54:53.678Z', 'git-squash-commits-before-they-are-pushed-with-interactive-rebase', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS/scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS.jpg', true, NULL, 'Instructor: [00:00] Let''s take a look at the git log oneline. We can see the three commits that we haven''t pushed yet. Let''s say, instead of having all this history, we just want to push this as one commit to the origin.

[00:13] We can do that with interactive rebase and we can do a git rebase -i, for interactive, and will let you go back three to handle all three of these. We''re going to do HEAD~3 and we want to squash this all together. Our command here is going to be squash or we could also use fixup, but squash lets us re-write the commit message.

[00:35] The idea here is we have to squash new changes down into another change. Let''s enter I for insert mode and instead of pick here, we''re going to squash this down into Change 2. We''re on the squash Change 2 down into Change 1.

[00:50] Notice that these are assorted, so that the top one is the oldest one. We can hit <esc> :wq to save it. Now we are in a new squash merge message.

[01:01] We could leave all this the same if we wanted all of the different messages or we could enter insert mode and delete all of the old messages. We could just say, "This is our new alert change" and hit <esc> :wq to save that.

[01:21] If we do a git status, we have just one commit. If we do git log oneline, we have all three of our commits squashed into one commit that we can then push. If we do a git push now, then all three of our changes have been pushed in one single commit.', NULL, true, '19-egghead-git-squash-commits-before-they-are-pushed-with-interactive-rebase.mp4', 210, true, false, 401, '---
mp4: 12726616
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS/scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS.mp4', 'scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS', 'zduF', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS/scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS.mp3?554be4c75eb14440?c111', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.460Z', NULL, 8388602, NULL, 7257, 0, NULL, 8388580, 'e81cf9b1e76443019111df4c39f85999', '', 265830, 'free', '', '', '', 'git', '', '', '', NULL, 161222416, '1
00:00:00,860 --> 00:00:02,470
Let''s take a look at the git log 

2
00:00:02,600 --> 00:00:05,000
oneline. We can see the three 

3
00:00:05,000 --> 00:00:06,210
commits that we haven''t pushed 

4
00:00:06,210 --> 00:00:08,090
yet. Let''s say, instead of 

5
00:00:08,090 --> 00:00:09,630
having all this history, we just 

6
00:00:09,630 --> 00:00:11,300
want to push this as one commit 

7
00:00:11,410 --> 00:00:14,070
to the origin. We can do that 

8
00:00:14,070 --> 00:00:16,030
with interactive rebase and we 

9
00:00:16,030 --> 00:00:18,500
can do a git rebase -i, for 

10
00:00:18,500 --> 00:00:20,110
interactive, and will let you go 

11
00:00:20,110 --> 00:00:22,000
back three to handle all three 

12
00:00:22,000 --> 00:00:23,600
of these. We''re going to do HEAD~

13
00:00:23,970 --> 00:00:26,840
3 and we want to squash this all 

14
00:00:26,840 --> 00:00:29,240
together. Our command here is 

15
00:00:29,240 --> 00:00:30,870
going to be squash or we could 

16
00:00:30,870 --> 00:00:33,500
also use fixup, but squash lets 

17
00:00:33,500 --> 00:00:35,150
us re-write the commit message. 

18
00:00:35,970 --> 00:00:36,800
The idea here is we have to 

19
00:00:36,800 --> 00:00:39,430
squash new changes down into 

20
00:00:39,460 --> 00:00:41,490
another change. Let''s enter I 

21
00:00:41,490 --> 00:00:43,290
for insert mode and instead of 

22
00:00:43,320 --> 00:00:44,880
pick here, we''re going to squash 

23
00:00:44,880 --> 00:00:47,320
this down into Change 2. We''re 

24
00:00:47,320 --> 00:00:49,360
on the squash Change 2 down into 

25
00:00:49,360 --> 00:00:51,260
Change 1. Notice that these are 

26
00:00:51,260 --> 00:00:52,890
assorted, so that the top one is 

27
00:00:52,890 --> 00:00:55,910
the oldest one. We can hit <esc> :

28
00:00:56,330 --> 00:00:59,570
wq to save it. Now we are in a 

29
00:00:59,570 --> 00:01:01,680
new squash merge message. We 

30
00:01:01,680 --> 00:01:03,120
could leave all this the same if 

31
00:01:03,120 --> 00:01:04,400
we wanted all of the different 

32
00:01:04,560 --> 00:01:07,040
messages or we could enter 

33
00:01:07,040 --> 00:01:09,130
insert mode and delete all of 

34
00:01:09,130 --> 00:01:12,600
the old messages. We could just 

35
00:01:12,600 --> 00:01:15,960
say, "This is our new alert 

36
00:01:16,080 --> 00:01:20,940
change" and hit <esc> :wq to 

37
00:01:20,940 --> 00:01:22,400
save that. If we do a git 

38
00:01:22,400 --> 00:01:24,950
status, we have just one commit. 

39
00:01:25,460 --> 00:01:28,310
If we do git log oneline, we 

40
00:01:28,310 --> 00:01:30,070
have all three of our commits 

41
00:01:30,140 --> 00:01:31,930
squashed into one commit that we 

42
00:01:31,930 --> 00:01:34,120
can then push. If we do a git 

43
00:01:34,120 --> 00:01:37,030
push now, then all three of our 

44
00:01:37,030 --> 00:01:38,700
changes have been pushed in one 

45
00:01:38,700 --> 00:01:39,390
single commit.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
git rebase -i HEAD~3

# Make the changes in interactive rebase
# Make the commit message for that commit, and once we save the message
# we''ll be left with just a single commit
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '8766e432', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS/dash/scikit-learn-squash-commits-before-they-are-pushed-with-interactive-rebase-ry-0snhhS.mpd', 'https://stream.mux.com/DjoUUFwvQ003UZ4m3JnLJHh8UIz01EsbC1UzkiUZZh7vo.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5789, 'git Ignore a File that has Already been Committed and Pushed', NULL, 'We make a .env file and accidentally push it to github.  

In order to remove the .env file, we first have to add it to our .gitignore file - but that''s not enough, because the .env file will still be on the branch on github.

So we can remove all of our files from our git cache with:

`git rm -r --cached .`

and then add back all the files we want with:

`git add -A`

(that will exclude the .env file this time - because of the .gitignore file).

Then we can commit that change (which is effectively the same as removing the .env file), and push it, which will remove the .env file from the mater branch.

IMPORTANT! If you have secrets in a file that you remove in this way, you should still consider those secrets compromised, because anyone could have pulled them already - and they are also still in the git history.', 157, NULL, '2019-11-28T11:26:42.630Z', '2025-12-13T00:54:53.678Z', 'git-git-ignore-a-file-that-has-already-been-committed-and-pushed', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B/scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B.jpg', true, NULL, 'Instructor: [0:00] Let''s make a new environment file, so we''re going to touch .env. Here''s where we might keep some secrets. Let''s go to .env and we''re going to say my value = testing 123 and save that. Then we''re going to add ENV to the staging area and we''ll commit it as adding an ENV file and then we can push that.

[0:28] As soon as we do that, we go to GitHub and we realize that we did not want to push that ENV file. Here it is on our master branch. If anyone pulls this, they''ll have the environment values that we have. Since these are meant to be local environment values, we don''t want that.

[0:46] We quickly go back and we do a touch git ignore and then open git ignore and we''ll add .env and save it. Now, if we do a git status, we have our git ignore here so git add, git ignore and then commit. Ignore the ENV file and push that and push that.

[1:15] If we go check GitHub now and refresh, our ENV is still there, even though we''re now ignoring it because the ENV was pushed before the git ignore. How do we handle that? What we have to do is remove the ENV file from the cache first.

[1:31] We can do git rm -r --cached. What that will do is remove all of our changes and then we can add the files again. Now, if we do git status, then what we''ve effectively done is deleted our ENV file. We could have also git remove our ENV file.

[1:51] This is a way, if you have many, many files that you''re trying to ignore at once, you can remove them all from the cache and then add back just the files you want and then do a status. If we do a commit and say remove.env from remote and then do a push, now if go check GitHub again, the .env file won''t be there.

[2:15] That''s very important that if that .env file had secrets, it''s still going to be right here. In this commit here, we can see that we still have the .env file. Those secrets are still on GitHub. If you push secrets to GitHub, you should just consider them as compromised. This is how you can ignore a file that you have already pushed, even though if you look in the history, that file is still there.', NULL, true, '16-egghead-git-git-ignore-a-file-that-has-already-been-committed-and-pushed.mp4', 210, true, false, 401, '---
mp4: 15461306
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B/scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B.mp4', 'scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B', 'zdue', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B/scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B.mp3?87378eec8f9142c1?bff4', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.381Z', NULL, 8388602, NULL, 7258, 0, NULL, 8388368, 'a89fa1d195634b28a134f3e44b90ef27', NULL, 265830, 'free', '', '', '', 'git', 'github', '', '', NULL, 161892772, '1
00:00:00,410 --> 00:00:01,870
Let''s make a new environment 

2
00:00:02,040 --> 00:00:03,190
file, so we''re going to touch .

3
00:00:03,790 --> 00:00:06,700
env. Here''s where we might keep 

4
00:00:06,700 --> 00:00:08,250
some secrets. Let''s go to .env 

5
00:00:08,420 --> 00:00:11,390
and we''re going to say my value = 

6
00:00:12,710 --> 00:00:16,390
testing 123 and save that. Then 

7
00:00:16,390 --> 00:00:17,920
we''re going to add ENV to the 

8
00:00:17,920 --> 00:00:19,730
staging area and we''ll commit it 

9
00:00:20,070 --> 00:00:24,670
as adding an ENV file and then 

10
00:00:24,670 --> 00:00:28,800
we can push that. As soon as we 

11
00:00:28,800 --> 00:00:31,440
do that, we go to GitHub and we 

12
00:00:31,440 --> 00:00:33,860
realize that we did not want to 

13
00:00:33,860 --> 00:00:35,990
push that ENV file. Here it is 

14
00:00:36,050 --> 00:00:38,670
on our master branch. If anyone 

15
00:00:38,670 --> 00:00:39,920
pulls this, they''ll have the 

16
00:00:39,920 --> 00:00:42,070
environment values that we have. 

17
00:00:42,070 --> 00:00:43,360
Since these are meant to be 

18
00:00:43,360 --> 00:00:44,720
local environment values, we 

19
00:00:44,770 --> 00:00:48,020
don''t want that. We quickly go 

20
00:00:48,020 --> 00:00:49,940
back and we do a touch git 

21
00:00:49,940 --> 00:00:53,620
ignore and then open git ignore 

22
00:00:54,290 --> 00:00:57,010
and we''ll add .env and save it. 

23
00:00:58,520 --> 00:01:00,560
Now, if we do a git status, we 

24
00:01:00,560 --> 00:01:02,060
have our git ignore here so git 

25
00:01:02,120 --> 00:01:06,350
add, git ignore and then commit. 

26
00:01:07,540 --> 00:01:10,960
Ignore the ENV file and push 

27
00:01:10,960 --> 00:01:15,930
that and push that. If we go 

28
00:01:15,930 --> 00:01:17,680
check GitHub now and refresh, 

29
00:01:18,290 --> 00:01:20,460
our ENV is still there, even 

30
00:01:20,460 --> 00:01:21,690
though we''re now ignoring it 

31
00:01:22,330 --> 00:01:23,470
because the ENV was pushed 

32
00:01:23,540 --> 00:01:25,570
before the git ignore. How do we 

33
00:01:25,570 --> 00:01:27,680
handle that? What we have to do 

34
00:01:27,770 --> 00:01:30,070
is remove the ENV file from the 

35
00:01:30,180 --> 00:01:32,130
cache first. We can do git rm -

36
00:01:32,530 --> 00:01:37,280
r --cached. What that will do is 

37
00:01:37,280 --> 00:01:39,510
remove all of our changes and 

38
00:01:39,510 --> 00:01:41,420
then we can add the files again. 

39
00:01:42,600 --> 00:01:44,900
Now, if we do git status, then 

40
00:01:44,900 --> 00:01:46,320
what we''ve effectively done is 

41
00:01:46,320 --> 00:01:48,210
deleted our ENV file. We could 

42
00:01:48,210 --> 00:01:50,060
have also git remove our ENV 

43
00:01:50,180 --> 00:01:52,090
file. This is a way, if you 

44
00:01:52,090 --> 00:01:53,630
have many, many files that 

45
00:01:53,630 --> 00:01:54,800
you''re trying to ignore at once, 

46
00:01:54,920 --> 00:01:56,020
you can remove them all from the 

47
00:01:56,020 --> 00:01:58,540
cache and then add back just the 

48
00:01:58,540 --> 00:01:59,850
files you want and then do a 

49
00:01:59,850 --> 00:02:02,610
status. If we do a commit and 

50
00:02:02,610 --> 00:02:06,500
say remove.env from remote and 

51
00:02:06,500 --> 00:02:09,950
then do a push, now if go check 

52
00:02:10,030 --> 00:02:13,480
GitHub again, the .env file 

53
00:02:13,480 --> 00:02:15,590
won''t be there. That''s very 

54
00:02:15,590 --> 00:02:17,370
important that if that .env file 

55
00:02:17,370 --> 00:02:19,620
had secrets, it''s still going to 

56
00:02:19,620 --> 00:02:21,050
be right here. In this commit 

57
00:02:21,050 --> 00:02:23,430
here, we can see that we still 

58
00:02:23,430 --> 00:02:25,430
have the .env file. Those 

59
00:02:25,430 --> 00:02:27,990
secrets are still on GitHub. If 

60
00:02:27,990 --> 00:02:29,250
you push secrets to GitHub, you 

61
00:02:29,250 --> 00:02:30,200
should just consider them as 

62
00:02:30,200 --> 00:02:32,560
compromised. This is how you can 

63
00:02:32,560 --> 00:02:33,680
ignore a file that you have 

64
00:02:33,680 --> 00:02:35,260
already pushed, even though if 

65
00:02:35,260 --> 00:02:36,170
you look in the history, that 

66
00:02:36,170 --> 00:02:37,160
file is still there.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
# We make a file and accidentally push it to github
# To remove it, add it to .gitignore file
# remove all of our files from our git cache
git rm -r --cached .

# add back all the files we want with
git add -A
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', 'de83f544', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B/dash/scikit-learn-git-ignore-a-file-that-has-already-been-committed-and-pushed-HyJF0222B.mpd', 'https://stream.mux.com/gSepM5OipZAJou1kiYlGmZzBwesn1KRwf02j11vkugCA.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5790, 'Completely Remove a File from Pushed git History', NULL, 'If we want to completely remove a file from github - including all history - there is a tool that we can use called the BFG.

The github help article is here:

https://help.github.com/en/github/authenticating-to-github/removing-sensitive-data-from-a-repository

And the BGF itself is available here:

https://rtyley.github.io/bfg-repo-cleaner/

We''ll start by downloading the BFG jar file, and then cloning a mirror of our repo with:

`git clone --mirror [repo-url]`

Then we can delete our .env file with:

`java -jar ~/Downloads/bfg-1.13.0.jar --delete-files .env my-repo.git`

which will delete the .env file. Then we can use the following command to prune the entire history and garbage collect the remains:

`git reflog expire --expire=now --all && git gc --prune=now --aggressive`

And finally, use `git push` to push that change to github, and remove the .env file from all of the history on github as well.', 192, NULL, '2019-11-28T11:45:16.842Z', '2025-12-13T00:54:53.678Z', 'git-completely-remove-a-file-from-pushed-git-history', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH/scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH.jpg', true, NULL, 'Instructor: [00:00] We pushed a .env file with a secret here and we want to really scrub this from the git repo. There is one nuclear option that we could do, although you should still consider any secret you push to GitHub as lost or compromised and changed it.

[00:16] If we go to this GitHub help article and the link is in the description, it has this BFG repo cleaner, which will be able to delete files in the repo and all of the repo''s history. Let''s go to that tool here and see how to use this for out .env file.

[00:34] First, we have to download the JAR file and tell Chrome we want to keep it. We have to follow the instructions in the usage section. Let''s do that. First, we''re going to go up one directory and we''re going to make a new directory and I''ll call it clean up, but you can call it whatever you like. I''ll see the enter clean up.

[00:56] Now, I need to git clone as a mirror my repository. Let''s go back to GitHub, back to my repository and get the URL for it. When I''m cloning as a mirror, what the BFG tool is going to do is delete the history locally and then when we push to GitHub, GitHub won''t mirror our new re-written histories.

[01:19] Let''s look at LS and we have just the gitMistakes.gitDirectory. What we''re going to do is look at the instructions and use the delete files command. Because it''s a JAR file, we have to run it with java-jar. Let''s do java-jar and mine went to the downloads directory under bfg.jar.

[01:45] I want to --delete files, the files I want in my repository. I''m going to do --delete files. I want to delete the .env file in the gitMistakes.gitRepository. We can see that it did that and now the instructions. The files are deleted, but now I need to strip that file from the history.

[02:08] I''m going to copy this exact command. First, we''re going to see into the repository. Then we''re going to use ref log to do a garbage collection of all the history of that file. I''m going to look and see into git mistakes and I''m going to copy and paste that line and it send it''s done cleaning the objects.

[02:28] Now I can do a git push. What happened is the BFG rewrote the history locally and then we''re pushing it up to GitHub. It doesn''t work on the pull request here, but that''s OK because our environment was in master.

[02:42] If we look at GitHub now, we can go to get mistakes and if we look at the commit history, here''s where it says we added the ENV file. If we look at the files in that commit, we can see that is showing zero changes with zero additions or deletions.

[03:00] We''ve successfully removed this file completely from GitHub. Again, if you have secrets in that file, consider them compromised at this point, but this is how we can actually clean up GitHub history.', NULL, true, '20-egghead-git-completely-remove-a-file-from-pushed-git-history.mp4', 210, true, false, 401, '---
mp4: 20592088
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH/scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH.mp4', 'scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH', 'zdu6', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH/scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH.mp3?3acb224613179f2c?5ae7', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.247Z', NULL, 8388602, NULL, 7259, 0, NULL, 8388596, '6b82ceef82644fa6be02eb83e3940d09', NULL, 265830, 'free', '', '', '', 'git', 'github', '', '', NULL, 162563128, '1
00:00:00,420 --> 00:00:02,730
We pushed a .env file with a 

2
00:00:02,730 --> 00:00:04,460
secret here and we want to 

3
00:00:04,460 --> 00:00:06,270
really scrub this from the git 

4
00:00:06,270 --> 00:00:09,100
repo. There is one nuclear 

5
00:00:09,100 --> 00:00:10,080
option that we could do, 

6
00:00:10,540 --> 00:00:11,250
although you should still 

7
00:00:11,250 --> 00:00:12,710
consider any secret you push to 

8
00:00:12,710 --> 00:00:14,700
GitHub as lost or compromised 

9
00:00:14,860 --> 00:00:17,080
and changed it. If we go to 

10
00:00:17,290 --> 00:00:18,760
this GitHub help article and the 

11
00:00:18,760 --> 00:00:20,810
link is in the description, it 

12
00:00:20,810 --> 00:00:23,680
has this BFG repo cleaner, which 

13
00:00:23,680 --> 00:00:25,730
will be able to delete files in 

14
00:00:25,730 --> 00:00:27,560
the repo and all of the repo''s 

15
00:00:27,560 --> 00:00:30,660
history. Let''s go to that tool 

16
00:00:30,660 --> 00:00:33,470
here and see how to use this for 

17
00:00:33,510 --> 00:00:35,240
out .env file. First, we have 

18
00:00:35,240 --> 00:00:38,510
to download the JAR file and 

19
00:00:38,540 --> 00:00:40,820
tell Chrome we want to keep it. 

20
00:00:40,880 --> 00:00:41,970
We have to follow the 

21
00:00:41,970 --> 00:00:43,470
instructions in the usage 

22
00:00:43,510 --> 00:00:46,450
section. Let''s do that. First, 

23
00:00:46,450 --> 00:00:47,360
we''re going to go up one 

24
00:00:47,360 --> 00:00:49,090
directory and we''re going to 

25
00:00:49,090 --> 00:00:52,130
make a new directory and I''ll 

26
00:00:52,130 --> 00:00:53,010
call it clean up, but you can 

27
00:00:53,010 --> 00:00:54,540
call it whatever you like. I''ll 

28
00:00:54,540 --> 00:00:56,700
see the enter clean up. Now, I 

29
00:00:56,700 --> 00:01:00,360
need to git clone as a mirror my 

30
00:01:00,360 --> 00:01:01,960
repository. Let''s go back to 

31
00:01:01,960 --> 00:01:04,730
GitHub, back to my repository 

32
00:01:04,800 --> 00:01:08,630
and get the URL for it. When I''m 

33
00:01:08,630 --> 00:01:10,190
cloning as a mirror, what the 

34
00:01:10,190 --> 00:01:11,850
BFG tool is going to do is 

35
00:01:11,960 --> 00:01:13,160
delete the history locally and 

36
00:01:13,460 --> 00:01:14,620
then when we push to GitHub, 

37
00:01:14,820 --> 00:01:16,910
GitHub won''t mirror our new re-

38
00:01:16,910 --> 00:01:20,250
written histories. Let''s look 

39
00:01:20,250 --> 00:01:22,000
at LS and we have just the 

40
00:01:22,000 --> 00:01:25,990
gitMistakes.gitDirectory. What 

41
00:01:25,990 --> 00:01:27,630
we''re going to do is look at the 

42
00:01:27,630 --> 00:01:29,510
instructions and use the delete 

43
00:01:29,510 --> 00:01:31,980
files command. Because it''s a 

44
00:01:31,980 --> 00:01:33,560
JAR file, we have to run it with 

45
00:01:33,650 --> 00:01:38,740
java-jar. Let''s do java-jar and 

46
00:01:38,740 --> 00:01:40,120
mine went to the downloads 

47
00:01:40,120 --> 00:01:45,990
directory under bfg.jar. I want 

48
00:01:45,990 --> 00:01:48,810
to --delete files, the files I 

49
00:01:48,810 --> 00:01:50,770
want in my repository. I''m going 

50
00:01:50,770 --> 00:01:53,660
to do --delete files. I want to 

51
00:01:53,660 --> 00:01:56,230
delete the .env file in the 

52
00:01:56,360 --> 00:02:00,650
gitMistakes.gitRepository. We 

53
00:02:00,650 --> 00:02:03,230
can see that it did that and now 

54
00:02:03,230 --> 00:02:05,480
the instructions. The files are 

55
00:02:05,480 --> 00:02:06,940
deleted, but now I need to strip 

56
00:02:06,940 --> 00:02:08,850
that file from the history. I''m 

57
00:02:08,850 --> 00:02:11,010
going to copy this exact command. 

58
00:02:11,010 --> 00:02:12,180
First, we''re going to see into 

59
00:02:12,180 --> 00:02:13,840
the repository. Then we''re going 

60
00:02:13,840 --> 00:02:16,060
to use ref log to do a garbage 

61
00:02:16,060 --> 00:02:18,060
collection of all the history of 

62
00:02:18,060 --> 00:02:20,660
that file. I''m going to look and 

63
00:02:20,660 --> 00:02:22,770
see into git mistakes and I''m 

64
00:02:22,770 --> 00:02:24,050
going to copy and paste that 

65
00:02:24,050 --> 00:02:27,090
line and it send it''s done 

66
00:02:27,090 --> 00:02:28,990
cleaning the objects. Now I can 

67
00:02:28,990 --> 00:02:32,460
do a git push. What happened is 

68
00:02:32,460 --> 00:02:34,200
the BFG rewrote the history 

69
00:02:34,200 --> 00:02:35,890
locally and then we''re pushing 

70
00:02:35,890 --> 00:02:38,080
it up to GitHub. It doesn''t work 

71
00:02:38,080 --> 00:02:39,480
on the pull request here, but 

72
00:02:39,480 --> 00:02:40,470
that''s OK because our 

73
00:02:40,470 --> 00:02:42,440
environment was in master. If 

74
00:02:42,620 --> 00:02:45,440
we look at GitHub now, we can go 

75
00:02:45,440 --> 00:02:48,090
to get mistakes and if we look 

76
00:02:48,120 --> 00:02:50,620
at the commit history, here''s 

77
00:02:50,620 --> 00:02:51,940
where it says we added the ENV 

78
00:02:52,040 --> 00:02:54,210
file. If we look at the files in 

79
00:02:54,210 --> 00:02:56,610
that commit, we can see that is 

80
00:02:56,610 --> 00:02:58,270
showing zero changes with zero 

81
00:02:58,270 --> 00:03:00,330
additions or deletions. We''ve 

82
00:03:00,330 --> 00:03:02,360
successfully removed this file 

83
00:03:02,360 --> 00:03:04,680
completely from GitHub. Again, 

84
00:03:04,800 --> 00:03:06,090
if you have secrets in that file, 

85
00:03:06,160 --> 00:03:07,240
consider them compromised at 

86
00:03:07,240 --> 00:03:09,150
this point, but this is how we 

87
00:03:09,150 --> 00:03:10,820
can actually clean up GitHub 

88
00:03:10,895 --> 00:03:11,220
history.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
# prune the entire history and garbage collect the remains
git reflog expire --expire=now --all && git gc --prune=now --aggressive

#  use git push to push that change to github,
# and remove the .env file from all of the history
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '917b5d15', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH/dash/scikit-learn-completely-remove-a-file-from-pushed-git-history-BkKRzTnnH.mpd', 'https://stream.mux.com/H33BWgr301k00TMD6qF7kh8tIpvLzFtCm01thzGPcKUHQM.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5791, 'Push a New Branch to github that Doesn''t Exist Remotely Yet', NULL, 'We''ll make a new feature branch with:

`git checkout -b new-branch`

and then when we make changes and commit them, we can try to push that branch with:

`git push`

However, in order to get the branch to exist on github as well, we need to set the upstream of the local branch at the same time with:

`git push --set-upstream origin new-branch`', 117, NULL, '2019-11-28T11:50:59.277Z', '2025-12-13T00:54:53.678Z', 'git-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB/scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB.jpg', true, NULL, 'Instructor: [0:00] We can create a new branch in two different ways. We can do git branch and then our branch name like jsChanges or we can do git checkout -b jsChanges. That''s what we''ll do to make a new branch. If we do a git status, we can see that we''re on the branch jsChanges.

[0:20] We can also do git branch to see all of our branches. If we do git branch -vv, for verbose mode, then we can see the current commit that we''re on for each branch, and we can see the remote that we''re on for each branch. Master is linked to a remote, but jsChanges is just a local branch for now.

[0:42] Let''s make a change on this branch. We''ll make a function called helloWorld again, and we can say alert i. Then, let''s save that and do a git status. Now our app.js has been modified. Let''s add app.js to the staging area. We''ll commit that and we''ll say, "Adds Hello World."

[1:06] If we do a git log oneline, then we have "Adds Hello World" on the jsChanges branch, which has diverged from the master branch. Let''s push that. When we do, we get a fatal error, because if we do git branch -vv, we don''t have jsChanges linked to any remote branch.

[1:29] Luckily, we have the fix right here. We have to push while setting the upstream to the origin jsChanges, just like this is origin master. Let''s do git push. We can do --set-upstream or we can do -u, and then origin jsChanges. Now that has been pushed. If we do git branch -vv again, we can see that jsChanges is now mapped to origin jsChanges.', NULL, true, '08-egghead-git-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet.mp4', 210, true, false, 401, '---
mp4: 10733361
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB/scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB.mp4', 'scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB', 'zduT', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB/scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB.mp3?4046059910455b5c?5756', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.519Z', NULL, 8388602, NULL, 7260, 0, NULL, 8265728, '91028b0e784a47b8a2bc1b31035065e1', NULL, 265830, 'free', '', '', '', 'git', 'github', '', '', NULL, 163233484, '1
00:00:00,230 --> 00:00:01,710
We can create a new branch in 

2
00:00:01,710 --> 00:00:03,010
two different ways. We can do 

3
00:00:03,010 --> 00:00:05,390
git branch and then our branch 

4
00:00:05,470 --> 00:00:08,800
name like jsChanges or we can do 

5
00:00:08,800 --> 00:00:12,310
git checkout -b jsChanges. 

6
00:00:12,930 --> 00:00:13,790
That''s what we''ll do to make a 

7
00:00:13,790 --> 00:00:15,810
new branch. If we do a git 

8
00:00:15,810 --> 00:00:18,120
status, we can see that we''re on 

9
00:00:18,120 --> 00:00:20,430
the branch jsChanges. We can 

10
00:00:20,430 --> 00:00:22,290
also do git branch to see all of 

11
00:00:22,290 --> 00:00:24,310
our branches. If we do git 

12
00:00:24,360 --> 00:00:28,090
branch -vv, for verbose mode, 

13
00:00:28,850 --> 00:00:30,840
then we can see the current 

14
00:00:31,430 --> 00:00:32,520
commit that we''re on for each 

15
00:00:32,560 --> 00:00:33,980
branch, and we can see the 

16
00:00:34,030 --> 00:00:35,750
remote that we''re on for each 

17
00:00:35,750 --> 00:00:37,650
branch. Master is linked to a 

18
00:00:37,650 --> 00:00:39,820
remote, but jsChanges is just a 

19
00:00:39,820 --> 00:00:42,330
local branch for now. Let''s 

20
00:00:42,330 --> 00:00:43,670
make a change on this branch. 

21
00:00:44,110 --> 00:00:45,980
We''ll make a function called 

22
00:00:46,080 --> 00:00:48,680
helloWorld again, and we can say 

23
00:00:48,700 --> 00:00:52,420
alert i. Then, let''s save that 

24
00:00:52,590 --> 00:00:55,560
and do a git status. Now our app.

25
00:00:55,560 --> 00:00:57,860
js has been modified. Let''s add 

26
00:00:58,040 --> 00:00:59,740
app.js to the staging area. 

27
00:01:00,520 --> 00:01:02,700
We''ll commit that and we''ll say, "

28
00:01:03,320 --> 00:01:07,330
Adds Hello World." If we do a 

29
00:01:07,330 --> 00:01:11,220
git log oneline, then we have "

30
00:01:11,260 --> 00:01:13,250
Adds Hello World" on the 

31
00:01:13,250 --> 00:01:14,510
jsChanges branch, which has 

32
00:01:14,540 --> 00:01:16,220
diverged from the master branch. 

33
00:01:16,810 --> 00:01:19,300
Let''s push that. When we do, we 

34
00:01:19,300 --> 00:01:21,860
get a fatal error, because if we 

35
00:01:21,860 --> 00:01:25,810
do git branch -vv, we don''t have 

36
00:01:25,870 --> 00:01:28,360
jsChanges linked to any remote 

37
00:01:28,440 --> 00:01:30,420
branch. Luckily, we have the 

38
00:01:30,420 --> 00:01:32,310
fix right here. We have to push 

39
00:01:32,310 --> 00:01:34,270
while setting the upstream to 

40
00:01:34,570 --> 00:01:36,860
the origin jsChanges, just like 

41
00:01:36,860 --> 00:01:38,660
this is origin master. Let''s do 

42
00:01:38,660 --> 00:01:40,530
git push. We can do --set-

43
00:01:40,590 --> 00:01:44,310
upstream or we can do -u, and 

44
00:01:44,310 --> 00:01:48,920
then origin jsChanges. Now that 

45
00:01:48,920 --> 00:01:50,380
has been pushed. If we do git 

46
00:01:50,550 --> 00:01:53,710
branch -vv again, we can see 

47
00:01:53,710 --> 00:01:56,010
that jsChanges is now mapped to 

48
00:01:56,040 --> 00:01:56,880
origin jsChanges.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'We can create branches with `git branch {BRANCH-NAME}` or `git checkout -b {BRANCH-NAME}`. Let''s create one called `js-changes` with `git checkout -b js-changes`. Using `git status` shows you which branch you''re currently on and `git branch -vv` shows the current commit and remote you''re on for each branch. We can make a change on the branch by creating a function in our `app.js`.

## app.js
```js
// our app js code

function helloWorld() {
  alert("Hi!")
}
```

After saving, we stage the file with `git add app.js` and a commit message `git commit -m "Adds hello world"`. Using the `git log --oneline` shows that we have diverged from the master branch. If we tried to push at this point, we would receive a fatal error. Using `git branch -vv` displays we don''t have `js-changes` linked to any remote branch. However, Git gives us the fix in the terminal. We have to push while setting the upstream to `origin js-changes`. **We then run `git push -u origin js-changes` to push it, as `-u` is just an alternative to `--set-upstream`.** Now, we successfully pushed our new branch to Github and trying `git branch -vv` can show us that the old `js-changes` is now mapped to `origin/js-changes`.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', 'dec0444a', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB/dash/scikit-learn-push-a-new-branch-to-github-that-doesn-t-exist-remotely-yet-SkgE4a2hB.mpd', 'https://stream.mux.com/Bc8y7Qxqmjj2h2J7LuLGWCcJE01PLzUXbcjUFIWdRLIQ.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2897, 'Validate that a Checkbox is Checked in an Elm Form', NULL, 'Our revised model allows us to validate fields of any type, such as checkboxes that have the type of Bool. 

In this lesson, for ease of demonstration, we''ll replace the age field with an "accept policy" checkbox with the Bool type. ', 255, NULL, '2017-12-20T18:37:19.630Z', '2023-08-08T00:08:21.123Z', 'elm-validate-that-a-checkbox-is-checked-in-an-elm-form', NULL, '6eb8hrva3k', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz/egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_6eb8hrva3k" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz.mp4" /><meta itemprop="duration" content="PT4M14S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/e4449b27673ff9a0b998311d77917091399cab39.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/083584bfa55bee1657fd7b759dca71a86a29f909.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=254.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe4449b27673ff9a0b998311d77917091399cab39.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F083584bfa55bee1657fd7b759dca71a86a29f909.bin" /><meta itemprop="uploadDate" content="2017-12-20T10:44:15Z" /><object id="wistia_6eb8hrva3k_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=254.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe4449b27673ff9a0b998311d77917091399cab39.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F083584bfa55bee1657fd7b759dca71a86a29f909.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=254.92&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe4449b27673ff9a0b998311d77917091399cab39.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F083584bfa55bee1657fd7b759dca71a86a29f909.bin" name="wistia_6eb8hrva3k_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("6eb8hrva3k", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/6eb8hrva3k/metadata.js"></script>', 'Instructor: [00:01] in our revised model, we have this role type parameter that is the type of the data returned from the UI. We can now handle not only strings but also other types. To demonstrate this, let me add a checkbox on a form that the user must check before the form is submitted.

[00:18] Let''s change the model. We''ll call this accept policy. It''s field of bool and bool.

[00:28] To keep the application reasonably small, let me remove the age field. In our initial model, we''ll have accept policy, initialize as a field with value false, and I have a new message type, check accept policy with a payload of type bool.

[00:53] Here I''m going to handle this message. When we''ve added it to model, let me replace these. The field is not optional. We have a check to validate that this is true. The error otherwise is, "You must accept the policy."

[01:28] Here we do need to pass this into the function, even though we actually disregard this parameter. This is because we want to use the applicative behavior to ensure that everything on the model is valid.

[01:50] To create the checkbox, it''s still an input, but the type is checkbox. The value comes from the model, but now the raw value is a boolean, so we need to convert it to string. The event is no longer on input but on check, and the message type to use is check accept policy.

[02:21] This just renders the checkbox itself, so we need a little label next to it. Let me put the error label in a div on its own so that it appears below the checkbox.

[02:45] Now let me fix a couple of compiler errors. Here I had a parentheses left from before.

[03:02] Then the function is true, I''ve not defined yet. Let me do that.

[03:10] This is validator from bool to bool, but we also want to take an error message which is just a string. It''s quite simple. If B, then OK B. Else, error with err.

[03:35] Here I also need to import the on check function. I use this name. I want to use the underscore to signify that I''m ignoring this parameter and yet give it a name, but this is invalid, so let me just use the underscore.

[03:53] Now the code compiles. We have our checkbox appearing here. If I click submit, you see that I get a validation error that says, "You must accept the policy." You can also see this in the model that the field is an invalid state.

[04:07] If I check it and I click submit, then notice that the field goes to valid.', NULL, true, '12-egghead-elm-validate-that-a-checkbox-is-checked-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 26929277
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz/egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz.mp4', 'egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz', 'zlqN', 'https://egghead-pipeline.s3.amazonaws.com/egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz/egghead-validate-that-a-checkbox-is-checked-in-an-elm-form-S1Fwa3Pzz.mp3?2e01cff90a77db90?0f3c', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:19.231Z', NULL, 8388589, NULL, 3711, 0, NULL, 8388598, '25b04170e57211e7bc8d91013521458f', 'https://ellie-app.com/embed/532C69vsWa1/7', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383737, '1
00:00:01,520 --> 00:00:02,750
in our revised model, we have 

2
00:00:02,760 --> 00:00:05,210
this role type parameter that is 

3
00:00:05,220 --> 00:00:06,640
the type of the data returned 

4
00:00:06,650 --> 00:00:09,780
from the UI. We can now handle 

5
00:00:09,855 --> 00:00:10,470
not only strings but also other 

6
00:00:10,510 --> 00:00:12,800
types. To demonstrate this, let 

7
00:00:12,810 --> 00:00:14,710
me add a checkbox on a form that 

8
00:00:14,720 --> 00:00:16,280
the user must check before the 

9
00:00:16,290 --> 00:00:18,880
form is submitted. Let''s change 

10
00:00:18,170 --> 00:00:19,540
the model. We''ll call this 

11
00:00:19,600 --> 00:00:26,270
accept policy. It''s field of 

12
00:00:26,345 --> 00:00:28,740
bool and bool. To keep the 

13
00:00:28,815 --> 00:00:30,090
application reasonably small, 

14
00:00:30,100 --> 00:00:32,730
let me remove the age field. In 

15
00:00:32,740 --> 00:00:34,800
our initial model, we''ll have 

16
00:00:34,970 --> 00:00:39,150
accept policy, initialize as a 

17
00:00:39,160 --> 00:00:42,470
field with value false, and I 

18
00:00:42,480 --> 00:00:44,700
have a new message type, check 

19
00:00:45,320 --> 00:00:50,300
accept policy with a payload of 

20
00:00:50,330 --> 00:00:53,830
type bool. Here I''m going to 

21
00:00:53,840 --> 00:01:03,960
handle this message. When we''ve 

22
00:01:03,960 --> 00:01:08,310
added it to model, let me 

23
00:01:08,320 --> 00:01:13,060
replace these. The field is not 

24
00:01:13,220 --> 00:01:16,990
optional. We have a check to 

25
00:01:17,065 --> 00:01:20,770
validate that this is true. The 

26
00:01:20,780 --> 00:01:23,990
error otherwise is, "You must 

27
00:01:24,040 --> 00:01:29,210
accept the policy." Here we do 

28
00:01:29,220 --> 00:01:30,150
need to pass this into the 

29
00:01:30,160 --> 00:01:33,920
function, even though we 

30
00:01:33,995 --> 00:01:34,520
actually disregard this 

31
00:01:34,530 --> 00:01:39,540
parameter. This is because we 

32
00:01:39,550 --> 00:01:40,680
want to use the applicative 

33
00:01:40,755 --> 00:01:42,490
behavior to ensure that 

34
00:01:42,670 --> 00:01:44,090
everything on the model is valid. 

35
00:01:50,970 --> 00:01:52,170
To create the checkbox, it''s 

36
00:01:52,245 --> 00:01:54,940
still an input, but the type is 

37
00:01:55,015 --> 00:02:00,490
checkbox. The value comes from 

38
00:02:00,565 --> 00:02:02,670
the model, but now the raw value 

39
00:02:02,710 --> 00:02:04,810
is a boolean, so we need to 

40
00:02:04,820 --> 00:02:11,660
convert it to string. The event 

41
00:02:11,670 --> 00:02:13,920
is no longer on input but on 

42
00:02:13,930 --> 00:02:16,000
check, and the message type to 

43
00:02:16,370 --> 00:02:18,960
use is check accept policy. 

44
00:02:21,920 --> 00:02:23,480
This just renders the checkbox 

45
00:02:23,420 --> 00:02:24,760
itself, so we need a little 

46
00:02:24,760 --> 00:02:41,220
label next to it. Let me put the 

47
00:02:41,230 --> 00:02:43,250
error label in a div on its own 

48
00:02:43,880 --> 00:02:45,080
so that it appears below the 

49
00:02:45,155 --> 00:02:56,300
checkbox. Now let me fix a 

50
00:02:56,310 --> 00:02:58,150
couple of compiler errors. Here 

51
00:02:58,225 --> 00:02:59,880
I had a parentheses left from 

52
00:03:00,090 --> 00:03:03,020
before. Then the function is 

53
00:03:03,030 --> 00:03:06,460
true, I''ve not defined yet. Let 

54
00:03:10,360 --> 00:03:12,040
me do that. This is validator 

55
00:03:12,115 --> 00:03:16,450
from bool to bool, but we also 

56
00:03:16,460 --> 00:03:18,380
want to take an error message 

57
00:03:18,490 --> 00:03:21,420
which is 

58
00:03:21,430 --> 00:03:25,480
just a string. It''s quite simple. 

59
00:03:26,990 --> 00:03:32,160
If B, then OK B. Else, error 

60
00:03:32,200 --> 00:03:36,120
with err. Here I also need to 

61
00:03:36,130 --> 00:03:40,490
import the on check function. I 

62
00:03:40,500 --> 00:03:42,530
use this name. I want to use the 

63
00:03:42,540 --> 00:03:44,250
underscore to signify that I''m 

64
00:03:44,290 --> 00:03:45,990
ignoring this parameter and yet 

65
00:03:46,030 --> 00:03:47,880
give it a name, but this is 

66
00:03:47,890 --> 00:03:50,030
invalid, so let me just use the 

67
00:03:50,105 --> 00:03:53,840
underscore. Now the code 

68
00:03:53,840 --> 00:03:55,790
compiles. We have our checkbox 

69
00:03:55,865 --> 00:03:56,210
appearing here. If I click 

70
00:03:57,820 --> 00:03:59,430
submit, you see that I get a 

71
00:03:59,440 --> 00:04:01,070
validation error that says, "You 

72
00:04:01,080 --> 00:04:03,830
must accept the policy." You can 

73
00:04:03,840 --> 00:04:05,920
also see this in the model that 

74
00:04:05,930 --> 00:04:07,320
the field is an invalid state. 

75
00:04:07,950 --> 00:04:10,890
If I check it and I click submit, 

76
00:04:11,080 --> 00:04:12,820
then notice that the field goes 

77
00:04:12,830 --> 00:04:13,390
to valid.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '08887b1c', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6246, 'Create a User Interface with React‚Äôs createElement API', NULL, 'React uses the same APIs to control and update the DOM that we did in the previous lesson. But it offers so much to the table that we‚Äôre going to introduce it into the project and rewrite what we‚Äôve written to React code. Instead of creating DOM elements, we‚Äôll create React elements and then hand those off to `react-dom` to handle turning those into DOM elements and putting them into the page.

If you‚Äôve ever learned or used React before, you‚Äôre probably more familiar with JSX than React‚Äôs `createElement` API, but it‚Äôs important to understand the `createElement` API first so you understand the magic and can become a code magician yourself. Not to worry, we‚Äôll get to JSX soon enough!', 269, NULL, '2020-03-11T02:29:21.158Z', '2025-12-13T00:54:53.678Z', 'react-create-a-user-interface-with-react-s-createelement-api', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU/react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU.jpg', true, NULL, 'Kent C. Dodds: [0:00] To use React to create this user interface, we''re going to need to have React on the page. We can get React from npm, but there''s a service called unpackage that we''re going to use. If I go to unpackage.com that will show me how to use unpackage to get any file that is distributed on npm. It has these files for React. If I go to that file, then I''ll see a minified version of React.

[0:25] Let''s go ahead and add some script tags to our page here so that we get React on the page. With React and ReactDOM both on the page, I can now create React elements and then use ReactDOM to render those elements to the page.

[0:41] I''m going to comment all of this out and then with ReactDOM I''m going to render my element to the root element, but the element that I provide is not going to be a DOM element that I create with the document. Instead, it''s going to be a React.createElement that I create with React.

[1:01] The API is not exactly the same as the one that we get with document. We do get to specify the type of element as the first argument, but instead of getting the element and attaching properties to it, we specify those properties on creation as an object.

[1:16] Another difference is instead of text content, we specify children. Here we''ll specify our children as Hello World and then the class name will be a container. This is going to give me my element, which I will render with ReactDOM to the root element. If we save this, we''ll get a page refresh. You may not have even noticed that because it''s rendering exactly the same thing that we had before.

[1:44] If we come down here to root, we''ll see our div with a class container and the text content Hello World. We''ll also see those two script tags that we added to add React and ReactDOM onto the page then our own JavaScript that we wrote to create this user interface.

[2:00] Let''s take a look at what this element is. If it''s not a DOM node, then what is it? We''ll console.log(element), save that, and then we''ll come over here to our console. We''ll see that we have a $$ type of property. That''s a symbol and that''s something for React to know that this object is a legitimate React element.

[2:19] We know that the type is a div and there are a couple other properties that are used by React internally. Then this props object is what we passed as our second argument here with the children and the class name.

[2:31] There''s something interesting about this children prop that I want to show you here. You can write this same thing as a third argument to React.createElement by simply providing the value for the children prop. Here we can provide Hello World. Those are functionally equivalent.

[2:51] If we look at the React element here, when you look at our props, and we still are getting children is Hello World. Then if you provide another argument, that will be an additional child. We can say comma, Goodbye World. Save that, we''ll get a refresh, and we see Hello World, Goodbye World, and we get our element''s props to be children as an array.

[3:14] We can continue going on through children forever and ever. Or we could take these and use the children prop directly like this, specifying it as an array ourselves. You''ll see that the result here is the same.

[3:30] This also gives us the flexibility of creating additional React elements to be children. Here I could say React.createElement("span"). We could say we want no props for this span, and we want the children to be Hello and World.

[3:47] We have the type of span, the props are null, the children are an array of "Hello" and "World". If we expand this, we''ll see props, children, and children is just another React element that itself has props. And that children is an array of two strings.

[4:05] In review, to create React elements and render them to the page, you need to include React and ReactDOM, React for creating the elements and ReactDOM for rendering those elements to the page.

[4:16] Then we still need to get access to some element that''s on the page so we can render our elements to that DOM node. Then we create our React elements and we use ReactDOM.render to render our element to the root DOM node.', NULL, false, '03-egghead-react-create-a-user-interface-with-react-s-createelement-api.mp4', 11, true, false, 160, '---
mp4: 32002509
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU/react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU.mp4', 'react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU', 'zcja', 'https://egghead-pipeline.s3.amazonaws.com/react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU/react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU.mp3?c2ed5eff7a0a0928?3ffa', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:49.606Z', NULL, 8388599, NULL, 7799, 0, NULL, -8357328, 'bd1d9e4439894180a314caca3b869539', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/02-react-create-element?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 387132388, '1
00:00:00,150 --> 00:00:02,020
To use React to create this user 

2
00:00:02,020 --> 00:00:03,330
interface, we''re going to need 

3
00:00:03,330 --> 00:00:05,130
to have React on the page. We 

4
00:00:05,130 --> 00:00:07,140
can get React from npm, but 

5
00:00:07,140 --> 00:00:08,230
there''s a service called 

6
00:00:08,270 --> 00:00:09,280
unpackage that we''re going to 

7
00:00:09,280 --> 00:00:12,080
use. If I go to unpackage.com 

8
00:00:12,680 --> 00:00:14,060
that will show me how to use 

9
00:00:14,150 --> 00:00:16,340
unpackage to get any file that 

10
00:00:16,340 --> 00:00:19,130
is distributed on npm. It has 

11
00:00:19,130 --> 00:00:21,780
these files for React. If I go 

12
00:00:21,780 --> 00:00:23,550
to that file, then I''ll see a 

13
00:00:23,550 --> 00:00:25,470
minified version of React. 

14
00:00:25,960 --> 00:00:27,420
Let''s go ahead and add some 

15
00:00:27,420 --> 00:00:29,820
script tags to our page here so 

16
00:00:29,820 --> 00:00:31,320
that we get React on the page. 

17
00:00:31,930 --> 00:00:34,420
With React and ReactDOM both on 

18
00:00:34,420 --> 00:00:36,340
the page, I can now create React 

19
00:00:36,410 --> 00:00:38,480
elements and then use ReactDOM 

20
00:00:38,550 --> 00:00:40,050
to render those elements to the 

21
00:00:40,050 --> 00:00:42,240
page. I''m going to comment all 

22
00:00:42,240 --> 00:00:43,800
of this out and then with 

23
00:00:43,800 --> 00:00:47,000
ReactDOM I''m going to render my 

24
00:00:47,090 --> 00:00:50,370
element to the root element, but 

25
00:00:50,370 --> 00:00:51,870
the element that I provide is 

26
00:00:51,870 --> 00:00:53,590
not going to be a DOM element 

27
00:00:53,590 --> 00:00:54,770
that I create with the document. 

28
00:00:55,270 --> 00:00:57,340
Instead, it''s going to be a 

29
00:00:57,340 --> 00:00:59,770
React.createElement that I 

30
00:00:59,770 --> 00:01:02,260
create with React. The API is 

31
00:01:02,260 --> 00:01:03,810
not exactly the same as the one 

32
00:01:03,810 --> 00:01:05,800
that we get with document. We do 

33
00:01:05,800 --> 00:01:07,310
get to specify the type of 

34
00:01:07,310 --> 00:01:08,750
element as the first argument, 

35
00:01:08,940 --> 00:01:10,230
but instead of getting the 

36
00:01:10,230 --> 00:01:12,270
element and attaching properties 

37
00:01:12,270 --> 00:01:13,930
to it, we specify those 

38
00:01:13,930 --> 00:01:15,720
properties on creation as an 

39
00:01:15,720 --> 00:01:18,000
object. Another difference is 

40
00:01:18,000 --> 00:01:19,580
instead of text content, we 

41
00:01:19,580 --> 00:01:21,950
specify children. Here we''ll 

42
00:01:21,950 --> 00:01:23,860
specify our children as Hello 

43
00:01:23,860 --> 00:01:26,370
World and then the class name 

44
00:01:26,860 --> 00:01:29,230
will be a container. This is 

45
00:01:29,230 --> 00:01:31,330
going to give me my element, 

46
00:01:31,940 --> 00:01:33,490
which I will render with 

47
00:01:33,490 --> 00:01:36,840
ReactDOM to the root element. If 

48
00:01:36,840 --> 00:01:38,600
we save this, we''ll get a page 

49
00:01:38,600 --> 00:01:40,430
refresh. You may not have even 

50
00:01:40,430 --> 00:01:41,490
noticed that because it''s 

51
00:01:41,490 --> 00:01:42,970
rendering exactly the same thing 

52
00:01:42,970 --> 00:01:44,930
that we had before. If we come 

53
00:01:44,930 --> 00:01:47,590
down here to root, we''ll see our 

54
00:01:47,590 --> 00:01:49,990
div with a class container and 

55
00:01:49,990 --> 00:01:51,350
the text content Hello World. 

56
00:01:51,750 --> 00:01:53,210
We''ll also see those two script 

57
00:01:53,210 --> 00:01:54,960
tags that we added to add React 

58
00:01:55,010 --> 00:01:57,040
and ReactDOM onto the page then 

59
00:01:57,120 --> 00:01:58,980
our own JavaScript that we wrote 

60
00:01:59,190 --> 00:02:00,590
to create this user interface. 

61
00:02:00,840 --> 00:02:01,990
Let''s take a look at what this 

62
00:02:01,990 --> 00:02:03,540
element is. If it''s not a DOM 

63
00:02:03,540 --> 00:02:04,900
node, then what is it? We''ll 

64
00:02:04,900 --> 00:02:08,200
console.log(element), save that, 

65
00:02:08,200 --> 00:02:09,570
and then we''ll come over here to 

66
00:02:09,570 --> 00:02:11,410
our console. We''ll see that we 

67
00:02:11,410 --> 00:02:13,660
have a $$ type of property. 

68
00:02:13,660 --> 00:02:14,990
That''s a symbol and that''s 

69
00:02:14,990 --> 00:02:16,200
something for React to know that 

70
00:02:16,200 --> 00:02:17,640
this object is a legitimate 

71
00:02:17,830 --> 00:02:19,830
React element. We know that the 

72
00:02:19,830 --> 00:02:21,360
type is a div and there are a 

73
00:02:21,360 --> 00:02:22,660
couple other properties that are 

74
00:02:22,660 --> 00:02:25,190
used by React internally. Then 

75
00:02:25,190 --> 00:02:27,480
this props object is what we 

76
00:02:27,480 --> 00:02:29,170
passed as our second argument 

77
00:02:29,170 --> 00:02:30,530
here with the children and the 

78
00:02:30,530 --> 00:02:32,080
class name. There''s something 

79
00:02:32,240 --> 00:02:33,970
interesting about this children 

80
00:02:33,970 --> 00:02:35,090
prop that I want to show you 

81
00:02:35,090 --> 00:02:37,450
here. You can write this same 

82
00:02:37,450 --> 00:02:40,160
thing as a third argument to 

83
00:02:40,160 --> 00:02:41,900
React.createElement by simply 

84
00:02:41,900 --> 00:02:43,430
providing the value for the 

85
00:02:43,430 --> 00:02:44,960
children prop. Here we can 

86
00:02:44,960 --> 00:02:48,700
provide Hello World. Those are 

87
00:02:48,700 --> 00:02:51,500
functionally equivalent. If we 

88
00:02:51,500 --> 00:02:52,870
look at the React element here, 

89
00:02:52,870 --> 00:02:54,190
when you look at our props, and 

90
00:02:54,190 --> 00:02:55,910
we still are getting children is 

91
00:02:55,910 --> 00:02:57,750
Hello World. Then if you provide 

92
00:02:57,830 --> 00:02:59,400
another argument, that will be 

93
00:02:59,400 --> 00:03:01,390
an additional child. We can say 

94
00:03:01,740 --> 00:03:05,370
comma, Goodbye World. Save that, 

95
00:03:05,790 --> 00:03:06,980
we''ll get a refresh, and we see 

96
00:03:06,980 --> 00:03:09,240
Hello World, Goodbye World, and 

97
00:03:09,240 --> 00:03:11,610
we get our element''s props to be 

98
00:03:11,610 --> 00:03:14,620
children as an array. We can 

99
00:03:14,620 --> 00:03:16,500
continue going on through 

100
00:03:16,500 --> 00:03:19,240
children forever and ever. Or we 

101
00:03:19,240 --> 00:03:21,950
could take these and use the 

102
00:03:21,950 --> 00:03:24,120
children prop directly like this, 

103
00:03:24,870 --> 00:03:26,530
specifying it as an array 

104
00:03:26,570 --> 00:03:28,300
ourselves. You''ll see that the 

105
00:03:28,300 --> 00:03:30,610
result here is the same. This 

106
00:03:30,610 --> 00:03:32,430
also gives us the flexibility of 

107
00:03:32,430 --> 00:03:33,770
creating additional React 

108
00:03:33,770 --> 00:03:35,910
elements to be children. Here I 

109
00:03:35,910 --> 00:03:38,500
could say React.createElement("

110
00:03:38,890 --> 00:03:41,270
span"). We could say we want no 

111
00:03:41,270 --> 00:03:43,190
props for this span, and we want 

112
00:03:43,190 --> 00:03:45,850
the children to be Hello and 

113
00:03:46,100 --> 00:03:48,220
World. We have the type of span, 

114
00:03:48,710 --> 00:03:50,510
the props are null, the children 

115
00:03:50,780 --> 00:03:52,820
are an array of "Hello" and "

116
00:03:52,820 --> 00:03:55,030
World". If we expand this, we''ll 

117
00:03:55,090 --> 00:03:57,500
see props, children, and 

118
00:03:57,500 --> 00:03:59,360
children is just another React 

119
00:03:59,360 --> 00:04:01,590
element that itself has props. 

120
00:04:02,190 --> 00:04:04,050
And that children is an array of 

121
00:04:04,050 --> 00:04:05,830
two strings. In review, to 

122
00:04:05,830 --> 00:04:07,480
create React elements and render 

123
00:04:07,480 --> 00:04:09,030
them to the page, you need to 

124
00:04:09,030 --> 00:04:11,130
include React and ReactDOM, 

125
00:04:11,560 --> 00:04:13,000
React for creating the elements 

126
00:04:13,250 --> 00:04:14,650
and ReactDOM for rendering those 

127
00:04:14,650 --> 00:04:16,360
elements to the page. Then we 

128
00:04:16,360 --> 00:04:18,450
still need to get access to some 

129
00:04:18,450 --> 00:04:19,790
element that''s on the page so we 

130
00:04:19,790 --> 00:04:21,260
can render our elements to that 

131
00:04:21,260 --> 00:04:23,380
DOM node. Then we create our 

132
00:04:23,380 --> 00:04:25,150
React elements and we use 

133
00:04:25,150 --> 00:04:27,340
ReactDOM.render to render our 

134
00:04:27,340 --> 00:04:29,170
element to the root DOM node.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- React uses the same APIs to control and update the DOM that we did in the previous lesson.
- Instead of creating DOM elements, we‚Äôll create React elements and then hand those off to `react-dom` to handle turning those into DOM elements and putting them into the page.
- If you‚Äôve ever learned or used React before, you‚Äôre probably more familiar with JSX than React‚Äôs `createElement` API, but it‚Äôs important to understand the `createElement` API first so you understand the magic.

- Get `react` and `react-dom` from unpkg.com, using a fixed version:

```
unpkg.com/react@16.12.0/umd/react.production.min.js
unpkg.com/react-dom@16.12.0/umd/react-dom.production.min.js
```

- And add a `script` tag to the page:

```html
<script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
```

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script type="text/javascript">
    const rootElement = document.getElementById(''root'');
    // specify properties on creation, as an object
    const element = React.createElement(''div'', {
      className: ''container'',
      children: ''Hello World''
    });
    // use `react-dom` to render those elements to the page
    console.log(element);
    // props argument is what we passed as a second argument
    // we can also specify it as an array
    // Example: children: [''Hello World'', ", Goodbye World"]
    ReactDOM.render(element, rootElement);
  </script>
</body>
```

- Now with `react` you can create `React.createElement` and use `react-dom` to render those elements to the page.
- `React.createElement` API is as simple as the element that you want to create `<div>`, and then an object that has all of the props that you want to have applied, `className`, `children`.
- Just as a convenience, you can provide the `children` with any number of arguments after the props argument as well.

## Additional resource

- [React Top-Level API](https://reactjs.org/docs/react-api.html)
- [React Without JSX](https://reactjs.org/docs/react-without-jsx.html)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'c0afe2f8', 'https://d2c5owlt6rorc3.cloudfront.net/react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU/dash/react-v2-02-create-a-user-interface-with-react-s-createelement-api-SkDnv_UBU.mpd', 'https://stream.mux.com/Eh7xe9dS02Jfwt8NVoav6ae7tsYkSOhnDrJCbCJSHOP8.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/02-react-create-a-user-interface-with-react-s-createelement-api.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6247, 'Create a User Interface with React‚Äôs JSX syntax', NULL, 'It‚Äôs awesome that we can interact directly with React‚Äôs `createElement` API to create React elements and then hand those off to React DOM to get them to show up on the screen. But it‚Äôs not the most ergonomic API to write our UI code in. It‚Äôs hard to track when one element starts and the next one ends.

This is why the React team came up with JSX. It‚Äôs an extension to the JavaScript language to support syntax that looks similar to the HTML that you would write to create these DOM elements (there are [a handful of differences](https://reactjs.org/docs/dom-elements.html)). JSX gives us an expressive syntax for representing our UI, without losing the benefits and powers of writing our UI in JavaScript. The best way to take advantage of this is to learn how JSX is compiled to regular JavaScript calls, so we‚Äôll look into that a bit as well.', 199, NULL, '2020-03-11T02:30:14.296Z', '2025-12-13T00:54:53.678Z', 'react-create-a-user-interface-with-react-s-jsx-syntax', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU/react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU.jpg', true, NULL, 'Kent C. Dodds: [0:00] Using React to create elements in this way works out just fine, but it''s not entirely ergonomic. It''s not the way that most of the community creates React elements. Most of the community is using JSX, which is an HTML-like syntax in our JavaScript.

[0:16] If I were to create this same React element using JSX, I would make it like this. We''ll say element is a div. Our children are Hello World. Then we had a className, which is a prop. That''ll go as an attribute on our div here, with className={''container'').

[0:34] If we save that, we''ll get a refresh. We''ll get a white screen here. That''s because we have a syntax error in our JavaScript. That''s because this is not JavaScript code. This is JSX. The browser does not understand this natively. It needs to be compiled from this to something that the browser can understand. That''s where Babel comes in.

[0:54] Babel is a JavaScript compiler supporting the next generation of JavaScript as well as non-standard features like JSX. If we go to this Try It Out page and then go over here and copy our code and paste it in here, then we''ll see that our code is being compiled to something that''s very familiar to us.

[1:13] React.createElement. The type is div. Here are the props, className is container, then all of the children come hereafter. I would recommend that you spend some time playing around in this tool. Understanding how JSX is compiled will make you more effective at using JSX.

[1:29] In a typical application, you''re going to be using a tool that will use Babel to compile JSX to JavaScript for you. For our purposes, we''re going to use Babel in the browser to get this compiling our JavaScript right here without having to install any other tools.

[1:44] I''m going to add a script tag here to include Babel standalone. That will compile any script tag that has the type of text/babel. Then it will create a new script tag with the compiled code with the type as text/JavaScript so that the browser can evaluate it.

[2:00] With that, if I save this, we''ll get Babel downloaded. It will compile our JavaScript and allow the browser to evaluate it so we can use JSX in the browser. We''ll also get this warning that we''re using the in-browser Babel transformer, which is not something that you''d want to do in production, but it makes it easy for us to iterate quickly right here in this index.html file.

[2:20] If we take a look at the elements, we''re going to see the code that we wrote in this text/babel script. Then if we go to the head, we''ll see a new script tag in here which is the compiled version of our code.

[2:31] In review, what we wanted to do here was make it so that we can author our UI without using the React createElement API and instead use JSX, which is an HTML-like syntax for authoring UI.

[2:44] To do this, we need a compiler like Babel. We installed Babel standalone, which will compile our code on the fly in the browser. We also had to update our type to text/babel. Babel will look for all scripts that have that type, compile the code that''s inside them, and insert a new script that has the compiled code so the browser can evaluate it.

[3:05] In a typical application, you will not be using Babel standalone. Instead, you''ll be using another tool which probably is using Babel to compile your code. That way, you get a much more friendly syntax for authoring your UI with React.', NULL, false, '04-egghead-react-create-a-user-interface-with-react-s-jsx-syntax.mp4', 11, true, false, 160, '---
mp4: 20730088
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU/react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU.mp4', 'react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU', 'zckV', 'https://egghead-pipeline.s3.amazonaws.com/react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU/react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU.mp3?97f8056f6aa6cc6b?5d31', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:49.537Z', NULL, 8388599, NULL, 7828, 0, NULL, -8325304, 'cf1b5b06abf64765994def8d0735d433', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/03-jsx?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 387802744, '1
00:00:00,240 --> 00:00:02,130
Using React to create elements 

2
00:00:02,180 --> 00:00:04,470
in this way works out just fine, 

3
00:00:04,820 --> 00:00:06,320
but it''s not entirely ergonomic. 

4
00:00:06,470 --> 00:00:07,620
It''s not the way that most of 

5
00:00:07,620 --> 00:00:09,140
the community creates React 

6
00:00:09,190 --> 00:00:10,820
elements. Most of the community 

7
00:00:10,860 --> 00:00:13,760
is using JSX, which is an HTML-

8
00:00:13,760 --> 00:00:15,900
like syntax in our JavaScript. 

9
00:00:16,670 --> 00:00:18,170
If I were to create this same 

10
00:00:18,170 --> 00:00:20,390
React element using JSX, I would 

11
00:00:20,390 --> 00:00:21,610
make it like this. We''ll say 

12
00:00:21,610 --> 00:00:24,360
element is a div. Our children 

13
00:00:24,360 --> 00:00:27,350
are Hello World. Then we had a 

14
00:00:27,350 --> 00:00:28,530
className, which is a prop. 

15
00:00:28,840 --> 00:00:30,390
That''ll go as an attribute on 

16
00:00:30,390 --> 00:00:32,750
our div here, with className={''

17
00:00:33,490 --> 00:00:35,330
container''). If we save that, 

18
00:00:35,380 --> 00:00:37,140
we''ll get a refresh. We''ll get a 

19
00:00:37,140 --> 00:00:38,140
white screen here. That''s 

20
00:00:38,170 --> 00:00:40,260
because we have a syntax error 

21
00:00:40,620 --> 00:00:42,470
in our JavaScript. That''s 

22
00:00:42,470 --> 00:00:44,000
because this is not JavaScript 

23
00:00:44,000 --> 00:00:46,150
code. This is JSX. The browser 

24
00:00:46,150 --> 00:00:47,480
does not understand this 

25
00:00:47,480 --> 00:00:48,970
natively. It needs to be 

26
00:00:48,970 --> 00:00:51,380
compiled from this to something 

27
00:00:51,380 --> 00:00:52,530
that the browser can understand. 

28
00:00:53,170 --> 00:00:54,500
That''s where Babel comes in. 

29
00:00:54,880 --> 00:00:56,390
Babel is a JavaScript compiler 

30
00:00:56,570 --> 00:00:57,810
supporting the next generation 

31
00:00:57,810 --> 00:00:59,790
of JavaScript as well as non-

32
00:00:59,790 --> 00:01:01,360
standard features like JSX. If 

33
00:01:02,170 --> 00:01:03,720
we go to this Try It Out page 

34
00:01:03,980 --> 00:01:05,760
and then go over here and copy 

35
00:01:05,760 --> 00:01:08,390
our code and paste it in here, 

36
00:01:08,960 --> 00:01:10,520
then we''ll see that our code is 

37
00:01:10,520 --> 00:01:11,970
being compiled to something 

38
00:01:11,970 --> 00:01:13,110
that''s very familiar to us. 

39
00:01:13,110 --> 00:01:14,750
React.createElement. The type is 

40
00:01:14,750 --> 00:01:16,530
div. Here are the props, 

41
00:01:16,640 --> 00:01:18,590
className is container, then all 

42
00:01:18,590 --> 00:01:20,060
of the children come hereafter. 

43
00:01:20,470 --> 00:01:21,710
I would recommend that you spend 

44
00:01:21,710 --> 00:01:23,200
some time playing around in this 

45
00:01:23,200 --> 00:01:25,450
tool. Understanding how JSX is 

46
00:01:25,510 --> 00:01:27,280
compiled will make you more 

47
00:01:27,280 --> 00:01:29,780
effective at using JSX. In a 

48
00:01:29,780 --> 00:01:31,040
typical application, you''re 

49
00:01:31,040 --> 00:01:32,380
going to be using a tool that 

50
00:01:32,380 --> 00:01:34,760
will use Babel to compile JSX to 

51
00:01:34,760 --> 00:01:36,650
JavaScript for you. For our 

52
00:01:36,650 --> 00:01:38,220
purposes, we''re going to use 

53
00:01:38,220 --> 00:01:40,200
Babel in the browser to get this 

54
00:01:40,200 --> 00:01:41,930
compiling our JavaScript right 

55
00:01:41,930 --> 00:01:43,310
here without having to install 

56
00:01:43,310 --> 00:01:45,050
any other tools. I''m going to 

57
00:01:45,050 --> 00:01:47,530
add a script tag here to include 

58
00:01:47,640 --> 00:01:49,400
Babel standalone. That will 

59
00:01:49,400 --> 00:01:51,220
compile any script tag that has 

60
00:01:51,220 --> 00:01:53,980
the type of text/babel. Then it 

61
00:01:53,980 --> 00:01:55,370
will create a new script tag 

62
00:01:55,370 --> 00:01:57,030
with the compiled code with the 

63
00:01:57,060 --> 00:01:58,900
type as text/JavaScript so that 

64
00:01:58,900 --> 00:02:00,430
the browser can evaluate it. 

65
00:02:00,430 --> 00:02:02,310
With that, if I save this, we''ll 

66
00:02:02,310 --> 00:02:03,710
get Babel downloaded. It will 

67
00:02:03,710 --> 00:02:05,690
compile our JavaScript and allow 

68
00:02:05,690 --> 00:02:07,230
the browser to evaluate it so we 

69
00:02:07,230 --> 00:02:08,740
can use JSX in the browser. 

70
00:02:09,160 --> 00:02:10,420
We''ll also get this warning that 

71
00:02:10,420 --> 00:02:12,010
we''re using the in-browser Babel 

72
00:02:12,010 --> 00:02:13,410
transformer, which is not 

73
00:02:13,410 --> 00:02:14,560
something that you''d want to do 

74
00:02:14,600 --> 00:02:16,120
in production, but it makes it 

75
00:02:16,200 --> 00:02:17,780
easy for us to iterate quickly 

76
00:02:17,880 --> 00:02:19,490
right here in this index.html 

77
00:02:19,490 --> 00:02:21,230
file. If we take a look at the 

78
00:02:21,230 --> 00:02:22,610
elements, we''re going to see the 

79
00:02:22,610 --> 00:02:24,210
code that we wrote in this text/

80
00:02:24,210 --> 00:02:26,200
babel script. Then if we go to 

81
00:02:26,200 --> 00:02:27,990
the head, we''ll see a new script 

82
00:02:27,990 --> 00:02:29,400
tag in here which is the 

83
00:02:29,400 --> 00:02:31,120
compiled version of our code. 

84
00:02:31,440 --> 00:02:32,630
In review, what we wanted to do 

85
00:02:32,630 --> 00:02:34,380
here was make it so that we can 

86
00:02:34,650 --> 00:02:36,800
author our UI without using the 

87
00:02:36,800 --> 00:02:39,010
React createElement API and 

88
00:02:39,010 --> 00:02:41,200
instead use JSX, which is an 

89
00:02:41,360 --> 00:02:43,780
HTML-like syntax for authoring 

90
00:02:43,780 --> 00:02:45,500
UI. To do this, we need a 

91
00:02:45,500 --> 00:02:47,720
compiler like Babel. We 

92
00:02:47,720 --> 00:02:49,200
installed Babel standalone, 

93
00:02:49,520 --> 00:02:51,600
which will compile our code on 

94
00:02:51,600 --> 00:02:53,480
the fly in the browser. We also 

95
00:02:53,480 --> 00:02:55,210
had to update our type to text/

96
00:02:55,210 --> 00:02:57,290
babel. Babel will look for all 

97
00:02:57,290 --> 00:02:58,540
scripts that have that type, 

98
00:02:58,850 --> 00:03:00,250
compile the code that''s inside 

99
00:03:00,250 --> 00:03:02,200
them, and insert a new script 

100
00:03:02,450 --> 00:03:03,960
that has the compiled code so 

101
00:03:03,960 --> 00:03:05,580
the browser can evaluate it. In 

102
00:03:05,580 --> 00:03:07,070
a typical application, you will 

103
00:03:07,070 --> 00:03:08,670
not be using Babel standalone. 

104
00:03:09,000 --> 00:03:11,040
Instead, you''ll be using another 

105
00:03:11,040 --> 00:03:12,400
tool which probably is using 

106
00:03:12,400 --> 00:03:14,880
Babel to compile your code. That 

107
00:03:14,880 --> 00:03:15,880
way, you get a much more 

108
00:03:15,880 --> 00:03:17,250
friendly syntax for authoring 

109
00:03:17,250 --> 00:03:18,650
your UI with React.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- React team came up with [JSX](https://reactjs.org/docs/introducing-jsx.html). It‚Äôs an extension to the JavaScript language to support syntax that looks similar to the HTML that you would write to create these DOM elements (there are a handful of differences).
- JSX gives us an expressive syntax for representing our UI, without losing the benefits and powers of writing our UI in JavaScript.
- The best way to take advantage of this is to learn how JSX is compiled to regular JavaScript. By default the browser does not compile JSX, it needs [Babel](https://babeljs.io) to compile non-standard features, like JSX.
  - **Tip**: Spend some time exploring how Babel compiles JSX, this will help you be more effective when using JSX. [See Example:](https://babeljs.io/repl#?browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=ATDGHsDsGcBdgKYBsEFsGXgXmAHgCYCWAbmEgIbTQBy56WARBJuYZAgE4MB8AEsknDAA6uA5J8uAPRFi3IA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=false&presets=es2015%2Creact%2Cstage-2&prettier=true&targets=&version=7.8.7&externalPlugins=)

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296083/transcript-images/react-create-a-user-interface-with-react-s-jsx-syntax-babel.jpg)

- Use Babel in the browser, by adding a `script` tag to `babel/standalone` and adding a new tag with `type=''text/babel''`;

```html
<script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
```

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    const rootElement = document.getElementById(''root'');
    const element = <div className="container">Hello World</div>;
    ReactDOM.render(element, rootElement);
  </script>
</body>
```

This will add a new script with our new code compiled by Babel. In a production environment, it''s not recommended that you use babel/standalone.

## Additional resource

- [Introducing JSX](https://reactjs.org/docs/introducing-jsx.html)
- [What is Babel?](https://babeljs.io/docs/en/)
- [Configure babel for React with preset-react](https://egghead.io/lessons/react-configure-babel-for-react-with-preset-react)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '96fe0ce2', 'https://d2c5owlt6rorc3.cloudfront.net/react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU/dash/react-v2-03-create-a-user-interface-with-react-s-jsx-syntax-Ska9OhIHU.mpd', 'https://stream.mux.com/i01027jzjsrbmhtGlgRu5G1g9nd01yR3TUz7mmB9LwIrWQ.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/03-react-create-a-user-interface-with-react-s-jsx-syntax.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6248, 'Use JSX effectively with React', NULL, 'JSX is not an entirely different language, but it is a bit of an extension to the language, so knowing how you would express certain JavaScript things within the JSX syntax is important to using JSX effectively. In this lesson we‚Äôll explore a few different things you can do with JSX, like interpolation, composition, and spreading props. And we‚Äôll compare these syntaxes with what is generated by babel so we have a good understanding of how this translates to regular JavaScript calls into `React.createElement`.', 347, NULL, '2020-03-11T02:30:45.152Z', '2025-12-13T00:54:53.678Z', 'react-use-jsx-effectively-with-react', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL/react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL.jpg', true, NULL, 'Kent C. Dodds: [0:00] If we wanted to create a variable for Hello World and we wanted to interpolate that variable''s value into the children position, then I''m going to go ahead and copy this. We''ll make this our children.

[0:12] Then we''ll come in here and to interpolate we''re going to use curly braces and put children in here. Anything you put between these two curly braces can be a JavaScript expression. Whatever that expression evaluates to is the value that gets placed into this position for the React.createElement call.

[0:30] We can do the same thing for our className. If I copy the container and make a className variable, and instead of the quotes here, we''ll put curly braces to suggest to the Babel compiler that we want this value to be evaluated as an expression, then we''ll pass the className variable. If we save this, then we''ll get the exact same result as we had before.

[0:53] You can see the compiled version of the code here in our script tag where you see we have our children as a variable, our className as a variable. Our element is an assignment to React.createElement with our div. Then our object where we have className being assigned to the variable className.

[1:09] We can rename this to whatever we want. We could say myClassName and then copy this and paste it in there. If we save this, we''ll get a refresh. There it is, myClassName is being assigned to the className property of our object here.

[1:24] Then children is the same thing. We could say myChildren. Save that. We''ll get a refresh and there it is, myChildren being passed as my children. When you use the curly braces, that''s basically telling Babel, "Leave this alone and pass it directly as the property that you pass for the props here and for the children arguments here."

[1:47] If we wanted to split these up, then we could do so with worldChild and do worldChild. Put them side by side just like that and we''ll get myChildren and worldChild. Except to get it to render you need to spell things correctly. That''s important in programming. There we go.

[2:08] This allows us to be expressive with the way that we''re building our UI. If we want to add another React element in here, all we need to do is add a <span>. We can say Hello</span>. Then we could do a <strong>World</strong>. Then get rid of these, save that, and here we go. We get Hello World. Babel is managing, compiling that down to JavaScript that the browser can execute using React APIs.

[2:37] There''s another useful JSX trick that I want to show you. Let''s come back to our children: ''Hello World''. We''ll just call this className. We''ll get rid of this. We''ll change this to className. Then we''ll interpolate children here.

[2:56] One important thing to remember is that children is just a special prop that we could provide right here. Children is children. With that it works exactly the same way as it did before, except now instead of being compiled to add additional arguments, it''s just using the shortcut here as one of the props.

[3:16] In addition, because this is JSX and not HTML, we can have self-closing tags for divs. We can save that, and this is self-closing.

[3:24] Another thing we can do is if I make an object here where we have our props, we''re going to make children and className part of those props. Then I can come right here, remove all of those, and I can say, "Hey, Babel, I want you to take all of these props and pass them to the React.createElement call that you create for this div." Interpolate onto this div''s prop''s position a spread of that prop''s object.

[3:50] If we save that, we can take a look at the compiled version of this. We get our props object. We have React.createElement. Then it just passes the props directly. Then I can add additional props if I want to. I could say id="app-root", save that. Then in this case we''re going to get the extends helper, which is basically object.assign.

[4:10] Then Babel is going to extend the props that we provided with the props that we''re spreading. We get a single combined object for the second argument of the React.createElement call. Because of the way that object.assign works, if we wanted to override one of the properties in this props object, then we could do so simply by providing it after we spread those props in the props position for this element.

[4:35] We can say className="notContainer". Save that. Then if we look at the compiled version, we''ll see our extends for the props that come before the spread. Then we''ll see that object and then we''ll see another object for the props that come after the spread.

[4:51] Then if we look at the results under our root, we''ll see we have the id of app root and the class of notContainer. App root because it''s not getting overwritten, so it appears as is.

[5:04] We get the children as they are because the children are not being overwritten, but then we get the className of notContainer because we are overwriting the className that''s in the props which comes before a className. Whatever comes last is the winner in the event of a conflict like we have here.

[5:22] In review, what we learned here is that you can interpolate values with these curly braces by putting any expression between the curly braces and have that expression passed along to the React.createElement API.

[5:34] We also learned that you can spread props in the props position of a JSX element and those props will be combined with the other props that are provided to that element in a declarative and deterministic way.', NULL, false, '05-egghead-react-use-jsx-effectively-with-react.mp4', 11, true, false, 160, '---
mp4: 43144536
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL/react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL.mp4', 'react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL', 'zcjw', 'https://egghead-pipeline.s3.amazonaws.com/react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL/react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL.mp3?c2ebc6bb4a34b3f9?08f9', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:49.624Z', NULL, 8388599, NULL, 7803, 0, NULL, -8261630, 'e703f18eb34d485d92430c0c26189a30', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/04-jsx-tricks?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 388473100, '1
00:00:00,440 --> 00:00:01,610
If we wanted to create a 

2
00:00:01,610 --> 00:00:03,660
variable for Hello World and we 

3
00:00:03,660 --> 00:00:05,420
wanted to interpolate that 

4
00:00:05,420 --> 00:00:06,990
variable''s value into the 

5
00:00:06,990 --> 00:00:08,590
children position, then I''m 

6
00:00:08,590 --> 00:00:10,140
going to go ahead and copy this. 

7
00:00:10,140 --> 00:00:11,770
We''ll make this our children. 

8
00:00:12,710 --> 00:00:14,670
Then we''ll come in here and to 

9
00:00:14,670 --> 00:00:16,010
interpolate we''re going to use 

10
00:00:16,010 --> 00:00:18,230
curly braces and put children in 

11
00:00:18,230 --> 00:00:20,250
here. Anything you put between 

12
00:00:20,250 --> 00:00:22,250
these two curly braces can be a 

13
00:00:22,250 --> 00:00:24,190
JavaScript expression. Whatever 

14
00:00:24,190 --> 00:00:26,060
that expression evaluates to is 

15
00:00:26,060 --> 00:00:27,850
the value that gets placed into 

16
00:00:27,850 --> 00:00:29,530
this position for the React.

17
00:00:29,530 --> 00:00:31,240
createElement call. We can do 

18
00:00:31,240 --> 00:00:32,780
the same thing for our className. 

19
00:00:33,570 --> 00:00:35,830
If I copy the container and make 

20
00:00:35,830 --> 00:00:37,980
a className variable, and 

21
00:00:37,980 --> 00:00:39,480
instead of the quotes here, 

22
00:00:39,760 --> 00:00:41,640
we''ll put curly braces to 

23
00:00:41,640 --> 00:00:43,410
suggest to the Babel compiler 

24
00:00:43,410 --> 00:00:45,210
that we want this value to be 

25
00:00:45,210 --> 00:00:47,020
evaluated as an expression, then 

26
00:00:47,020 --> 00:00:48,510
we''ll pass the className 

27
00:00:48,590 --> 00:00:50,860
variable. If we save this, then 

28
00:00:50,860 --> 00:00:52,120
we''ll get the exact same result 

29
00:00:52,210 --> 00:00:54,000
as we had before. You can see 

30
00:00:54,000 --> 00:00:55,360
the compiled version of the code 

31
00:00:55,360 --> 00:00:57,480
here in our script tag where you 

32
00:00:57,480 --> 00:00:59,040
see we have our children as a 

33
00:00:59,040 --> 00:01:00,320
variable, our className as a 

34
00:01:00,320 --> 00:01:02,430
variable. Our element is an 

35
00:01:02,430 --> 00:01:03,440
assignment to React.

36
00:01:03,440 --> 00:01:05,290
createElement with our div. Then 

37
00:01:05,290 --> 00:01:06,470
our object where we have 

38
00:01:06,470 --> 00:01:07,810
className being assigned to the 

39
00:01:07,810 --> 00:01:09,840
variable className. We can 

40
00:01:09,840 --> 00:01:11,350
rename this to whatever we want. 

41
00:01:11,350 --> 00:01:14,110
We could say myClassName and 

42
00:01:14,110 --> 00:01:15,290
then copy this and paste it in 

43
00:01:15,290 --> 00:01:16,820
there. If we save this, we''ll 

44
00:01:16,820 --> 00:01:19,000
get a refresh. There it is, 

45
00:01:19,000 --> 00:01:21,270
myClassName is being assigned to 

46
00:01:21,270 --> 00:01:23,540
the className property of our 

47
00:01:23,540 --> 00:01:25,400
object here. Then children is 

48
00:01:25,400 --> 00:01:26,760
the same thing. We could say 

49
00:01:27,310 --> 00:01:29,950
myChildren. Save that. We''ll get 

50
00:01:29,950 --> 00:01:31,540
a refresh and there it is, 

51
00:01:32,140 --> 00:01:34,350
myChildren being passed as my 

52
00:01:34,350 --> 00:01:36,470
children. When you use the curly 

53
00:01:36,470 --> 00:01:38,100
braces, that''s basically telling 

54
00:01:38,100 --> 00:01:40,270
Babel, "Leave this alone and 

55
00:01:40,270 --> 00:01:42,340
pass it directly as the property 

56
00:01:42,820 --> 00:01:44,270
that you pass for the props here 

57
00:01:45,070 --> 00:01:46,630
and for the children arguments 

58
00:01:46,630 --> 00:01:48,250
here." If we wanted to split 

59
00:01:48,250 --> 00:01:49,830
these up, then we could do so 

60
00:01:49,830 --> 00:01:55,440
with worldChild and do 

61
00:01:55,680 --> 00:01:57,620
worldChild. Put them side by 

62
00:01:57,620 --> 00:01:59,190
side just like that and we''ll 

63
00:01:59,190 --> 00:02:01,870
get myChildren and worldChild. 

64
00:02:02,490 --> 00:02:04,140
Except to get it to render you 

65
00:02:04,350 --> 00:02:05,990
need to spell things correctly. 

66
00:02:06,210 --> 00:02:07,530
That''s important in programming. 

67
00:02:07,700 --> 00:02:09,400
There we go. This allows us to 

68
00:02:09,400 --> 00:02:11,340
be expressive with the way that 

69
00:02:11,340 --> 00:02:13,480
we''re building our UI. If we 

70
00:02:13,480 --> 00:02:15,040
want to add another React 

71
00:02:15,040 --> 00:02:16,310
element in here, all we need to 

72
00:02:16,310 --> 00:02:18,530
do is add a <span>. We can say 

73
00:02:18,530 --> 00:02:21,500
Hello</span>. Then we could do a <

74
00:02:21,500 --> 00:02:25,190
strong>World</strong>. Then get 

75
00:02:25,190 --> 00:02:27,940
rid of these, save that, and 

76
00:02:27,940 --> 00:02:30,130
here we go. We get Hello World. 

77
00:02:30,550 --> 00:02:32,160
Babel is managing, compiling 

78
00:02:32,160 --> 00:02:34,210
that down to JavaScript that the 

79
00:02:34,210 --> 00:02:36,290
browser can execute using React 

80
00:02:36,320 --> 00:02:38,420
APIs. There''s another useful 

81
00:02:38,420 --> 00:02:39,710
JSX trick that I want to show 

82
00:02:39,710 --> 00:02:42,380
you. Let''s come back to our 

83
00:02:42,380 --> 00:02:45,910
children: ''Hello World''. We''ll 

84
00:02:45,910 --> 00:02:48,780
just call this className. We''ll 

85
00:02:48,780 --> 00:02:50,230
get rid of this. We''ll change 

86
00:02:50,230 --> 00:02:53,340
this to className. Then we''ll 

87
00:02:53,340 --> 00:02:56,480
interpolate children here. One 

88
00:02:56,480 --> 00:02:58,310
important thing to remember is 

89
00:02:58,310 --> 00:03:00,070
that children is just a special 

90
00:03:00,070 --> 00:03:02,840
prop that we could provide right 

91
00:03:02,840 --> 00:03:05,970
here. Children is children. With 

92
00:03:05,970 --> 00:03:07,500
that it works exactly the same 

93
00:03:07,500 --> 00:03:09,500
way as it did before, except now 

94
00:03:09,500 --> 00:03:11,690
instead of being compiled to add 

95
00:03:11,770 --> 00:03:13,550
additional arguments, it''s just 

96
00:03:13,550 --> 00:03:15,520
using the shortcut here as one 

97
00:03:15,520 --> 00:03:17,370
of the props. In addition, 

98
00:03:17,550 --> 00:03:19,560
because this is JSX and not HTML, 

99
00:03:19,840 --> 00:03:21,420
we can have self-closing tags 

100
00:03:21,420 --> 00:03:23,330
for divs. We can save that, and 

101
00:03:23,330 --> 00:03:24,780
this is self-closing. Another 

102
00:03:24,780 --> 00:03:26,540
thing we can do is if I make an 

103
00:03:26,540 --> 00:03:28,730
object here where we have our 

104
00:03:28,730 --> 00:03:30,460
props, we''re going to make 

105
00:03:30,500 --> 00:03:33,330
children and className part of 

106
00:03:33,330 --> 00:03:35,050
those props. Then I can come 

107
00:03:35,050 --> 00:03:36,850
right here, remove all of those, 

108
00:03:37,170 --> 00:03:38,530
and I can say, "Hey, Babel, I 

109
00:03:38,530 --> 00:03:39,660
want you to take all of these 

110
00:03:39,660 --> 00:03:42,090
props and pass them to the React.

111
00:03:42,090 --> 00:03:43,260
createElement call that you 

112
00:03:43,260 --> 00:03:44,650
create for this div." 

113
00:03:45,070 --> 00:03:46,340
Interpolate onto this div''s 

114
00:03:46,340 --> 00:03:49,050
prop''s position a spread of that 

115
00:03:49,050 --> 00:03:51,170
prop''s object. If we save that, 

116
00:03:51,610 --> 00:03:52,460
we can take a look at the 

117
00:03:52,460 --> 00:03:54,000
compiled version of this. We get 

118
00:03:54,000 --> 00:03:55,840
our props object. We have React.

119
00:03:55,840 --> 00:03:57,160
createElement. Then it just 

120
00:03:57,160 --> 00:03:59,010
passes the props directly. Then 

121
00:03:59,010 --> 00:04:00,610
I can add additional props if I 

122
00:04:00,610 --> 00:04:03,340
want to. I could say id="app-

123
00:04:03,520 --> 00:04:06,170
root", save that. Then in this 

124
00:04:06,170 --> 00:04:07,430
case we''re going to get the 

125
00:04:07,430 --> 00:04:08,590
extends helper, which is 

126
00:04:08,590 --> 00:04:11,030
basically object.assign. Then 

127
00:04:11,030 --> 00:04:13,310
Babel is going to extend the 

128
00:04:13,310 --> 00:04:15,380
props that we provided with the 

129
00:04:15,380 --> 00:04:17,450
props that we''re spreading. We 

130
00:04:17,450 --> 00:04:19,460
get a single combined object for 

131
00:04:19,460 --> 00:04:21,020
the second argument of the React.

132
00:04:21,020 --> 00:04:22,900
createElement call. Because of 

133
00:04:22,900 --> 00:04:24,870
the way that object.assign works, 

134
00:04:25,060 --> 00:04:26,400
if we wanted to override one of 

135
00:04:26,400 --> 00:04:27,660
the properties in this props 

136
00:04:27,730 --> 00:04:29,260
object, then we could do so 

137
00:04:29,260 --> 00:04:32,140
simply by providing it after we 

138
00:04:32,140 --> 00:04:33,950
spread those props in the props 

139
00:04:33,950 --> 00:04:35,640
position for this element. We 

140
00:04:35,640 --> 00:04:39,120
can say className="notContainer". 

141
00:04:39,610 --> 00:04:41,840
Save that. Then if we look at 

142
00:04:41,840 --> 00:04:43,400
the compiled version, we''ll see 

143
00:04:43,400 --> 00:04:45,230
our extends for the props that 

144
00:04:45,230 --> 00:04:46,860
come before the spread. Then 

145
00:04:46,860 --> 00:04:48,450
we''ll see that object and then 

146
00:04:48,450 --> 00:04:49,610
we''ll see another object for the 

147
00:04:49,610 --> 00:04:51,050
props that come after the spread. 

148
00:04:51,550 --> 00:04:53,340
Then if we look at the results 

149
00:04:53,670 --> 00:04:55,580
under our root, we''ll see we 

150
00:04:55,580 --> 00:04:57,300
have the id of app root and the 

151
00:04:57,300 --> 00:05:00,150
class of notContainer. App root 

152
00:05:00,240 --> 00:05:01,950
because it''s not getting 

153
00:05:01,950 --> 00:05:04,330
overwritten, so it appears as is. 

154
00:05:04,990 --> 00:05:06,400
We get the children as they are 

155
00:05:07,280 --> 00:05:08,690
because the children are not 

156
00:05:08,690 --> 00:05:10,290
being overwritten, but then we 

157
00:05:10,290 --> 00:05:11,590
get the className of 

158
00:05:11,590 --> 00:05:13,640
notContainer because we are 

159
00:05:13,660 --> 00:05:15,360
overwriting the className that''s 

160
00:05:15,360 --> 00:05:17,060
in the props which comes before 

161
00:05:17,060 --> 00:05:19,380
a className. Whatever comes last 

162
00:05:19,470 --> 00:05:21,200
is the winner in the event of a 

163
00:05:21,200 --> 00:05:23,100
conflict like we have here. In 

164
00:05:23,100 --> 00:05:24,570
review, what we learned here is 

165
00:05:24,570 --> 00:05:26,140
that you can interpolate values 

166
00:05:26,140 --> 00:05:27,690
with these curly braces by 

167
00:05:27,690 --> 00:05:29,340
putting any expression between 

168
00:05:29,340 --> 00:05:31,010
the curly braces and have that 

169
00:05:31,010 --> 00:05:32,620
expression passed along to the 

170
00:05:32,620 --> 00:05:34,650
React.createElement API. We 

171
00:05:34,650 --> 00:05:35,890
also learned that you can spread 

172
00:05:35,890 --> 00:05:38,200
props in the props position of a 

173
00:05:38,220 --> 00:05:40,650
JSX element and those props will 

174
00:05:40,650 --> 00:05:42,290
be combined with the other props 

175
00:05:42,290 --> 00:05:43,650
that are provided to that 

176
00:05:43,650 --> 00:05:45,730
element in a declarative and 

177
00:05:45,730 --> 00:05:46,780
deterministic way.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- JSX is not an entirely different language, but it is a bit of an extension to the language, so knowing how you would express certain JavaScript things within the JSX syntax is important to using JSX effectively.

- To interpolation use `{ }`. Any JavaScript expression inside of the curly braces will be evaluated and passed to the `React.createElement` API. This allows you to be expressive when building out UI''s. Example:

```html
<script type="text/babel">
  const rootElement = document.getElementById(''root'');
  // declaring variables
  const children = ''Hello World'';
  const className = ''container'';
  // interpolation
  const element = <div className={className}>{children}</div>;
  ReactDOM.render(element, rootElement);
</script>
```

Since this is JSX and not HTML, you can use self-closing tags:

```html
<script type="text/babel">
  const rootElement = document.getElementById(''root'');
  const children = ''Hello World'';
  const className = ''container'';
  const props = { children, className };
  // self-closing tags
  const element = <div {...props} />;
  ReactDOM.render(element, rootElement);
</script>
```

- The spread operator takes either an array or an object and expands it into its set of items. We can use the spread operator to pass down our props to the `React.createElement` API:

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    const rootElement = document.getElementById(''root'');
    const children = ''Hello World'';
    const className = ''container'';
    const props = { children, className };
    // using spread operator
    const element = <div {...props} />;
    ReactDOM.render(element, rootElement);
  </script>
</body>
```

- You can also add or extended props in a declarative and deterministic way.

## Additional resource

- [Understanding the Spread Operator in JavaScript](https://zendev.com/2018/05/09/understanding-spread-operator-in-javascript.html)
- [MDN Spread syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'd0790719', 'https://d2c5owlt6rorc3.cloudfront.net/react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL/dash/react-v2-04-use-jsx-effectively-with-react-SJrnCuUSL.mpd', 'https://stream.mux.com/UHiOlDUqEDTRlGVMNQT01V02XOQ7FKXGqAFTeRpQJW5So.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/04-react-use-jsx-effectively-with-react.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6249, 'Render two elements side-by-side with React Fragments', NULL, 'In React, you can‚Äôt render two React elements side-by-side (`<span>Hello</span><span>World</span>`). They have to be wrapped in another element (like a `<div>`). This may seem like an odd limitation, but when you think about the fact that JSX is compiled to `React.createElement` calls, it makes sense. In this lesson we‚Äôll take a look at that and how to side-step this limitation with React Fragments.', 186, NULL, '2020-03-11T02:31:51.080Z', '2025-12-13T00:54:53.678Z', 'react-render-two-elements-side-by-side-with-react-fragments', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU/react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU.jpg', true, NULL, 'Kent C. Dodds: [00:00] Let''s say that instead of rendering a div with the class name container and then "Hello, World," we wanted to render two spans side by side, one that says "Hello" and the other that says "World." Let''s first do this with React createElement, and then we''ll see how we could do this with JSX.

[00:15] I''m going to make my element React.createElement span. We don''t need any props. Then we''ll say, "Hello." We''ll need another element. We''ll call this our worldElement. Let''s call this one our helloElement. This one will say, "World."

[00:36] Then we need to render those side by side. I don''t know how we do that. Let''s say helloElement and worldElement. No, it doesn''t look like that''s going to work very well.

[00:51] How do you put two variables side by side and pass them both as the first argument? It''s impossible, but if we were to do this in HTML, it would be pretty straightforward. We''d just say <span>Hello and <span>World. That would work just fine.

[01:05] This is straightforward to do in HTML, but it''s not possible to do with React, which is why the React team created a special type of element called a React fragment. We can say React.createElement. React fragment is a type. We don''t need any props for it.

[01:22] Then we can provide both of our children. Let''s put this down here. We''ll take our helloElement, pass that as the first child, and worldElement, pass that as the second child. Then this is going to get our element that we''re going to render.

[01:37] With that, we have the output that we''re expecting. We could also add an extra child in here to give us an extra space. Again, nobody wants to use the React.createElement API directly. Let''s comment this out and see what this would look like if we wanted to do it with JSX.

[01:53] Our root element is this React fragment. We''ll do an open bracket and say React.Fragment. We''ll close that off with React.Fragment. Then we''ll want to create a span for hello, so <span>Hello</span>. Then we''ll do a space and then <span>World and close that off. If we save this, we''re going to get the exact same output, and we''re using our React.Fragment element.

[02:22] Let''s take a look at the compiled JSX here. You notice that we get our element with React.createElement. It''s just passing React.Fragment as a first argument to React.createElement, whereas this, the tag name, is being passed as a string.

[02:36] The React fragment allows us to put elements side by side without having to have some sort of container element like a div. This can be useful when you''re creating things like tables that have a specific structure to them.

[02:49] Because this is so common to do, JSX has a special syntax for React fragments. That is to simply remove the React fragment and have an open and closing angle bracket. This is functionally equivalent to what we had before. This syntax is typically what I use whenever I need React fragments.', NULL, false, '06-egghead-react-render-two-elements-side-by-side-with-react-fragments.mp4', 11, true, false, 160, '---
mp4: 23283044
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU/react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU.mp4', 'react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU', 'zcju', 'https://egghead-pipeline.s3.amazonaws.com/react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU/react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU.mp3?ba86acd0bff8ac6c?1e5b', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:49.244Z', NULL, 8388599, NULL, 7802, 0, NULL, -8134468, 'a712e632bf1e4606ab708f9950395af7', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/05-fragements?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 389143456, '1
00:00:00,250 --> 00:00:01,430
Let''s say that instead of 

2
00:00:01,430 --> 00:00:02,640
rendering a div with the class 

3
00:00:02,640 --> 00:00:04,060
name container and then "Hello, 

4
00:00:04,060 --> 00:00:06,130
World," we wanted to render two 

5
00:00:06,130 --> 00:00:08,010
spans side by side, one that 

6
00:00:08,010 --> 00:00:09,910
says "Hello" and the other that 

7
00:00:09,910 --> 00:00:11,810
says "World." Let''s first do 

8
00:00:11,810 --> 00:00:13,750
this with React createElement, 

9
00:00:13,800 --> 00:00:14,640
and then we''ll see how we could 

10
00:00:14,640 --> 00:00:16,370
do this with JSX. I''m going to 

11
00:00:16,370 --> 00:00:17,940
make my element React.

12
00:00:18,230 --> 00:00:21,630
createElement span. We don''t 

13
00:00:21,630 --> 00:00:23,580
need any props. Then we''ll say, "

14
00:00:23,580 --> 00:00:25,230
Hello." We''ll need another 

15
00:00:25,230 --> 00:00:27,500
element. We''ll call this our 

16
00:00:27,860 --> 00:00:30,850
worldElement. Let''s call this 

17
00:00:30,850 --> 00:00:34,640
one our helloElement. This one 

18
00:00:34,720 --> 00:00:37,060
will say, "World." Then we need 

19
00:00:37,060 --> 00:00:40,910
to render those side by side. I 

20
00:00:40,910 --> 00:00:42,360
don''t know how we do that. Let''s 

21
00:00:43,530 --> 00:00:46,540
say helloElement and 

22
00:00:46,540 --> 00:00:48,980
worldElement. No, it doesn''t 

23
00:00:48,980 --> 00:00:50,100
look like that''s going to work 

24
00:00:50,100 --> 00:00:52,070
very well. How do you put two 

25
00:00:52,070 --> 00:00:53,680
variables side by side and pass 

26
00:00:53,680 --> 00:00:55,220
them both as the first argument? 

27
00:00:55,770 --> 00:00:57,620
It''s impossible, but if we were 

28
00:00:57,620 --> 00:00:59,290
to do this in HTML, it would be 

29
00:00:59,290 --> 00:01:00,100
pretty straightforward. We''d 

30
00:01:00,100 --> 00:01:02,930
just say <span>Hello and <span>

31
00:01:03,330 --> 00:01:05,190
World. That would work just fine. 

32
00:01:05,580 --> 00:01:07,110
This is straightforward to do in 

33
00:01:07,220 --> 00:01:09,300
HTML, but it''s not possible to 

34
00:01:09,300 --> 00:01:11,210
do with React, which is why the 

35
00:01:11,210 --> 00:01:12,920
React team created a special 

36
00:01:12,920 --> 00:01:14,980
type of element called a React 

37
00:01:15,470 --> 00:01:17,220
fragment. We can say React.

38
00:01:17,450 --> 00:01:19,810
createElement. React fragment is 

39
00:01:19,810 --> 00:01:21,430
a type. We don''t need any props 

40
00:01:21,430 --> 00:01:23,610
for it. Then we can provide 

41
00:01:23,670 --> 00:01:24,880
both of our children. Let''s put 

42
00:01:24,880 --> 00:01:26,880
this down here. We''ll take our 

43
00:01:26,880 --> 00:01:28,740
helloElement, pass that as the 

44
00:01:28,740 --> 00:01:30,690
first child, and worldElement, 

45
00:01:31,170 --> 00:01:32,390
pass that as the second child. 

46
00:01:33,090 --> 00:01:34,730
Then this is going to get our 

47
00:01:34,800 --> 00:01:35,910
element that we''re going to 

48
00:01:35,910 --> 00:01:39,140
render. With that, we have the 

49
00:01:39,140 --> 00:01:40,780
output that we''re expecting. We 

50
00:01:40,780 --> 00:01:42,370
could also add an extra child in 

51
00:01:42,370 --> 00:01:44,050
here to give us an extra space. 

52
00:01:44,370 --> 00:01:46,000
Again, nobody wants to use the 

53
00:01:46,000 --> 00:01:47,930
React.createElement API directly. 

54
00:01:48,310 --> 00:01:49,850
Let''s comment this out and see 

55
00:01:49,850 --> 00:01:51,030
what this would look like if we 

56
00:01:51,030 --> 00:01:53,370
wanted to do it with JSX. Our 

57
00:01:53,370 --> 00:01:55,320
root element is this React 

58
00:01:55,320 --> 00:01:56,780
fragment. We''ll do an open 

59
00:01:56,780 --> 00:01:59,690
bracket and say React.Fragment. 

60
00:02:00,250 --> 00:02:01,830
We''ll close that off with React.

61
00:02:02,330 --> 00:02:05,140
Fragment. Then we''ll want to 

62
00:02:05,140 --> 00:02:07,410
create a span for hello, so <

63
00:02:07,410 --> 00:02:11,400
span>Hello</span>. Then we''ll do 

64
00:02:11,400 --> 00:02:14,630
a space and then <span>World and 

65
00:02:14,630 --> 00:02:16,490
close that off. If we save this, 

66
00:02:17,200 --> 00:02:18,160
we''re going to get the exact 

67
00:02:18,160 --> 00:02:20,820
same output, and we''re using our 

68
00:02:20,820 --> 00:02:22,590
React.Fragment element. Let''s 

69
00:02:22,590 --> 00:02:24,390
take a look at the compiled JSX 

70
00:02:24,780 --> 00:02:26,400
here. You notice that we get our 

71
00:02:26,400 --> 00:02:27,820
element with React.createElement. 

72
00:02:28,020 --> 00:02:29,730
It''s just passing React.Fragment 

73
00:02:30,040 --> 00:02:31,520
as a first argument to React.

74
00:02:31,520 --> 00:02:34,220
createElement, whereas this, the 

75
00:02:34,220 --> 00:02:35,840
tag name, is being passed as a 

76
00:02:35,840 --> 00:02:37,680
string. The React fragment 

77
00:02:37,680 --> 00:02:39,600
allows us to put elements side 

78
00:02:39,600 --> 00:02:41,500
by side without having to have 

79
00:02:41,710 --> 00:02:43,030
some sort of container element 

80
00:02:43,060 --> 00:02:45,120
like a div. This can be useful 

81
00:02:45,120 --> 00:02:46,090
when you''re creating things like 

82
00:02:46,090 --> 00:02:48,020
tables that have a specific 

83
00:02:48,100 --> 00:02:50,040
structure to them. Because this 

84
00:02:50,040 --> 00:02:52,000
is so common to do, JSX has a 

85
00:02:52,280 --> 00:02:53,880
special syntax for React 

86
00:02:53,880 --> 00:02:55,990
fragments. That is to simply 

87
00:02:56,140 --> 00:02:57,850
remove the React fragment and 

88
00:02:57,850 --> 00:02:59,360
have an open and closing angle 

89
00:02:59,360 --> 00:03:01,070
bracket. This is functionally 

90
00:03:01,070 --> 00:03:02,450
equivalent to what we had before. 

91
00:03:03,010 --> 00:03:04,440
This syntax is typically what I 

92
00:03:04,440 --> 00:03:05,690
use whenever I need React 

93
00:03:05,765 --> 00:03:06,090
fragments.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- In React, you can‚Äôt render two React elements side-by-side (`<span>Hello</span><span>World</span>`). They have to be wrapped in another element (like a `<div>`).
- This may seem like an odd limitation, but when you think about the fact that JSX is compiled to `React.createElement` calls, it makes sense.
- [React Fragments](https://reactjs.org/docs/fragments.html) let you group a list of children without adding extra nodes to the DOM.

- Using the **React Fragments API**:

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    const helloElement = React.createElement(''span'', null, ''Hello'');
    const worldElement = React.createElement(''span'', null, ''World'');
    // Using the React Fragments API:
    const element = React.createElement(
        React.Fragment,
        null,
        helloElement
        worldElement
    )
    ReactDOM.render(element, document.getElementById(''root''));
  </script>
</body>
```

- You can also use a **React Fragments Element**:

```js
const element = (
  <React.Fragment>
    <span>Hello</span>
    <span>World</span>
  </React.Fragment>
);
```

- Since React Fragments is so common, JSX has a **special syntax** for it:

```js
const element = (
  // open and closing angle brackets
  <>
    <span>Hello</span>
    <span>World</span>
  </>
);
```

## Additional resource

- [React doc- Fragments](https://reactjs.org/docs/fragments.html)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'e7f83a29', 'https://d2c5owlt6rorc3.cloudfront.net/react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU/dash/react-v2-05-render-two-elements-side-by-side-with-react-fragments-rkv2AOUHU.mpd', 'https://stream.mux.com/LwZxZf01327ikIxtOG4aQFOaYwbkrSpzZTFCikfmMDOQ.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/05-react-render-two-elements-side-by-side-with-react-fragments.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6250, 'Create a Simple Reusable React Component', NULL, 'One of the biggest paradigm shifts that React offered to the UI ecosystem was the component model. It allows you to package up all the logic, styling, and layout of a unit of UI into a box that you can easily move around and reuse without exposing any of the implementation details of the component. You don‚Äôt have to understand how a component works internally to use it effectively. With idiomatic component architecture, rendering a component in one place won‚Äôt impact other parts of your app.

In this lesson we‚Äôll learn how to create a React component and how to use it. You‚Äôll learn why things work the way they do and how to use this to your advantage.', 310, NULL, '2020-03-11T02:35:55.326Z', '2025-12-13T00:54:53.678Z', 'react-create-a-simple-reusable-react-component-4c3999c5', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI/egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI.jpg', true, NULL, 'Kent: [0:00] So, here we have this div with the class name "container," and we have this div with the class name "message" in here that says "Hello, World!"

[0:06] Let''s say that I wanted to have, I don''t know, maybe two of those. So now we have "Hello, World!" and "Hello, World!" and then I don''t want to repeat myself. So I''m going to make a constant message here that is that "Hello, World!" and we''ll put that in place of here "message," just interpolate that there. Now I''m not repeating myself, which is good.

[0:27] But what if I wanted one of these to say, "Hello, World!" and the other to say, "Goodbye, World!" Well, we need to parameterize this somehow, and when we do that in JavaScript, we create a function. I''ll make an arrow function here, and we''ll accept an object. We''ll call it "props," and then whatever that props.msg or props.message value is, is what we''ll interpolate into the children prop for this div that we create.

[0:52] Now, instead of just putting "message" in there directly, we''re going to call it with an object, and we''ll use msg as "Hello, World!" and then we''ll do this one msg "Goodbye, World!" Save that. And we get "Hello, World!" and "Goodbye, World!" which is awesome.

[1:10] But again, this is not really ergonomic. It doesn''t look very good, and one of the benefits to using JSX is the ability for our UI to resemble the declarative nature of HTML.

[1:21] What I''d really like to be able to do is say "message" here and then "Hello, World!" and "message." But if I try to do that, you''ll notice we actually do get the "Hello, World!" but we''re going to get a console warning here saying, "The tag message is unrecognized in this browser. If you meant to render a React component, start its name in an upper case letter."

[1:42] Oh, that''s interesting. Thank you very much. So let''s learn more about that.

[1:46] If we look at the compiled version of our code, we''re going to see our message function that''s returning a React element, that''s creating a div. And then if we come down here, we''re going to see React.createElement message as a string.

[1:57] That''s problematic because we don''t want to have the message as a string to create a DOM element that is a message type element. We actually wanted to use this function, so that we can use this function to create additional React elements.

[2:11] So, as the warning suggests, we need to use an upper case letter, and so if instead, we say capital "Message," then we use capital "Message" here, and let''s make sure we don''t get errors here. So we''ll say capital "Message" for these, and we can save that.

[2:25] Now, we''re no longer getting that warning. If we look at our compiled code, we''re going to see that capital "Message" here, and when we get past to React.createElement, we''re going to get a capital Message right here, outside of a string.

[2:38] So, we''re passing a reference to the function directly into the React.createElement(). And then if we ultimately look at what''s rendered to the DOM, we come down here, we see our ID of root, our container, and then we see a div with the class of message.

[2:52] Now, let''s take a look at what this message element really is. It''s console.log that Message element. We''ll look at our console, and we''ll see that it is a React element, and its type instead of being a div like we had before, let''s take a look at that to compare, console.log div "Hello, World!" Save that and we''ll get two console logs, so the first one being our div. The type is a string of div, whereas the type here is our message function.

[3:19] Here we get the props of "Children, Hello, World!" and we have "Children, Hello, World!" in this one as well.

[3:25] So, when you give a capital letter in JSX, that''s the same as calling React.createElement with the function that you''re referencing. That allows you to create a custom component that you can use to reuse code over and over again.

[3:39] Let''s go ahead and cut this out, and we''ll rewrite this using JSX. We''ll say message, and then use the msg prop, because that''s what we''re expecting. And then we''ll come back here, save that, and everything''s working without any errors.

[3:55] If we look at our compiled version of our code, then we''ll see that we''re calling React.createElement with that message function.

[4:03] If we wanted to make it nice and declarative so that we could nest to these things as if it''s the children prop, then, we just accept children for the name of the prop.

[4:12] Then we can rename this one to "children," and those two are functionally equivalent. If we save this, then we''ll still get "Hello World!" and "Goodbye, World!" But honestly, one of those looks a little bit nicer to me, so I''m going to switch both of these to use that syntax.

[4:26] What''s cool about this is I''m also able to nest these together and pass anything that React can render, which includes the string here, or additional components here, or additional elements here.

[4:40] In review of what we did here was we had some code that was being duplicated, and we wanted to reuse that code in multiple places. So, we created our own custom function component which is a function that accepts a props object and returns more React elements.

[4:54] We had to make sure that our function component started with a capital letter so that Babel would compile this to pass the function itself to React.createElement rather than the string message to React.createElement. That way, when React renders our element, it knows what function to call.', NULL, false, '07-egghead-react-create-a-simple-reusable-react-component-b1ac5ff9.mp4', 11, true, false, 160, '---
mp4: 39886383
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI/egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI.mp4', 'egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI', 'zck6', 'https://egghead-pipeline.s3.amazonaws.com/egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI/egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI.mp3?2e1d67a5d11e87bf?5e05', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.824Z', NULL, 8388599, NULL, 7804, 0, NULL, -7880237, '2e62683c7bcd48bcb9a6bcd0f62f36fc', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/06-custom-component?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 389813812, '1
00:00:00,440 --> 00:00:02,060
So, here we have this div with 

2
00:00:02,060 --> 00:00:03,140
the class name "container," and 

3
00:00:03,140 --> 00:00:04,380
we have this div with the class 

4
00:00:04,380 --> 00:00:05,570
name "message" in here that says "

5
00:00:05,570 --> 00:00:06,800
Hello, World!" Let''s say that I 

6
00:00:06,800 --> 00:00:08,090
wanted to have, I don''t know, 

7
00:00:08,390 --> 00:00:09,910
maybe two of those. So now we 

8
00:00:09,910 --> 00:00:11,240
have "Hello, World!" and "Hello, 

9
00:00:11,240 --> 00:00:13,000
World!" and then I don''t want to 

10
00:00:13,000 --> 00:00:14,180
repeat myself. So I''m going to 

11
00:00:14,180 --> 00:00:18,420
make a constant message here 

12
00:00:18,480 --> 00:00:20,940
that is that "Hello, World!" and 

13
00:00:20,940 --> 00:00:22,750
we''ll put that in place of here "

14
00:00:22,980 --> 00:00:24,840
message," just interpolate that 

15
00:00:24,840 --> 00:00:25,900
there. Now I''m not repeating 

16
00:00:25,900 --> 00:00:28,250
myself, which is good. But what 

17
00:00:28,250 --> 00:00:29,730
if I wanted one of these to say, "

18
00:00:29,730 --> 00:00:31,090
Hello, World!" and the other to 

19
00:00:31,090 --> 00:00:32,830
say, "Goodbye, World!" Well, we 

20
00:00:32,830 --> 00:00:34,330
need to parameterize this 

21
00:00:34,330 --> 00:00:35,690
somehow, and when we do that in 

22
00:00:35,690 --> 00:00:37,530
JavaScript, we create a function. 

23
00:00:37,620 --> 00:00:38,890
I''ll make an arrow function here, 

24
00:00:39,430 --> 00:00:40,860
and we''ll accept an object. 

25
00:00:40,860 --> 00:00:42,480
We''ll call it "props," and then 

26
00:00:42,480 --> 00:00:46,330
whatever that props.msg or props.

27
00:00:46,380 --> 00:00:48,500
message value is, is what we''ll 

28
00:00:48,500 --> 00:00:49,840
interpolate into the children 

29
00:00:49,840 --> 00:00:51,640
prop for this div that we create. 

30
00:00:52,300 --> 00:00:54,150
Now, instead of just putting "

31
00:00:54,150 --> 00:00:55,370
message" in there directly, 

32
00:00:55,590 --> 00:00:56,870
we''re going to call it with an 

33
00:00:56,870 --> 00:00:59,560
object, and we''ll use msg as "

34
00:00:59,690 --> 00:01:01,950
Hello, World!" and then we''ll do 

35
00:01:02,050 --> 00:01:05,440
this one msg "Goodbye, World!" 

36
00:01:05,790 --> 00:01:07,990
Save that. And we get "Hello, 

37
00:01:07,990 --> 00:01:09,050
World!" and "Goodbye, World!" 

38
00:01:09,300 --> 00:01:11,020
which is awesome. But again, 

39
00:01:11,060 --> 00:01:12,740
this is not really ergonomic. It 

40
00:01:12,740 --> 00:01:14,510
doesn''t look very good, and one 

41
00:01:14,510 --> 00:01:15,940
of the benefits to using JSX is 

42
00:01:16,510 --> 00:01:18,710
the ability for our UI to 

43
00:01:18,710 --> 00:01:20,440
resemble the declarative nature 

44
00:01:20,510 --> 00:01:22,530
of HTML. What I''d really like 

45
00:01:22,530 --> 00:01:24,530
to be able to do is say "message" 

46
00:01:24,840 --> 00:01:27,280
here and then "Hello, World!" 

47
00:01:28,180 --> 00:01:29,940
and "message." But if I try to 

48
00:01:29,940 --> 00:01:31,060
do that, you''ll notice we 

49
00:01:31,060 --> 00:01:32,130
actually do get the "Hello, 

50
00:01:32,130 --> 00:01:33,480
World!" but we''re going to get a 

51
00:01:33,480 --> 00:01:34,850
console warning here saying, "

52
00:01:34,850 --> 00:01:36,890
The tag message is unrecognized 

53
00:01:36,890 --> 00:01:38,880
in this browser. If you meant to 

54
00:01:38,880 --> 00:01:40,550
render a React component, start 

55
00:01:40,550 --> 00:01:42,100
its name in an upper case letter." 

56
00:01:42,260 --> 00:01:43,570
Oh, that''s interesting. Thank 

57
00:01:43,570 --> 00:01:44,910
you very much. So let''s learn 

58
00:01:44,910 --> 00:01:46,460
more about that. If we look at 

59
00:01:46,460 --> 00:01:48,150
the compiled version of our code, 

60
00:01:48,150 --> 00:01:49,280
we''re going to see our message 

61
00:01:49,280 --> 00:01:50,740
function that''s returning a 

62
00:01:50,740 --> 00:01:52,240
React element, that''s creating a 

63
00:01:52,240 --> 00:01:53,750
div. And then if we come down 

64
00:01:53,750 --> 00:01:55,090
here, we''re going to see React.

65
00:01:55,090 --> 00:01:56,530
createElement message as a 

66
00:01:56,530 --> 00:01:58,720
string. That''s problematic 

67
00:01:58,770 --> 00:02:00,180
because we don''t want to have 

68
00:02:00,180 --> 00:02:01,270
the message as a string to 

69
00:02:01,270 --> 00:02:03,200
create a DOM element that is a 

70
00:02:03,500 --> 00:02:05,220
message type element. We 

71
00:02:05,220 --> 00:02:06,810
actually wanted to use this 

72
00:02:06,810 --> 00:02:08,540
function, so that we can use 

73
00:02:08,540 --> 00:02:09,380
this function to create 

74
00:02:09,460 --> 00:02:11,690
additional React elements. So, 

75
00:02:11,750 --> 00:02:13,310
as the warning suggests, we need 

76
00:02:13,310 --> 00:02:15,270
to use an upper case letter, and 

77
00:02:15,270 --> 00:02:17,640
so if instead, we say capital "

78
00:02:17,680 --> 00:02:19,200
Message," then we use capital "

79
00:02:19,200 --> 00:02:21,230
Message" here, and let''s make 

80
00:02:21,230 --> 00:02:22,470
sure we don''t get errors here. 

81
00:02:22,470 --> 00:02:23,660
So we''ll say capital "Message" 

82
00:02:23,660 --> 00:02:25,240
for these, and we can save that. 

83
00:02:25,780 --> 00:02:26,800
Now, we''re no longer getting 

84
00:02:26,800 --> 00:02:28,860
that warning. If we look at our 

85
00:02:29,000 --> 00:02:30,140
compiled code, we''re going to 

86
00:02:30,140 --> 00:02:31,450
see that capital "Message" here, 

87
00:02:31,830 --> 00:02:33,290
and when we get past to React.

88
00:02:33,290 --> 00:02:34,650
createElement, we''re going to 

89
00:02:34,650 --> 00:02:36,370
get a capital Message right here, 

90
00:02:36,670 --> 00:02:38,360
outside of a string. So, we''re 

91
00:02:38,360 --> 00:02:39,520
passing a reference to the 

92
00:02:39,520 --> 00:02:41,310
function directly into the React.

93
00:02:41,310 --> 00:02:43,200
createElement(). And then if we 

94
00:02:43,220 --> 00:02:44,490
ultimately look at what''s 

95
00:02:44,490 --> 00:02:46,290
rendered to the DOM, we come 

96
00:02:46,290 --> 00:02:49,180
down here, we see our ID of root, 

97
00:02:49,220 --> 00:02:50,820
our container, and then we see a 

98
00:02:50,820 --> 00:02:52,480
div with the class of message. 

99
00:02:52,840 --> 00:02:53,940
Now, let''s take a look at what 

100
00:02:53,940 --> 00:02:55,420
this message element really is. 

101
00:02:55,480 --> 00:02:57,970
It''s console.log that Message 

102
00:02:57,970 --> 00:02:59,530
element. We''ll look at our 

103
00:02:59,530 --> 00:03:01,330
console, and we''ll see that it 

104
00:03:01,330 --> 00:03:03,530
is a React element, and its type 

105
00:03:03,610 --> 00:03:05,400
instead of being a div like we 

106
00:03:05,400 --> 00:03:06,640
had before, let''s take a look at 

107
00:03:06,640 --> 00:03:09,380
that to compare, console.log div "

108
00:03:09,570 --> 00:03:11,420
Hello, World!" Save that and 

109
00:03:11,420 --> 00:03:12,520
we''ll get two console logs, so 

110
00:03:12,520 --> 00:03:14,000
the first one being our div. The 

111
00:03:14,000 --> 00:03:16,110
type is a string of div, whereas 

112
00:03:16,110 --> 00:03:18,070
the type here is our message 

113
00:03:18,070 --> 00:03:20,270
function. Here we get the props 

114
00:03:20,390 --> 00:03:22,060
of "Children, Hello, World!" and 

115
00:03:22,060 --> 00:03:23,420
we have "Children, Hello, World!" 

116
00:03:23,510 --> 00:03:25,620
in this one as well. So, when 

117
00:03:25,620 --> 00:03:27,130
you give a capital letter in JSX, 

118
00:03:27,260 --> 00:03:29,190
that''s the same as calling React.

119
00:03:29,360 --> 00:03:31,490
createElement with the function 

120
00:03:31,600 --> 00:03:33,250
that you''re referencing. That 

121
00:03:33,250 --> 00:03:34,790
allows you to create a custom 

122
00:03:34,790 --> 00:03:36,700
component that you can use to 

123
00:03:36,700 --> 00:03:38,760
reuse code over and over again. 

124
00:03:39,330 --> 00:03:40,610
Let''s go ahead and cut this out, 

125
00:03:40,670 --> 00:03:42,470
and we''ll rewrite this using JSX. 

126
00:03:43,110 --> 00:03:45,790
We''ll say message, and then use 

127
00:03:45,790 --> 00:03:47,110
the msg prop, because that''s 

128
00:03:47,110 --> 00:03:49,100
what we''re expecting. And then 

129
00:03:49,100 --> 00:03:51,010
we''ll come back here, save that, 

130
00:03:51,720 --> 00:03:53,300
and everything''s working without 

131
00:03:53,300 --> 00:03:56,200
any errors. If we look at our 

132
00:03:56,200 --> 00:03:57,890
compiled version of our code, 

133
00:03:58,560 --> 00:03:59,370
then we''ll see that we''re 

134
00:03:59,370 --> 00:04:01,140
calling React.createElement with 

135
00:04:01,140 --> 00:04:03,280
that message function. If we 

136
00:04:03,280 --> 00:04:04,480
wanted to make it nice and 

137
00:04:04,480 --> 00:04:05,810
declarative so that we could 

138
00:04:05,810 --> 00:04:07,810
nest to these things as if it''s 

139
00:04:07,810 --> 00:04:09,770
the children prop, then, we just 

140
00:04:09,830 --> 00:04:12,050
accept children for the name of 

141
00:04:12,050 --> 00:04:13,480
the prop. Then we can rename 

142
00:04:13,480 --> 00:04:14,910
this one to "children," and 

143
00:04:14,910 --> 00:04:15,830
those two are functionally 

144
00:04:15,830 --> 00:04:17,210
equivalent. If we save this, 

145
00:04:17,460 --> 00:04:18,390
then we''ll still get "Hello 

146
00:04:18,390 --> 00:04:19,540
World!" and "Goodbye, World!" 

147
00:04:20,150 --> 00:04:21,660
But honestly, one of those looks 

148
00:04:21,660 --> 00:04:23,150
a little bit nicer to me, so I''m 

149
00:04:23,150 --> 00:04:24,650
going to switch both of these to 

150
00:04:24,650 --> 00:04:26,810
use that syntax. What''s cool 

151
00:04:26,810 --> 00:04:29,400
about this is I''m also able to 

152
00:04:29,400 --> 00:04:31,190
nest these together and pass 

153
00:04:31,250 --> 00:04:32,970
anything that React can render, 

154
00:04:33,140 --> 00:04:34,660
which includes the string here, 

155
00:04:35,050 --> 00:04:36,570
or additional components here, 

156
00:04:36,860 --> 00:04:40,210
or additional elements here. In 

157
00:04:40,210 --> 00:04:41,440
review of what we did here was 

158
00:04:41,440 --> 00:04:42,610
we had some code that was being 

159
00:04:42,610 --> 00:04:44,030
duplicated, and we wanted to 

160
00:04:44,030 --> 00:04:45,500
reuse that code in multiple 

161
00:04:45,500 --> 00:04:47,440
places. So, we created our own 

162
00:04:47,440 --> 00:04:48,880
custom function component which 

163
00:04:48,880 --> 00:04:50,370
is a function that accepts a 

164
00:04:50,370 --> 00:04:52,450
props object and returns more 

165
00:04:52,450 --> 00:04:54,650
React elements. We had to make 

166
00:04:54,650 --> 00:04:55,990
sure that our function component 

167
00:04:55,990 --> 00:04:57,640
started with a capital letter so 

168
00:04:57,640 --> 00:04:59,590
that Babel would compile this to 

169
00:04:59,590 --> 00:05:01,610
pass the function itself to 

170
00:05:01,610 --> 00:05:03,490
React.createElement rather than 

171
00:05:03,600 --> 00:05:05,290
the string message to React.

172
00:05:05,290 --> 00:05:07,010
createElement. That way, when 

173
00:05:07,010 --> 00:05:08,930
React renders our element, it 

174
00:05:08,930 --> 00:05:10,310
knows what function to call.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- One of the biggest paradigm shifts that React offered to the UI ecosystem was the component model.
- Components let you split the UI into independent, reusable pieces, and think about each piece in isolation.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    // creating a function component, that accepts a props object and returns a React Element
    // it passes JSX attributes and children to this component as a single object ‚Äúprops‚Äù
    function Message({ children }) {
      return <div className="message">{children}</div>;
    }

    const element = (
      <div className="container">
        <Message>Hello World</Message>
        <Message>Goodbye World</Message>
      </div>
    );

    ReactDOM.render(element, document.getElementById(''root''));
  </script>
</body>
```

- **Rendering** a Component:

```js
//  capitalized to ensure that babel passes the function rather than the string message
const element = (
  <div className="container">
    <Message>Hello World</Message>
    <Message>Goodbye World</Message>
  </div>
);
```

## Additional resource

- [React doc - Components and Props](https://reactjs.org/docs/components-and-props.html)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '4c3999c5', 'https://d2c5owlt6rorc3.cloudfront.net/egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI/dash/egghead-v2-06-create-a-simple-reusable-react-component-rkYhlKUrI.mpd', 'https://stream.mux.com/02SLj6LKlhfsLewS2s2Syb2yD01HQlObzzYPP8shaJ7dU.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/06-react-create-a-simple-reusable-react-component-50d59130.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6251, 'Validate Custom React Component Props with PropTypes', NULL, 'When you create reusable React components, you want to make sure that people use them correctly. The best way to do this is to use TypeScript in your codebase to give you compile-time checking of your code. But if you‚Äôre not using TypeScript, you can still use PropTypes to get runtime validation. Between you and me, when I was still doing AngularJS work, I was so envious of this feature, that [I tried to build it into AngularJS](https://github.com/angular/angular.js/issues/11657).

In this lesson we‚Äôll learn how PropTypes work, why they‚Äôre not enabled in production, and how to use the pre-built [prop-types](https://www.npmjs.com/package/prop-types) package from the React team.', 254, NULL, '2020-03-11T02:36:24.535Z', '2025-12-13T00:54:53.678Z', 'react-validate-custom-react-component-props-with-proptypes-60e63690', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8/egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8.jpg', true, NULL, 'Kent: [00:00] When you start creating custom function components, you''re going to have people using those function components and they may not use it quite right. For example, here, we have this, "Say Hello!" that''s accepting a props object we''re destructuring right here.

[00:13] We''re getting a first name and a last name prop and expecting to be able to render those out, but the way that it''s being used is we have that first name prop being assigned to false and we''re not providing the last name prop at all. The end result is not exactly what we''re looking for.

[00:28] The React team has developed a package called PropTypes that allows you to add run time validation of the props that are passed to your components. This is why React supports a feature called prop-types that allows you to validate the types of props that are being passed to your components when they''re rendered.

[00:45] To add support for that, we''re going to have SayHello.PropTypes equals this object. We''ll have a key for the prop that we want to validate. That''s going to be a function that takes the prop name and the component name. Any time our SayHello component is rendered, we can check that the first name prop was passed properly.

[01:07] We can say, "If type of props at prop name is not equal to a string, then we can return a new error that says, ''Hey, the component name needs the prop name to be a string, but you passed a type of props at prop name.''"

[01:35] If we save that, then we can see that warning shows up. Failed prop-type. Hey, the component "Say, Hello!" needs the prop first name to be a string, but you passed a boolean.

[01:46] We could do the same thing for our last name prop. What I''m going to do is pull this out. We''ll create a last name prop here and I''m going to make a prop-types object here where we have a string that is that validator that we just created. Then here, we can say first name is PropTypes.string and last name is PropTypes.string.

[02:08] We could add a bunch more validators to the prop-types, for numbers and whatever else you could imagine.

[02:14] With that, we get a warning for both of these. This is so common that the React team created a package on npm that we can use and I''m going to pull it in from unpackage.

[02:24] I''ll paste that right in here and it''s called prop-types. With that, it actually creates a global variable here for us called prop-types when we''re using it as a script like that. It has the same API that we just created, what foresight.

[02:37] We''ll save that. We''ll get a refresh and things are working a little differently. Before, we were getting a warning for both the first name and the last name, but now we''re just getting one for the first name.

[02:48] The reason for that is that prop-types by default are not required. Because the last name wasn''t provided, we''re not getting the last name validated in this case. That works out nicely if you provide a default for the last name, like if we were to say unknown here.

[03:04] But if you want to make sure that it''s required, then you can add "a dot is required on both of these." Save that and now you''ll get a warning saying that the first name is the wrong type and the last name is required but wasn''t provided.

[03:18] One reasonable concern you might have about prop-types is that it adds a fair amount of code that needs to be run whenever React is rendering your components which may impact performance.

[03:28] Let''s take a look at the production.minified version of React and we''ll notice that everything is working exactly as it was before but we''re no longer getting those warnings. That''s because in production prop-types are not applied.

[03:44] If you want to take things a step further, then you can actually get a Babel plugin that will remove the prop-types from your source code for production. That plugin is called Babel-plugin-transform-remove-prop-types. You could install that and use that in your production build, or many tool kits install and use this by default.

[04:02] If you want to learn more about the prop-types that are available, you can go to the prop-types page on npm. There are a lot of different types that you can use for your components to validate that people are using your components properly.', NULL, false, '08-egghead-react-validate-custom-react-component-props-with-proptypes-2f1d4768.mp4', 11, true, false, 160, '---
mp4: 29823420
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8/egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8.mp4', 'egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8', 'zck4', 'https://egghead-pipeline.s3.amazonaws.com/egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8/egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8.mp3?d5a556e05fd5fa0d?d021', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.434Z', NULL, 8388599, NULL, 7805, 0, NULL, -7562471, '5f6775814faf4aff9a859efca179a56f', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/07-prop-types?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 390484168, '1
00:00:00,270 --> 00:00:01,750
When you start creating custom 

2
00:00:01,750 --> 00:00:02,920
function components, you''re 

3
00:00:02,920 --> 00:00:04,260
going to have people using those 

4
00:00:04,260 --> 00:00:05,740
function components and they may 

5
00:00:05,740 --> 00:00:07,250
not use it quite right. For 

6
00:00:07,250 --> 00:00:08,880
example, here, we have this, "

7
00:00:08,880 --> 00:00:10,210
Say Hello!" that''s accepting a 

8
00:00:10,520 --> 00:00:12,150
props object we''re destructuring 

9
00:00:12,150 --> 00:00:14,180
right here. We''re getting a 

10
00:00:14,180 --> 00:00:16,000
first name and a last name prop 

11
00:00:16,270 --> 00:00:17,270
and expecting to be able to 

12
00:00:17,270 --> 00:00:18,750
render those out, but the way 

13
00:00:18,750 --> 00:00:20,420
that it''s being used is we have 

14
00:00:20,420 --> 00:00:21,960
that first name prop being 

15
00:00:21,960 --> 00:00:23,320
assigned to false and we''re not 

16
00:00:23,320 --> 00:00:24,620
providing the last name prop at 

17
00:00:24,620 --> 00:00:26,860
all. The end result is not 

18
00:00:26,860 --> 00:00:28,080
exactly what we''re looking for. 

19
00:00:28,780 --> 00:00:30,080
The React team has developed a 

20
00:00:30,080 --> 00:00:31,610
package called PropTypes that 

21
00:00:31,610 --> 00:00:33,130
allows you to add run time 

22
00:00:33,130 --> 00:00:34,840
validation of the props that are 

23
00:00:34,840 --> 00:00:36,870
passed to your components. This 

24
00:00:36,870 --> 00:00:38,740
is why React supports a feature 

25
00:00:38,740 --> 00:00:40,110
called prop-types that allows 

26
00:00:40,110 --> 00:00:41,660
you to validate the types of 

27
00:00:41,950 --> 00:00:43,780
props that are being passed to 

28
00:00:43,780 --> 00:00:44,720
your components when they''re 

29
00:00:44,720 --> 00:00:46,280
rendered. To add support for 

30
00:00:46,280 --> 00:00:47,370
that, we''re going to have 

31
00:00:47,370 --> 00:00:50,970
SayHello.PropTypes equals this 

32
00:00:51,020 --> 00:00:53,920
object. We''ll have a key for the 

33
00:00:53,920 --> 00:00:55,110
prop that we want to validate. 

34
00:00:55,680 --> 00:00:56,810
That''s going to be a function 

35
00:00:57,160 --> 00:01:00,440
that takes the prop name and the 

36
00:01:00,440 --> 00:01:02,740
component name. Any time our 

37
00:01:02,740 --> 00:01:04,240
SayHello component is rendered, 

38
00:01:04,480 --> 00:01:05,880
we can check that the first name 

39
00:01:05,880 --> 00:01:07,760
prop was passed properly. We 

40
00:01:07,760 --> 00:01:11,080
can say, "If type of props at 

41
00:01:11,160 --> 00:01:13,310
prop name is not equal to a 

42
00:01:13,310 --> 00:01:15,690
string, then we can return a new 

43
00:01:15,750 --> 00:01:18,860
error that says, ''Hey, the 

44
00:01:18,860 --> 00:01:24,370
component name needs the 

45
00:01:24,600 --> 00:01:29,180
prop name to be a string, but 

46
00:01:29,180 --> 00:01:34,280
you passed a type of props at 

47
00:01:34,280 --> 00:01:36,290
prop name.''" If we save that, 

48
00:01:36,950 --> 00:01:38,520
then we can see that warning 

49
00:01:38,520 --> 00:01:40,790
shows up. Failed prop-type. Hey, 

50
00:01:40,960 --> 00:01:42,190
the component "Say, Hello!" 

51
00:01:42,190 --> 00:01:43,610
needs the prop first name to be 

52
00:01:43,610 --> 00:01:45,000
a string, but you passed a 

53
00:01:45,000 --> 00:01:47,110
boolean. We could do the same 

54
00:01:47,110 --> 00:01:48,840
thing for our last name prop. 

55
00:01:49,250 --> 00:01:50,610
What I''m going to do is pull 

56
00:01:50,610 --> 00:01:52,310
this out. We''ll create a last 

57
00:01:52,440 --> 00:01:54,940
name prop here and I''m going to 

58
00:01:54,940 --> 00:01:57,370
make a prop-types object here 

59
00:01:57,650 --> 00:01:59,650
where we have a string that is 

60
00:01:59,650 --> 00:02:00,870
that validator that we just 

61
00:02:00,870 --> 00:02:02,980
created. Then here, we can say 

62
00:02:02,980 --> 00:02:05,260
first name is PropTypes.string 

63
00:02:05,880 --> 00:02:07,610
and last name is PropTypes.

64
00:02:07,780 --> 00:02:09,600
string. We could add a bunch 

65
00:02:09,600 --> 00:02:10,960
more validators to the prop-

66
00:02:10,960 --> 00:02:12,630
types, for numbers and whatever 

67
00:02:12,630 --> 00:02:14,600
else you could imagine. With 

68
00:02:14,600 --> 00:02:16,370
that, we get a warning for both 

69
00:02:16,370 --> 00:02:18,880
of these. This is so common that 

70
00:02:18,880 --> 00:02:20,320
the React team created a package 

71
00:02:20,320 --> 00:02:22,150
on npm that we can use and I''m 

72
00:02:22,150 --> 00:02:23,430
going to pull it in from 

73
00:02:23,510 --> 00:02:25,070
unpackage. I''ll paste that 

74
00:02:25,070 --> 00:02:26,400
right in here and it''s called 

75
00:02:26,400 --> 00:02:28,390
prop-types. With that, it 

76
00:02:28,390 --> 00:02:29,490
actually creates a global 

77
00:02:29,490 --> 00:02:31,020
variable here for us called prop-

78
00:02:31,020 --> 00:02:32,380
types when we''re using it as a 

79
00:02:32,380 --> 00:02:34,380
script like that. It has the 

80
00:02:34,380 --> 00:02:35,930
same API that we just created, 

81
00:02:36,040 --> 00:02:38,040
what foresight. We''ll save that. 

82
00:02:38,440 --> 00:02:40,150
We''ll get a refresh and things 

83
00:02:40,220 --> 00:02:41,690
are working a little differently. 

84
00:02:42,020 --> 00:02:43,070
Before, we were getting a 

85
00:02:43,070 --> 00:02:44,310
warning for both the first name 

86
00:02:44,650 --> 00:02:46,140
and the last name, but now we''re 

87
00:02:46,140 --> 00:02:47,760
just getting one for the first 

88
00:02:47,760 --> 00:02:49,420
name. The reason for that is 

89
00:02:49,420 --> 00:02:51,200
that prop-types by default are 

90
00:02:51,200 --> 00:02:53,420
not required. Because the last 

91
00:02:53,420 --> 00:02:54,910
name wasn''t provided, we''re not 

92
00:02:54,910 --> 00:02:56,730
getting the last name validated 

93
00:02:57,010 --> 00:02:58,650
in this case. That works out 

94
00:02:58,650 --> 00:03:00,530
nicely if you provide a default 

95
00:03:00,560 --> 00:03:01,800
for the last name, like if we 

96
00:03:01,800 --> 00:03:05,250
were to say unknown here. But 

97
00:03:05,540 --> 00:03:06,540
if you want to make sure that 

98
00:03:06,540 --> 00:03:08,020
it''s required, then you can add "

99
00:03:08,020 --> 00:03:10,950
a dot is required on both of 

100
00:03:10,950 --> 00:03:13,110
these." Save that and now you''ll 

101
00:03:13,110 --> 00:03:14,560
get a warning saying that the 

102
00:03:14,560 --> 00:03:16,340
first name is the wrong type and 

103
00:03:16,340 --> 00:03:17,820
the last name is required but 

104
00:03:17,820 --> 00:03:19,550
wasn''t provided. One reasonable 

105
00:03:19,550 --> 00:03:20,920
concern you might have about 

106
00:03:20,920 --> 00:03:22,390
prop-types is that it adds a 

107
00:03:22,390 --> 00:03:23,670
fair amount of code that needs 

108
00:03:23,670 --> 00:03:25,160
to be run whenever React is 

109
00:03:25,160 --> 00:03:26,760
rendering your components which 

110
00:03:26,760 --> 00:03:28,790
may impact performance. Let''s 

111
00:03:28,790 --> 00:03:30,870
take a look at the production.

112
00:03:31,570 --> 00:03:34,780
minified version of React and 

113
00:03:34,780 --> 00:03:36,450
we''ll notice that everything is 

114
00:03:36,450 --> 00:03:38,020
working exactly as it was before 

115
00:03:38,220 --> 00:03:39,180
but we''re no longer getting 

116
00:03:39,180 --> 00:03:40,960
those warnings. That''s because 

117
00:03:41,030 --> 00:03:43,240
in production prop-types are not 

118
00:03:43,240 --> 00:03:44,760
applied. If you want to take 

119
00:03:44,760 --> 00:03:46,350
things a step further, then you 

120
00:03:46,350 --> 00:03:47,970
can actually get a Babel plugin 

121
00:03:48,070 --> 00:03:49,410
that will remove the prop-types 

122
00:03:49,500 --> 00:03:50,780
from your source code for 

123
00:03:50,780 --> 00:03:52,820
production. That plugin is 

124
00:03:52,820 --> 00:03:54,320
called Babel-plugin-transform-

125
00:03:54,320 --> 00:03:56,270
remove-prop-types. You could 

126
00:03:56,270 --> 00:03:57,560
install that and use that in 

127
00:03:57,560 --> 00:03:59,290
your production build, or many 

128
00:03:59,290 --> 00:04:01,050
tool kits install and use this 

129
00:04:01,120 --> 00:04:02,610
by default. If you want to 

130
00:04:02,610 --> 00:04:03,950
learn more about the prop-types 

131
00:04:03,950 --> 00:04:05,020
that are available, you can go 

132
00:04:05,020 --> 00:04:07,020
to the prop-types page on npm. 

133
00:04:07,430 --> 00:04:08,480
There are a lot of different 

134
00:04:08,480 --> 00:04:09,950
types that you can use for your 

135
00:04:09,950 --> 00:04:11,320
components to validate that 

136
00:04:11,320 --> 00:04:12,950
people are using your components 

137
00:04:13,025 --> 00:04:13,350
properly.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- When you create reusable React components, you want to make sure that people use them correctly. The best way to do this is to use TypeScript in your codebase to give you compile-time checking of your code.
- If you‚Äôre not using TypeScript, you can still use PropTypes to get runtime validation.

- **Using PropTypes**:

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">

    function SayHello({ firstName, lastName }) {
       return (
         <div>
           Hello {firstName} {lastName}!
         </div>
       );
     }

     const PropTypes = {
       string(props, propName, componentName) {
         if (typeof props[propName] !== ''string'') {
           return new Error(
             `Hey, the component ${componentName} needs the prop ${propName} to be a string`
           );
         }
       }
     };

     SayHello.propTypes = {
         firstName: PropTypes.string.isRequired
         lastName: PropTypes.string
     }

     const element = <SayHello firstName={false}>

     ReactDOM.render(element, document.getElementById(''root''));
  </script>
</body>
```

- Using **`prop-types`** from unpkg:

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script src="https://unpkg.com/prop-types@15.6.1/prop-types.js"></script>
  <script type="text/babel">
    const rootElement = document.getElementById(''root'');

    function SayHello({ firstName, lastName }) {
      return (
        <div>
          Hello {firstName} {lastName}!
        </div>
      );
    }

    // prop-types creates a global variable called propTypes
    // passing .isRequired
    SayHello.propTypes = {
      firstName: PropTypes.string.isRequired,
      lastName: PropTypes.string.isRequired
    };

    const element = <SayHello firstName={false} />;

    ReactDOM.render(element, rootElement);
  </script>
</body>
```

- PropTypes are not rendered on production. You can also remove PropTypes using the [babel-plugin-transform-react-remove-prop-types](https://www.npmjs.com/package/babel-plugin-transform-react-remove-prop-types).

## Additional resource

- [npm - prop-types](https://www.npmjs.com/package/prop-types])
- [React Docs - Typechecking With PropTypes](https://reactjs.org/docs/typechecking-with-proptypes.html)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '60e63690', 'https://d2c5owlt6rorc3.cloudfront.net/egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8/dash/egghead-v2-07-validate-custom-react-component-props-with-proptypes-r1a3eYIr8.mpd', 'https://stream.mux.com/kins2w4N5ThGGTWGG01SrXcig01eQdhrr6QVCvDwZ4O4k.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/07-react-validate-custom-react-component-props-with-proptypes-9e1b5b13.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6253, 'Rerender a React Application', NULL, 'Applications aren‚Äôt really applications if they don‚Äôt change over time to represent changes in the application over time. Normally in React you‚Äôll use state to manage this, but before we get to that, we‚Äôll just call ReactDOM.render on the same element so you get an understanding of what React is doing for you. So we‚Äôll learn how React deals with the new elements you give it, compare it to the previous elements, and make surgical updates to the DOM to give you the fastest and best user experience possible (because updating the DOM is typically the slowest part in the whole process).', 199, NULL, '2020-03-11T02:37:40.967Z', '2025-12-13T00:54:53.678Z', 'react-rerender-a-react-application-ea98531e', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-v2-09-rerender-a-react-application-S1-GZKLrU/egghead-v2-09-rerender-a-react-application-S1-GZKLrU.jpg', true, NULL, 'Instructor: [0:00] We made a clock application. Here, it''s rendering out the time and we get that time with new date toLocaleTimeString, and then we put that inside of a div and render that. The problem is that it gets out of date as soon as you refresh the page. Every time you refresh the page or get that updated, but you have to keep on refreshing the page, and what a pain that is.

[0:19] What I want to do instead is I''m going to put this into a function and have that function called every second. Let''s go ahead and make that function called tick. We''ll put all this inside of tick, and then we''ll call tick. We just refactored, just put something in a function. That''s a very normal thing to do. Now I''m going to say set interval, tick, every 1,000 milliseconds. I''m getting that update.

[0:48] The thing that I want to show you about the way that this is working is if we look in the body and then come down here to our app. We''re going to see that update happening on our string right here. If I were to add something in here, like we put another div, hello, and another div right there, and then paste that time in there, then we''re going to notice that the only thing that''s updating is this clock time and not this div.

[1:14] Let''s see how this differs if we were to just turn this into an HTML string, and we''ll interpolate that. Then instead of ReactDOM.render, we''re going to say root element.innerHTML equals that element.

[1:31] We''re getting that same behavior that we had before, except the way that it works is it''s updating the entire contents of our application every time, starting from this root element. That''s not optimal, because it causes a couple of problems. Let''s take a look at an example.

[1:47] If I make an input and set the value to that time, and let''s go ahead and we''ll put two in here, then we''ll save that, and now we have two of those, and they are updating every second, but as I click in here, my focus is going away. That''s because the old elements that were the inputs there are getting totally removed from the DOM, and the new elements are getting put in their place. React doesn''t have this problem.

[2:13] Let''s go ahead and turn this back into JSX. Just take away that, take away that, and the closing quotes, and then we''ll remove this and comment that out. Now we''re back, and all that we''re getting is an update to the values that actually matter for our application, which are the properties for both of these inputs.

[2:36] This has great implications for the performance of our applications, as well as the accessibility, because React is keeping track of our focus for us.

[2:44] This isn''t how you normally re-render new application. Typically, whenever state changes, you don''t have to re-render your entire application, but I wanted to show you this so you have an understanding of what React is really doing for you.

[2:56] When you create these React elements, you give that to ReactDOM.render or you trigger a re-render of a component, and React is going to compare the elements that you returned this time with the elements that you returned last time.

[3:09] It''s going to do a div of those two elements, and then it will update the DOM surgically to only update the things that were different between the last time and this time you returned JSX.', NULL, false, '10-egghead-react-rerender-a-react-application-0bf050ac.mp4', 11, true, false, 160, '---
mp4: 25002097
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-v2-09-rerender-a-react-application-S1-GZKLrU/egghead-v2-09-rerender-a-react-application-S1-GZKLrU.mp4', 'egghead-v2-09-rerender-a-react-application-S1-GZKLrU', 'zcjm', 'https://egghead-pipeline.s3.amazonaws.com/egghead-v2-09-rerender-a-react-application-S1-GZKLrU/egghead-v2-09-rerender-a-react-application-S1-GZKLrU.mp3?376d5bee9d0bfe4a?15b1', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.614Z', NULL, 8388599, NULL, 7807, 0, NULL, -6847521, 'b7e94891a0a740d2bd357dd1f2f85a64', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/09-re-render?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 391824880, '1
00:00:00,250 --> 00:00:01,820
We made a clock application. 

2
00:00:01,920 --> 00:00:03,150
Here, it''s rendering out the 

3
00:00:03,150 --> 00:00:05,220
time and we get that time with 

4
00:00:05,240 --> 00:00:08,000
new date toLocaleTimeString, and 

5
00:00:08,000 --> 00:00:09,620
then we put that inside of a div 

6
00:00:09,690 --> 00:00:11,440
and render that. The problem is 

7
00:00:11,440 --> 00:00:12,970
that it gets out of date as soon 

8
00:00:12,970 --> 00:00:14,320
as you refresh the page. Every 

9
00:00:14,320 --> 00:00:15,720
time you refresh the page or get 

10
00:00:15,720 --> 00:00:16,990
that updated, but you have to 

11
00:00:16,990 --> 00:00:18,300
keep on refreshing the page, and 

12
00:00:18,300 --> 00:00:20,010
what a pain that is. What I 

13
00:00:20,010 --> 00:00:21,650
want to do instead is I''m going 

14
00:00:21,650 --> 00:00:23,840
to put this into a function and 

15
00:00:23,840 --> 00:00:25,100
have that function called every 

16
00:00:25,100 --> 00:00:26,860
second. Let''s go ahead and make 

17
00:00:26,860 --> 00:00:30,470
that function called tick. We''ll 

18
00:00:30,470 --> 00:00:32,780
put all this inside of tick, and 

19
00:00:32,780 --> 00:00:35,560
then we''ll call tick. We just 

20
00:00:35,560 --> 00:00:36,750
refactored, just put something 

21
00:00:36,750 --> 00:00:37,690
in a function. That''s a very 

22
00:00:37,690 --> 00:00:39,540
normal thing to do. Now I''m 

23
00:00:39,540 --> 00:00:42,840
going to say set interval, tick, 

24
00:00:43,430 --> 00:00:46,360
every 1,000 milliseconds. I''m 

25
00:00:46,360 --> 00:00:48,600
getting that update. The thing 

26
00:00:48,600 --> 00:00:49,780
that I want to show you about 

27
00:00:49,780 --> 00:00:51,430
the way that this is working is 

28
00:00:51,430 --> 00:00:53,030
if we look in the body and then 

29
00:00:53,030 --> 00:00:55,250
come down here to our app. We''re 

30
00:00:55,250 --> 00:00:56,570
going to see that update 

31
00:00:56,610 --> 00:00:58,750
happening on our string right 

32
00:00:58,750 --> 00:01:00,950
here. If I were to add something 

33
00:01:00,950 --> 00:01:03,530
in here, like we put another div, 

34
00:01:03,870 --> 00:01:05,500
hello, and another div right 

35
00:01:05,500 --> 00:01:06,690
there, and then paste that time 

36
00:01:06,690 --> 00:01:08,330
in there, then we''re going to 

37
00:01:08,330 --> 00:01:10,100
notice that the only thing 

38
00:01:10,100 --> 00:01:11,840
that''s updating is this clock 

39
00:01:11,840 --> 00:01:14,890
time and not this div. Let''s 

40
00:01:14,890 --> 00:01:16,580
see how this differs if we were 

41
00:01:16,580 --> 00:01:19,220
to just turn this into an HTML 

42
00:01:19,220 --> 00:01:21,580
string, and we''ll interpolate 

43
00:01:21,580 --> 00:01:24,020
that. Then instead of ReactDOM.

44
00:01:24,070 --> 00:01:26,300
render, we''re going to say root 

45
00:01:26,550 --> 00:01:29,570
element.innerHTML equals that 

46
00:01:29,620 --> 00:01:32,340
element. We''re getting that 

47
00:01:32,340 --> 00:01:33,940
same behavior that we had before, 

48
00:01:34,290 --> 00:01:35,600
except the way that it works is 

49
00:01:35,600 --> 00:01:36,860
it''s updating the entire 

50
00:01:36,860 --> 00:01:38,310
contents of our application 

51
00:01:38,630 --> 00:01:40,280
every time, starting from this 

52
00:01:40,280 --> 00:01:42,650
root element. That''s not optimal, 

53
00:01:42,650 --> 00:01:44,410
because it causes a couple of 

54
00:01:44,410 --> 00:01:45,850
problems. Let''s take a look at 

55
00:01:45,850 --> 00:01:48,400
an example. If I make an input 

56
00:01:48,550 --> 00:01:51,560
and set the value to that time, 

57
00:01:52,400 --> 00:01:53,710
and let''s go ahead and we''ll put 

58
00:01:53,710 --> 00:01:55,880
two in here, then we''ll save 

59
00:01:55,880 --> 00:01:57,370
that, and now we have two of 

60
00:01:57,370 --> 00:01:58,510
those, and they are updating 

61
00:01:58,580 --> 00:02:00,730
every second, but as I click in 

62
00:02:00,730 --> 00:02:02,790
here, my focus is going away. 

63
00:02:03,120 --> 00:02:04,830
That''s because the old elements 

64
00:02:04,830 --> 00:02:06,620
that were the inputs there are 

65
00:02:06,620 --> 00:02:08,520
getting totally removed from the 

66
00:02:08,520 --> 00:02:10,240
DOM, and the new elements are 

67
00:02:10,240 --> 00:02:11,480
getting put in their place. 

68
00:02:11,840 --> 00:02:13,650
React doesn''t have this problem. 

69
00:02:13,950 --> 00:02:15,500
Let''s go ahead and turn this 

70
00:02:15,500 --> 00:02:18,650
back into JSX. Just take away 

71
00:02:18,650 --> 00:02:20,710
that, take away that, and the 

72
00:02:20,710 --> 00:02:23,330
closing quotes, and then we''ll 

73
00:02:23,330 --> 00:02:24,720
remove this and comment that out. 

74
00:02:25,540 --> 00:02:27,240
Now we''re back, and all that 

75
00:02:27,240 --> 00:02:29,580
we''re getting is an update to 

76
00:02:29,580 --> 00:02:31,060
the values that actually matter 

77
00:02:31,060 --> 00:02:33,480
for our application, which are 

78
00:02:33,480 --> 00:02:35,030
the properties for both of these 

79
00:02:35,070 --> 00:02:36,750
inputs. This has great 

80
00:02:36,750 --> 00:02:38,350
implications for the performance 

81
00:02:38,350 --> 00:02:39,880
of our applications, as well as 

82
00:02:39,880 --> 00:02:41,400
the accessibility, because React 

83
00:02:41,400 --> 00:02:42,690
is keeping track of our focus 

84
00:02:42,690 --> 00:02:44,870
for us. This isn''t how you 

85
00:02:44,870 --> 00:02:45,910
normally re-render new 

86
00:02:45,910 --> 00:02:47,690
application. Typically, whenever 

87
00:02:47,690 --> 00:02:49,080
state changes, you don''t have to 

88
00:02:49,080 --> 00:02:50,200
re-render your entire 

89
00:02:50,200 --> 00:02:51,650
application, but I wanted to 

90
00:02:51,650 --> 00:02:52,860
show you this so you have an 

91
00:02:52,860 --> 00:02:54,650
understanding of what React is 

92
00:02:54,650 --> 00:02:56,280
really doing for you. When you 

93
00:02:56,280 --> 00:02:58,430
create these React elements, you 

94
00:02:58,430 --> 00:03:00,640
give that to ReactDOM.render or 

95
00:03:00,640 --> 00:03:02,350
you trigger a re-render of a 

96
00:03:02,350 --> 00:03:03,970
component, and React is going to 

97
00:03:03,970 --> 00:03:05,740
compare the elements that you 

98
00:03:05,740 --> 00:03:07,200
returned this time with the 

99
00:03:07,200 --> 00:03:08,660
elements that you returned last 

100
00:03:08,660 --> 00:03:10,590
time. It''s going to do a div of 

101
00:03:10,590 --> 00:03:12,340
those two elements, and then it 

102
00:03:12,340 --> 00:03:14,270
will update the DOM surgically 

103
00:03:14,270 --> 00:03:15,720
to only update the things that 

104
00:03:15,720 --> 00:03:16,810
were different between the last 

105
00:03:16,810 --> 00:03:18,800
time and this time you returned 

106
00:03:18,875 --> 00:03:19,200
JSX.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Updating the DOM is typically the slowest part of the whole process. React only updates what‚Äôs necessary.
- React DOM compares the element and its children to the previous one, and only applies the DOM updates necessary to bring the DOM to the desired state.
- When we re-render the entire app with `setInterval` you can see the clock changes without a browser window refresh.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    const rootElement = document.getElementById(''root'');

    function tick() {
      const time = new Date().toLocaleTimeString();
      const element = `
        <div>
          <input value="${time}" />
          <input value="${time}" />
        </div>
      `;
      rootElement.innerHTML = element;
    }

    tick();
    setInterval(tick, 1000);
  </script>
</body>
```

- The `focus` remains on the selected element because React keeps track of it. React also keeps track of the actual changes within our app so even though we call `ReactDOM.render` every second, it will not refresh every element inside, just the `time` value.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    const rootElement = document.getElementById(''root'');

    function tick() {
      const time = new Date().toLocaleTimeString();
      const element = (
        <>
          <input value={time} />
          <input value={time} />
        </>
      );
      ReactDOM.render(element, rootElement);
    }

    tick();
    setInterval(tick, 1000);
  </script>
</body>
```

- Even though we create an element describing the whole UI tree on every tick, only the text node whose contents have changed gets updated by React DOM.

## Additional resource

- [kent''s Blog - One simple trick to optimize React re-renders](https://kentcdodds.com/blog/optimize-react-re-renders/)
- [React Docs - Rendering Elements](https://reactjs.org/docs/rendering-elements.html)
- [React Docs - ReactDOM](https://reactjs.org/docs/react-dom.html)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'ea98531e', 'https://d2c5owlt6rorc3.cloudfront.net/egghead-v2-09-rerender-a-react-application-S1-GZKLrU/dash/egghead-v2-09-rerender-a-react-application-S1-GZKLrU.mpd', 'https://stream.mux.com/02Gso2OezGZ02ZPsgmTL9mpUE004UKaw02IKvovORycO3H00.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/09-react-rerender-a-react-application-bea3a0e6.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6268, 'Lifting and colocating React State', NULL, 'A common question from React beginners is how to share state between two sibling components. The answer is to [Lift the state](https://reactjs.org/docs/lifting-state-up.html) which basically amounts to finding the lowest common parent shared between the two components and placing the state management there, and then passing the state and a mechanism for updating that state down into the components that need it.

As a community we‚Äôre pretty good at doing this and it becomes natural over time. One thing that we typically have trouble remembering to do is to push state back down (or [colocate state](https://kentcdodds.com/blog/state-colocation-will-make-your-react-app-faster)). In this lesson we‚Äôll learn how to lift state up and push state back down.', 296, NULL, '2020-03-11T02:44:18.091Z', '2025-12-13T00:54:53.678Z', 'react-lifting-and-colocating-react-state', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-lifting-and-colocating-react-state-5eteOt-96/react-lifting-and-colocating-react-state-5eteOt-96.jpg', true, NULL, 'Kent C. Dodds: [0:00] Here, we have a simple app component where we are managing some name state so we can pass that to our name component, and pass it to our display component, so that we can render out, "Hey name. You are great."

[0:12] We also have a FavoriteAnimal right here that''s managing its own state and rendering the input with the value and onChange handler.

[0:21] Let''s say that this Display component, which is a sibling to our FavoriteAnimal component actually needs to know what the animal is, because instead of, "You are great," we want to say, "Your favorite animal is..." and then animal right here.

[0:36] We''ll accept that as a prop, but how are we going to get access to that animal, if that state is living in our FavoriteAnimal component? These two are sibling components, so the FavoriteAnimal component can''t pass the animal to the Display component.

[0:54] Let''s keep on going. We''re going to need to accept an animal, and that''s going to come from somewhere. We''re not sure where yet.

[1:00] From the looks of things, we''re going to need to do the same thing to our animal state that we''re doing with our name state. That is specifically we need to lift the state from the FavoriteAnimal component to the App component which is the least common parent between these two components.

[1:16] Let''s do that. I''m just going to grab this and I''ll move that down to right here. Now the FavoriteAnimal doesn''t have access to Animal or setAnimal. I''m going to accept animal and onAnimalChange. We''ll do the same thing that we did for our name component.

[1:37] OnAnimalChange will be passed to the onChange prop onAnimalChange. The animal gets passed along to the input. Then we come down here to the FavoriteAnimal and we need to pass the animal and onAnimalChange.

[1:54] We''ll paste in what we had before. Now, our Display has access to the animal. If we save that then everything should work except this is misspelled. Let''s do animal. There we go. Great. Now we can say Mulan and Mulan''s favorite animal is a dragon but specifically Mushu.

[2:16] What we did here is what''s called lifting state. Typically, you want to have your state as close to the code that''s using that state so that''s why we have the state in this FavoriteAnimal component. When we had a use case for a sibling component to have access to that state, we have to lift to that state to the least common parent which was this App component.

[2:36] We put it right there and then we passed that state in to the mechanism for updating state which is our setAnimal function as props to the components that need it.

[2:46] Here for our FavoriteAnimal, we''re passing the animal prop and onAnimalChange prop so we have a mechanism for updating that state. Then here for the Display, all it needs is the animal so that''s all that we passed.

[2:59] Once you learn how to do this, it becomes second nature. One thing we''re not quite as good at is pushing state back down or co-locating state. Let''s say that our Display use case gets changed and we no longer need to pass the animal down. We''re going to say, "You are great!" again. We no longer need this animal prop.

[3:18] Often, people will actually just leave it right there without making any other changes but we need to remember that we no longer need to accept this animal prop on this Display where we''re rendering it. Because the animal state is only being used by a single component, that means we can move that state back into that component to get it co-located.

[3:38] Let''s move it back up here. We no longer need to accept either one of these props and we can come down here, grab that. Remove both of these props. Then we''ll paste that onChange event handler back into our FavoriteAnimal input onChange prop.

[3:55] With that, we''ve co-located our state making it easier to maintain our application in the long term. In review, what we did here was we explored how to lift a state and then push it back down with state co-location. Our App component here is rendering out some state which does need to be used by multiple elements.

[4:13] Our App is maintaining the name state. We also have this FavoriteAnimal which is maintaining its own state but then our Display component needed to have access to that state so we lifted the animal state up to the least common parent which was our App component.

[4:29] Then we passed that state and a mechanism for updating that state down to the components that needed those things. That was the lifting state part and then we did the reverse to push the state back down for state co-location by moving the state back to where it was before removing the state from the component that doesn''t need it anymore, and removing the props that are no longer necessary.

[4:51] This enhances both the performance and the state management maintainability of our application.', NULL, false, '25-egghead-react-lifting-and-colocating-react-state.mp4', 11, true, false, 160, '---
mp4: 28067641
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-lifting-and-colocating-react-state-5eteOt-96/react-lifting-and-colocating-react-state-5eteOt-96.mp4', 'react-lifting-and-colocating-react-state-5eteOt-96', 'zcKR', 'https://egghead-pipeline.s3.amazonaws.com/react-lifting-and-colocating-react-state-5eteOt-96/react-lifting-and-colocating-react-state-5eteOt-96.mp3?1243a4932a646b20?e4c8', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.933Z', NULL, 8388599, NULL, 8175, 0, NULL, -1143899, 'd2bfb51cfbf84422a69b2b618a90ce69', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/24-lifting-and-colocating?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 401880220, '1
00:00:00,150 --> 00:00:01,460
Here, we have a simple app 

2
00:00:01,460 --> 00:00:03,190
component where we are managing 

3
00:00:03,270 --> 00:00:04,920
some name state so we can pass 

4
00:00:04,920 --> 00:00:06,950
that to our name component, and 

5
00:00:06,950 --> 00:00:08,910
pass it to our display component, 

6
00:00:09,630 --> 00:00:11,180
so that we can render out, "Hey 

7
00:00:11,180 --> 00:00:13,020
name. You are great." We also 

8
00:00:13,020 --> 00:00:14,940
have a FavoriteAnimal right here 

9
00:00:14,940 --> 00:00:16,770
that''s managing its own state 

10
00:00:16,960 --> 00:00:18,950
and rendering the input with the 

11
00:00:18,950 --> 00:00:21,010
value and onChange handler. 

12
00:00:21,400 --> 00:00:22,860
Let''s say that this Display 

13
00:00:22,860 --> 00:00:24,620
component, which is a sibling to 

14
00:00:24,620 --> 00:00:26,000
our FavoriteAnimal component 

15
00:00:26,620 --> 00:00:27,940
actually needs to know what the 

16
00:00:27,940 --> 00:00:29,410
animal is, because instead of, "

17
00:00:29,410 --> 00:00:30,840
You are great," we want to say, "

18
00:00:31,160 --> 00:00:34,900
Your favorite animal is..." and 

19
00:00:34,900 --> 00:00:36,660
then animal right here. We''ll 

20
00:00:36,660 --> 00:00:39,900
accept that as a prop, but how 

21
00:00:39,900 --> 00:00:41,730
are we going to get access to 

22
00:00:41,730 --> 00:00:43,840
that animal, if that state is 

23
00:00:43,840 --> 00:00:45,850
living in our FavoriteAnimal 

24
00:00:45,850 --> 00:00:47,960
component? These two are sibling 

25
00:00:47,960 --> 00:00:49,200
components, so the 

26
00:00:49,200 --> 00:00:51,010
FavoriteAnimal component can''t 

27
00:00:51,010 --> 00:00:53,340
pass the animal to the Display 

28
00:00:53,340 --> 00:00:55,100
component. Let''s keep on going. 

29
00:00:55,500 --> 00:00:56,820
We''re going to need to accept an 

30
00:00:56,880 --> 00:00:58,760
animal, and that''s going to come 

31
00:00:58,760 --> 00:00:59,910
from somewhere. We''re not sure 

32
00:00:59,910 --> 00:01:01,610
where yet. From the looks of 

33
00:01:01,610 --> 00:01:02,740
things, we''re going to need to 

34
00:01:02,740 --> 00:01:04,000
do the same thing to our animal 

35
00:01:04,000 --> 00:01:05,270
state that we''re doing with our 

36
00:01:05,270 --> 00:01:07,150
name state. That is specifically 

37
00:01:07,460 --> 00:01:09,690
we need to lift the state from 

38
00:01:09,690 --> 00:01:11,670
the FavoriteAnimal component to 

39
00:01:11,670 --> 00:01:13,610
the App component which is the 

40
00:01:13,610 --> 00:01:15,400
least common parent between 

41
00:01:15,400 --> 00:01:17,190
these two components. Let''s do 

42
00:01:17,190 --> 00:01:18,290
that. I''m just going to grab 

43
00:01:18,290 --> 00:01:21,060
this and I''ll move that down to 

44
00:01:21,060 --> 00:01:22,650
right here. Now the 

45
00:01:22,650 --> 00:01:24,010
FavoriteAnimal doesn''t have 

46
00:01:24,010 --> 00:01:25,990
access to Animal or setAnimal. 

47
00:01:25,990 --> 00:01:29,580
I''m going to accept animal and 

48
00:01:30,240 --> 00:01:33,860
onAnimalChange. We''ll do the 

49
00:01:33,860 --> 00:01:36,040
same thing that we did for our 

50
00:01:36,040 --> 00:01:38,540
name component. OnAnimalChange 

51
00:01:38,940 --> 00:01:40,620
will be passed to the onChange 

52
00:01:40,620 --> 00:01:44,100
prop onAnimalChange. The animal 

53
00:01:44,100 --> 00:01:45,530
gets passed along to the input. 

54
00:01:46,060 --> 00:01:47,270
Then we come down here to the 

55
00:01:47,270 --> 00:01:49,530
FavoriteAnimal and we need to 

56
00:01:49,530 --> 00:01:52,290
pass the animal and 

57
00:01:52,410 --> 00:01:55,670
onAnimalChange. We''ll paste in 

58
00:01:55,670 --> 00:01:57,970
what we had before. Now, our 

59
00:01:57,970 --> 00:02:00,040
Display has access to the animal. 

60
00:02:01,220 --> 00:02:02,960
If we save that then everything 

61
00:02:02,960 --> 00:02:04,700
should work except this is 

62
00:02:04,840 --> 00:02:07,270
misspelled. Let''s do animal. 

63
00:02:07,440 --> 00:02:09,470
There we go. Great. Now we can 

64
00:02:09,470 --> 00:02:11,750
say Mulan and Mulan''s favorite 

65
00:02:11,750 --> 00:02:14,150
animal is a dragon but 

66
00:02:14,150 --> 00:02:16,770
specifically Mushu. What we did 

67
00:02:16,770 --> 00:02:18,350
here is what''s called lifting 

68
00:02:18,350 --> 00:02:20,790
state. Typically, you want to 

69
00:02:20,790 --> 00:02:22,080
have your state as close to the 

70
00:02:22,080 --> 00:02:23,940
code that''s using that state so 

71
00:02:23,940 --> 00:02:25,330
that''s why we have the state in 

72
00:02:25,330 --> 00:02:26,620
this FavoriteAnimal component. 

73
00:02:27,290 --> 00:02:29,480
When we had a use case for a 

74
00:02:29,480 --> 00:02:31,080
sibling component to have access 

75
00:02:31,080 --> 00:02:32,720
to that state, we have to lift 

76
00:02:32,720 --> 00:02:34,090
to that state to the least 

77
00:02:34,090 --> 00:02:35,950
common parent which was this App 

78
00:02:35,950 --> 00:02:37,560
component. We put it right 

79
00:02:37,560 --> 00:02:39,560
there and then we passed that 

80
00:02:39,560 --> 00:02:41,050
state in to the mechanism for 

81
00:02:41,070 --> 00:02:42,280
updating state which is our 

82
00:02:42,280 --> 00:02:44,990
setAnimal function as props to 

83
00:02:44,990 --> 00:02:45,970
the components that need it. 

84
00:02:46,370 --> 00:02:47,690
Here for our FavoriteAnimal, 

85
00:02:47,690 --> 00:02:49,100
we''re passing the animal prop 

86
00:02:49,430 --> 00:02:51,790
and onAnimalChange prop so we 

87
00:02:51,790 --> 00:02:53,090
have a mechanism for updating 

88
00:02:53,090 --> 00:02:55,430
that state. Then here for the 

89
00:02:55,430 --> 00:02:57,120
Display, all it needs is the 

90
00:02:57,120 --> 00:02:58,130
animal so that''s all that we 

91
00:02:58,130 --> 00:02:59,900
passed. Once you learn how to 

92
00:02:59,900 --> 00:03:01,330
do this, it becomes second 

93
00:03:01,330 --> 00:03:02,920
nature. One thing we''re not 

94
00:03:02,920 --> 00:03:04,290
quite as good at is pushing 

95
00:03:04,290 --> 00:03:06,110
state back down or co-locating 

96
00:03:06,110 --> 00:03:07,890
state. Let''s say that our 

97
00:03:07,890 --> 00:03:09,870
Display use case gets changed 

98
00:03:10,160 --> 00:03:11,750
and we no longer need to pass 

99
00:03:11,750 --> 00:03:13,360
the animal down. We''re going to 

100
00:03:13,360 --> 00:03:16,350
say, "You are great!" again. We 

101
00:03:16,350 --> 00:03:18,120
no longer need this animal prop. 

102
00:03:18,590 --> 00:03:20,150
Often, people will actually just 

103
00:03:20,150 --> 00:03:21,710
leave it right there without 

104
00:03:21,710 --> 00:03:23,710
making any other changes but we 

105
00:03:23,710 --> 00:03:24,830
need to remember that we no 

106
00:03:24,830 --> 00:03:26,210
longer need to accept this 

107
00:03:26,240 --> 00:03:28,230
animal prop on this Display 

108
00:03:28,230 --> 00:03:29,960
where we''re rendering it. 

109
00:03:29,960 --> 00:03:31,870
Because the animal state is only 

110
00:03:31,870 --> 00:03:33,440
being used by a single component, 

111
00:03:33,620 --> 00:03:35,000
that means we can move that 

112
00:03:35,000 --> 00:03:36,870
state back into that component 

113
00:03:37,100 --> 00:03:38,890
to get it co-located. Let''s 

114
00:03:38,890 --> 00:03:40,700
move it back up here. We no 

115
00:03:40,700 --> 00:03:42,090
longer need to accept either one 

116
00:03:42,090 --> 00:03:43,840
of these props and we can come 

117
00:03:43,840 --> 00:03:46,250
down here, grab that. Remove 

118
00:03:46,250 --> 00:03:49,570
both of these props. Then we''ll 

119
00:03:49,570 --> 00:03:50,850
paste that onChange event 

120
00:03:50,890 --> 00:03:52,530
handler back into our 

121
00:03:52,530 --> 00:03:54,460
FavoriteAnimal input onChange 

122
00:03:54,460 --> 00:03:55,860
prop. With that, we''ve co-

123
00:03:55,860 --> 00:03:57,670
located our state making it 

124
00:03:57,670 --> 00:03:58,730
easier to maintain our 

125
00:03:58,730 --> 00:04:00,930
application in the long term. In 

126
00:04:00,930 --> 00:04:02,490
review, what we did here was we 

127
00:04:02,490 --> 00:04:04,520
explored how to lift a state and 

128
00:04:04,520 --> 00:04:05,850
then push it back down with 

129
00:04:05,890 --> 00:04:07,930
state co-location. Our App 

130
00:04:07,930 --> 00:04:09,810
component here is rendering out 

131
00:04:10,550 --> 00:04:12,480
some state which does need to be 

132
00:04:12,480 --> 00:04:14,190
used by multiple elements. Our 

133
00:04:14,190 --> 00:04:15,600
App is maintaining the name 

134
00:04:15,600 --> 00:04:17,730
state. We also have this 

135
00:04:17,730 --> 00:04:18,910
FavoriteAnimal which is 

136
00:04:18,910 --> 00:04:20,620
maintaining its own state but 

137
00:04:20,620 --> 00:04:22,040
then our Display component 

138
00:04:22,040 --> 00:04:23,560
needed to have access to that 

139
00:04:23,560 --> 00:04:25,500
state so we lifted the animal 

140
00:04:25,500 --> 00:04:27,140
state up to the least common 

141
00:04:27,140 --> 00:04:28,410
parent which was our App 

142
00:04:28,410 --> 00:04:30,630
component. Then we passed that 

143
00:04:30,630 --> 00:04:32,250
state and a mechanism for 

144
00:04:32,250 --> 00:04:33,970
updating that state down to the 

145
00:04:33,970 --> 00:04:35,490
components that needed those 

146
00:04:35,490 --> 00:04:37,040
things. That was the lifting 

147
00:04:37,040 --> 00:04:38,500
state part and then we did the 

148
00:04:38,500 --> 00:04:39,960
reverse to push the state back 

149
00:04:39,960 --> 00:04:42,200
down for state co-location by 

150
00:04:42,200 --> 00:04:43,610
moving the state back to where 

151
00:04:43,610 --> 00:04:45,560
it was before removing the state 

152
00:04:45,710 --> 00:04:46,870
from the component that doesn''t 

153
00:04:46,870 --> 00:04:48,810
need it anymore, and removing 

154
00:04:48,810 --> 00:04:50,160
the props that are no longer 

155
00:04:50,160 --> 00:04:52,100
necessary. This enhances both 

156
00:04:52,100 --> 00:04:53,430
the performance and the state 

157
00:04:53,430 --> 00:04:54,960
management maintainability of 

158
00:04:54,960 --> 00:04:55,490
our application.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- A **common question** from React beginners is how to share state between two sibling components.
- **The answer** is to Lift the state which basically amounts to finding the lowest common parent shared between the two components and placing the state management there, and then passing the state and a mechanism for updating that state down into the components that need it.

- As a community we‚Äôre pretty good at doing this and it becomes natural over time. One thing that we typically have trouble remembering to do is to **push state back down** (or colocate state).

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function Name({ name, onNameChange }) {
      return (
        <div>
          <label>Name: </label>
          <input value={name} onChange={onNameChange} />
        </div>
      );
    }
    // In React, sharing state is accomplished by moving it up to the closest
    // common ancestor of the components that need it.
    // This is called ‚Äúlifting state up‚Äù.

    function FavoriteAnimal() {
      const [animal, setAnimal] = React.useState('''');
      return (
        <div>
          <label>Favorite Animal: </label>
          <input
            value={animal}
            onChange={event => setAnimal(event.target.value)}
          />
        </div>
      );
    }

    // Since any state ‚Äúlives‚Äù in some component and that
    // component alone can change it, the surface area for bugs is greatly reduced.

    function Display({ name }) {
      return <div>{`Hey ${name}, you are great!`}</div>;
    }

    function App() {
      const [name, setName] = React.useState('''');
      return (
        <form>
          <Name
            name={name}
            onNameChange={event => setName(event.target.value)}
          />
          <FavoriteAnimal />
          <Display name={name} />
        </form>
      );
    }

    ReactDOM.render(<App />, document.getElementById(''root''));
  </script>
</body>
```

- Lifting state involves writing more ‚Äúboilerplate‚Äù code than two-way binding approaches, but as a benefit, it takes less work to find and isolate bugs.

## Additional resource

[Kent''s Blog - State Colocation will make your React app faster](https://kentcdodds.com/blog/state-colocation-will-make-your-react-app-faster)
[Kent''s Blog - Application State Management with React](https://kentcdodds.com/blog/application-state-management-with-react)
[React Docs - Lifting State Up](https://reactjs.org/docs/lifting-state-up.html)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '02adef24', 'https://d2c5owlt6rorc3.cloudfront.net/react-lifting-and-colocating-react-state-5eteOt-96/dash/react-lifting-and-colocating-react-state-5eteOt-96.mpd', 'https://stream.mux.com/Hh0001929uFkppn41CEcEVFqg1ZU01LBR9JANbeSqaeTko.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/24-react-lifting-and-colocating-react-state.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6255, 'Use Event Handlers with React
', NULL, 'Application‚Äôs can be laid out and styled pretty, but if they don‚Äôt respond to interactions from the user then they‚Äôre just web pages, not apps. Let‚Äôs get an introduction to event handlers with React. There are a ton of supported events that you can find [on the docs](https://reactjs.org/docs/events.html#supported-events). We still haven‚Äôt gotten to state yet, so we‚Äôve implemented our own little way of managing state and re-rendering our component so we can play around with event handlers.

One thing you‚Äôll want to know is that events with React are very similar to working with events in regular DOM. React does have an optimization implementation on top of the event system called [SyntheticEvents](https://reactjs.org/docs/events.html), but most of the time you won‚Äôt observe any difference with those events from regular DOM events (and you can always get access to the native event using the `nativeEvent` property).', 247, NULL, '2020-03-11T02:39:12.677Z', '2025-12-13T00:54:53.678Z', 'react-use-event-handlers-with-react-ab060351', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI/egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI.jpg', true, NULL, 'Kent C Dodds: [0:00] Here we have an app component that is rendering some JSX here for there have been  events, click me, you typed, and then an input here. We have some state that is running this application component. If I update the event count to 10, then we''re going to see there have been 10 events.

[0:16] If I update the username to ''Hello there'' and save that, then we''re going to see you typed Hello there. The value of the input isn''t getting updated and there have actually not been 10 events, so let''s go ahead and wire up things so we can update our state and re-render the app.

[0:32] We already have a function here called setState, which will update our state variable and then render the app. That will just call React.render on our root again. This is not typically how you re-render an application or manage state in a React application, but this will work for our purposes of learning how events work in React.

[0:51] First let''s deal with this button. We have on button''s an onClick event that we can call. This we''re going to provide a function. I can make this an inline arrow function here.

[1:03] We''ll just say setState, calling this function down here with the new state of an object, eventCount. We want that eventCount to be the current state. eventCount + 1. If we save that and then I go over here and click, we''re going to get an increment every single time I click.

[1:21] There are a lot of different events that we can use here. We can have an onFocus and save that and every time I focus the input we''re going to get an increment on that event. Or we could say onMouseOver, save that, and then every time I mouse over, we''ll get an increment on that event count. There are a lot more events that are supported by React.

[1:43] Let''s set this back to onCount and then we can also extract this to handleClick. We could put that right here. Function handleClick() and then we''ll call setState there. That will work just as well. It would work if we used onClick instead of onCount. There we go.

[2:03] Then let''s take a look at this input. We want this you typed to get updated when we enter some new username. I''m going to say onBlur and we''ll say setState(''username''). Then we need to specify a value here.

[2:18] What we need is to get the value of the input that is receiving the onBlur event. As an argument to the event handler, we receive the event. Then we can use that event to get the target of the event, which will be our input. Then we''ll get that value from the input.

[2:36] If we save that, then we can type in Kent C Dodds and then blur. Our state gets updated. If we want this to get updated as we''re typing, then we can change this to onChange. As the user types in this input, we''ll get that update to our state and we''ll re-render the application.

[2:54] Let''s go ahead and pull this onChange handler out. We''ll say handleChange. We''ll bring it up here. Function handleChange will take the event. Let''s go ahead and take a look at that event. We''ll say console.log(event), save that.

[3:10] We''ll pop open our Dev Tools here, look at the console, and then type in one character. We''ll notice we get a synthetic event object here. That''s not the native event. The native event is this property nativeEvent input event. React does some serious performance optimizations for our events and that''s what this synthetic event thing is all about.

[3:33] Most of the time you don''t need access to the native event, but if you ever do then you can say event.nativeEvent and we''ll hit save. We''ll type in a character and we''ll get that native input event. But the synthetic event has pretty much all the same properties as a regular event, so that''s what you''re typically going to use.

[3:54] One thing I like about React''s event system is that you pass the event handler directly to the element that you want to attach the event to, so it makes following the flow of events and state updates really straightforward.', NULL, false, '12-egghead-react-use-event-handlers-with-react-05e315dc.mp4', 11, true, false, 160, '---
mp4: 25828285
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI/egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI.mp4', 'egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI', 'zckN', 'https://egghead-pipeline.s3.amazonaws.com/egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI/egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI.mp3?89b0174cf6e4f072?5e10', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.896Z', NULL, 8388599, NULL, 7808, 0, NULL, -6096833, '58356803de424bdabaffe919bf66b7ca', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/11-event-handlers?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 393165592, '1
00:00:00,100 --> 00:00:01,690
Here we have an app component 

2
00:00:01,780 --> 00:00:03,500
that is rendering some JSX here 

3
00:00:03,500 --> 00:00:04,850
for there have been  events, 

4
00:00:04,850 --> 00:00:06,490
click me, you typed, and then an 

5
00:00:06,510 --> 00:00:08,890
input here. We have some state 

6
00:00:08,970 --> 00:00:10,850
that is running this application 

7
00:00:10,910 --> 00:00:13,390
component. If I update the event 

8
00:00:13,390 --> 00:00:14,850
count to 10, then we''re going to 

9
00:00:14,850 --> 00:00:16,140
see there have been 10 events. 

10
00:00:16,140 --> 00:00:17,530
If I update the username to ''

11
00:00:17,530 --> 00:00:19,970
Hello there'' and save that, then 

12
00:00:19,970 --> 00:00:21,090
we''re going to see you typed 

13
00:00:21,090 --> 00:00:23,330
Hello there. The value of the 

14
00:00:23,330 --> 00:00:25,030
input isn''t getting updated and 

15
00:00:25,030 --> 00:00:26,630
there have actually not been 10 

16
00:00:26,690 --> 00:00:28,280
events, so let''s go ahead and 

17
00:00:28,280 --> 00:00:30,100
wire up things so we can update 

18
00:00:30,170 --> 00:00:32,000
our state and re-render the app. 

19
00:00:32,500 --> 00:00:34,200
We already have a function here 

20
00:00:34,200 --> 00:00:36,070
called setState, which will 

21
00:00:36,070 --> 00:00:38,360
update our state variable and 

22
00:00:38,360 --> 00:00:40,170
then render the app. That will 

23
00:00:40,170 --> 00:00:41,880
just call React.render on our 

24
00:00:41,880 --> 00:00:43,310
root again. This is not 

25
00:00:43,310 --> 00:00:44,800
typically how you re-render an 

26
00:00:44,800 --> 00:00:46,350
application or manage state in a 

27
00:00:46,350 --> 00:00:48,020
React application, but this will 

28
00:00:48,020 --> 00:00:49,410
work for our purposes of 

29
00:00:49,410 --> 00:00:50,660
learning how events work in 

30
00:00:50,660 --> 00:00:52,570
React. First let''s deal with 

31
00:00:52,570 --> 00:00:55,040
this button. We have on button''s 

32
00:00:55,210 --> 00:00:57,110
an onClick event that we can 

33
00:00:57,110 --> 00:00:58,590
call. This we''re going to 

34
00:00:58,590 --> 00:01:00,470
provide a function. I can make 

35
00:01:00,470 --> 00:01:02,000
this an inline arrow function 

36
00:01:02,000 --> 00:01:04,950
here. We''ll just say setState, 

37
00:01:05,450 --> 00:01:06,930
calling this function down here 

38
00:01:07,260 --> 00:01:08,930
with the new state of an object, 

39
00:01:09,300 --> 00:01:11,200
eventCount. We want that 

40
00:01:11,200 --> 00:01:13,090
eventCount to be the current 

41
00:01:13,090 --> 00:01:16,740
state. eventCount + 1. If we 

42
00:01:16,740 --> 00:01:17,910
save that and then I go over 

43
00:01:17,910 --> 00:01:19,080
here and click, we''re going to 

44
00:01:19,080 --> 00:01:20,380
get an increment every single 

45
00:01:20,380 --> 00:01:21,970
time I click. There are a lot 

46
00:01:21,970 --> 00:01:23,220
of different events that we can 

47
00:01:23,220 --> 00:01:25,900
use here. We can have an onFocus 

48
00:01:26,270 --> 00:01:27,670
and save that and every time I 

49
00:01:27,670 --> 00:01:29,580
focus the input we''re going to 

50
00:01:29,580 --> 00:01:31,920
get an increment on that event. 

51
00:01:32,460 --> 00:01:34,570
Or we could say onMouseOver, 

52
00:01:34,800 --> 00:01:36,020
save that, and then every time I 

53
00:01:36,020 --> 00:01:37,510
mouse over, we''ll get an 

54
00:01:37,510 --> 00:01:39,100
increment on that event count. 

55
00:01:39,580 --> 00:01:41,710
There are a lot more events that 

56
00:01:41,710 --> 00:01:43,540
are supported by React. Let''s 

57
00:01:43,540 --> 00:01:46,680
set this back to onCount and 

58
00:01:46,680 --> 00:01:48,650
then we can also extract this to 

59
00:01:48,650 --> 00:01:51,280
handleClick. We could put that 

60
00:01:51,280 --> 00:01:53,780
right here. Function handleClick() 

61
00:01:54,340 --> 00:01:55,410
and then we''ll call setState 

62
00:01:55,410 --> 00:01:57,190
there. That will work just as 

63
00:01:57,190 --> 00:01:59,540
well. It would work if we used 

64
00:01:59,670 --> 00:02:01,750
onClick instead of onCount. 

65
00:02:01,750 --> 00:02:04,110
There we go. Then let''s take a 

66
00:02:04,110 --> 00:02:06,270
look at this input. We want this 

67
00:02:06,270 --> 00:02:08,180
you typed to get updated when we 

68
00:02:08,180 --> 00:02:09,800
enter some new username. I''m 

69
00:02:09,930 --> 00:02:12,590
going to say onBlur and we''ll 

70
00:02:12,590 --> 00:02:16,050
say setState(''username''). Then 

71
00:02:16,050 --> 00:02:18,050
we need to specify a value here. 

72
00:02:18,730 --> 00:02:20,610
What we need is to get the value 

73
00:02:20,710 --> 00:02:22,560
of the input that is receiving 

74
00:02:22,560 --> 00:02:25,330
the onBlur event. As an argument 

75
00:02:25,330 --> 00:02:27,260
to the event handler, we receive 

76
00:02:27,430 --> 00:02:29,420
the event. Then we can use that 

77
00:02:29,420 --> 00:02:32,040
event to get the target of the 

78
00:02:32,040 --> 00:02:33,440
event, which will be our input. 

79
00:02:33,750 --> 00:02:35,480
Then we''ll get that value from 

80
00:02:35,480 --> 00:02:37,270
the input. If we save that, 

81
00:02:37,450 --> 00:02:39,900
then we can type in Kent C Dodds 

82
00:02:40,150 --> 00:02:42,570
and then blur. Our state gets 

83
00:02:42,570 --> 00:02:44,220
updated. If we want this to get 

84
00:02:44,220 --> 00:02:45,940
updated as we''re typing, then we 

85
00:02:45,940 --> 00:02:48,930
can change this to onChange. As 

86
00:02:48,930 --> 00:02:50,480
the user types in this input, 

87
00:02:50,690 --> 00:02:51,980
we''ll get that update to our 

88
00:02:51,980 --> 00:02:53,220
state and we''ll re-render the 

89
00:02:53,220 --> 00:02:55,010
application. Let''s go ahead and 

90
00:02:55,010 --> 00:02:56,810
pull this onChange handler out. 

91
00:02:56,810 --> 00:02:59,130
We''ll say handleChange. We''ll 

92
00:02:59,130 --> 00:03:01,260
bring it up here. Function 

93
00:03:01,430 --> 00:03:04,270
handleChange will take the event. 

94
00:03:05,180 --> 00:03:06,290
Let''s go ahead and take a look 

95
00:03:06,290 --> 00:03:07,880
at that event. We''ll say console.

96
00:03:07,880 --> 00:03:11,030
log(event), save that. We''ll 

97
00:03:11,030 --> 00:03:12,710
pop open our Dev Tools here, 

98
00:03:12,850 --> 00:03:15,720
look at the console, and then 

99
00:03:15,720 --> 00:03:18,470
type in one character. We''ll 

100
00:03:18,470 --> 00:03:20,410
notice we get a synthetic event 

101
00:03:20,410 --> 00:03:22,420
object here. That''s not the 

102
00:03:22,420 --> 00:03:23,780
native event. The native event 

103
00:03:23,780 --> 00:03:26,020
is this property nativeEvent 

104
00:03:26,140 --> 00:03:27,940
input event. React does some 

105
00:03:27,940 --> 00:03:28,960
serious performance 

106
00:03:28,960 --> 00:03:30,960
optimizations for our events and 

107
00:03:30,960 --> 00:03:32,180
that''s what this synthetic event 

108
00:03:32,180 --> 00:03:33,940
thing is all about. Most of the 

109
00:03:33,940 --> 00:03:35,360
time you don''t need access to 

110
00:03:35,360 --> 00:03:36,780
the native event, but if you 

111
00:03:36,780 --> 00:03:39,110
ever do then you can say event.

112
00:03:39,500 --> 00:03:42,360
nativeEvent and we''ll hit save. 

113
00:03:43,340 --> 00:03:45,360
We''ll type in a character and 

114
00:03:45,360 --> 00:03:46,940
we''ll get that native input 

115
00:03:46,940 --> 00:03:48,850
event. But the synthetic event 

116
00:03:48,850 --> 00:03:50,250
has pretty much all the same 

117
00:03:50,250 --> 00:03:51,900
properties as a regular event, 

118
00:03:52,310 --> 00:03:53,390
so that''s what you''re typically 

119
00:03:53,390 --> 00:03:55,750
going to use. One thing I like 

120
00:03:55,810 --> 00:03:57,650
about React''s event system is 

121
00:03:57,650 --> 00:03:59,230
that you pass the event handler 

122
00:03:59,230 --> 00:04:00,790
directly to the element that you 

123
00:04:00,790 --> 00:04:02,690
want to attach the event to, so 

124
00:04:02,690 --> 00:04:04,810
it makes following the flow of 

125
00:04:04,810 --> 00:04:06,790
events and state updates really 

126
00:04:06,865 --> 00:04:07,190
straightforward.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- There are a ton of supported events that you can find on the [docs](https://reactjs.org/docs/handling-events.html). Let‚Äôs get an introduction to event handlers with React.

- We still haven‚Äôt gotten to state yet, so we‚Äôve implemented our own little way of managing state and re-rendering our component so we can play around with event handlers.

- One thing you‚Äôll want to know is that events with React are very similar to working with events in regular DOM.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    const rootElement = document.getElementById(''root'');

    // The current state of our app
    const state = { eventCount: 0, username: '''' };

    function App() {
      function handleClick() {
        setState({ eventCount: state.eventCount + 1 });
      }

      function handleChange(event) {
        // Getting current value from the input
        console.log(event);
        // Getting the SyntheticEvent
        console.log(event.nativeEvent);
        // Getting the nativeEvent if needed
        setState({ username: event.target.value });
      }

      return (
        <div>
          <p>There have been {state.eventCount} events.</p>
          <p>
            {/* We can have different types of events here that are supported by React: https://reactarmory.com/guides/react-events-cheatsheet */}
            <button onClick={handleClick}>Click Me</button>
          </p>
          <p>You typed: {state.username}</p>
          <p>
            <input onChange={handleChange} />
          </p>
        </div>
      );
    }

    // This is generally not how you handle state
    function setState(newState) {
      Object.assign(state, newState);
      renderApp();
    }

    function renderApp() {
      ReactDOM.render(<App />, document.getElementById(''root''));
    }

    renderApp();
  </script>
</body>
```

- React does have an optimization implementation on top of the event system called [SyntheticEvents](https://reactjs.org/docs/events.html), but most of the time you won‚Äôt observe any difference with those events from regular DOM events (and you can always get access to the native event using the nativeEvent property).

## Additional resource

- [React Docs - Handling Events](https://reactjs.org/docs/handling-events.html)
- [Kent Livestream](https://www.youtube.com/watch?v=WqFlnolg7mo)
- [React Event Handlers: onClick, onChange ...](https://www.robinwieruch.de/react-event-handler)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'ab060351', 'https://d2c5owlt6rorc3.cloudfront.net/egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI/dash/egghead-v2-11-use-event-handlers-with-react-SJ4MbFIBI.mpd', 'https://stream.mux.com/AwXWFSoTangLZT4L00jC4XDuHZUZD02qCPJUTwcRwNS400.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/11-react-use-event-handlers-with-react-bd53256d.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6256, 'Manage state in a React Component with the useState hook
', NULL, 'An application that responds to user input is valuable, but what do we do with that data the user has given us? This is where component state comes in. We need a place to put data that can change in our application, and we need to let React know when that state changes so it can update (or re-render) our app for us.

In React, state is associated to components and when the state changes, the component is updated. To get access to this state and to update it, we use what is called a ‚ÄúReact Hook‚Äù which allows us to call into React from within our component and let it know that we need to manage some state. In this lesson, you‚Äôll learn how to use the `useState` hook to do this.', 257, NULL, '2020-03-11T02:39:43.170Z', '2025-12-13T00:54:53.678Z', 'react-manage-state-in-a-react-component-with-the-usestate-hook', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI/egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI.jpg', true, NULL, 'Kent: [0:00] Let''s start by making our form. Here we''ll have our div and then we''ll make a form. Then we''ll have a label with the name and our input and we''ll save that. We get that form.

[0:15] Then we''ll have this message, "Please type your name." Then we want to associate this label to this input so that it''s properly associated and you can tell that by clicking on the label. If it doesn''t focus the input, then it''s not properly labeled.

[0:30] Let''s add an ID to our input of name and an htmlFor of name. htmlFor is like the for attribute in HTML but in JSX you need to use htmlFor. That''s one of the few differences between JSX and regular HTML. Let''s save that, come back here. When I click on name, it now focuses the input. Great.

[0:53] Now, we''re going to have some state here for the name. If there is a name, then we''ll have it say strong, "Hello, Name!" Otherwise we''ll have it say, "Please type your name." Great. Then if we say Kent, save that. It will say, "Hello, Kent!" By default it doesn''t say anything.

[1:15] Now, let''s wire up an onchange handler for this input. We''ll call that handle change. I''ll bring that up here and say handle change is an arrow function that accepts an event and it needs to update the state of the name.

[1:30] We need to have some way to update that and we can''t simply say name = event.target.value. That''s not going to work because that won''t trigger a re-render and, even if it were to trigger a re-render, this whole function would be recalled. Then the name that we would be setting would get garbage collected and we''d create a new name variable.

[1:52] Instead, React has what''s called a React hook for maintaining state for a component. We''re going to use that with react.useState. We''ll pass it the default value of an empty string and react.useState returns an array, we''ll call this our state array, and we''ll get our name from state array at index zero and our set name from state array at index one.

[2:21] Here instead of trying to reassign that variable, we''ll call set name with the event target value. If we save that, now everything is working, but nobody wants to write their code like this every time they want to use state, so we''re going to destructure this to be name and set name. Then we can delete those lines and save that and it''s still working.

[2:48] Woo! React rocks! In review, to use state in a React function component, you use the useState hook from React. The useState hook accepts the initial value, so when this greeting component is initially rendered, that is going to be the value of our name variable.

[3:07] Any time we call this second element of the array, our updater function will trigger a re-render of this entire function component. When React useState is called again, it will ignore the initial value and instead give us the current value of that name.

[3:23] Because React keeps track of the order in which these are called, we could add a second one. Here we''ll call this name two and set name two. We''ll make another handle change to handle change two. We''ll have that call set name two. Then we''ll just duplicate all this stuff, put that inside of another div here, and then we''ll reference name two and name two. This will be handle change two.

[3:49] Now we can say Kent 1 and Kent 2. Those states are managed independently of one another because React keeps track of the order in which these are going to be called, allowing you to use state as much as you need for your component.

[4:05] The values in here can be anything. You can make it a Boolean or you can make it a number or you can make it an object or an array -- whatever makes sense for the state that you''re trying to manage.', NULL, false, '13-egghead-react-manage-state-in-a-react-component-with-the-usestate-hook.mp4', 11, true, false, 160, '---
mp4: 28555429
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI/egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI.mp4', 'egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI', 'zcjB', 'https://egghead-pipeline.s3.amazonaws.com/egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI/egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI.mp3?8a5d0f73bc480901?958c', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.730Z', NULL, 8388599, NULL, 7810, 0, NULL, -5717518, '2ff65e0ac13247ee91d64c1809391f26', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/12-state?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 393835948, '1
00:00:00,180 --> 00:00:01,920
Let''s start by making our form. 

2
00:00:02,170 --> 00:00:04,320
Here we''ll have our div and then 

3
00:00:04,320 --> 00:00:06,950
we''ll make a form. Then we''ll 

4
00:00:06,950 --> 00:00:11,470
have a label with the name and 

5
00:00:11,470 --> 00:00:13,590
our input and we''ll save that. 

6
00:00:13,760 --> 00:00:15,580
We get that form. Then we''ll 

7
00:00:15,580 --> 00:00:17,650
have this message, "Please type 

8
00:00:18,130 --> 00:00:19,620
your name." Then we want to 

9
00:00:19,670 --> 00:00:21,790
associate this label to this 

10
00:00:21,790 --> 00:00:23,080
input so that it''s properly 

11
00:00:23,080 --> 00:00:24,790
associated and you can tell that 

12
00:00:24,790 --> 00:00:27,180
by clicking on the label. If it 

13
00:00:27,180 --> 00:00:28,770
doesn''t focus the input, then 

14
00:00:28,770 --> 00:00:30,070
it''s not properly labeled. 

15
00:00:30,620 --> 00:00:33,400
Let''s add an ID to our input of 

16
00:00:33,400 --> 00:00:37,340
name and an htmlFor of name. 

17
00:00:38,260 --> 00:00:39,920
htmlFor is like the for 

18
00:00:39,920 --> 00:00:42,630
attribute in HTML but in JSX you 

19
00:00:42,630 --> 00:00:44,660
need to use htmlFor. That''s one 

20
00:00:44,660 --> 00:00:46,130
of the few differences between 

21
00:00:46,130 --> 00:00:48,650
JSX and regular HTML. Let''s save 

22
00:00:48,650 --> 00:00:50,120
that, come back here. When I 

23
00:00:50,120 --> 00:00:52,060
click on name, it now focuses 

24
00:00:52,060 --> 00:00:53,480
the input. Great. Now, we''re 

25
00:00:53,480 --> 00:00:55,020
going to have some state here 

26
00:00:55,020 --> 00:00:58,770
for the name. If there is a name, 

27
00:01:00,070 --> 00:01:01,940
then we''ll have it say strong, "

28
00:01:02,320 --> 00:01:06,330
Hello, Name!" Otherwise we''ll 

29
00:01:06,330 --> 00:01:07,760
have it say, "Please type your 

30
00:01:07,760 --> 00:01:09,540
name." Great. Then if we say 

31
00:01:10,020 --> 00:01:12,120
Kent, save that. It will say, "

32
00:01:12,120 --> 00:01:14,170
Hello, Kent!" By default it 

33
00:01:14,170 --> 00:01:15,470
doesn''t say anything. Now, 

34
00:01:15,470 --> 00:01:17,220
let''s wire up an onchange 

35
00:01:17,220 --> 00:01:19,130
handler for this input. We''ll 

36
00:01:19,130 --> 00:01:21,790
call that handle change. I''ll 

37
00:01:21,790 --> 00:01:23,940
bring that up here and say 

38
00:01:23,940 --> 00:01:25,660
handle change is an arrow 

39
00:01:25,660 --> 00:01:27,200
function that accepts an event 

40
00:01:27,750 --> 00:01:29,690
and it needs to update the state 

41
00:01:29,760 --> 00:01:31,300
of the name. We need to have 

42
00:01:31,300 --> 00:01:32,940
some way to update that and we 

43
00:01:32,940 --> 00:01:35,850
can''t simply say name = event.

44
00:01:36,080 --> 00:01:39,200
target.value. That''s not going 

45
00:01:39,200 --> 00:01:40,450
to work because that won''t 

46
00:01:40,450 --> 00:01:42,040
trigger a re-render and, even if 

47
00:01:42,040 --> 00:01:43,300
it were to trigger a re-render, 

48
00:01:43,480 --> 00:01:44,490
this whole function would be 

49
00:01:44,490 --> 00:01:47,240
recalled. Then the name that we 

50
00:01:47,240 --> 00:01:49,320
would be setting would get 

51
00:01:49,320 --> 00:01:50,640
garbage collected and we''d 

52
00:01:50,690 --> 00:01:52,250
create a new name variable. 

53
00:01:52,760 --> 00:01:54,970
Instead, React has what''s called 

54
00:01:55,040 --> 00:01:56,960
a React hook for maintaining 

55
00:01:56,960 --> 00:01:58,860
state for a component. We''re 

56
00:01:58,860 --> 00:02:00,780
going to use that with react.

57
00:02:01,210 --> 00:02:03,920
useState. We''ll pass it the 

58
00:02:03,920 --> 00:02:05,490
default value of an empty string 

59
00:02:05,730 --> 00:02:07,720
and react.useState returns an 

60
00:02:07,720 --> 00:02:10,220
array, we''ll call this our state 

61
00:02:10,520 --> 00:02:13,010
array, and we''ll get our name 

62
00:02:13,230 --> 00:02:15,780
from state array at index zero 

63
00:02:16,430 --> 00:02:19,090
and our set name from state 

64
00:02:19,440 --> 00:02:21,930
array at index one. Here 

65
00:02:22,640 --> 00:02:24,320
instead of trying to reassign 

66
00:02:24,320 --> 00:02:26,620
that variable, we''ll call set 

67
00:02:26,830 --> 00:02:29,440
name with the event target value. 

68
00:02:29,740 --> 00:02:32,740
If we save that, now everything 

69
00:02:32,890 --> 00:02:35,550
is working, but nobody wants to 

70
00:02:35,550 --> 00:02:37,200
write their code like this every 

71
00:02:37,200 --> 00:02:39,170
time they want to use state, so 

72
00:02:39,410 --> 00:02:40,790
we''re going to destructure this 

73
00:02:40,790 --> 00:02:43,310
to be name and set name. Then we 

74
00:02:43,310 --> 00:02:45,960
can delete those lines and save 

75
00:02:45,960 --> 00:02:47,840
that and it''s still working. 

76
00:02:48,380 --> 00:02:52,590
Woo! React rocks! In review, to 

77
00:02:52,590 --> 00:02:54,070
use state in a React function 

78
00:02:54,070 --> 00:02:56,920
component, you use the useState 

79
00:02:57,030 --> 00:02:59,300
hook from React. The useState 

80
00:02:59,330 --> 00:03:00,980
hook accepts the initial value, 

81
00:03:01,170 --> 00:03:02,650
so when this greeting component 

82
00:03:02,650 --> 00:03:04,430
is initially rendered, that is 

83
00:03:04,430 --> 00:03:05,920
going to be the value of our 

84
00:03:05,920 --> 00:03:08,560
name variable. Any time we call 

85
00:03:08,560 --> 00:03:10,290
this second element of the array, 

86
00:03:10,660 --> 00:03:12,250
our updater function will 

87
00:03:12,250 --> 00:03:13,900
trigger a re-render of this 

88
00:03:13,900 --> 00:03:15,940
entire function component. When 

89
00:03:15,940 --> 00:03:17,880
React useState is called again, 

90
00:03:18,250 --> 00:03:20,090
it will ignore the initial value 

91
00:03:20,410 --> 00:03:21,780
and instead give us the current 

92
00:03:21,780 --> 00:03:23,970
value of that name. Because 

93
00:03:23,970 --> 00:03:25,620
React keeps track of the order 

94
00:03:25,620 --> 00:03:27,040
in which these are called, we 

95
00:03:27,040 --> 00:03:28,970
could add a second one. Here 

96
00:03:28,970 --> 00:03:30,920
we''ll call this name two and set 

97
00:03:30,920 --> 00:03:32,770
name two. We''ll make another 

98
00:03:32,770 --> 00:03:34,480
handle change to handle change 

99
00:03:34,480 --> 00:03:36,710
two. We''ll have that call set 

100
00:03:36,710 --> 00:03:38,690
name two. Then we''ll just 

101
00:03:38,690 --> 00:03:40,710
duplicate all this stuff, put 

102
00:03:40,710 --> 00:03:42,200
that inside of another div here, 

103
00:03:42,580 --> 00:03:44,610
and then we''ll reference name 

104
00:03:44,610 --> 00:03:47,800
two and name two. This will be 

105
00:03:47,800 --> 00:03:50,410
handle change two. Now we can 

106
00:03:50,410 --> 00:03:55,050
say Kent 1 and Kent 2. Those 

107
00:03:55,050 --> 00:03:56,930
states are managed independently 

108
00:03:56,930 --> 00:03:58,640
of one another because React 

109
00:03:58,640 --> 00:03:59,760
keeps track of the order in 

110
00:03:59,760 --> 00:04:00,600
which these are going to be 

111
00:04:00,600 --> 00:04:02,130
called, allowing you to use 

112
00:04:02,130 --> 00:04:03,770
state as much as you need for 

113
00:04:03,770 --> 00:04:05,930
your component. The values in 

114
00:04:05,930 --> 00:04:07,300
here can be anything. You can 

115
00:04:07,300 --> 00:04:09,600
make it a Boolean or you can 

116
00:04:09,600 --> 00:04:11,470
make it a number or you can make 

117
00:04:11,470 --> 00:04:14,010
it an object or an array -- 

118
00:04:14,550 --> 00:04:15,720
whatever makes sense for the 

119
00:04:15,720 --> 00:04:16,580
state that you''re trying to 

120
00:04:16,655 --> 00:04:16,980
manage.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- An application that responds to user input is valuable, but what do we do with that data the user has given us? This is where the **component state** comes in.

- We need a place to put data that can change in our application, and we need to let React know when that state changes so it can update (or re-render) our app for us.

- In React, the state is associated with components and when the state changes, the component is updated.

- To get access to this state and to update it, we use what is called a **React Hook** which allows us to call into React from within our component and let it know that we need to manage some state.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function Greeting() {
      // useState - Returns a stateful value, and a function to update it.
      // During the initial render, the returned state (state) is the same
      // as the value passed as the first argument (initialState).
      const [name, setName] = React.useState('''');
      // The setState function is used to update the state.
      // It accepts a new state value and enqueues a re-render of the component.
      // During subsequent re-renders, the first value returned by useState
      // will always be the most recent state after applying updates.

      const handleChange = event => setName(event.target.value);
      return (
        <div>
          <form>
            {/* htmlFor is the same thing as For attribute in HTML */}
            <label htmlFor="name">Name: </label>
            <input onChange={handleChange} id="name" />
          </form>
          {name ? <strong>Hello {name}</strong> : ''Please type your name''}
        </div>
      );
    }

    ReactDOM.render(<Greeting />, document.getElementById(''root''));
  </script>
</body>
```

- In React, states are managed independently from each other. For example:

```js
const [name, setName] = React.useState('''');
const [name2, setName2] = React.useState('''');

const handleChange = event => setName(event.target.value);
const handleChange2 = event => setName(event.target.value);
// ...

<form>
  <label htmlFor="name">Name: </label>
  <input onChange={handleChange} id="name" />
</form>;

<form>
  <label htmlFor="name">Name: </label>
  <input onChange={handleChange2} id="name" />
</form>;

// ...
```

- The state can be any type you want ‚Äì you can `useState` with an array, `useState` an object, a number, a boolean, a string, whatever you need.

## Additional resource

- [Kent''s Blog - React Hooks: Array Destructuring Fundamentals](https://kentcdodds.com/blog/react-hooks-array-destructuring-fundamentals)
- [Kent''s Blog - 5 Tips to Help You Avoid React Hooks Pitfalls](https://kentcdodds.com/blog/react-hooks-pitfalls)
- [Kent''s Blog - React Hooks: Compound Components](https://kentcdodds.com/blog/compound-components-with-react-hooks)
- [React Docs - Hooks at a Glance](https://reactjs.org/docs/hooks-overview.html)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'f62d6a85', 'https://d2c5owlt6rorc3.cloudfront.net/egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI/dash/egghead-v2-12-manage-state-in-a-react-component-with-the-usestate-hook-SkTC-FLSI.mpd', 'https://stream.mux.com/Jalf639w9E4oqHvTSLJX3dHg9J2201YLLqPFH1b5jS4E.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/12-react-manage-state-in-a-react-component-with-the-usestate-hook.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6257, 'Manage side-effects in a React Component with the useEffect hook
', NULL, 'Another piece to the web application puzzle is managing side-effects of our user‚Äôs interactions. In this lesson we‚Äôll be interacting with the browser‚Äôs `localStorage` API, but this same thing would apply if we‚Äôre interacting with a backend server, or the geolocation API, or anything else that needs to happen when the state of our component changes.

You‚Äôll learn how to use React‚Äôs `useEffect` hook to manage the side-effect of saving state into `localStorage`, and also how to re-synchronize our application with the stored value in `localStorage`. [Learn more about viewing `localStorage` in the Chrome DevTools](https://developers.google.com/web/tools/chrome-devtools/storage/localstorage).', 169, NULL, '2020-03-11T02:40:16.441Z', '2025-12-13T00:54:53.678Z', 'react-manage-side-effects-in-a-react-component-with-the-useeffect-hook', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU/egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU.jpg', true, NULL, 'Instructor: [0:00] I want to be able to type in here some value and have that saved in localStorage so that when I refresh the page, that value will be retrieved from localStorage and be loaded into the input. 

[0:11] This is called a side effect, and in react, to do this, you use react useEffect. This is another hook, like useState. This function will be called every time the greeting component is rendered. 

[0:23] Anytime the greeting component is rendered, we''re going to say window.localStorage.setItem -- we''ll call it name in localStorage, and we''ll set it to the value of name. If we save that, and then open our dev tools and in the application tab here, we can go to localStorage, and we''ll see that there''s nothing in there. 

[0:45] Then we can type a name, and we''ll see that the name gets updated in localStorage with whatever the current value for that name variable is. 

[0:54] You''ll notice that if I refresh here, I''m not getting that name value loaded into my input, and the value in localStorage is getting cleared. This is because we initialize our state to an empty string, and we don''t take the localStorage value into account. 

[1:09] Then, because we''ve rendered, we run this callback, updating the localStorage item for name to that new empty string name. We need to initialize that value to whatever''s in localStorage if it''s there, and an empty string if it''s not. 

[1:23] Here we''ll say window.localStorage.getItem(name), and if that returns null because there''s nothing in there, then we''ll default that to an empty string. We save that. We type a name. We hit refresh, and we notice that the value in localStorage is still consistent. 

[1:43] We notice the value right here is correct, but the name input does not have the name in there. We need to specify what the value for the input should be. We specify a value of name.

[1:57] Now when we save this, we''ll get a refresh, and now the value is the same value that''s in localStorage and in memory for the state of our react component. We''ll notice that as we change this and refresh, we always get that value from localStorage, and we keep that value updated in localStorage as well. 

[2:16] In review, to make all this work, we first used react useEffect to set the name value in localStorage to the name value in our state in memory. Then, to have our state in memory be initialized from localStorage, we used Window.localStorage.getItem(name), and if there is nothing in there, then we''ll initialize it to an empty string as a default. 

[2:37] Then, to make sure that the input is showing the same value for the name as a name in memory, we specified a value prop, changing this input from an uncontrolled to a controlled input. ', NULL, false, '14-egghead-react-manage-side-effects-in-a-react-component-with-the-useeffect-hook.mp4', 11, true, false, 160, '---
mp4: 20409189
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU/egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU.mp4', 'egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU', 'zckP', 'https://egghead-pipeline.s3.amazonaws.com/egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU/egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU.mp3?855acae566074e46?fbd8', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.094Z', NULL, 8388599, NULL, 7811, 0, NULL, -5337211, 'acd591556cca4dbf909e83476094add2', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/13-side-effects?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 394506304, '1
00:00:00,080 --> 00:00:01,200
I want to be able to type in 

2
00:00:01,200 --> 00:00:02,880
here some value and have that 

3
00:00:02,880 --> 00:00:04,630
saved in localStorage so that 

4
00:00:04,630 --> 00:00:06,340
when I refresh the page, that 

5
00:00:06,340 --> 00:00:07,680
value will be retrieved from 

6
00:00:07,680 --> 00:00:09,840
localStorage and be loaded into 

7
00:00:09,840 --> 00:00:11,520
the input. This is called a 

8
00:00:11,520 --> 00:00:13,410
side effect, and in react, to do 

9
00:00:13,410 --> 00:00:16,100
this, you use react useEffect. 

10
00:00:16,500 --> 00:00:17,670
This is another hook, like 

11
00:00:17,670 --> 00:00:19,710
useState. This function will be 

12
00:00:19,710 --> 00:00:21,210
called every time the greeting 

13
00:00:21,210 --> 00:00:22,250
component is rendered. 

14
00:00:23,150 --> 00:00:24,360
Anytime the greeting component 

15
00:00:24,360 --> 00:00:25,480
is rendered, we''re going to say 

16
00:00:25,480 --> 00:00:29,740
window.localStorage.setItem -- 

17
00:00:30,580 --> 00:00:31,920
we''ll call it name in 

18
00:00:31,920 --> 00:00:33,950
localStorage, and we''ll set it 

19
00:00:33,950 --> 00:00:36,090
to the value of name. If we save 

20
00:00:36,090 --> 00:00:37,940
that, and then open our dev 

21
00:00:37,940 --> 00:00:40,010
tools and in the application tab 

22
00:00:40,010 --> 00:00:41,860
here, we can go to localStorage, 

23
00:00:42,830 --> 00:00:44,070
and we''ll see that there''s 

24
00:00:44,070 --> 00:00:45,650
nothing in there. Then we 

25
00:00:45,650 --> 00:00:48,190
can type a name, and we''ll see 

26
00:00:48,190 --> 00:00:49,900
that the name gets updated in 

27
00:00:49,900 --> 00:00:51,330
localStorage with whatever the 

28
00:00:51,330 --> 00:00:53,190
current value for that name 

29
00:00:53,190 --> 00:00:54,980
variable is. You''ll notice 

30
00:00:54,980 --> 00:00:56,860
that if I refresh here, I''m not 

31
00:00:56,860 --> 00:00:58,890
getting that name value loaded 

32
00:00:58,890 --> 00:01:01,170
into my input, and the value in 

33
00:01:01,170 --> 00:01:02,630
localStorage is getting cleared. 

34
00:01:03,140 --> 00:01:04,810
This is because we initialize 

35
00:01:04,810 --> 00:01:06,520
our state to an empty string, 

36
00:01:06,520 --> 00:01:07,750
and we don''t take the 

37
00:01:07,750 --> 00:01:09,410
localStorage value into account. 

38
00:01:09,860 --> 00:01:11,540
Then, because we''ve rendered, we 

39
00:01:11,540 --> 00:01:13,040
run this callback, updating the 

40
00:01:13,040 --> 00:01:15,160
localStorage item for name to 

41
00:01:15,160 --> 00:01:17,360
that new empty string name. We 

42
00:01:17,360 --> 00:01:19,150
need to initialize that value to 

43
00:01:19,150 --> 00:01:20,530
whatever''s in localStorage if 

44
00:01:20,530 --> 00:01:22,690
it''s there, and an empty string 

45
00:01:22,770 --> 00:01:24,520
if it''s not. Here we''ll say 

46
00:01:24,520 --> 00:01:28,160
window.localStorage.getItem(

47
00:01:28,620 --> 00:01:30,960
name), and if that returns null 

48
00:01:30,960 --> 00:01:32,120
because there''s nothing in there, 

49
00:01:32,200 --> 00:01:33,640
then we''ll default that to an 

50
00:01:33,640 --> 00:01:36,450
empty string. We save that. We 

51
00:01:36,450 --> 00:01:40,030
type a name. We hit refresh, and 

52
00:01:40,030 --> 00:01:41,530
we notice that the value in 

53
00:01:41,530 --> 00:01:43,220
localStorage is still consistent. 

54
00:01:43,520 --> 00:01:45,110
We notice the value right here 

55
00:01:45,130 --> 00:01:47,600
is correct, but the name input 

56
00:01:47,730 --> 00:01:49,690
does not have the name in there. 

57
00:01:50,250 --> 00:01:51,560
We need to specify what the 

58
00:01:51,560 --> 00:01:53,320
value for the input should be. 

59
00:01:53,900 --> 00:01:56,630
We specify a value of name. 

60
00:01:57,170 --> 00:01:58,680
Now when we save this, we''ll get 

61
00:01:58,680 --> 00:02:01,110
a refresh, and now the value is 

62
00:02:01,110 --> 00:02:02,330
the same value that''s in 

63
00:02:02,330 --> 00:02:05,000
localStorage and in memory for 

64
00:02:05,000 --> 00:02:06,260
the state of our react component. 

65
00:02:06,620 --> 00:02:07,920
We''ll notice that as we change 

66
00:02:07,920 --> 00:02:10,990
this and refresh, we always get 

67
00:02:10,990 --> 00:02:12,600
that value from localStorage, 

68
00:02:12,860 --> 00:02:14,470
and we keep that value updated 

69
00:02:14,860 --> 00:02:16,580
in localStorage as well. In 

70
00:02:16,580 --> 00:02:17,770
review, to make all this work, 

71
00:02:17,770 --> 00:02:20,680
we first used react useEffect to 

72
00:02:20,680 --> 00:02:22,770
set the name value in 

73
00:02:22,770 --> 00:02:25,000
localStorage to the name value 

74
00:02:25,000 --> 00:02:27,400
in our state in memory. Then, to 

75
00:02:27,400 --> 00:02:28,650
have our state in memory be 

76
00:02:28,650 --> 00:02:30,060
initialized from localStorage, 

77
00:02:30,380 --> 00:02:32,010
we used Window.localStorage.

78
00:02:32,010 --> 00:02:34,220
getItem(name), and if there is 

79
00:02:34,220 --> 00:02:35,200
nothing in there, then we''ll 

80
00:02:35,200 --> 00:02:36,650
initialize it to an empty string 

81
00:02:36,740 --> 00:02:38,260
as a default. Then, to make 

82
00:02:38,260 --> 00:02:39,660
sure that the input is showing 

83
00:02:39,660 --> 00:02:41,930
the same value for the name as a 

84
00:02:41,930 --> 00:02:44,560
name in memory, we specified a 

85
00:02:44,560 --> 00:02:46,460
value prop, changing this input 

86
00:02:46,690 --> 00:02:48,030
from an uncontrolled to a 

87
00:02:48,030 --> 00:02:48,920
controlled input. 

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Another piece to the web application puzzle is managing side-effects of our user‚Äôs interactions.

- In this lesson we‚Äôll be interacting with the browser‚Äôs **localStorage API**, but this same thing would apply if we‚Äôre interacting with a backend server, or the geolocation API, or anything else that needs to happen when the state of our component changes.

- You‚Äôll learn how to use **React‚Äôs useEffect hook** to manage the side-effect of saving state into localStorage, and also how to re-synchronize our application with the stored value in localStorage.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function Greeting() {
      // using useState
      const [name, setName] = React.useState(
        // we are getting the name from localStorage or default to empty string
        window.localStorage.getItem(''name'') || ''''
      );

      // The Effect Hook lets you perform side effects in function components
      // Load every time the Greeting() is rendered
      React.useEffect(() => {
        // The read-only localStorage property allows you to access a Storage object for the
        // document''s origin; the stored data is saved across browser sessions.
        window.localStorage.setItem(''name'', name);
      });

      const handleChange = event => setName(event.target.value);

      return (
        <div>
          <form>
            <label htmlFor="name">Name: </label>
            {/* showing the current state of name prop */}
            <input value={name} onChange={handleChange} id="name" />
          </form>
          {name ? <strong>Hello {name}</strong> : ''Please type your name''}
        </div>
      );
    }

    ReactDOM.render(<Greeting />, document.getElementById(''root''));
  </script>
</body>
```

## Additional resource

- [React Docs - useEffect hook](https://reactjs.org/docs/hooks-effect.html)
- [React Docs - API reference](https://reactjs.org/docs/hooks-reference.html#useeffect)
- [Kent''s Blog - useEffect vs useLayoutEffect](https://kentcdodds.com/blog/useeffect-vs-uselayouteffect)
- [MDN - Window.localStorage docs](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '3390d858', 'https://d2c5owlt6rorc3.cloudfront.net/egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU/dash/egghead-v2-13-manage-side-effects-in-a-react-component-with-the-useeffect-hook-HJekfKLSU.mpd', 'https://stream.mux.com/YEeFnYU1i20201wyPcoGTHO44a9skFRAdoOhfMEInCHjo.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/13-react-manage-side-effects-in-a-react-component-with-the-useeffect-hook.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6258, 'Use a lazy initializer with useState', NULL, 'Something that‚Äôs important to recognize is that every time you call the state updater function (like the `setName` function in our component), that will trigger a re-render of the component that manages that state (the `Greeting` component in our example). This is exactly what we _want_ to have happen, but it _can_ be a problem in some situations and there are some optimizations we can apply for `useState` specifically in the event that it is a problem.

In our case, we‚Äôre reading into `localStorage` to initialize our state value for the first render of our `Greeting` component. But after that first render, we don‚Äôt need to read into `localStorage` anymore because we‚Äôre managing that state in memory now (specifically in that `name` variable that React gives us each render). So reading into `localStorage` every render after the first one is unnecessary. So React allows us to specify a function instead of an actual value, and then it will only call that function when it needs to‚Äìon the initial render.

In this lesson, I‚Äôll show you how to do this and demonstrate how it works.', 140, NULL, '2020-03-11T02:40:40.365Z', '2025-12-13T00:54:53.678Z', 'react-use-a-lazy-initializer-with-usestate', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-use-a-lazy-initializer-with-usestate-u5t7pee93/react-use-a-lazy-initializer-with-usestate-u5t7pee93.jpg', true, NULL, 'Kent C. Dodds: [0:00] One thing that''s important to know about the useState Hook is that the initial value you provide here is really important for the initial render of our component, but then it''s ignored for renders of our component thereafter.

[0:11] That''s normally not a problem, especially if you have just an empty string here, but here we''re reading into localStorage every time our greeting component is re-rendered. We can add a console.log(''rendered'') right here to see how often that is.

[0:26] We open up our console and we''ll see that we already have a rendered here for our initial render of the greeting component. As we type, we get a render every time we type a character. We only need it to read into localStorage for the initialization of our state. We don''t need to have it read into localStorage for every single time we re-render.

[0:47] This isn''t really a huge deal here because reading into localStorage is pretty fast and we''re not parsing anything, but if we were parsing a big JSON object, then this could be a problem.

[0:59] To combat this, React.useState has a lazy initialization feature. You can provide a function as the initial value, and that function will be called to retrieve the initial value. That function will only be called when it''s absolutely necessary to retrieve the initial value.

[1:15] If we turn this into an arrow function, which simply returns that initial value, then we save this, we''ll notice that we''re still getting our renders, but this function is not getting called, except on the initial value retrieval.

[1:30] We can prove this by making this a multiline arrow function, returning that value and console.log(''hello'') in here. Now we get that hello, and then we get that rendered, and that''s an important note, is that this function is called synchronously, and it''s expected to be synchronous.

[1:51] As we type hello, you''ll see that we do not get that console.log(''hello''). We save ourselves the expense of reading into local storage on every render.

[2:03] In review, the problem that we''re solving here is that reading into localStorage is not necessary, except for the initial render of our component. We turn our initial value argument here into a function so that React will call it only when it''s necessary to get that initial value, which is only on the first render.', NULL, false, '15-egghead-react-use-a-lazy-initializer-with-usestate.mp4', 11, true, false, 160, '---
mp4: 16849668
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-use-a-lazy-initializer-with-usestate-u5t7pee93/react-use-a-lazy-initializer-with-usestate-u5t7pee93.mp4', 'react-use-a-lazy-initializer-with-usestate-u5t7pee93', 'zcKi', 'https://egghead-pipeline.s3.amazonaws.com/react-use-a-lazy-initializer-with-usestate-u5t7pee93/react-use-a-lazy-initializer-with-usestate-u5t7pee93.mp3?bd41ed404f5a5d6b?562e', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.115Z', NULL, 8388599, NULL, 8165, 0, NULL, -4956407, '3fac2856a2e04b969ceebc260a5cbd60', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/14-lazy-initialization?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 395176660, '1
00:00:00,180 --> 00:00:01,100
One thing that''s important to 

2
00:00:01,100 --> 00:00:02,960
know about the useState Hook is 

3
00:00:02,960 --> 00:00:04,080
that the initial value you 

4
00:00:04,080 --> 00:00:05,870
provide here is really important 

5
00:00:06,120 --> 00:00:07,370
for the initial render of our 

6
00:00:07,370 --> 00:00:09,330
component, but then it''s ignored 

7
00:00:09,420 --> 00:00:10,970
for renders of our component 

8
00:00:10,970 --> 00:00:12,780
thereafter. That''s normally not 

9
00:00:12,780 --> 00:00:13,910
a problem, especially if you 

10
00:00:13,910 --> 00:00:15,350
have just an empty string here, 

11
00:00:15,890 --> 00:00:17,100
but here we''re reading into 

12
00:00:17,100 --> 00:00:18,380
localStorage every time our 

13
00:00:18,380 --> 00:00:19,320
greeting component is re-

14
00:00:19,320 --> 00:00:21,790
rendered. We can add a console.

15
00:00:21,790 --> 00:00:24,620
log(''rendered'') right here to 

16
00:00:24,620 --> 00:00:27,010
see how often that is. We open 

17
00:00:27,010 --> 00:00:28,560
up our console and we''ll see 

18
00:00:28,560 --> 00:00:30,240
that we already have a rendered 

19
00:00:30,240 --> 00:00:31,900
here for our initial render of 

20
00:00:31,900 --> 00:00:35,320
the greeting component. As we 

21
00:00:35,430 --> 00:00:38,040
type, we get a render every time 

22
00:00:38,040 --> 00:00:39,890
we type a character. We only 

23
00:00:39,890 --> 00:00:40,800
need it to read into 

24
00:00:40,800 --> 00:00:41,950
localStorage for the 

25
00:00:41,950 --> 00:00:43,720
initialization of our state. We 

26
00:00:43,720 --> 00:00:44,960
don''t need to have it read into 

27
00:00:44,960 --> 00:00:46,450
localStorage for every single 

28
00:00:46,450 --> 00:00:48,490
time we re-render. This isn''t 

29
00:00:48,490 --> 00:00:50,660
really a huge deal here because 

30
00:00:50,660 --> 00:00:51,920
reading into localStorage is 

31
00:00:51,920 --> 00:00:53,390
pretty fast and we''re not 

32
00:00:53,390 --> 00:00:55,320
parsing anything, but if we were 

33
00:00:55,320 --> 00:00:57,450
parsing a big JSON object, then 

34
00:00:57,450 --> 00:00:59,180
this could be a problem. To 

35
00:00:59,180 --> 00:01:01,770
combat this, React.useState has 

36
00:01:01,830 --> 00:01:03,760
a lazy initialization feature. 

37
00:01:04,190 --> 00:01:05,730
You can provide a function as 

38
00:01:05,730 --> 00:01:07,170
the initial value, and that 

39
00:01:07,170 --> 00:01:08,590
function will be called to 

40
00:01:08,590 --> 00:01:11,110
retrieve the initial value. That 

41
00:01:11,110 --> 00:01:12,300
function will only be called 

42
00:01:12,300 --> 00:01:13,650
when it''s absolutely necessary 

43
00:01:13,650 --> 00:01:14,960
to retrieve the initial value. 

44
00:01:15,740 --> 00:01:17,000
If we turn this into an arrow 

45
00:01:17,000 --> 00:01:19,660
function, which simply returns 

46
00:01:19,660 --> 00:01:21,460
that initial value, then we save 

47
00:01:21,460 --> 00:01:22,970
this, we''ll notice that we''re 

48
00:01:22,970 --> 00:01:25,890
still getting our renders, but 

49
00:01:25,890 --> 00:01:27,240
this function is not getting 

50
00:01:27,240 --> 00:01:28,810
called, except on the initial 

51
00:01:28,810 --> 00:01:31,220
value retrieval. We can prove 

52
00:01:31,220 --> 00:01:33,390
this by making this a multiline 

53
00:01:33,390 --> 00:01:35,310
arrow function, returning that 

54
00:01:35,310 --> 00:01:38,890
value and console.log(''hello'') 

55
00:01:39,220 --> 00:01:42,350
in here. Now we get that hello, 

56
00:01:42,900 --> 00:01:43,950
and then we get that rendered, 

57
00:01:44,630 --> 00:01:45,990
and that''s an important note, is 

58
00:01:45,990 --> 00:01:47,430
that this function is called 

59
00:01:47,430 --> 00:01:49,440
synchronously, and it''s expected 

60
00:01:49,440 --> 00:01:52,050
to be synchronous. As we type 

61
00:01:53,190 --> 00:01:55,560
hello, you''ll see that we do not 

62
00:01:55,560 --> 00:01:57,980
get that console.log(''hello''). 

63
00:01:58,550 --> 00:02:00,380
We save ourselves the expense of 

64
00:02:00,380 --> 00:02:02,010
reading into local storage on 

65
00:02:02,010 --> 00:02:03,910
every render. In review, the 

66
00:02:03,910 --> 00:02:05,260
problem that we''re solving here 

67
00:02:05,300 --> 00:02:06,150
is that reading into 

68
00:02:06,150 --> 00:02:08,380
localStorage is not necessary, 

69
00:02:08,400 --> 00:02:10,310
except for the initial render of 

70
00:02:10,310 --> 00:02:12,160
our component. We turn our 

71
00:02:12,160 --> 00:02:14,230
initial value argument here into 

72
00:02:14,230 --> 00:02:15,810
a function so that React will 

73
00:02:15,810 --> 00:02:17,390
call it only when it''s necessary 

74
00:02:17,390 --> 00:02:19,080
to get that initial value, which 

75
00:02:19,080 --> 00:02:20,260
is only on the first render.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Something it''s important to recognize is that every time you call the state updater function, that will trigger a re-render of the component that manages that state (the Greeting component in our example).
- This is exactly what we want to have happen, but it can be a problem in some situations and there are some optimizations we can apply for `useState` specifically in the event that it is a problem.

- In our case, we‚Äôre reading into `localStorage` to initialize our state value for the first render of our Greeting component.

- After that first render, we don‚Äôt need to read into localStorage anymore because we‚Äôre managing that state in memory now.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function Greeting() {
      const [name, setName] = React.useState(
        // Arrow function
        //  React allows us to specify a function instead of an actual value, and then it will only call that function when it needs to ‚Äì on the initial render.
        () => window.localStorage.getItem(''name'') || ''''
      );

      // We don''t want to render on every change
      // Since we''re using localStorage, it''s not a big deal

      React.useEffect(() => {
        window.localStorage.setItem(''name'', name);
      });

      const handleChange = event => setName(event.target.value);

      return (
        <div>
          <form>
            <label htmlFor="name">Name: </label>
            <input value={name} onChange={handleChange} id="name" />
          </form>
          {name ? <strong>Hello {name}</strong> : ''Please type your name''}
        </div>
      );
    }

    ReactDOM.render(<Greeting />, document.getElementById(''root''));
  </script>
</body>
```

## Additional resource

- [Kent''s Blog - How to implement useState with useReducer](https://kentcdodds.com/blog/how-to-implement-usestate-with-usereducer)
- [React Docs - Effects Without Cleanup](https://reactjs.org/docs/hooks-effect.html#effects-without-cleanup)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'cd4765cd', 'https://d2c5owlt6rorc3.cloudfront.net/react-use-a-lazy-initializer-with-usestate-u5t7pee93/dash/react-use-a-lazy-initializer-with-usestate-u5t7pee93.mpd', 'https://stream.mux.com/mOOwtDPt2zERU02Bj9S00VHnzgbzRT701VAwu2SeE01nsNk.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/14-react-use-a-lazy-initializer-with-usestate.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6259, 'Manage the useEffect dependency array', NULL, 'Something that‚Äôs really important to know about React‚Äôs `useEffect` hook is that it _eagerly_ attempts to synchronize the ‚Äústate of the world‚Äù with the state of your application. That means that your effect callback will run every time your component is rendered. This normally won‚Äôt lead to bugs (in fact, it does a great job at preventing bugs that plagued React apps before `useEffect` was available), but it can definitely be sub-optimal (and in some cases can result in an infinite loop).

In this lesson we‚Äôll observe that our effect callback is getting called more than it needs to be, and you‚Äôll learn how to add a dependency array so it is updated only when the state it relies on changes. And in real applications, you‚Äôll want to make sure you have and follow the rules from the [ESLint](https://eslint.org/) plugin: [eslint-plugin-react-hooks](https://www.npmjs.com/package/eslint-plugin-react-hooks) (many tools like Create React App have this installed and configured by default).', 229, NULL, '2020-03-11T02:41:04.598Z', '2025-12-13T00:54:53.678Z', 'react-manage-the-useeffect-dependency-array', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-manage-the-useeffect-dependency-array-kZkweyx1H/react-manage-the-useeffect-dependency-array-kZkweyx1H.jpg', true, NULL, 'Kent C. Dodds: [0:00] We''ve added a little bit here to simulate another optimization that we want to make. Here now we have a count state, and that''s just being rendered into this button. Every time we click on the button, it re-renders our app component, which triggers a re-render of our greeting component.

[0:16] Every time our greeting component re-renders, this useEffect is going to be called. If we console.log(''greeting useEffect''), we''ll save that. Open up our DevTools. We see we get the greeting useEffect for the initial render. Every time I click this, we''ll get another greeting useEffect.

[0:35] The effect that we''re running is updating localStorage to set the name to the name value. This side effect doesn''t need to be run because the name value hasn''t changed.

[0:46] We only need to synchronize the localStorage value with the name value that we have in memory for the state of this component.

[0:54] React useEffect accepts a second argument as an optimization to combat this problem. That second argument is a dependency array where you pass all the dependencies for your side effect. This is where you pass anything that you want to make sure you synchronize the state of the world with the state of our application.

[1:13] In our case, the only thing that we''re trying to synchronize here is the state of localStorage, which is the state of the world, with the state of our application, which is the name. For our dependency array, we''re going to provide the name.

[1:27] If we save that, then we''ll notice that we get that greeting useEffect called initially, and that''s because useEffect is always going to be called on the initial mount. Hereafter, when we click on this button, we''re not going to get the greeting useEffect.

[1:44] Then when we update the name value, we''re going to get greeting useEffect called because the name has changed, and the state of the world is now out of sync with the state of our application. React is going to call our useEffect callback.

[1:58] It''s very important that you keep this dependency array accurate according to the dependencies that your callback function relies on. For example, we rely on name. That''s why it''s important that we keep this dependency list in here.

[2:11] If you don''t keep this list accurate, then you could be missing out on synchronizing the state of the world with state changes that happen in your app, and your users could lose saved work.

[2:21] For example, if I were to remove the name from this array and save that, then we''ll get that greeting useEffect called. As I type in here, we''ll notice that the state of my application is being kept updated, but I''m not getting any console.logs.

[2:37] If I refresh, I''m going to be back to where I was before. I, as the user of this application, have lost work, because my code was not properly synchronizing the state of my application with the state of the world outside my application.

[2:51] In an effort to help you avoid making mistakes here, the React team has created an ESLint plugin called eslint-plugin-react-hooks which you can use to not only ensure that the dependency array is kept up-to-date, but keep it up-to-date automatically for you using ESLint''s fix feature.

[3:09] The rule that will help you with this is the exhaustive-deps rule, and I strongly advise that you use this tool and follow that rule.

[3:17] In review, the problem that we were solving here is our effect callback was being called more than it needed to be. I want to make a special note here, that just because it was being called more than it needed to be didn''t mean we had a bug in our application, so this is just an optimization to make our application run a little faster.

[3:35] A dependency array may not be necessary in all cases, but in our case, we could simply add this dependency array with the one dependency that our effect callback relied on. This callback is only called when necessary.', NULL, false, '16-egghead-react-manage-the-useeffect-dependency-array.mp4', 11, true, false, 160, '---
mp4: 27101716
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-manage-the-useeffect-dependency-array-kZkweyx1H/react-manage-the-useeffect-dependency-array-kZkweyx1H.mp4', 'react-manage-the-useeffect-dependency-array-kZkweyx1H', 'zcKe', 'https://egghead-pipeline.s3.amazonaws.com/react-manage-the-useeffect-dependency-array-kZkweyx1H/react-manage-the-useeffect-dependency-array-kZkweyx1H.mp3?336bc075a88ca3f4?72ea', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.376Z', NULL, 8388599, NULL, 8166, 0, NULL, -4575355, 'b830485258124e799f553b184d07a192', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/15-effect-deps?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 395847016, '1
00:00:00,150 --> 00:00:01,460
We''ve added a little bit here to 

2
00:00:01,460 --> 00:00:03,160
simulate another optimization 

3
00:00:03,160 --> 00:00:04,820
that we want to make. Here now 

4
00:00:04,820 --> 00:00:06,480
we have a count state, and 

5
00:00:06,480 --> 00:00:07,760
that''s just being rendered into 

6
00:00:07,760 --> 00:00:09,480
this button. Every time we click 

7
00:00:09,480 --> 00:00:11,910
on the button, it re-renders our 

8
00:00:11,940 --> 00:00:13,780
app component, which triggers a 

9
00:00:13,780 --> 00:00:15,240
re-render of our greeting 

10
00:00:15,240 --> 00:00:16,930
component. Every time our 

11
00:00:16,930 --> 00:00:18,330
greeting component re-renders, 

12
00:00:18,450 --> 00:00:19,630
this useEffect is going to be 

13
00:00:19,630 --> 00:00:21,780
called. If we console.log(''

14
00:00:23,730 --> 00:00:26,880
greeting useEffect''), we''ll save 

15
00:00:26,880 --> 00:00:29,590
that. Open up our DevTools. We 

16
00:00:29,590 --> 00:00:30,470
see we get the greeting 

17
00:00:30,470 --> 00:00:32,050
useEffect for the initial render. 

18
00:00:32,930 --> 00:00:34,080
Every time I click this, we''ll 

19
00:00:34,080 --> 00:00:35,530
get another greeting useEffect. 

20
00:00:35,910 --> 00:00:37,680
The effect that we''re running is 

21
00:00:37,680 --> 00:00:39,340
updating localStorage to set the 

22
00:00:39,340 --> 00:00:41,520
name to the name value. This 

23
00:00:41,800 --> 00:00:43,630
side effect doesn''t need to be 

24
00:00:43,630 --> 00:00:45,520
run because the name value 

25
00:00:45,520 --> 00:00:47,600
hasn''t changed. We only need to 

26
00:00:47,600 --> 00:00:49,120
synchronize the localStorage 

27
00:00:49,120 --> 00:00:51,180
value with the name value that 

28
00:00:51,180 --> 00:00:52,820
we have in memory for the state 

29
00:00:52,820 --> 00:00:54,750
of this component. React 

30
00:00:54,750 --> 00:00:56,640
useEffect accepts a second 

31
00:00:56,640 --> 00:00:58,730
argument as an optimization to 

32
00:00:58,730 --> 00:01:00,400
combat this problem. That second 

33
00:01:00,400 --> 00:01:02,160
argument is a dependency array 

34
00:01:02,370 --> 00:01:03,220
where you pass all the 

35
00:01:03,220 --> 00:01:05,130
dependencies for your side 

36
00:01:05,130 --> 00:01:06,630
effect. This is where you pass 

37
00:01:06,700 --> 00:01:07,860
anything that you want to make 

38
00:01:07,860 --> 00:01:09,280
sure you synchronize the state 

39
00:01:09,350 --> 00:01:11,340
of the world with the state of 

40
00:01:11,340 --> 00:01:14,120
our application. In our case, 

41
00:01:14,260 --> 00:01:15,250
the only thing that we''re trying 

42
00:01:15,250 --> 00:01:17,150
to synchronize here is the state 

43
00:01:17,190 --> 00:01:18,440
of localStorage, which is the 

44
00:01:18,440 --> 00:01:20,000
state of the world, with the 

45
00:01:20,000 --> 00:01:21,560
state of our application, which 

46
00:01:21,560 --> 00:01:24,870
is the name. For our dependency 

47
00:01:24,870 --> 00:01:26,160
array, we''re going to provide 

48
00:01:26,160 --> 00:01:29,860
the name. If we save that, then 

49
00:01:29,860 --> 00:01:31,530
we''ll notice that we get that 

50
00:01:31,530 --> 00:01:33,050
greeting useEffect called 

51
00:01:33,050 --> 00:01:34,730
initially, and that''s because 

52
00:01:34,730 --> 00:01:36,160
useEffect is always going to be 

53
00:01:36,160 --> 00:01:38,070
called on the initial mount. 

54
00:01:38,070 --> 00:01:39,900
Hereafter, when we click on this 

55
00:01:39,900 --> 00:01:41,600
button, we''re not going to get 

56
00:01:41,740 --> 00:01:44,440
the greeting useEffect. Then 

57
00:01:44,440 --> 00:01:46,740
when we update the name value, 

58
00:01:47,190 --> 00:01:48,120
we''re going to get greeting 

59
00:01:48,120 --> 00:01:49,820
useEffect called because the 

60
00:01:49,820 --> 00:01:51,490
name has changed, and the state 

61
00:01:51,490 --> 00:01:52,980
of the world is now out of sync 

62
00:01:53,030 --> 00:01:53,730
with the state of our 

63
00:01:53,730 --> 00:01:55,770
application. React is going to 

64
00:01:55,770 --> 00:01:57,610
call our useEffect callback. 

65
00:01:58,230 --> 00:01:59,470
It''s very important that you 

66
00:01:59,470 --> 00:02:00,820
keep this dependency array 

67
00:02:00,860 --> 00:02:02,500
accurate according to the 

68
00:02:02,500 --> 00:02:04,230
dependencies that your callback 

69
00:02:04,230 --> 00:02:06,530
function relies on. For example, 

70
00:02:06,710 --> 00:02:08,560
we rely on name. That''s why it''s 

71
00:02:08,560 --> 00:02:09,850
important that we keep this 

72
00:02:09,850 --> 00:02:11,920
dependency list in here. If you 

73
00:02:11,920 --> 00:02:13,450
don''t keep this list accurate, 

74
00:02:13,890 --> 00:02:15,390
then you could be missing out on 

75
00:02:15,390 --> 00:02:16,610
synchronizing the state of the 

76
00:02:16,610 --> 00:02:17,970
world with state changes that 

77
00:02:17,970 --> 00:02:19,800
happen in your app, and your 

78
00:02:19,800 --> 00:02:21,120
users could lose saved work. 

79
00:02:21,500 --> 00:02:23,230
For example, if I were to remove 

80
00:02:23,230 --> 00:02:25,000
the name from this array and 

81
00:02:25,000 --> 00:02:26,860
save that, then we''ll get that 

82
00:02:26,860 --> 00:02:29,380
greeting useEffect called. As I 

83
00:02:29,500 --> 00:02:31,800
type in here, we''ll notice that 

84
00:02:31,800 --> 00:02:33,350
the state of my application is 

85
00:02:33,350 --> 00:02:35,210
being kept updated, but I''m not 

86
00:02:35,210 --> 00:02:37,360
getting any console.logs. If I 

87
00:02:37,360 --> 00:02:39,770
refresh, I''m going to be back to 

88
00:02:39,770 --> 00:02:41,920
where I was before. I, as the 

89
00:02:41,920 --> 00:02:43,310
user of this application, have 

90
00:02:43,310 --> 00:02:45,260
lost work, because my code was 

91
00:02:45,260 --> 00:02:46,890
not properly synchronizing the 

92
00:02:46,890 --> 00:02:48,710
state of my application with the 

93
00:02:48,710 --> 00:02:50,050
state of the world outside my 

94
00:02:50,050 --> 00:02:51,660
application. In an effort to 

95
00:02:51,660 --> 00:02:53,040
help you avoid making mistakes 

96
00:02:53,040 --> 00:02:54,920
here, the React team has created 

97
00:02:54,960 --> 00:02:57,130
an ESLint plugin called eslint-

98
00:02:57,130 --> 00:02:58,930
plugin-react-hooks which you can 

99
00:02:58,930 --> 00:03:01,050
use to not only ensure that the 

100
00:03:01,050 --> 00:03:02,800
dependency array is kept up-to-

101
00:03:02,800 --> 00:03:04,930
date, but keep it up-to-date 

102
00:03:04,930 --> 00:03:06,600
automatically for you using 

103
00:03:06,750 --> 00:03:10,260
ESLint''s fix feature. The rule 

104
00:03:10,260 --> 00:03:11,500
that will help you with this is 

105
00:03:11,500 --> 00:03:13,200
the exhaustive-deps rule, and I 

106
00:03:13,200 --> 00:03:14,610
strongly advise that you use 

107
00:03:14,610 --> 00:03:16,540
this tool and follow that rule. 

108
00:03:17,270 --> 00:03:18,390
In review, the problem that we 

109
00:03:18,390 --> 00:03:20,500
were solving here is our effect 

110
00:03:20,500 --> 00:03:22,180
callback was being called more 

111
00:03:22,180 --> 00:03:24,120
than it needed to be. I want to 

112
00:03:24,120 --> 00:03:26,030
make a special note here, that 

113
00:03:26,100 --> 00:03:27,330
just because it was being called 

114
00:03:27,330 --> 00:03:29,260
more than it needed to be didn''t 

115
00:03:29,260 --> 00:03:30,720
mean we had a bug in our 

116
00:03:30,720 --> 00:03:32,680
application, so this is just an 

117
00:03:32,680 --> 00:03:34,060
optimization to make our 

118
00:03:34,060 --> 00:03:35,510
application run a little faster. 

119
00:03:35,880 --> 00:03:38,020
A dependency array may not be 

120
00:03:38,020 --> 00:03:40,090
necessary in all cases, but in 

121
00:03:40,090 --> 00:03:41,620
our case, we could simply add 

122
00:03:41,620 --> 00:03:43,190
this dependency array with the 

123
00:03:43,190 --> 00:03:44,770
one dependency that our effect 

124
00:03:44,770 --> 00:03:46,730
callback relied on. This 

125
00:03:46,730 --> 00:03:48,480
callback is only called when 

126
00:03:48,555 --> 00:03:48,880
necessary.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Something that‚Äôs really important to know about **React‚Äôs useEffect** hook is that it eagerly attempts to synchronize the ‚Äústate of the world‚Äù with the state of your application. That means that your effect callback will run every time your component is rendered.

- Our effect callback is getting called more than it needs to be. **Solution**, add a dependency array so it is updated only when the state it relies on changes.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function Greeting() {
      const [name, setName] = React.useState(
        () => window.localStorage.getItem(''name'') || ''''
      );

      // our effect callback is getting called more than it needs to be
      {
        /* 
      React.useEffect(() => {
        window.localStorage.setItem(''name'', name);
      });
      */
      }

      // add a dependency array so it is updated only when the state it relies on changes
      // This normally won‚Äôt lead to bugs but it can definitely be sub-optimal
      // and in some cases can result in an infinite loop
      React.useEffect(() => {
        window.localStorage.setItem(''name'', name);
      }, [name]);

      // You‚Äôll want to make sure you have and follow the rules from the ESLint plugin: eslint-plugin-react-hooks
      // tools like Create React App have this installed and configured by default

      const handleChange = event => setName(event.target.value);

      return (
        <div>
          <form>
            <label htmlFor="name">Name: </label>
            <input value={name} onChange={handleChange} id="name" />
          </form>
          {name ? <strong>Hello {name}</strong> : ''Please type your name''}
        </div>
      );
    }

    function App() {
      const [count, setCount] = React.useState(0);
      return (
        <>
          <button onClick={() => setCount(c => c + 1)}>{count}</button>
          <Greeting />
        </>
      );
    }

    ReactDOM.render(<App />, document.getElementById(''root''));
  </script>
</body>
```

## Additional resource

- [Kent''s Blog - 5 Tips to Help You Avoid React Hooks Pitfalls](https://kentcdodds.com/blog/react-hooks-pitfalls)
- [egghead.io - Handle Deep Object Comparison in React''s useEffect hook with the useRef Hook](https://egghead.io/lessons/react-handle-deep-object-comparison-in-react-s-useeffect-hook-with-the-useref-hook)
- [eslint-plugin-react-hooks](https://www.npmjs.com/package/eslint-plugin-react-hooks)
- [React Docs - ESLint Plugin](https://reactjs.org/docs/hooks-rules.html#explanation)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '0dd8391b', 'https://d2c5owlt6rorc3.cloudfront.net/react-manage-the-useeffect-dependency-array-kZkweyx1H/dash/react-manage-the-useeffect-dependency-array-kZkweyx1H.mpd', 'https://stream.mux.com/MtLL1BcSRWMdh1ljrkzy6sJ97Vf02q2G4VVNi7sdNYPU.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/15-react-manage-the-useeffect-dependency-array.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6260, 'Create reusable custom hooks', NULL, 'One of the things we love about programming is the ability to take code, place it in a function, and reuse it in other places in the software. Let‚Äôs imagine a scenario where we want to share our `localStorage` code with other components so other components could synchronize state with `localStorage` (or we could even do it with different variables in the same component). Take a step back from React specifically and considering how code reuse works in JavaScript in general, we can simply make a function, put our relevant code in that function, and then call it from the original location. That process works exactly the same with React hooks code, so let‚Äôs do that!

In the process, we‚Äôll learn a few of the conventions for doing this and we‚Äôll learn about some additional challenges that come with generalizing our code. As always, follow [AHA programming practices](https://kcd.im/aha)!
', 251, NULL, '2020-03-11T02:41:24.418Z', '2025-12-13T00:54:53.678Z', 'react-create-reusable-custom-hooks', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-create-reusable-custom-hooks-fXZD1UZCH/react-create-reusable-custom-hooks-fXZD1UZCH.jpg', true, NULL, 'Kent C. Dodds: [0:00] The logic that we have here for storing some state into localStorage and keeping it synchronized could be useful in other areas of our application.

[0:07] Thankfully, React Hooks are pretty Vanilla JavaScript, and sharing that logic is just as straightforward as sharing any other logic in JavaScript. What we''re going to do is make a function. We''ll call that useLocalStorageState(), and then we''ll move these lines of code into that function, and we''ll replace them with a call to that function.

[0:30] We need to generalize the code that''s in our function. Instead of a name, it might make more sense to call this state and setState. Instead of getting the item with the string name, it might make more sense for the user of this function to provide us a key for localStorage, so we''ll accept a parameter called key.

[0:51] Instead of this as a default value, it might make sense for people to provide us their own default value. We''ll accept that as another parameter. We can default that to an empty string just in case they don''t want to provide it.

[1:05] Then we''ll replace that with the default value. We''ll replace the string name with a parameter that we accept called key. Then let''s make sure we update these two references to that old state value as well.

[1:19] Then when we call useLocalStorageState, we''re going to need to get access to that stateUpdater function and to the state value itself. Let''s return state and setState. We can make our custom Hook have a similar API to useState so it''s familiar to people who are used to the useState Hook.

[1:39] Then we can come down here. We can get our name and our setName from useLocalStorageState. We''ll specify our key as name. Then we''re done. That''s a pretty straight-up refactor from the code that we had before into a custom function. If we type in here Chuck and then refresh, we''ll see that Chuck is still in there.

[2:02] One thing I want to call out here is that we prefaced our function with the word use. That''s a convention and not required. We could change this to whateverWeWant. Save that. Things will work just as well. We can hit refresh. There we have it.

[2:19] The reason that we follow this convention is because the eslint-plugin-react-hooks is able to enforce some of the same recommendations and rules on our custom Hooks as it is on the built-in Hooks because it acts under the assumption that functions that begin with use are custom Hooks.

[2:39] In review, what we did here is we took some code that was in our function component. We moved it into its own function and then called it from our function component. This was no different from any other regular JavaScript refactor, which makes it easy to share logic across components and even make open source libraries that expose custom Hooks like this.

[2:59] We also learned the importance of using the use prefix on our custom Hooks so that we follow the community convention and the ESLint plugin can help us avoid mistakes.

[3:09] Incidentally, one such mistake is happening right now. In this index.html file, I can''t have ESLint running to show me the mistakes that I''m making. I made a mistake right here in this dependency array. I wonder if you can figure out what it is. I''m missing one of the dependencies for my callback.

[3:28] Before, we had this key hardcoded as name. It couldn''t ever change. My dependency array didn''t need to include that. Now, I''m accepting a key as a parameter from the users of the LocalStorageState custom Hook. They could potentially change that value. If they do, then I need to make sure to respond to that change so that I update local storage and not lose any of the user''s work.

[3:53] It''s important that in your applications you use and follow that ESLint rule so you can avoid bugs like this. With this in mind, we could make this useLocalStorageState Hook a lot more robust by removing the item at the old key if that key has changed. I''m going to leave that as a fun exercise for you to do later.', NULL, false, '17-egghead-react-create-reusable-custom-hooks.mp4', 11, true, false, 160, '---
mp4: 26674058
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-create-reusable-custom-hooks-fXZD1UZCH/react-create-reusable-custom-hooks-fXZD1UZCH.mp4', 'react-create-reusable-custom-hooks-fXZD1UZCH', 'zcKa', 'https://egghead-pipeline.s3.amazonaws.com/react-create-reusable-custom-hooks-fXZD1UZCH/react-create-reusable-custom-hooks-fXZD1UZCH.mp3?85cf96d69832c98b?0f9e', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.666Z', NULL, 8388599, NULL, 8167, 0, NULL, -4194179, '8077ed7b7dd64ee398bcca79cbc9773d', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/16-custom-hooks?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 396517372, '1
00:00:00,110 --> 00:00:01,480
The logic that we have here for 

2
00:00:01,480 --> 00:00:02,660
storing some state into 

3
00:00:02,660 --> 00:00:03,860
localStorage and keeping it 

4
00:00:03,860 --> 00:00:05,990
synchronized could be useful in 

5
00:00:05,990 --> 00:00:07,460
other areas of our application. 

6
00:00:07,890 --> 00:00:09,420
Thankfully, React Hooks are 

7
00:00:09,420 --> 00:00:10,950
pretty Vanilla JavaScript, and 

8
00:00:11,050 --> 00:00:13,030
sharing that logic is just as 

9
00:00:13,030 --> 00:00:14,620
straightforward as sharing any 

10
00:00:14,620 --> 00:00:16,770
other logic in JavaScript. What 

11
00:00:16,770 --> 00:00:18,030
we''re going to do is make a 

12
00:00:18,030 --> 00:00:19,450
function. We''ll call that 

13
00:00:19,670 --> 00:00:22,610
useLocalStorageState(), and then 

14
00:00:22,610 --> 00:00:23,940
we''ll move these lines of code 

15
00:00:24,380 --> 00:00:26,200
into that function, and we''ll 

16
00:00:26,200 --> 00:00:28,100
replace them with a call to that 

17
00:00:28,100 --> 00:00:31,660
function. We need to generalize 

18
00:00:31,660 --> 00:00:33,210
the code that''s in our function. 

19
00:00:33,980 --> 00:00:35,740
Instead of a name, it might make 

20
00:00:35,740 --> 00:00:37,750
more sense to call this state 

21
00:00:38,370 --> 00:00:41,480
and setState. Instead of getting 

22
00:00:41,480 --> 00:00:43,530
the item with the string name, 

23
00:00:43,860 --> 00:00:45,450
it might make more sense for the 

24
00:00:45,450 --> 00:00:47,520
user of this function to provide 

25
00:00:47,520 --> 00:00:49,600
us a key for localStorage, so 

26
00:00:49,600 --> 00:00:50,870
we''ll accept a parameter called 

27
00:00:50,890 --> 00:00:53,150
key. Instead of this as a 

28
00:00:53,150 --> 00:00:54,740
default value, it might make 

29
00:00:54,740 --> 00:00:56,290
sense for people to provide us 

30
00:00:56,350 --> 00:00:57,920
their own default value. We''ll 

31
00:00:57,920 --> 00:00:59,260
accept that as another parameter. 

32
00:01:01,020 --> 00:01:02,390
We can default that to an empty 

33
00:01:02,390 --> 00:01:03,540
string just in case they don''t 

34
00:01:03,540 --> 00:01:06,140
want to provide it. Then we''ll 

35
00:01:06,140 --> 00:01:07,390
replace that with the default 

36
00:01:07,390 --> 00:01:09,440
value. We''ll replace the string 

37
00:01:09,440 --> 00:01:11,340
name with a parameter that we 

38
00:01:11,340 --> 00:01:13,610
accept called key. Then let''s 

39
00:01:13,610 --> 00:01:14,830
make sure we update these two 

40
00:01:14,830 --> 00:01:16,200
references to that old state 

41
00:01:16,200 --> 00:01:19,770
value as well. Then when we 

42
00:01:19,770 --> 00:01:22,150
call useLocalStorageState, we''re 

43
00:01:22,150 --> 00:01:24,100
going to need to get access to 

44
00:01:24,100 --> 00:01:26,410
that stateUpdater function and 

45
00:01:26,410 --> 00:01:28,700
to the state value itself. Let''s 

46
00:01:28,700 --> 00:01:32,420
return state and setState. We 

47
00:01:32,420 --> 00:01:33,610
can make our custom Hook have a 

48
00:01:33,610 --> 00:01:36,170
similar API to useState so it''s 

49
00:01:36,170 --> 00:01:37,500
familiar to people who are used 

50
00:01:37,500 --> 00:01:39,790
to the useState Hook. Then we 

51
00:01:39,790 --> 00:01:41,660
can come down here. We can get 

52
00:01:41,720 --> 00:01:44,740
our name and our setName from 

53
00:01:44,740 --> 00:01:46,940
useLocalStorageState. We''ll 

54
00:01:46,940 --> 00:01:49,740
specify our key as name. Then 

55
00:01:49,740 --> 00:01:51,300
we''re done. That''s a pretty 

56
00:01:51,300 --> 00:01:53,000
straight-up refactor from the 

57
00:01:53,000 --> 00:01:54,910
code that we had before into a 

58
00:01:54,910 --> 00:01:57,560
custom function. If we type in 

59
00:01:57,560 --> 00:02:00,080
here Chuck and then refresh, 

60
00:02:00,400 --> 00:02:01,840
we''ll see that Chuck is still in 

61
00:02:01,840 --> 00:02:03,430
there. One thing I want to call 

62
00:02:03,430 --> 00:02:04,870
out here is that we prefaced our 

63
00:02:04,870 --> 00:02:06,710
function with the word use. 

64
00:02:07,080 --> 00:02:08,430
That''s a convention and not 

65
00:02:08,430 --> 00:02:10,090
required. We could change this 

66
00:02:10,090 --> 00:02:13,510
to whateverWeWant. Save that. 

67
00:02:13,960 --> 00:02:15,370
Things will work just as well. 

68
00:02:16,780 --> 00:02:18,630
We can hit refresh. There we 

69
00:02:18,630 --> 00:02:20,450
have it. The reason that we 

70
00:02:20,450 --> 00:02:22,980
follow this convention is 

71
00:02:22,980 --> 00:02:25,460
because the eslint-plugin-react-

72
00:02:25,460 --> 00:02:27,520
hooks is able to enforce some of 

73
00:02:27,520 --> 00:02:28,910
the same recommendations and 

74
00:02:28,910 --> 00:02:31,490
rules on our custom Hooks as it 

75
00:02:31,490 --> 00:02:34,110
is on the built-in Hooks because 

76
00:02:34,110 --> 00:02:35,380
it acts under the assumption 

77
00:02:35,690 --> 00:02:36,910
that functions that begin with 

78
00:02:36,910 --> 00:02:39,640
use are custom Hooks. In review, 

79
00:02:39,640 --> 00:02:41,230
what we did here is we took some 

80
00:02:41,230 --> 00:02:42,690
code that was in our function 

81
00:02:42,690 --> 00:02:44,750
component. We moved it into its 

82
00:02:44,830 --> 00:02:46,960
own function and then called it 

83
00:02:46,960 --> 00:02:48,200
from our function component. 

84
00:02:48,670 --> 00:02:50,060
This was no different from any 

85
00:02:50,060 --> 00:02:51,200
other regular JavaScript 

86
00:02:51,200 --> 00:02:53,590
refactor, which makes it easy to 

87
00:02:53,590 --> 00:02:55,510
share logic across components 

88
00:02:55,620 --> 00:02:56,870
and even make open source 

89
00:02:56,870 --> 00:02:58,330
libraries that expose custom 

90
00:02:58,330 --> 00:03:00,110
Hooks like this. We also 

91
00:03:00,110 --> 00:03:01,690
learned the importance of using 

92
00:03:01,690 --> 00:03:03,380
the use prefix on our custom 

93
00:03:03,380 --> 00:03:05,040
Hooks so that we follow the 

94
00:03:05,040 --> 00:03:06,830
community convention and the 

95
00:03:06,830 --> 00:03:08,760
ESLint plugin can help us avoid 

96
00:03:08,760 --> 00:03:10,780
mistakes. Incidentally, one 

97
00:03:10,780 --> 00:03:12,380
such mistake is happening right 

98
00:03:12,380 --> 00:03:15,510
now. In this index.html file, I 

99
00:03:15,510 --> 00:03:17,170
can''t have ESLint running to 

100
00:03:17,170 --> 00:03:18,290
show me the mistakes that I''m 

101
00:03:18,290 --> 00:03:20,660
making. I made a mistake right 

102
00:03:20,660 --> 00:03:22,680
here in this dependency array. I 

103
00:03:22,680 --> 00:03:23,670
wonder if you can figure out 

104
00:03:23,670 --> 00:03:26,590
what it is. I''m missing one of 

105
00:03:26,590 --> 00:03:28,380
the dependencies for my callback. 

106
00:03:28,750 --> 00:03:30,270
Before, we had this key 

107
00:03:30,270 --> 00:03:33,150
hardcoded as name. It couldn''t 

108
00:03:33,150 --> 00:03:35,120
ever change. My dependency array 

109
00:03:35,120 --> 00:03:37,400
didn''t need to include that. Now, 

110
00:03:37,400 --> 00:03:38,840
I''m accepting a key as a 

111
00:03:38,840 --> 00:03:40,980
parameter from the users of the 

112
00:03:40,980 --> 00:03:42,730
LocalStorageState custom Hook. 

113
00:03:43,220 --> 00:03:44,600
They could potentially change 

114
00:03:44,600 --> 00:03:46,730
that value. If they do, then I 

115
00:03:46,730 --> 00:03:48,200
need to make sure to respond to 

116
00:03:48,200 --> 00:03:50,190
that change so that I update 

117
00:03:50,190 --> 00:03:51,730
local storage and not lose any 

118
00:03:51,730 --> 00:03:53,790
of the user''s work. It''s 

119
00:03:53,790 --> 00:03:54,710
important that in your 

120
00:03:54,710 --> 00:03:56,560
applications you use and follow 

121
00:03:56,560 --> 00:03:57,910
that ESLint rule so you can 

122
00:03:57,910 --> 00:04:00,090
avoid bugs like this. With this 

123
00:04:00,090 --> 00:04:01,370
in mind, we could make this 

124
00:04:01,370 --> 00:04:03,360
useLocalStorageState Hook a lot 

125
00:04:03,360 --> 00:04:05,750
more robust by removing the item 

126
00:04:05,750 --> 00:04:07,230
at the old key if that key has 

127
00:04:07,230 --> 00:04:08,950
changed. I''m going to leave that 

128
00:04:08,950 --> 00:04:10,520
as a fun exercise for you to do 

129
00:04:10,595 --> 00:04:10,920
later.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Let‚Äôs imagine a scenario where we want to share our `localStorage` code with other components so other components could synchronize state with `localStorage`.

- Considering how code reuse works in JavaScript in general, we can simply make a function, put our relevant code in that function, and then call it from the original location. That process works exactly the same with React hooks code, so let‚Äôs do that:

- **Original code**:

```js
const [name, setName] = React.useState(
  () => window.localStorage.getItem(''name'') || ''''
);

React.useEffect(() => {
  window.localStorage.setItem(''name'', name);
}, [name]);
```

- **Refactor code** to a reusable custom hooks:

```js
//
function useLocalStorageState(key, defaultValue = '''') {
  const [state, setState] = React.useState(
    () => window.localStorage.getItem(key) || defaultValue
  );

  React.useEffect(() => {
    window.localStorage.setItem(key, state);
  }, [key, state]);

  return [state, setState];
}
```

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    // the community standard is to use `useWhateverName` following React Hooks name standards
    // providing key for localStorage and defaultValue
    function useLocalStorageState(key, defaultValue = '''') {
      const [state, setState] = React.useState(
        () => window.localStorage.getItem(key) || defaultValue
      );

      React.useEffect(() => {
        window.localStorage.setItem(key, state);
        // Make sure to add key to our array
      }, [key, state]);
      // Getting access to state and setState
      // a custom Hook doesn‚Äôt need to have a specific signature.
      // We can decide what it takes as arguments
      return [state, setState];
    }

    function Greeting() {
      // calling our useLocalStorageState
      const [name, setName] = useLocalStorageState(''name'');

      const handleChange = event => setName(event.target.value);

      return (
        <div>
          <form>
            <label htmlFor="name">Name: </label>
            <input value={name} onChange={handleChange} id="name" />
          </form>
          {name ? <strong>Hello {name}</strong> : ''Please type your name''}
        </div>
      );
    }

    ReactDOM.render(<Greeting />, document.getElementById(''root''));
  </script>
</body>
```

- When we want to share logic between two JavaScript functions, we extract it to a third function. Both components and Hooks are functions, so this works for them too!
- Building your own Hooks lets you extract component logic into reusable functions.

## Additional resource

- [eslint-plugin-react-hooks](https://www.npmjs.com/package/eslint-plugin-react-hooks)
- [Kent''s Blog - The State Reducer Pattern with React Hooks](https://kentcdodds.com/blog/the-state-reducer-pattern-with-react-hooks)
- [React Docs - Building Your Own Hooks](https://reactjs.org/docs/hooks-custom.html)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '1c7cd5b7', 'https://d2c5owlt6rorc3.cloudfront.net/react-create-reusable-custom-hooks-fXZD1UZCH/dash/react-create-reusable-custom-hooks-fXZD1UZCH.mpd', 'https://stream.mux.com/6G302gmv02TJS6DekpvCHPhcWtZHt200h7qAMvLKvNJRpg.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/16-react-create-reusable-custom-hooks.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6261, 'Manipulate the DOM with React refs', NULL, 'React is really good at creating and updating DOM elements, but sometimes you need to work with them yourself. A common use case for this is when you‚Äôre using a third party library that wasn‚Äôt built for or with React specifically. To do this, we need to have some value that‚Äôs associated with our component (like state) to store a reference to the DOM element, but doesn‚Äôt trigger re-renders when it‚Äôs updated (unlike state). React has something specifically for this and it‚Äôs called a `ref`.

You create a `ref` object with the `useRef` hook and that object‚Äôs `current` property is the current value of the `ref`. It can be anything, but if you pass that `ref` object to a component as a prop called `ref`, then React will set the `current` property to the DOM element it creates so you can reference it and manipulate it in your `useEffect` hook.

In this lesson we‚Äôll get to see how that works with a cool library called [vanilla-tilt](https://www.npmjs.com/package/vanilla-tilt).', 365, NULL, '2020-03-11T02:41:40.983Z', '2025-12-13T00:54:53.678Z', 'react-manipulate-the-dom-with-react-refs-9f338f90', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX/react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX.jpg', true, NULL, 'Kent C. Dodds: [0:00] We have a function component called Tilt. Thanks to use some handy class names and some handier CSS, we have it styled in this fancy-looking way but we can make it do something fancy by using a library that I''ve included called vanilla-tilt. Vanilla-tilt takes a DOM node and makes it react to when the user mouses over that DOM node.

[0:19] The DOM node we want to give it is the DOM node that''s created for this element, the tilt root. Remember this is a React element, not a DOM node and React takes that React element and renders it to the DOM.

[0:32] We need React to give us the DOM node that creates for this particular React element so we can wire up vanilla-tilt to it. To do this, we''re going to use a ref prop and we need to pass a ref which is an object that has a mutable current property.

[0:47] Let''s go ahead and use the React.useRef hook. From that we''ll get our tiltRef and then we can copy that, paste it here to our ref. Then the tiltRef is an object that has a current property. That current property is the current value for this ref object.

[1:05] In our case, because we''re passing this ref to a div with a ref prop, that current property will be the DOM node that React creates for this div. If we console.log tiltRef.current, and we save that then we should be seeing the DOM node.

[1:21] We actually see undefined. The reason we see that is because at the time that this function runs, React has not created the DOM node for this div, so the tiltRef.current is currently undefined. In fact, you can initialize that current value by passing an argument to their useRef hook.

[1:39] Here, how do we get the DOM node so we can initialize vanilla-tilt on it? We need to have some code that runs after React has updated the DOM and set our tiltRef.current property. Interacting with the DOM is a side effect. The logical place for this would be in a React.useEffect hook.

[1:55] If we move that console.log in here and we save that, then we get a refresh and now, we are getting the DOM node. From here, we can get our tiltNode from tiltRef.current and then let''s go ahead and make some vanillaTiltOptions here. We can specify how we want vanilla-tilt to treat this DOM node.

[2:16] We''ll say max 25, speed 400, glare true, and max glare .5. With that now, we can say VanillaTilt.init on that tiltNode and with the vanillaTiltOptions. If we save that, we get a refresh. This code runs after React has rendered to the DOM and updated the tiltRef.current property so that we can get access to the tiltNode and initialize vanilla-tilt.

[2:47] Now, if we hover, we get that really cool effect. If we unclick the show tilt checkbox, that will unmount the tilt component from the page removing the DOM node from the page. However, there''s still a bunch of event handlers on that DOM node and several references to that DOM node from within the vanilla tilt library.

[3:07] That means that the DOM node itself may not exist on the page but it does still exist in memory because there''re references to it in vanilla-tilt. Unfortunately, this could lead to a memory leak. If we keep on mounting and unmounting this over and over and over again, then we''re going to have a bunch of DOM node sitting around in memory that really aren''t needed by the user anymore.

[3:28] To combat this problem, we can return a function which will be called for every update of our tilt component. In this function, we can say tiltNode.vanillaTilt which is a property that vanilla-tilt is adding to our DOM node .destroy.

[3:48] This will remove all references of our DOM node from vanilla-tilt and remove all event handlers so that we can avoid memory leaks with our tilt component. What you can''t see is that that DOM node has actually been garbage collected properly. We don''t need to worry about memory leaks anymore.

[4:04] Another thing we should do here is recognize that useEffect is going to be called on every re-render of our tilt component. That''s not going to lead to any bugs but it is sub-optimal because what that means is that we''re called destroy with vanilla-tilt and then we''ll call init with vanilla-tilt between every render of our component.

[4:21] We don''t need to do that because none of the things in this function can change with re-renders of our tilt component. We''re going to add a dependency array here with all the dependencies of our function and because none of the variables in our useEffect callback can change, we don''t need to list any dependencies here.

[4:37] What this is effectively saying is I want to run this when the component is initially mounted to the page and then I want to run this when the component is unmounted from the page. That''s another useful optimization we can make for this case.

[4:49] In review, the thing that we wanted to do is make this DOM node do some fancy stuff and we included vanilla-tilt on the page so that we could do that. We also included some CSS from the vanilla-tilt author to make our DOM nodes look really fancy.

[5:05] To get access to the DOM nodes so we can initialize vanilla-tilt on it, we''re using this ref prop on the div and we pass the thing that we did back from a React useRef call. That ref has a current property that we can use to access the current value of this object.

[5:19] The reason that useRef is an object that has a current property is so that we can mutate the current property to be whatever we want without triggering a re-render of our component. We can use refs for more than just DOM nodes like we''re using here. We can use it for any value that we want to keep track of and mutate over time without triggering a re-render of our component.

[5:39] After a component has been mounted, our useEffect callback is going to be called. We get the tilt node from our tilt ref current property. We create some vanilla-tilt options and pass those to the initialization for our tilt node with vanilla-tilt.

[5:54] Then we return a cleanup function so that we can remove all references of our DOM node in vanilla-tilt and remove all the event listeners that vanilla-tilt put on our DOM node.', NULL, false, '18-egghead-react-manipulate-the-dom-with-react-refs-cfdb8c6a.mp4', 11, true, false, 160, '---
mp4: 41157139
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX/react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX.mp4', 'react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX', 'zcKB', 'https://egghead-pipeline.s3.amazonaws.com/react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX/react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX.mp3?d42b2bbf48359181?5406', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.651Z', NULL, 8388599, NULL, 8168, 0, NULL, -3812940, '806825468d59498ba0d7fe8623c3c334', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/17-dom-refs?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 397187728, '1
00:00:00,050 --> 00:00:01,140
We have a function component 

2
00:00:01,140 --> 00:00:02,700
called Tilt. Thanks to use some 

3
00:00:02,700 --> 00:00:04,030
handy class names and some 

4
00:00:04,030 --> 00:00:06,930
handier CSS, we have it styled 

5
00:00:06,980 --> 00:00:09,190
in this fancy-looking way but we 

6
00:00:09,190 --> 00:00:10,470
can make it do something fancy 

7
00:00:10,470 --> 00:00:11,840
by using a library that I''ve 

8
00:00:11,840 --> 00:00:13,570
included called vanilla-tilt. 

9
00:00:13,970 --> 00:00:15,560
Vanilla-tilt takes a DOM node 

10
00:00:15,670 --> 00:00:16,930
and makes it react to when the 

11
00:00:16,930 --> 00:00:18,420
user mouses over that DOM node. 

12
00:00:19,080 --> 00:00:20,510
The DOM node we want to give it 

13
00:00:20,530 --> 00:00:22,040
is the DOM node that''s created 

14
00:00:22,380 --> 00:00:24,390
for this element, the tilt root. 

15
00:00:24,790 --> 00:00:27,090
Remember this is a React element, 

16
00:00:27,370 --> 00:00:29,590
not a DOM node and React takes 

17
00:00:29,590 --> 00:00:31,110
that React element and renders 

18
00:00:31,110 --> 00:00:33,370
it to the DOM. We need React to 

19
00:00:33,370 --> 00:00:34,450
give us the DOM node that 

20
00:00:34,450 --> 00:00:35,920
creates for this particular 

21
00:00:35,920 --> 00:00:37,870
React element so we can wire up 

22
00:00:37,930 --> 00:00:39,890
vanilla-tilt to it. To do this, 

23
00:00:39,890 --> 00:00:41,360
we''re going to use a ref prop 

24
00:00:41,950 --> 00:00:43,560
and we need to pass a ref which 

25
00:00:43,560 --> 00:00:45,600
is an object that has a mutable 

26
00:00:45,600 --> 00:00:47,320
current property. Let''s go 

27
00:00:47,320 --> 00:00:49,610
ahead and use the React.useRef 

28
00:00:49,810 --> 00:00:52,440
hook. From that we''ll get our 

29
00:00:52,440 --> 00:00:56,120
tiltRef and then we can copy 

30
00:00:56,120 --> 00:00:57,900
that, paste it here to our ref. 

31
00:00:58,140 --> 00:00:59,810
Then the tiltRef is an object 

32
00:00:59,810 --> 00:01:01,130
that has a current property. 

33
00:01:01,370 --> 00:01:02,640
That current property is the 

34
00:01:02,640 --> 00:01:04,380
current value for this ref 

35
00:01:04,470 --> 00:01:06,180
object. In our case, because 

36
00:01:06,180 --> 00:01:08,170
we''re passing this ref to a div 

37
00:01:08,170 --> 00:01:10,040
with a ref prop, that current 

38
00:01:10,040 --> 00:01:11,510
property will be the DOM node 

39
00:01:11,580 --> 00:01:13,120
that React creates for this div. 

40
00:01:13,760 --> 00:01:16,580
If we console.log tiltRef.

41
00:01:17,020 --> 00:01:18,920
current, and we save that then 

42
00:01:18,920 --> 00:01:20,650
we should be seeing the DOM node. 

43
00:01:21,070 --> 00:01:23,900
We actually see undefined. The 

44
00:01:23,900 --> 00:01:25,480
reason we see that is because at 

45
00:01:25,480 --> 00:01:27,250
the time that this function runs, 

46
00:01:27,470 --> 00:01:28,700
React has not created the DOM 

47
00:01:28,700 --> 00:01:30,730
node for this div, so the 

48
00:01:30,730 --> 00:01:33,000
tiltRef.current is currently 

49
00:01:33,000 --> 00:01:34,760
undefined. In fact, you can 

50
00:01:34,760 --> 00:01:36,750
initialize that current value by 

51
00:01:36,750 --> 00:01:37,990
passing an argument to their 

52
00:01:37,990 --> 00:01:40,760
useRef hook. Here, how do we 

53
00:01:40,760 --> 00:01:41,860
get the DOM node so we can 

54
00:01:41,860 --> 00:01:43,260
initialize vanilla-tilt on it? 

55
00:01:43,760 --> 00:01:44,740
We need to have some code that 

56
00:01:44,740 --> 00:01:46,350
runs after React has updated the 

57
00:01:46,350 --> 00:01:48,070
DOM and set our tiltRef.current 

58
00:01:48,070 --> 00:01:49,870
property. Interacting with the 

59
00:01:49,870 --> 00:01:51,570
DOM is a side effect. The 

60
00:01:51,570 --> 00:01:53,100
logical place for this would be 

61
00:01:53,100 --> 00:01:55,830
in a React.useEffect hook. If 

62
00:01:55,830 --> 00:01:57,600
we move that console.log in here 

63
00:01:57,600 --> 00:01:59,020
and we save that, then we get a 

64
00:01:59,020 --> 00:02:00,820
refresh and now, we are getting 

65
00:02:01,060 --> 00:02:03,620
the DOM node. From here, we can 

66
00:02:03,620 --> 00:02:06,290
get our tiltNode from tiltRef.

67
00:02:06,520 --> 00:02:08,350
current and then let''s go ahead 

68
00:02:08,400 --> 00:02:09,660
and make some 

69
00:02:09,780 --> 00:02:13,450
vanillaTiltOptions here. We 

70
00:02:13,450 --> 00:02:15,080
can specify how we want vanilla-

71
00:02:15,080 --> 00:02:16,440
tilt to treat this DOM node. 

72
00:02:16,750 --> 00:02:21,110
We''ll say max 25, speed 400, 

73
00:02:21,240 --> 00:02:26,630
glare true, and max glare .5. 

74
00:02:27,800 --> 00:02:28,900
With that now, we can say 

75
00:02:28,900 --> 00:02:32,070
VanillaTilt.init on that 

76
00:02:32,070 --> 00:02:34,230
tiltNode and with the 

77
00:02:34,230 --> 00:02:37,660
vanillaTiltOptions. If we save 

78
00:02:37,660 --> 00:02:39,100
that, we get a refresh. This 

79
00:02:39,100 --> 00:02:40,520
code runs after React has 

80
00:02:40,520 --> 00:02:42,210
rendered to the DOM and updated 

81
00:02:42,210 --> 00:02:44,180
the tiltRef.current property so 

82
00:02:44,180 --> 00:02:45,450
that we can get access to the 

83
00:02:45,450 --> 00:02:46,980
tiltNode and initialize vanilla-

84
00:02:46,980 --> 00:02:49,820
tilt. Now, if we hover, we get 

85
00:02:49,820 --> 00:02:52,880
that really cool effect. If we 

86
00:02:52,970 --> 00:02:54,670
unclick the show tilt checkbox, 

87
00:02:54,700 --> 00:02:56,350
that will unmount the tilt 

88
00:02:56,350 --> 00:02:58,370
component from the page removing 

89
00:02:58,370 --> 00:02:59,600
the DOM node from the page. 

90
00:03:00,100 --> 00:03:01,490
However, there''s still a bunch 

91
00:03:01,490 --> 00:03:03,120
of event handlers on that DOM 

92
00:03:03,120 --> 00:03:05,060
node and several references to 

93
00:03:05,060 --> 00:03:06,350
that DOM node from within the 

94
00:03:06,350 --> 00:03:08,140
vanilla tilt library. That 

95
00:03:08,140 --> 00:03:09,980
means that the DOM node itself 

96
00:03:10,220 --> 00:03:12,080
may not exist on the page but it 

97
00:03:12,110 --> 00:03:13,740
does still exist in memory 

98
00:03:13,740 --> 00:03:15,420
because there''re references to 

99
00:03:15,420 --> 00:03:16,430
it in vanilla-tilt. 

100
00:03:17,030 --> 00:03:18,310
Unfortunately, this could lead 

101
00:03:18,310 --> 00:03:19,900
to a memory leak. If we keep on 

102
00:03:19,900 --> 00:03:21,080
mounting and unmounting this 

103
00:03:21,080 --> 00:03:22,440
over and over and over again, 

104
00:03:23,080 --> 00:03:24,140
then we''re going to have a bunch 

105
00:03:24,140 --> 00:03:25,360
of DOM node sitting around in 

106
00:03:25,360 --> 00:03:27,170
memory that really aren''t needed 

107
00:03:27,170 --> 00:03:29,030
by the user anymore. To combat 

108
00:03:29,030 --> 00:03:31,320
this problem, we can return a 

109
00:03:31,320 --> 00:03:33,470
function which will be called 

110
00:03:33,470 --> 00:03:35,120
for every update of our tilt 

111
00:03:35,120 --> 00:03:38,650
component. In this function, we 

112
00:03:38,650 --> 00:03:42,730
can say tiltNode.vanillaTilt 

113
00:03:42,800 --> 00:03:44,350
which is a property that vanilla-

114
00:03:44,350 --> 00:03:46,240
tilt is adding to our DOM node .

115
00:03:47,320 --> 00:03:49,720
destroy. This will remove all 

116
00:03:49,720 --> 00:03:51,500
references of our DOM node from 

117
00:03:51,500 --> 00:03:53,410
vanilla-tilt and remove all 

118
00:03:53,410 --> 00:03:54,880
event handlers so that we can 

119
00:03:54,880 --> 00:03:56,350
avoid memory leaks with our tilt 

120
00:03:56,350 --> 00:03:58,290
component. What you can''t see is 

121
00:03:58,290 --> 00:03:59,770
that that DOM node has actually 

122
00:03:59,770 --> 00:04:01,340
been garbage collected properly. 

123
00:04:01,830 --> 00:04:02,780
We don''t need to worry about 

124
00:04:02,780 --> 00:04:04,410
memory leaks anymore. Another 

125
00:04:04,410 --> 00:04:05,750
thing we should do here is 

126
00:04:05,750 --> 00:04:07,310
recognize that useEffect is 

127
00:04:07,310 --> 00:04:08,740
going to be called on every re-

128
00:04:08,740 --> 00:04:10,500
render of our tilt component. 

129
00:04:10,980 --> 00:04:12,270
That''s not going to lead to any 

130
00:04:12,270 --> 00:04:14,000
bugs but it is sub-optimal 

131
00:04:14,000 --> 00:04:15,280
because what that means is that 

132
00:04:15,280 --> 00:04:16,300
we''re called destroy with 

133
00:04:16,300 --> 00:04:17,830
vanilla-tilt and then we''ll call 

134
00:04:17,830 --> 00:04:19,650
init with vanilla-tilt between 

135
00:04:19,700 --> 00:04:21,370
every render of our component. 

136
00:04:21,720 --> 00:04:23,020
We don''t need to do that because 

137
00:04:23,020 --> 00:04:23,950
none of the things in this 

138
00:04:23,950 --> 00:04:25,130
function can change with re-

139
00:04:25,130 --> 00:04:26,610
renders of our tilt component. 

140
00:04:27,050 --> 00:04:28,470
We''re going to add a dependency 

141
00:04:28,470 --> 00:04:29,980
array here with all the 

142
00:04:29,980 --> 00:04:31,320
dependencies of our function and 

143
00:04:31,660 --> 00:04:33,080
because none of the variables in 

144
00:04:33,080 --> 00:04:34,420
our useEffect callback can 

145
00:04:34,420 --> 00:04:35,940
change, we don''t need to list 

146
00:04:35,990 --> 00:04:37,500
any dependencies here. What 

147
00:04:37,500 --> 00:04:39,490
this is effectively saying is I 

148
00:04:39,490 --> 00:04:40,610
want to run this when the 

149
00:04:40,610 --> 00:04:41,910
component is initially mounted 

150
00:04:41,910 --> 00:04:43,560
to the page and then I want to 

151
00:04:43,560 --> 00:04:44,900
run this when the component is 

152
00:04:44,960 --> 00:04:46,780
unmounted from the page. That''s 

153
00:04:46,780 --> 00:04:48,110
another useful optimization we 

154
00:04:48,110 --> 00:04:49,730
can make for this case. In 

155
00:04:49,730 --> 00:04:51,330
review, the thing that we wanted 

156
00:04:51,330 --> 00:04:53,020
to do is make this DOM node do 

157
00:04:53,020 --> 00:04:55,640
some fancy stuff and we included 

158
00:04:55,640 --> 00:04:57,420
vanilla-tilt on the page so that 

159
00:04:57,420 --> 00:04:58,980
we could do that. We also 

160
00:04:58,980 --> 00:05:00,240
included some CSS from the 

161
00:05:00,240 --> 00:05:02,670
vanilla-tilt author to make our 

162
00:05:02,670 --> 00:05:05,220
DOM nodes look really fancy. To 

163
00:05:05,220 --> 00:05:06,720
get access to the DOM nodes so 

164
00:05:06,720 --> 00:05:08,100
we can initialize vanilla-tilt 

165
00:05:08,100 --> 00:05:09,990
on it, we''re using this ref prop 

166
00:05:10,090 --> 00:05:12,020
on the div and we pass the thing 

167
00:05:12,020 --> 00:05:13,730
that we did back from a React 

168
00:05:13,730 --> 00:05:15,880
useRef call. That ref has a 

169
00:05:15,880 --> 00:05:17,360
current property that we can use 

170
00:05:17,500 --> 00:05:19,010
to access the current value of 

171
00:05:19,010 --> 00:05:20,580
this object. The reason that 

172
00:05:20,580 --> 00:05:22,560
useRef is an object that has a 

173
00:05:22,560 --> 00:05:24,130
current property is so that we 

174
00:05:24,130 --> 00:05:25,650
can mutate the current property 

175
00:05:25,650 --> 00:05:27,350
to be whatever we want without 

176
00:05:27,350 --> 00:05:28,630
triggering a re-render of our 

177
00:05:28,630 --> 00:05:30,600
component. We can use refs for 

178
00:05:30,600 --> 00:05:31,960
more than just DOM nodes like 

179
00:05:31,960 --> 00:05:33,590
we''re using here. We can use it 

180
00:05:33,590 --> 00:05:34,930
for any value that we want to 

181
00:05:34,930 --> 00:05:36,450
keep track of and mutate over 

182
00:05:36,450 --> 00:05:38,080
time without triggering a re-

183
00:05:38,080 --> 00:05:39,770
render of our component. After 

184
00:05:39,770 --> 00:05:41,010
a component has been mounted, 

185
00:05:41,160 --> 00:05:42,480
our useEffect callback is going 

186
00:05:42,480 --> 00:05:44,440
to be called. We get the tilt 

187
00:05:44,440 --> 00:05:46,370
node from our tilt ref current 

188
00:05:46,370 --> 00:05:48,430
property. We create some vanilla-

189
00:05:48,430 --> 00:05:50,470
tilt options and pass those to 

190
00:05:50,470 --> 00:05:52,410
the initialization for our tilt 

191
00:05:52,410 --> 00:05:55,170
node with vanilla-tilt. Then we 

192
00:05:55,170 --> 00:05:57,190
return a cleanup function so 

193
00:05:57,190 --> 00:05:58,640
that we can remove all 

194
00:05:58,640 --> 00:06:00,410
references of our DOM node in 

195
00:06:00,410 --> 00:06:02,370
vanilla-tilt and remove all the 

196
00:06:02,370 --> 00:06:03,580
event listeners that vanilla-

197
00:06:03,580 --> 00:06:04,980
tilt put on our DOM node.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- React is really good at creating and updating DOM elements, but sometimes you need to work with them yourself.
- A common use case for this is when you‚Äôre using a third party library that wasn‚Äôt built for or with React specifically.
- To do this, we need to have some value that‚Äôs associated with our component (like state) to store a reference to the DOM element, but doesn‚Äôt trigger re-renders when it‚Äôs updated (unlike state). React has something specifically for this and it‚Äôs called a ref.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script src="https://unpkg.com/vanilla-tilt@1.7.0/dist/vanilla-tilt.min.js"></script>
  <style>
    /*
    Taken from the vanilla-tilt.js demo site:
    https://micku7zu.github.io/vanilla-tilt.js/index.html
    */
    .tilt-root {
      height: 150px;
      background-color: red;
      width: 200px;
      background-image: -webkit-linear-gradient(
        315deg,
        #ff00ba 0%,
        #fae713 100%
      );
      background-image: linear-gradient(135deg, #ff00ba 0%, #fae713 100%);
      transform-style: preserve-3d;
      will-change: transform;
      transform: perspective(1000px) rotateX(0deg) rotateY(0deg) scale3d(
          1,
          1,
          1
        );
    }
    .tilt-child {
      position: absolute;
      width: 50%;
      height: 50%;
      top: 50%;
      left: 50%;
      transform: translateZ(30px) translateX(-50%) translateY(-50%);
      box-shadow: 0 0 50px 0 rgba(51, 51, 51, 0.3);
      background-color: white;
    }
    .totally-centered {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
  <script type="text/babel">
    function Tilt({ children }) {
      const tiltRef = React.useRef();

      // refs provide a way to access DOM nodes or React elements created in the render method.
      React.useEffect(() => {
        // useRef returns a mutable ref object whose .current property is initialized to the passed argument (initialValue).
        const tiltNode = tiltRef.current;
        // The returned object will persist for the full lifetime of the component.
        const vanillaTiltOptions = {
          max: 25,
          speed: 400,
          glare: true,
          ''max-glare'': 0.5
        };
        // Initiating VanillaTilt and passing tiltNode and vanillaTiltOptions
        VanillaTilt.init(tiltNode, vanillaTiltOptions);
        return () => {
          // ensuring that any node refs in memory get garbage collected
          // prevent memory leaks
          tiltNode.vanillaTilt.destroy();
        };
        // adding a dependencies array, to avoid multiple renders
      }, []);

      return (
        // Referencing the useEffect hook return
        <div ref={tiltRef} className="tilt-root">
          <div className="tilt-child">{children}</div>
        </div>
      );
    }

    function App() {
      const [showTilt, setShowTilt] = React.useState(true);
      return (
        <div>
          <label>
            <input
              type="checkbox"
              checked={showTilt}
              // show and hide Tilt using the useState Hook
              onChange={e => setShowTilt(e.target.checked)}
            />{'' ''}
            show tilt
          </label>
          {showTilt ? (
            <Tilt>
              <div className="totally-centered">vanilla-tilt.js</div>
            </Tilt>
          ) : null}
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById(''root''));
  </script>
</body>
```

- You create a **ref object with the useRef hook** and that object‚Äôs current property is the current value of the ref.
- It can be anything, but if you pass that `ref object` to a component as a prop called `ref`, then React will set the current property to the DOM element it creates so you can reference it and manipulate it in your useEffect hook.

## Additional resource

- [Kent''s egghead course - Simplify React Apps with React Hooks](https://egghead.io/courses/simplify-react-apps-with-react-hooks)
- [React Hooks - useRef](https://reactjs.org/docs/hooks-reference.html#useref)
- [Manipulating DOM Elements With React Hook useRef()](https://dev.to/spukas/manipulating-dom-elements-with-react-hook-useref-446c)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '9f338f90', 'https://d2c5owlt6rorc3.cloudfront.net/react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX/dash/react-manipulate-the-dom-with-react-refs-9cfd5127-aPR1aPzAX.mpd', 'https://stream.mux.com/Kkt9kPvhsmeMwsmVUSF5WyI9kThTxbLriE4IZE7AzdQ.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/17-react-manipulate-the-dom-with-react-refs-cad5c6be.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6262, 'Understand the React Hook Flow', NULL, 'Understanding the order in which React hooks are called can be really helpful in using React hooks effectively. [This chart](https://github.com/donavon/hook-flow) can be really helpful in understanding this, and in this lesson we‚Äôll explore the lifecycle of a function component with hooks with colorful console log statements so we know when one phase starts and when it ends.

I recommend you watch this one slowly and watch it as many times as you need to. Also definitely play around with the code yourself until you feel relatively comfortable with this. Understanding all of this is **not** critical to your success with using React, and most of the time you won‚Äôt need to think about this at all, but understanding it can help you at times.', 664, NULL, '2020-03-11T02:42:06.377Z', '2025-12-13T00:54:53.678Z', 'react-understand-the-react-hook-flow', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-understand-the-react-hook-flow-GUY4QGp4U/react-understand-the-react-hook-flow-GUY4QGp4U.jpg', true, NULL, 'Kent C. Dodds: [0:00] Sometimes it could be useful to understand the order in which your code is going to be run when you''re using React Hooks. I''ve made this little app that has a checkbox for showing a child, and inside of this box this will be rendered when that checkbox is checked. When you click on this button, it''s going to increment the count.

[0:17] The way that this works is we have a child component here that''s maintaining a countState, and then that has a whole bunch of useEffects here, which are simply logging to the console when the callback is called and logging to the console in a cleanup function that it provides.

[0:32] Then we create our React element for rendering to the page, and then we log to the console that our render is finished and then we return that React element we created.

[0:42] We do the same thing for our App component, except here we''re maintaining a showChild Boolean state. We have all those useEffects, and then we render a few React elements here for rendering this UI.

[0:54] Let''s go ahead and take a look at what happens when we initially load this page. I''m going to refresh, I''ll open up our DevTools, and I''ll scroll down here to the app, so we can follow along in the code with what we''re seeing in the console.

[1:08] The first thing that we see is this app render start. That''s the first thing that happens when we call ReactDom.render our app. It calls our app Function Component. The next thing that happens is we call react.useState and immediately React is going to call this function to retrieve the initial state for our show child state. That''s why we''re getting this app useState callback called.

[1:31] Then, we call all these React useEffects, but you''ll notice that the logs in those are not the next thing that appear in our console. Instead, we actually create this element and then we get a log to the console for app render end. Once that happens, React actually is updating the DOM. Then, asynchronously later, it''s going to call our useEffect callbacks, one at a time in the order in which they were called.

[1:55] We come up here to the top, mostly, app useEffect to no deps is the first one that appears. We don''t get our cleanup because there''s no cleanup necessary yet, because right now, we''re just mounting the component, and we haven''t had any updates yet.

[2:08] Next, we get our useEffects empty deps, right here. We have an empty list of dependencies there and then useEffect with dep. That''s our show child''s state. That''s the next thing that gets called here.

[2:21] Now, let''s take a look at what happens when we click on show child. Remember that this is the last console log that we saw when we initially mounted the component. If I click show child, then we''re going to get an app render start. When we click show child, that triggers this on change to set show child to the checked value of our check box input.

[2:44] This set show child is going to trigger a re-render of our app, which is why we get our app render start. Come up here to the top again. We''ll say app render start, and we''ll go through all of this code just like we had at the previous render, except this time you''ll notice we don''t have an app use state callback, we go straight from app render start to app render end.

[3:06] This is because React has already retrieved the initial state value for our show child state, and it doesn''t need to retrieve that value again. Any time you use a function call back for use state, that function is only going to be called when this component is initially rendered for the rest of the lifetime of that component.

[3:24] We go through all these useEffect cause again, we create our element, and then we lock to the console that the app render has finished. Then React calls our child to start rendering of that child. One thing that I want to stress here is that we''re creating our element which includes creating the child right here.

[3:42] You''ll notice that we get to this line of code before we start rendering the child. The important thing to remember here is that just because you create a React element, doesn''t mean that React element''s function is going to get called, because you''re not calling the function, React is.

[3:58] React will only call that function when that component is actually going to be rendered. That''s really important because you could say Const UI I will not render, and render a whole bunch of these all day long, and unless those things are added to some UI that''s actually going to get rendered, all that you''re creating is a bunch of React element objects, and you won''t actually be calling into that child function.

[4:25] Let''s go ahead and scroll up to this child render. Start here, and then we get our use state call back, because this is the first time that this use state is going to be called, so it needs to retrieve the initial value of zero.

[4:38] Then we call all of these useEffects, just like in an app, we create an element, and then we get a log for this render end. Then after the entire DOM has been updated, React is going to start calling our useEffects. It calls then in the order in which they are called, but starting at the child component.

[4:56] We get child useEffect no deps is called, we get the child useEffect empty deps is called, and then we get the child effect with dep is called, and the dep here is our count value. Then we''re going to start calling the app useEffect callbacks.

[5:14] You''ll notice that we actually call the cleanup first, and then we call the setup. Here we have the cleanup and then the setup. We also do the same for the cleanup when we have a dependency, and then the setup when we have a dependency. You''ll notice that the cleanup for both of these is called before the setup for both of these, and the cleanups are both called in the order in which the appear, just like the setups.

[5:41] You''ll also notice that this useEffect callback and its cleanup were not called. That''s because useEffect callbacks are only called if they have no dependency listed or if they have a dependency listed, and one of those dependencies is changed.

[5:55] We have a dependency list, but it''s empty, and so therefore, none of the dependency is changed, because it doesn''t have any dependencies. This useEffect callback and its cleanup will not be called on updates.

[6:07] Let''s go ahead and click on this button. We''ll remember that this is the last log that we saw for that last update. When I click on that button, we''re going to call setCount, and we''re providing a function updater function where we take the previous value of the state and return the new value of our state.

[6:24] Here, we''re just going to take the previous count and add 1 to it. This is going to trigger a re-render. Let''s take a look at what happens here. I click on that. You''ll notice that the app has none of its logs called. That''s because the state update actually only resides within this component, so React knows that this component is the only one that needs to be re-rendered.

[6:45] Let''s follow the console.logs. First we start with this child render start. We call this again, and we don''t get a log for our useState callback, because this component''s already been rendered, and we already retrieved the initial value and we no longer need that initial value, so React doesn''t bother calling this function anymore.

[7:01] Then we call all these useEffect hooks. We create our React element for our UI, and then we call this child render end. Then our useEffect cleanups are called in order if those particular useEffects need to be rerun. In this case, we haven''t listed any dependencies, so this will be rerun on every render of this component, so we''ll get the cleanup there.

[7:25] This one is listing a dependency array, and there are no dependencies that can change, so it''s not going to be called. This one does have a dependency array, and that dependency did change, so the cleanup is called here.

[7:39] Then we start with the setups for the useEffect that has no dependencies and the useEffect that has a dependency that changed. This is the last one that was called. If we click this again, we''ll see the exact same order of calls, and then if we uncheck show child...Let''s go ahead and highlight that, so we know which one was the last that we called, and then we uncheck show child.

[8:04] That''s going to trigger a re-render of our app component, because we changed that showChildState using setShowChild. That triggers a render start here. We go through all of this code, again skipping the useState callback.

[8:21] We come down here, create our elements, and then render end right here. Then we''re doing a cleanup on all of the children, because the child is being removed from the page, so we''re now rendering null.

[8:34] React notices the previous JSX that you gave me included the child, and this next JSX that you gave me does not include the child. That means I need to remove the child from the page, and so I''m going to unmount the component and call all of the cleanups for all of the useEffects that that child had going.

[8:50] Let''s come up here, and we''ll see that that happens in the order in which they appear in the code. We see our no deps cleanup runs. We''ll see our empty deps cleanup run. Even though we have listed dependencies but none of them changed because we have no dependencies, our cleanup is going to run, because we''re unmounting this component, and then we get a cleanup of the effect with dependencies.

[9:13] Even though this count value didn''t change, it''s going to be called, because this component is getting unmounted.

[9:18] Then because our state changed, in the app, we''re going to run some cleanups for the useEffects that are relevant. Here, we have this cleanup is getting called, because it has no dependencies. This cleanup is not getting called, because it has an empty dependency array. Then this cleanup is getting called, because the dependency that it has has changed.

[9:40] Then we go ahead and run the effects that are relevant, the useEffect with no dependencies and the useEffect with a dependency that changed.

[9:50] I encourage you to play around with this code example. Also, something else that might help you is this diagram from Donovan. You go to donovan‚ÅÑhookflow on GitHub and scroll down here and you''ll see the diagram that Donovan has created.

[10:05] We get our lazy initializers. That''s our useState callback. We get our render function that finishes after the lazy initializers are all called. React will update the DOM.

[10:16] React also has a useLayoutEffect hook that will be run here. That operates pretty similarly to the useEffect. The browser updates the screen based on the updates to the DOM that React made and then our effects are going to be called. This is exactly what we observed in our example.

[10:33] When there''s a state update, we get our render called, our lazy initializers are not called. React is going to update the DOM, we get a cleanup of layout effects and then our layout effects are run. Browser updates the screen and then we get a cleanup of our effects and then our effects are run. When the component is unmounted, we get the cleanup of all of our effects.

[10:54] Having a firm understanding on the order in which these things are called is not totally necessary for you to be effective with React. It can help you in some situations, so I encourage you to play around with this.', NULL, false, '19-egghead-react-understand-the-react-hook-flow.mp4', 11, true, false, 160, '---
mp4: 80205743
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-understand-the-react-hook-flow-GUY4QGp4U/react-understand-the-react-hook-flow-GUY4QGp4U.mp4', 'react-understand-the-react-hook-flow-GUY4QGp4U', 'zcKH', 'https://egghead-pipeline.s3.amazonaws.com/react-understand-the-react-hook-flow-GUY4QGp4U/react-understand-the-react-hook-flow-GUY4QGp4U.mp3?929f499a4c8662bc?3845', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.952Z', NULL, 8388599, NULL, 8169, 0, NULL, -3431671, '69b3cb345c67406fb14b91b5004d0366', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/18-hook-flow?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 397858084, '1
00:00:00,090 --> 00:00:01,460
Sometimes it could be useful to 

2
00:00:01,520 --> 00:00:02,660
understand the order in which 

3
00:00:02,660 --> 00:00:03,800
your code is going to be run 

4
00:00:03,970 --> 00:00:05,360
when you''re using React Hooks. 

5
00:00:05,750 --> 00:00:06,870
I''ve made this little app that 

6
00:00:06,870 --> 00:00:08,700
has a checkbox for showing a 

7
00:00:08,700 --> 00:00:10,760
child, and inside of this box 

8
00:00:10,980 --> 00:00:12,460
this will be rendered when that 

9
00:00:12,460 --> 00:00:14,270
checkbox is checked. When you 

10
00:00:14,270 --> 00:00:15,740
click on this button, it''s going 

11
00:00:15,740 --> 00:00:17,310
to increment the count. The way 

12
00:00:17,310 --> 00:00:18,320
that this works is we have a 

13
00:00:18,320 --> 00:00:19,610
child component here that''s 

14
00:00:19,610 --> 00:00:21,740
maintaining a countState, and 

15
00:00:21,740 --> 00:00:23,510
then that has a whole bunch of 

16
00:00:23,510 --> 00:00:25,310
useEffects here, which are 

17
00:00:25,310 --> 00:00:26,820
simply logging to the console 

18
00:00:27,080 --> 00:00:28,930
when the callback is called and 

19
00:00:28,930 --> 00:00:30,570
logging to the console in a 

20
00:00:30,570 --> 00:00:31,490
cleanup function that it 

21
00:00:31,490 --> 00:00:33,620
provides. Then we create our 

22
00:00:33,620 --> 00:00:35,390
React element for rendering to 

23
00:00:35,390 --> 00:00:37,550
the page, and then we log to the 

24
00:00:37,550 --> 00:00:38,550
console that our render is 

25
00:00:38,550 --> 00:00:40,540
finished and then we return that 

26
00:00:40,540 --> 00:00:42,700
React element we created. We do 

27
00:00:42,700 --> 00:00:44,040
the same thing for our App 

28
00:00:44,040 --> 00:00:45,350
component, except here we''re 

29
00:00:45,350 --> 00:00:47,540
maintaining a showChild Boolean 

30
00:00:47,540 --> 00:00:49,240
state. We have all those 

31
00:00:49,240 --> 00:00:51,180
useEffects, and then we render a 

32
00:00:51,180 --> 00:00:52,990
few React elements here for 

33
00:00:52,990 --> 00:00:55,250
rendering this UI. Let''s go 

34
00:00:55,250 --> 00:00:56,520
ahead and take a look at what 

35
00:00:56,520 --> 00:00:58,030
happens when we initially load 

36
00:00:58,030 --> 00:00:59,730
this page. I''m going to refresh, 

37
00:01:00,040 --> 00:01:01,930
I''ll open up our DevTools, and 

38
00:01:01,930 --> 00:01:03,850
I''ll scroll down here to the app, 

39
00:01:04,200 --> 00:01:05,510
so we can follow along in the 

40
00:01:05,510 --> 00:01:07,140
code with what we''re seeing in 

41
00:01:07,140 --> 00:01:08,570
the console. The first thing 

42
00:01:08,570 --> 00:01:10,230
that we see is this app render 

43
00:01:10,230 --> 00:01:11,990
start. That''s the first thing 

44
00:01:11,990 --> 00:01:13,420
that happens when we call 

45
00:01:13,420 --> 00:01:16,230
ReactDom.render our app. It 

46
00:01:16,230 --> 00:01:17,750
calls our app Function Component. 

47
00:01:18,360 --> 00:01:19,480
The next thing that happens is 

48
00:01:19,480 --> 00:01:21,340
we call react.useState and 

49
00:01:21,340 --> 00:01:23,120
immediately React is going to 

50
00:01:23,120 --> 00:01:25,570
call this function to retrieve 

51
00:01:25,610 --> 00:01:27,320
the initial state for our show 

52
00:01:27,320 --> 00:01:28,970
child state. That''s why we''re 

53
00:01:28,970 --> 00:01:30,110
getting this app useState 

54
00:01:30,110 --> 00:01:32,290
callback called. Then, we call 

55
00:01:32,290 --> 00:01:33,860
all these React useEffects, but 

56
00:01:33,860 --> 00:01:35,320
you''ll notice that the logs in 

57
00:01:35,320 --> 00:01:36,970
those are not the next thing 

58
00:01:36,970 --> 00:01:38,310
that appear in our console. 

59
00:01:38,690 --> 00:01:40,570
Instead, we actually create this 

60
00:01:40,620 --> 00:01:43,340
element and then we get a log to 

61
00:01:43,340 --> 00:01:45,340
the console for app render end. 

62
00:01:46,190 --> 00:01:47,380
Once that happens, React 

63
00:01:47,380 --> 00:01:48,780
actually is updating the DOM. 

64
00:01:49,020 --> 00:01:50,670
Then, asynchronously later, it''s 

65
00:01:50,670 --> 00:01:51,910
going to call our useEffect 

66
00:01:51,910 --> 00:01:54,060
callbacks, one at a time in the 

67
00:01:54,080 --> 00:01:55,220
order in which they were called. 

68
00:01:55,710 --> 00:01:56,870
We come up here to the top, 

69
00:01:57,240 --> 00:01:59,660
mostly, app useEffect to no deps 

70
00:01:59,720 --> 00:02:01,180
is the first one that appears. 

71
00:02:01,710 --> 00:02:03,010
We don''t get our cleanup because 

72
00:02:03,010 --> 00:02:04,540
there''s no cleanup necessary yet, 

73
00:02:04,640 --> 00:02:05,690
because right now, we''re just 

74
00:02:05,690 --> 00:02:06,970
mounting the component, and we 

75
00:02:06,970 --> 00:02:08,150
haven''t had any updates yet. 

76
00:02:08,540 --> 00:02:10,320
Next, we get our useEffects 

77
00:02:10,430 --> 00:02:12,800
empty deps, right here. We have 

78
00:02:12,800 --> 00:02:14,090
an empty list of dependencies 

79
00:02:14,090 --> 00:02:16,570
there and then useEffect with 

80
00:02:16,570 --> 00:02:17,940
dep. That''s our show child''s 

81
00:02:17,940 --> 00:02:20,050
state. That''s the next thing 

82
00:02:20,050 --> 00:02:21,920
that gets called here. Now, 

83
00:02:21,920 --> 00:02:23,050
let''s take a look at what 

84
00:02:23,050 --> 00:02:24,970
happens when we click on show 

85
00:02:24,970 --> 00:02:27,430
child. Remember that this is the 

86
00:02:27,430 --> 00:02:28,950
last console log that we saw 

87
00:02:29,110 --> 00:02:30,160
when we initially mounted the 

88
00:02:30,160 --> 00:02:32,550
component. If I click show child, 

89
00:02:33,370 --> 00:02:34,900
then we''re going to get an app 

90
00:02:35,030 --> 00:02:36,740
render start. When we click show 

91
00:02:36,740 --> 00:02:38,640
child, that triggers this on 

92
00:02:38,640 --> 00:02:41,030
change to set show child to the 

93
00:02:41,030 --> 00:02:43,100
checked value of our check box 

94
00:02:43,140 --> 00:02:45,640
input. This set show child is 

95
00:02:45,640 --> 00:02:47,190
going to trigger a re-render of 

96
00:02:47,190 --> 00:02:48,950
our app, which is why we get our 

97
00:02:49,000 --> 00:02:50,990
app render start. Come up here 

98
00:02:50,990 --> 00:02:53,610
to the top again. We''ll say app 

99
00:02:53,610 --> 00:02:55,470
render start, and we''ll go 

100
00:02:55,470 --> 00:02:57,500
through all of this code just 

101
00:02:57,500 --> 00:02:58,670
like we had at the previous 

102
00:02:58,670 --> 00:03:00,210
render, except this time you''ll 

103
00:03:00,210 --> 00:03:02,580
notice we don''t have an app use 

104
00:03:02,580 --> 00:03:04,040
state callback, we go straight 

105
00:03:04,040 --> 00:03:05,570
from app render start to app 

106
00:03:05,570 --> 00:03:07,400
render end. This is because 

107
00:03:07,400 --> 00:03:08,890
React has already retrieved the 

108
00:03:08,890 --> 00:03:11,220
initial state value for our show 

109
00:03:11,220 --> 00:03:12,860
child state, and it doesn''t need 

110
00:03:12,860 --> 00:03:14,220
to retrieve that value again. 

111
00:03:14,760 --> 00:03:16,460
Any time you use a function call 

112
00:03:16,460 --> 00:03:17,920
back for use state, that 

113
00:03:17,920 --> 00:03:19,180
function is only going to be 

114
00:03:19,180 --> 00:03:20,730
called when this component is 

115
00:03:20,730 --> 00:03:22,130
initially rendered for the rest 

116
00:03:22,130 --> 00:03:23,080
of the lifetime of that 

117
00:03:23,080 --> 00:03:24,860
component. We go through all 

118
00:03:24,860 --> 00:03:26,740
these useEffect cause again, we 

119
00:03:26,740 --> 00:03:29,050
create our element, and then we 

120
00:03:29,050 --> 00:03:30,550
lock to the console that the app 

121
00:03:30,550 --> 00:03:32,410
render has finished. Then React 

122
00:03:32,410 --> 00:03:33,800
calls our child to start 

123
00:03:33,800 --> 00:03:35,390
rendering of that child. One 

124
00:03:35,390 --> 00:03:36,690
thing that I want to stress here 

125
00:03:36,930 --> 00:03:38,220
is that we''re creating our 

126
00:03:38,220 --> 00:03:40,440
element which includes creating 

127
00:03:40,440 --> 00:03:42,950
the child right here. You''ll 

128
00:03:42,950 --> 00:03:44,740
notice that we get to this line 

129
00:03:44,740 --> 00:03:46,250
of code before we start 

130
00:03:46,250 --> 00:03:47,560
rendering the child. The 

131
00:03:47,560 --> 00:03:49,240
important thing to remember here 

132
00:03:49,280 --> 00:03:50,680
is that just because you create 

133
00:03:50,680 --> 00:03:52,500
a React element, doesn''t mean 

134
00:03:52,520 --> 00:03:54,180
that React element''s function is 

135
00:03:54,180 --> 00:03:55,530
going to get called, because 

136
00:03:55,530 --> 00:03:56,760
you''re not calling the function, 

137
00:03:57,050 --> 00:03:59,130
React is. React will only call 

138
00:03:59,130 --> 00:03:59,990
that function when that 

139
00:03:59,990 --> 00:04:01,090
component is actually going to 

140
00:04:01,090 --> 00:04:02,640
be rendered. That''s really 

141
00:04:02,640 --> 00:04:04,320
important because you could say 

142
00:04:04,490 --> 00:04:08,720
Const UI I will not render, and 

143
00:04:08,720 --> 00:04:10,190
render a whole bunch of these 

144
00:04:10,920 --> 00:04:14,460
all day long, and unless those 

145
00:04:14,460 --> 00:04:16,230
things are added to some UI 

146
00:04:16,230 --> 00:04:17,230
that''s actually going to get 

147
00:04:17,230 --> 00:04:18,490
rendered, all that you''re 

148
00:04:18,490 --> 00:04:20,060
creating is a bunch of React 

149
00:04:20,080 --> 00:04:21,890
element objects, and you won''t 

150
00:04:21,890 --> 00:04:23,530
actually be calling into that 

151
00:04:23,530 --> 00:04:26,020
child function. Let''s go ahead 

152
00:04:26,020 --> 00:04:27,350
and scroll up to this child 

153
00:04:27,350 --> 00:04:31,190
render. Start here, and then we 

154
00:04:31,190 --> 00:04:32,460
get our use state call back, 

155
00:04:32,490 --> 00:04:33,770
because this is the first time 

156
00:04:33,770 --> 00:04:35,000
that this use state is going to 

157
00:04:35,000 --> 00:04:36,070
be called, so it needs to 

158
00:04:36,070 --> 00:04:37,530
retrieve the initial value of 

159
00:04:37,530 --> 00:04:39,750
zero. Then we call all of these 

160
00:04:39,750 --> 00:04:41,310
useEffects, just like in an app, 

161
00:04:41,780 --> 00:04:44,160
we create an element, and then 

162
00:04:44,160 --> 00:04:46,020
we get a log for this render end. 

163
00:04:46,920 --> 00:04:48,420
Then after the entire DOM has 

164
00:04:48,420 --> 00:04:49,980
been updated, React is going to 

165
00:04:49,980 --> 00:04:51,760
start calling our useEffects. It 

166
00:04:51,790 --> 00:04:53,360
calls then in the order in which 

167
00:04:53,360 --> 00:04:55,390
they are called, but starting at 

168
00:04:55,390 --> 00:04:57,300
the child component. We get 

169
00:04:57,410 --> 00:04:59,340
child useEffect no deps is 

170
00:04:59,340 --> 00:05:01,690
called, we get the child 

171
00:05:01,690 --> 00:05:03,480
useEffect empty deps is called, 

172
00:05:04,150 --> 00:05:05,500
and then we get the child effect 

173
00:05:05,590 --> 00:05:07,580
with dep is called, and the dep 

174
00:05:07,580 --> 00:05:09,910
here is our count value. Then 

175
00:05:10,010 --> 00:05:11,160
we''re going to start calling the 

176
00:05:11,190 --> 00:05:14,680
app useEffect callbacks. You''ll 

177
00:05:14,680 --> 00:05:16,330
notice that we actually call the 

178
00:05:16,330 --> 00:05:18,510
cleanup first, and then we call 

179
00:05:18,510 --> 00:05:20,240
the setup. Here we have the 

180
00:05:20,240 --> 00:05:23,980
cleanup and then the setup. We 

181
00:05:23,980 --> 00:05:25,810
also do the same for the cleanup 

182
00:05:26,130 --> 00:05:28,110
when we have a dependency, and 

183
00:05:28,110 --> 00:05:29,170
then the setup when we have a 

184
00:05:29,170 --> 00:05:32,330
dependency. You''ll notice that 

185
00:05:32,330 --> 00:05:33,750
the cleanup for both of these is 

186
00:05:33,750 --> 00:05:35,560
called before the setup for both 

187
00:05:35,560 --> 00:05:37,690
of these, and the cleanups are 

188
00:05:37,690 --> 00:05:38,790
both called in the order in 

189
00:05:38,790 --> 00:05:40,210
which the appear, just like the 

190
00:05:40,210 --> 00:05:42,450
setups. You''ll also notice that 

191
00:05:42,450 --> 00:05:44,050
this useEffect callback and its 

192
00:05:44,050 --> 00:05:45,880
cleanup were not called. That''s 

193
00:05:45,880 --> 00:05:48,040
because useEffect callbacks are 

194
00:05:48,040 --> 00:05:49,600
only called if they have no 

195
00:05:49,600 --> 00:05:52,300
dependency listed or if they 

196
00:05:52,300 --> 00:05:53,620
have a dependency listed, and 

197
00:05:53,620 --> 00:05:54,640
one of those dependencies is 

198
00:05:54,640 --> 00:05:56,770
changed. We have a dependency 

199
00:05:56,770 --> 00:05:58,630
list, but it''s empty, and so 

200
00:05:58,630 --> 00:05:59,690
therefore, none of the 

201
00:05:59,690 --> 00:06:01,010
dependency is changed, because 

202
00:06:01,010 --> 00:06:02,430
it doesn''t have any dependencies. 

203
00:06:02,980 --> 00:06:04,560
This useEffect callback and its 

204
00:06:04,560 --> 00:06:06,150
cleanup will not be called on 

205
00:06:06,250 --> 00:06:08,280
updates. Let''s go ahead and 

206
00:06:08,280 --> 00:06:09,940
click on this button. We''ll 

207
00:06:09,940 --> 00:06:11,570
remember that this is the last 

208
00:06:11,620 --> 00:06:13,460
log that we saw for that last 

209
00:06:13,460 --> 00:06:15,590
update. When I click on that 

210
00:06:15,590 --> 00:06:16,770
button, we''re going to call 

211
00:06:16,770 --> 00:06:18,840
setCount, and we''re providing a 

212
00:06:18,840 --> 00:06:20,380
function updater function where 

213
00:06:20,380 --> 00:06:21,640
we take the previous value of 

214
00:06:21,640 --> 00:06:23,150
the state and return the new 

215
00:06:23,150 --> 00:06:24,650
value of our state. Here, we''re 

216
00:06:24,650 --> 00:06:25,680
just going to take the previous 

217
00:06:25,680 --> 00:06:28,300
count and add 1 to it. This is 

218
00:06:28,300 --> 00:06:29,580
going to trigger a re-render. 

219
00:06:29,870 --> 00:06:30,730
Let''s take a look at what 

220
00:06:30,730 --> 00:06:33,590
happens here. I click on that. 

221
00:06:33,680 --> 00:06:35,510
You''ll notice that the app has 

222
00:06:35,510 --> 00:06:37,710
none of its logs called. That''s 

223
00:06:37,710 --> 00:06:38,700
because the state update 

224
00:06:38,750 --> 00:06:40,370
actually only resides within 

225
00:06:40,370 --> 00:06:42,140
this component, so React knows 

226
00:06:42,140 --> 00:06:43,630
that this component is the only 

227
00:06:43,630 --> 00:06:44,890
one that needs to be re-rendered. 

228
00:06:45,240 --> 00:06:46,780
Let''s follow the console.logs. 

229
00:06:46,860 --> 00:06:48,410
First we start with this child 

230
00:06:48,410 --> 00:06:50,860
render start. We call this again, 

231
00:06:50,900 --> 00:06:52,030
and we don''t get a log for our 

232
00:06:52,030 --> 00:06:53,480
useState callback, because this 

233
00:06:53,480 --> 00:06:54,480
component''s already been 

234
00:06:54,480 --> 00:06:55,640
rendered, and we already 

235
00:06:55,640 --> 00:06:56,900
retrieved the initial value and 

236
00:06:56,900 --> 00:06:58,140
we no longer need that initial 

237
00:06:58,140 --> 00:06:59,450
value, so React doesn''t bother 

238
00:06:59,450 --> 00:07:00,620
calling this function anymore. 

239
00:07:01,170 --> 00:07:02,640
Then we call all these useEffect 

240
00:07:02,640 --> 00:07:04,780
hooks. We create our React 

241
00:07:04,860 --> 00:07:07,600
element for our UI, and then we 

242
00:07:07,600 --> 00:07:10,940
call this child render end. Then 

243
00:07:11,000 --> 00:07:12,300
our useEffect cleanups are 

244
00:07:12,300 --> 00:07:14,410
called in order if those 

245
00:07:14,410 --> 00:07:16,060
particular useEffects need to be 

246
00:07:16,060 --> 00:07:17,980
rerun. In this case, we haven''t 

247
00:07:17,980 --> 00:07:19,780
listed any dependencies, so this 

248
00:07:19,780 --> 00:07:21,730
will be rerun on every render of 

249
00:07:21,730 --> 00:07:23,700
this component, so we''ll get the 

250
00:07:23,700 --> 00:07:26,110
cleanup there. This one is 

251
00:07:26,110 --> 00:07:27,970
listing a dependency array, and 

252
00:07:27,970 --> 00:07:29,140
there are no dependencies that 

253
00:07:29,140 --> 00:07:30,860
can change, so it''s not going to 

254
00:07:30,860 --> 00:07:33,350
be called. This one does have a 

255
00:07:33,350 --> 00:07:34,610
dependency array, and that 

256
00:07:34,610 --> 00:07:36,280
dependency did change, so the 

257
00:07:36,280 --> 00:07:39,800
cleanup is called here. Then we 

258
00:07:39,800 --> 00:07:42,420
start with the setups for the 

259
00:07:42,420 --> 00:07:43,730
useEffect that has no 

260
00:07:43,730 --> 00:07:45,930
dependencies and the useEffect 

261
00:07:45,930 --> 00:07:46,940
that has a dependency that 

262
00:07:46,940 --> 00:07:49,950
changed. This is the last one 

263
00:07:49,950 --> 00:07:51,710
that was called. If we click 

264
00:07:51,710 --> 00:07:53,100
this again, we''ll see the exact 

265
00:07:53,100 --> 00:07:55,920
same order of calls, and then if 

266
00:07:55,920 --> 00:07:58,560
we uncheck show child...Let''s go 

267
00:07:58,560 --> 00:08:00,310
ahead and highlight that, so we 

268
00:08:00,310 --> 00:08:01,500
know which one was the last that 

269
00:08:01,500 --> 00:08:03,310
we called, and then we uncheck 

270
00:08:03,360 --> 00:08:05,890
show child. That''s going to 

271
00:08:05,890 --> 00:08:07,700
trigger a re-render of our app 

272
00:08:07,700 --> 00:08:09,580
component, because we changed 

273
00:08:09,580 --> 00:08:11,770
that showChildState using 

274
00:08:11,770 --> 00:08:14,570
setShowChild. That triggers a 

275
00:08:14,570 --> 00:08:16,820
render start here. We go through 

276
00:08:16,850 --> 00:08:18,990
all of this code, again skipping 

277
00:08:19,060 --> 00:08:21,840
the useState callback. We come 

278
00:08:21,840 --> 00:08:23,280
down here, create our elements, 

279
00:08:23,360 --> 00:08:25,830
and then render end right here. 

280
00:08:26,590 --> 00:08:28,530
Then we''re doing a cleanup on 

281
00:08:28,600 --> 00:08:29,910
all of the children, because the 

282
00:08:29,910 --> 00:08:31,820
child is being removed from the 

283
00:08:31,820 --> 00:08:33,680
page, so we''re now rendering 

284
00:08:33,680 --> 00:08:35,790
null. React notices the 

285
00:08:35,790 --> 00:08:37,640
previous JSX that you gave me 

286
00:08:37,970 --> 00:08:39,540
included the child, and this 

287
00:08:39,540 --> 00:08:41,230
next JSX that you gave me does 

288
00:08:41,230 --> 00:08:42,660
not include the child. That 

289
00:08:42,660 --> 00:08:43,950
means I need to remove the child 

290
00:08:43,950 --> 00:08:45,520
from the page, and so I''m going 

291
00:08:45,520 --> 00:08:46,780
to unmount the component and 

292
00:08:46,780 --> 00:08:48,390
call all of the cleanups for all 

293
00:08:48,390 --> 00:08:49,380
of the useEffects that that 

294
00:08:49,380 --> 00:08:51,460
child had going. Let''s come up 

295
00:08:51,460 --> 00:08:52,850
here, and we''ll see that that 

296
00:08:52,850 --> 00:08:54,480
happens in the order in which 

297
00:08:54,480 --> 00:08:56,610
they appear in the code. We see 

298
00:08:56,660 --> 00:08:59,200
our no deps cleanup runs. We''ll 

299
00:08:59,200 --> 00:09:01,060
see our empty deps cleanup run. 

300
00:09:01,760 --> 00:09:03,020
Even though we have listed 

301
00:09:03,020 --> 00:09:04,250
dependencies but none of them 

302
00:09:04,250 --> 00:09:05,330
changed because we have no 

303
00:09:05,330 --> 00:09:07,210
dependencies, our cleanup is 

304
00:09:07,210 --> 00:09:08,560
going to run, because we''re 

305
00:09:08,640 --> 00:09:10,310
unmounting this component, and 

306
00:09:10,310 --> 00:09:11,860
then we get a cleanup of the 

307
00:09:11,860 --> 00:09:13,560
effect with dependencies. Even 

308
00:09:13,560 --> 00:09:14,670
though this count value didn''t 

309
00:09:14,670 --> 00:09:16,240
change, it''s going to be called, 

310
00:09:16,240 --> 00:09:17,300
because this component is 

311
00:09:17,300 --> 00:09:19,700
getting unmounted. Then because 

312
00:09:19,700 --> 00:09:21,390
our state changed, in the app, 

313
00:09:21,590 --> 00:09:22,920
we''re going to run some cleanups 

314
00:09:23,410 --> 00:09:25,300
for the useEffects that are 

315
00:09:25,300 --> 00:09:27,770
relevant. Here, we have this 

316
00:09:27,770 --> 00:09:28,830
cleanup is getting called, 

317
00:09:28,830 --> 00:09:30,290
because it has no dependencies. 

318
00:09:30,820 --> 00:09:32,080
This cleanup is not getting 

319
00:09:32,080 --> 00:09:33,810
called, because it has an empty 

320
00:09:33,810 --> 00:09:35,510
dependency array. Then this 

321
00:09:35,510 --> 00:09:36,730
cleanup is getting called, 

322
00:09:36,890 --> 00:09:38,310
because the dependency that it 

323
00:09:38,310 --> 00:09:41,220
has has changed. Then we go 

324
00:09:41,220 --> 00:09:43,070
ahead and run the effects that 

325
00:09:43,070 --> 00:09:45,060
are relevant, the useEffect with 

326
00:09:45,060 --> 00:09:47,550
no dependencies and the 

327
00:09:47,550 --> 00:09:48,970
useEffect with a dependency that 

328
00:09:48,970 --> 00:09:50,850
changed. I encourage you to 

329
00:09:50,850 --> 00:09:51,790
play around with this code 

330
00:09:51,790 --> 00:09:53,470
example. Also, something else 

331
00:09:53,470 --> 00:09:54,930
that might help you is this 

332
00:09:54,930 --> 00:09:58,560
diagram from Donovan. You go to 

333
00:09:58,560 --> 00:10:01,510
donovan‚ÅÑhookflow on GitHub and 

334
00:10:01,510 --> 00:10:02,880
scroll down here and you''ll see 

335
00:10:02,880 --> 00:10:04,960
the diagram that Donovan has 

336
00:10:04,960 --> 00:10:06,660
created. We get our lazy 

337
00:10:06,660 --> 00:10:08,220
initializers. That''s our 

338
00:10:08,220 --> 00:10:10,040
useState callback. We get our 

339
00:10:10,040 --> 00:10:11,830
render function that finishes 

340
00:10:11,890 --> 00:10:13,160
after the lazy initializers are 

341
00:10:13,160 --> 00:10:15,200
all called. React will update 

342
00:10:15,200 --> 00:10:18,080
the DOM. React also has a 

343
00:10:18,080 --> 00:10:19,680
useLayoutEffect hook that will 

344
00:10:19,680 --> 00:10:21,100
be run here. That operates 

345
00:10:21,100 --> 00:10:22,270
pretty similarly to the 

346
00:10:22,270 --> 00:10:24,540
useEffect. The browser updates 

347
00:10:24,540 --> 00:10:26,390
the screen based on the updates 

348
00:10:26,390 --> 00:10:28,300
to the DOM that React made and 

349
00:10:28,300 --> 00:10:29,420
then our effects are going to be 

350
00:10:29,420 --> 00:10:31,240
called. This is exactly what we 

351
00:10:31,240 --> 00:10:33,480
observed in our example. When 

352
00:10:33,480 --> 00:10:34,770
there''s a state update, we get 

353
00:10:34,770 --> 00:10:36,260
our render called, our lazy 

354
00:10:36,260 --> 00:10:37,800
initializers are not called. 

355
00:10:38,340 --> 00:10:39,700
React is going to update the DOM, 

356
00:10:39,990 --> 00:10:41,000
we get a cleanup of layout 

357
00:10:41,000 --> 00:10:42,150
effects and then our layout 

358
00:10:42,150 --> 00:10:44,460
effects are run. Browser updates 

359
00:10:44,460 --> 00:10:45,800
the screen and then we get a 

360
00:10:45,800 --> 00:10:47,750
cleanup of our effects and then 

361
00:10:47,750 --> 00:10:50,090
our effects are run. When the 

362
00:10:50,090 --> 00:10:51,790
component is unmounted, we get 

363
00:10:51,790 --> 00:10:53,270
the cleanup of all of our 

364
00:10:53,270 --> 00:10:55,240
effects. Having a firm 

365
00:10:55,240 --> 00:10:56,500
understanding on the order in 

366
00:10:56,500 --> 00:10:57,890
which these things are called is 

367
00:10:57,890 --> 00:10:59,390
not totally necessary for you to 

368
00:10:59,390 --> 00:11:01,500
be effective with React. It can 

369
00:11:01,500 --> 00:11:03,130
help you in some situations, so 

370
00:11:03,130 --> 00:11:04,120
I encourage you to play around 

371
00:11:04,120 --> 00:11:04,660
with this.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Understanding the order in which React hooks are called can be really helpful in using React hooks effectively.

- We‚Äôll explore the lifecycle of a function component with hooks with colorful console log statements so we know when one phase starts and when it ends.

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296082/transcript-images/react-understand-the-react-hook-flow-hook-flow.jpg)

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    // https://github.com/donavon/hook-flow

    function Child() {
      console.log(''%c    Child: render start'', ''color: MediumSpringGreen'');
      // A useState Hook and console logging several useEffect Hooks
      const [count, setCount] = React.useState(() => {
        console.log(''%c    Child: useState callback'', ''color: tomato'');
        return 0;
      });

      // The useEffect hooks are called in order starting from the child useEffect
      React.useEffect(() => {
        console.log(''%c    Child: useEffect no deps'', ''color: LightCoral'');
        return () => {
          console.log(
            ''%c    Child: useEffect no deps cleanup'',
            ''color: LightCoral''
          );
        };
      });

      React.useEffect(() => {
        console.log(
          ''%c    Child: useEffect empty deps'',
          ''color: MediumTurquoise''
        );
        return () => {
          console.log(
            ''%c    Child: useEffect empty deps cleanup'',
            ''color: MediumTurquoise''
          );
        };
      }, []);

      React.useEffect(() => {
        console.log(''%c    Child: useEffect with dep'', ''color: HotPink'');
        return () => {
          console.log(
            ''%c    Child: useEffect with dep cleanup'',
            ''color: HotPink''
          );
        };
      }, [count]);

      // Creating our React element
      const element = (
        // Providing an update function, triggering a re-render
        <button onClick={() => setCount(previousCount => previousCount + 1)}>
          {count}
        </button>
      );

      // Console log that our React element is finished
      console.log(''%c    Child: render end'', ''color: MediumSpringGreen'');

      return element;
    }

    function App() {
      console.log(''%cApp: render start'', ''color: MediumSpringGreen'');
      // A boolean useState
      const [showChild, setShowChild] = React.useState(() => {
        console.log(''%cApp: useState callback'', ''color: tomato'');
        return false;
      });

      // The useEffect Hooks are called in order
      React.useEffect(() => {
        console.log(''%cApp: useEffect no deps'', ''color: LightCoral'');
        return () => {
          console.log(''%cApp: useEffect no deps cleanup'', ''color: LightCoral'');
        };
      });
      // Since this has no dependencies, it will not be called on updates
      React.useEffect(() => {
        console.log(''%cApp: useEffect empty deps'', ''color: MediumTurquoise'');
        return () => {
          console.log(
            ''%cApp: useEffect empty deps cleanup'',
            ''color: MediumTurquoise''
          );
        };
      }, []);
      // Running useEffect
      React.useEffect(() => {
        console.log(''%cApp: useEffect with dep'', ''color: HotPink'');
        return () => {
          console.log(''%cApp: useEffect with dep cleanup'', ''color: HotPink'');
        };
      }, [showChild]);

      // Rendering UI child `Child: render start`
      const element = (
        <>
          <label>
            <input
              type="checkbox"
              checked={showChild}
              onChange={e => setShowChild(e.target.checked)}
            />{'' ''}
            show child
          </label>
          <div
            style={{
              padding: 10,
              margin: 10,
              height: 30,
              width: 30,
              border: ''solid''
            }}
          >
            {/* Creating a component but only after initial render when showChild checkbox is checked */}
            {/* If it''s not being called, it''s only creating React objects  */}
            {showChild ? <Child /> : null}
            {/* when showChild is toggled off, it removes the Child component and calls for a cleanup  */}
          </div>
        </>
      );

      console.log(''%cApp: render end'', ''color: MediumSpringGreen'');

      return element;
    }

    ReactDOM.render(<App />, document.getElementById(''root''));
  </script>
</body>
```

- Understanding all of this is not critical to your success with using React, and most of the time you won‚Äôt need to think about this at all, but understanding it can help you at times.

## Additional resource

- [A flowchart that explains the new lifecycle of a Hooks component](https://github.com/donavon/hook-flow)
- [React Hooks: What''s going to happen to my tests?](https://kentcdodds.com/blog/react-hooks-whats-going-to-happen-to-my-tests)
- [Kent''s Livestream - React Hooks: Refactor compound components to hooks](https://www.youtube.com/watch?v=415EfGPuhSo)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '8ff3d910', 'https://d2c5owlt6rorc3.cloudfront.net/react-understand-the-react-hook-flow-GUY4QGp4U/dash/react-understand-the-react-hook-flow-GUY4QGp4U.mpd', 'https://stream.mux.com/QYNlPHyuqgfZmCmizvtawKJJP4JiH003Xy01I1WxxNcEI.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/18-react-understand-the-react-hook-flow.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6267, 'Use the key prop when Rendering a List with React', NULL, 'It doesn‚Äôt take long working with React before you want to render a list of items and when you do, you‚Äôll inevitably encounter this console warning: ‚ÄúWarning: Each child in a list should have a unique key prop.‚Äù This warning is pretty simple to silence by providing the bespoken `key` prop, but it is really useful to understand what that warning is about and the bugs that can happen if you do not address the warning properly.

In this lesson we‚Äôll see a demo of this problem and understand a situation that can happen when we don‚Äôt handle it properly. We‚Äôre using inputs in this example, but the same thing can happen for your own components that maintain state. You definitely do not want to ignore this warning.', 438, NULL, '2020-03-11T02:43:55.132Z', '2025-12-13T00:54:53.678Z', 'react-use-the-key-prop-when-rendering-a-list-with-react-b31bfa42', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk/react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk.jpg', true, NULL, 'Kent C. Dodds: [0:00] Here we have an app that''s managing some items. We can add items and remove items. We have a fixed set of items that can be added or removed, and we have a button to add additional items, which is disabled when we''ve added all of our items, and then we iterate over the items that we have and render a list item for each of those.

[0:22] Here we have remove buttons for each one of these, then the item name itself, and an input with that item in it. When we render this, we''re going to get this waning that says, "Each child in a list should have a unique ''key'' prop."

[0:36] What that''s talking about is any time you render an array of React elements, in our case we''re rendering these <li>s, each one of those React elements must have a key prop associated with it so that React can track these appropriately over time.

[0:50] Don''t be fooled by the syntax. There''s nothing really magic going on here. What we''re doing is we''re taking an array of strings, we''re mapping over that array of strings, and turning that array of strings into an array of React elements. Specifically, in our case, these are <li> elements.

[1:05] That''s the case where you need to have a key prop for every React element in the array. We''re seeing this warning because we don''t. To fix this warning is pretty simple. We look at the items that we''re iterating over. That is this array right here. Each one of those items has an id that uniquely identifies the item. We''re going to use that id as the key prop.

[1:29] Here, we''ll say key = {item.id}. If we save this, we don''t get that warning anymore. I''m not a huge fan of changing my code just to make warnings go away. I like to understand why that warning is there in the first place. That''s why we have this contrived example for me to show you.

[1:47] Here, we have a list of each one of these items, where the item itself is the label and then the default value for the input is the item as well. Then we can remove these and add them. As I removed them, if you watched carefully, you might have noticed an interesting bug.

[2:02] If I click on remove here and remove and remove and remove, everything works out just fine. If I remove from the beginning, now we''re having orange being associated to the apple. Grape is associated to orange. Pear is associated to grape. That''s interesting.

[2:18] If I remove from the middle here, now we have pear is associated to orange. Orange is associated to apple. Things are all kinds of messed up. This is the bug that the key prop helps you to avoid.

[2:29] If you consider what happens when we click this remove button or this add button, then this strange behavior will make sense. When we click on removeItem, for example, if we try to remove the grape, then that goes into this code right here, which calls setItems. That sets the items to the same list of items that we had before, except we''re filtering out the item that you were trying to remove.

[2:52] This call to setItems is going to trigger a re-render of our app. The app is going to come down here. We''re going to create these React elements. We''re going to iterate over this list of items, which now has one less item than it had before. We''re going to hand that off to React so that it can update the DOM appropriately.

[3:10] The way React updates the DOM is it has a reference to the JSX elements that you gave it the last time it rendered this app component. It compares those React elements with the new React elements that you just returned at this time. Then it updates the DOM accordingly.

[3:24] When you''re giving it an array of React elements, unless React has some sort of identifier to know which element is which, it doesn''t know whether you removed an element or maybe you added three and removed four or maybe you changed the order and just removed the first one.

[3:39] It doesn''t have any insight into what it is that you did to this array of React elements between the last time it rendered and this time. Any time you''re rendering an array of React elements, you need to give it a key so that it can determine whether elements were removed, added, or modified.

[3:57] That''s why providing a unique key for each one of these items is going to fix this problem. Now, if we click remove on the grape, all of the inputs and their labels are correct.

[4:08] You''ll notice also that if you try to provide some-key where it''s the same key for each one of these, you''re going to get a warning there because it encountered two children with the same key. Keys need to be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted -- the behavior is unsupported and could change in a future version.

[4:32] Hardcoding a specific key that''s duplicated across these elements could lead to some very unexpected behavior, and we still experience that bug that we had before. The key that you provide for each element of this array of React elements needs to be unique to the item that you''re rendering. Typically, that''s going to be some sort of id, as in our case.

[4:56] Another mistake that I see people make sometimes is they try to use the index as the key. While you get rid of the warning, you do not get rid of the bugs. That''s because as React is comparing the previous version with the new version, what you''re saying is the element that was at index four is actually now at index three, but React doesn''t know that.

[5:17] It maintains the state for this input to be the same as the one that was at index three the last time rather than being the one that was in index four last time. It''s important that you keep the key as something that''s unique to the item that this element in the array is representing.

[5:36] Here''s another little demo that I have at the bottom of this file. I''m just going to uncomment that. We''ll save this. We''ll get a refresh. In this example, we have those items. Every 1,000 milliseconds, we have this interval that shuffles those items and triggers a re-render with that shuffled version of the items. We randomize the items every time.

[5:57] We have three versions of this, one that renders those items as inputs without a key, another that renders those items with inputs with the key of index, and then the last that renders those items with an appropriate key. You''ll notice that they''re all updating correctly, meaning that they''re all jumping around the screen as they should, but the focus is not updating correctly.

[6:22] I''m focused on apple right now. When that one moves, my focus doesn''t go around with apple. Also, if I try to highlight one of these, then my highlight goes away as well. You''ll notice that the With Key as Index suffers from the exact same problem. Even though it''s not getting the warning in the console, you''re still not fixing this bug.

[6:42] Only when you have a key in there will your focus travel around with the input that it''s associated with, because React is able to determine where to move the focus as your component updates.

[6:55] In review, it''s common in React to take an array and map that array to an array of elements and render that directly in your JSX. When you do that, it''s important that you add a key to the root React element of each element in the array so that React can track changes over time and make sure that it preserves the state of each element in the array and its descendants.', NULL, false, '24-egghead-react-use-the-key-prop-when-rendering-a-list-with-react-b95caad8.mp4', 11, true, false, 160, '---
mp4: 55007003
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk/react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk.mp4', 'react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk', 'zcKP', 'https://egghead-pipeline.s3.amazonaws.com/react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk/react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk.mp3?c47049c47a2131cf?b9fd', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.009Z', NULL, 8388599, NULL, 8174, 0, NULL, -1525199, '87ed7412905f4b50b019cef6df60b99c', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/23-rendering-lists?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 401209864, '1
00:00:00,230 --> 00:00:01,200
Here we have an app that''s 

2
00:00:01,200 --> 00:00:03,930
managing some items. We can add 

3
00:00:03,930 --> 00:00:06,310
items and remove items. We have 

4
00:00:06,310 --> 00:00:08,150
a fixed set of items that can be 

5
00:00:08,150 --> 00:00:10,470
added or removed, and we have a 

6
00:00:10,470 --> 00:00:12,470
button to add additional items, 

7
00:00:12,900 --> 00:00:14,060
which is disabled when we''ve 

8
00:00:14,060 --> 00:00:15,690
added all of our items, and then 

9
00:00:15,690 --> 00:00:17,310
we iterate over the items that 

10
00:00:17,310 --> 00:00:20,430
we have and render a list item 

11
00:00:20,490 --> 00:00:23,400
for each of those. Here we have 

12
00:00:23,450 --> 00:00:25,210
remove buttons for each one of 

13
00:00:25,210 --> 00:00:27,480
these, then the item name itself, 

14
00:00:27,760 --> 00:00:29,420
and an input with that item in 

15
00:00:29,420 --> 00:00:31,490
it. When we render this, we''re 

16
00:00:31,490 --> 00:00:32,700
going to get this waning that 

17
00:00:32,700 --> 00:00:34,400
says, "Each child in a list 

18
00:00:34,400 --> 00:00:36,070
should have a unique ''key'' prop." 

19
00:00:36,820 --> 00:00:38,320
What that''s talking about is any 

20
00:00:38,320 --> 00:00:39,960
time you render an array of 

21
00:00:39,960 --> 00:00:41,640
React elements, in our case 

22
00:00:41,640 --> 00:00:42,940
we''re rendering these <li>s, 

23
00:00:43,200 --> 00:00:44,550
each one of those React elements 

24
00:00:44,550 --> 00:00:46,750
must have a key prop associated 

25
00:00:46,750 --> 00:00:48,880
with it so that React can track 

26
00:00:48,880 --> 00:00:50,440
these appropriately over time. 

27
00:00:50,920 --> 00:00:52,390
Don''t be fooled by the syntax. 

28
00:00:52,390 --> 00:00:53,550
There''s nothing really magic 

29
00:00:53,550 --> 00:00:55,110
going on here. What we''re doing 

30
00:00:55,110 --> 00:00:56,200
is we''re taking an array of 

31
00:00:56,200 --> 00:00:57,950
strings, we''re mapping over that 

32
00:00:57,950 --> 00:00:59,690
array of strings, and turning 

33
00:00:59,690 --> 00:01:01,190
that array of strings into an 

34
00:01:01,190 --> 00:01:02,690
array of React elements. 

35
00:01:02,730 --> 00:01:04,100
Specifically, in our case, these 

36
00:01:04,100 --> 00:01:06,370
are <li> elements. That''s the 

37
00:01:06,370 --> 00:01:07,470
case where you need to have a 

38
00:01:07,470 --> 00:01:09,390
key prop for every React element 

39
00:01:09,460 --> 00:01:11,140
in the array. We''re seeing this 

40
00:01:11,140 --> 00:01:13,460
warning because we don''t. To fix 

41
00:01:13,460 --> 00:01:15,360
this warning is pretty simple. 

42
00:01:15,780 --> 00:01:17,070
We look at the items that we''re 

43
00:01:17,070 --> 00:01:20,010
iterating over. That is this 

44
00:01:20,010 --> 00:01:21,630
array right here. Each one of 

45
00:01:21,630 --> 00:01:23,360
those items has an id that 

46
00:01:23,360 --> 00:01:25,130
uniquely identifies the item. 

47
00:01:26,140 --> 00:01:28,070
We''re going to use that id as 

48
00:01:28,070 --> 00:01:29,890
the key prop. Here, we''ll say 

49
00:01:29,890 --> 00:01:33,680
key = {item.id}. If we save this, 

50
00:01:34,310 --> 00:01:35,140
we don''t get that warning 

51
00:01:35,140 --> 00:01:37,360
anymore. I''m not a huge fan of 

52
00:01:37,400 --> 00:01:39,050
changing my code just to make 

53
00:01:39,050 --> 00:01:40,650
warnings go away. I like to 

54
00:01:40,650 --> 00:01:42,240
understand why that warning is 

55
00:01:42,240 --> 00:01:44,040
there in the first place. That''s 

56
00:01:44,040 --> 00:01:45,010
why we have this contrived 

57
00:01:45,010 --> 00:01:46,160
example for me to show you. 

58
00:01:47,530 --> 00:01:48,690
Here, we have a list of each one 

59
00:01:48,690 --> 00:01:50,250
of these items, where the item 

60
00:01:50,250 --> 00:01:52,050
itself is the label and then the 

61
00:01:52,050 --> 00:01:54,020
default value for the input is 

62
00:01:54,020 --> 00:01:55,760
the item as well. Then we can 

63
00:01:55,760 --> 00:01:58,550
remove these and add them. As I 

64
00:01:58,550 --> 00:01:59,700
removed them, if you watched 

65
00:01:59,700 --> 00:02:00,600
carefully, you might have 

66
00:02:00,600 --> 00:02:03,010
noticed an interesting bug. If 

67
00:02:03,010 --> 00:02:04,590
I click on remove here and 

68
00:02:04,590 --> 00:02:06,350
remove and remove and remove, 

69
00:02:06,640 --> 00:02:08,000
everything works out just fine. 

70
00:02:08,380 --> 00:02:09,830
If I remove from the beginning, 

71
00:02:10,550 --> 00:02:12,040
now we''re having orange being 

72
00:02:12,040 --> 00:02:14,230
associated to the apple. Grape 

73
00:02:14,230 --> 00:02:15,520
is associated to orange. Pear is 

74
00:02:15,520 --> 00:02:17,400
associated to grape. That''s 

75
00:02:17,460 --> 00:02:19,190
interesting. If I remove from 

76
00:02:19,190 --> 00:02:20,610
the middle here, now we have 

77
00:02:20,660 --> 00:02:22,040
pear is associated to orange. 

78
00:02:22,120 --> 00:02:23,530
Orange is associated to apple. 

79
00:02:23,870 --> 00:02:25,350
Things are all kinds of messed 

80
00:02:25,350 --> 00:02:27,850
up. This is the bug that the key 

81
00:02:27,850 --> 00:02:30,030
prop helps you to avoid. If you 

82
00:02:30,030 --> 00:02:31,410
consider what happens when we 

83
00:02:31,410 --> 00:02:33,310
click this remove button or this 

84
00:02:33,340 --> 00:02:34,670
add button, then this strange 

85
00:02:34,670 --> 00:02:36,280
behavior will make sense. When 

86
00:02:36,280 --> 00:02:38,150
we click on removeItem, for 

87
00:02:38,150 --> 00:02:39,430
example, if we try to remove the 

88
00:02:39,430 --> 00:02:41,640
grape, then that goes into this 

89
00:02:41,640 --> 00:02:42,840
code right here, which calls 

90
00:02:42,840 --> 00:02:46,220
setItems. That sets the items to 

91
00:02:46,220 --> 00:02:47,790
the same list of items that we 

92
00:02:47,790 --> 00:02:49,120
had before, except we''re 

93
00:02:49,120 --> 00:02:50,740
filtering out the item that you 

94
00:02:50,740 --> 00:02:52,880
were trying to remove. This 

95
00:02:52,880 --> 00:02:54,390
call to setItems is going to 

96
00:02:54,390 --> 00:02:56,000
trigger a re-render of our app. 

97
00:02:56,920 --> 00:02:58,200
The app is going to come down 

98
00:02:58,200 --> 00:02:59,320
here. We''re going to create 

99
00:02:59,320 --> 00:03:00,700
these React elements. We''re 

100
00:03:00,700 --> 00:03:02,250
going to iterate over this list 

101
00:03:02,250 --> 00:03:03,970
of items, which now has one less 

102
00:03:04,020 --> 00:03:05,810
item than it had before. We''re 

103
00:03:05,810 --> 00:03:07,440
going to hand that off to React 

104
00:03:07,440 --> 00:03:08,970
so that it can update the DOM 

105
00:03:09,050 --> 00:03:10,850
appropriately. The way React 

106
00:03:10,850 --> 00:03:12,440
updates the DOM is it has a 

107
00:03:12,440 --> 00:03:14,290
reference to the JSX elements 

108
00:03:14,290 --> 00:03:15,590
that you gave it the last time 

109
00:03:15,590 --> 00:03:17,100
it rendered this app component. 

110
00:03:17,300 --> 00:03:18,940
It compares those React elements 

111
00:03:18,970 --> 00:03:20,450
with the new React elements that 

112
00:03:20,450 --> 00:03:21,760
you just returned at this time. 

113
00:03:22,260 --> 00:03:23,580
Then it updates the DOM 

114
00:03:23,760 --> 00:03:25,530
accordingly. When you''re giving 

115
00:03:25,530 --> 00:03:27,460
it an array of React elements, 

116
00:03:27,650 --> 00:03:28,960
unless React has some sort of 

117
00:03:29,010 --> 00:03:30,620
identifier to know which element 

118
00:03:30,620 --> 00:03:31,870
is which, it doesn''t know 

119
00:03:31,870 --> 00:03:33,280
whether you removed an element 

120
00:03:33,530 --> 00:03:35,230
or maybe you added three and 

121
00:03:35,230 --> 00:03:36,900
removed four or maybe you 

122
00:03:36,900 --> 00:03:38,200
changed the order and just 

123
00:03:38,200 --> 00:03:39,680
removed the first one. It 

124
00:03:39,680 --> 00:03:41,240
doesn''t have any insight into 

125
00:03:41,240 --> 00:03:42,830
what it is that you did to this 

126
00:03:42,830 --> 00:03:45,210
array of React elements between 

127
00:03:45,210 --> 00:03:46,780
the last time it rendered and 

128
00:03:46,780 --> 00:03:48,570
this time. Any time you''re 

129
00:03:48,570 --> 00:03:50,110
rendering an array of React 

130
00:03:50,110 --> 00:03:51,850
elements, you need to give it a 

131
00:03:51,850 --> 00:03:53,800
key so that it can determine 

132
00:03:53,850 --> 00:03:55,450
whether elements were removed, 

133
00:03:55,590 --> 00:03:57,550
added, or modified. That''s why 

134
00:03:57,550 --> 00:03:59,610
providing a unique key for each 

135
00:03:59,610 --> 00:04:00,960
one of these items is going to 

136
00:04:00,960 --> 00:04:03,180
fix this problem. Now, if we 

137
00:04:03,180 --> 00:04:05,020
click remove on the grape, all 

138
00:04:05,020 --> 00:04:06,320
of the inputs and their labels 

139
00:04:06,320 --> 00:04:09,690
are correct. You''ll notice also 

140
00:04:09,690 --> 00:04:12,130
that if you try to provide some-

141
00:04:12,420 --> 00:04:14,390
key where it''s the same key for 

142
00:04:14,390 --> 00:04:15,960
each one of these, you''re going 

143
00:04:15,960 --> 00:04:17,560
to get a warning there because 

144
00:04:17,560 --> 00:04:18,980
it encountered two children with 

145
00:04:18,980 --> 00:04:21,240
the same key. Keys need to be 

146
00:04:21,240 --> 00:04:22,590
unique so that components 

147
00:04:22,590 --> 00:04:23,920
maintain their identity across 

148
00:04:23,980 --> 00:04:25,970
updates. Non-unique keys may 

149
00:04:25,970 --> 00:04:27,570
cause children to be duplicated 

150
00:04:27,880 --> 00:04:29,370
and/or omitted -- the behavior 

151
00:04:29,370 --> 00:04:30,600
is unsupported and could change 

152
00:04:30,600 --> 00:04:33,160
in a future version. Hardcoding 

153
00:04:33,200 --> 00:04:34,780
a specific key that''s duplicated 

154
00:04:34,830 --> 00:04:36,540
across these elements could lead 

155
00:04:36,540 --> 00:04:38,860
to some very unexpected behavior, 

156
00:04:39,990 --> 00:04:41,680
and we still experience that bug 

157
00:04:41,680 --> 00:04:43,790
that we had before. The key that 

158
00:04:43,790 --> 00:04:45,450
you provide for each element of 

159
00:04:45,450 --> 00:04:46,960
this array of React elements 

160
00:04:47,040 --> 00:04:49,170
needs to be unique to the item 

161
00:04:49,390 --> 00:04:51,350
that you''re rendering. Typically, 

162
00:04:51,350 --> 00:04:52,870
that''s going to be some sort of 

163
00:04:52,970 --> 00:04:56,610
id, as in our case. Another 

164
00:04:56,610 --> 00:04:57,880
mistake that I see people make 

165
00:04:57,880 --> 00:05:00,100
sometimes is they try to use the 

166
00:05:00,100 --> 00:05:03,100
index as the key. While you get 

167
00:05:03,100 --> 00:05:04,720
rid of the warning, you do not 

168
00:05:04,720 --> 00:05:06,730
get rid of the bugs. That''s 

169
00:05:06,730 --> 00:05:08,610
because as React is comparing 

170
00:05:08,610 --> 00:05:09,720
the previous version with the 

171
00:05:09,720 --> 00:05:11,350
new version, what you''re saying 

172
00:05:11,410 --> 00:05:13,460
is the element that was at index 

173
00:05:13,460 --> 00:05:15,310
four is actually now at index 

174
00:05:15,310 --> 00:05:16,910
three, but React doesn''t know 

175
00:05:16,910 --> 00:05:18,850
that. It maintains the state 

176
00:05:18,850 --> 00:05:21,620
for this input to be the same as 

177
00:05:21,620 --> 00:05:23,020
the one that was at index three 

178
00:05:23,020 --> 00:05:25,250
the last time rather than being 

179
00:05:25,250 --> 00:05:26,750
the one that was in index four 

180
00:05:26,750 --> 00:05:28,870
last time. It''s important that 

181
00:05:28,870 --> 00:05:30,640
you keep the key as something 

182
00:05:30,640 --> 00:05:32,890
that''s unique to the item that 

183
00:05:32,890 --> 00:05:34,910
this element in the array is 

184
00:05:34,910 --> 00:05:36,520
representing. Here''s another 

185
00:05:36,520 --> 00:05:37,830
little demo that I have at the 

186
00:05:37,830 --> 00:05:39,690
bottom of this file. I''m just 

187
00:05:39,690 --> 00:05:41,450
going to uncomment that. We''ll 

188
00:05:41,450 --> 00:05:43,480
save this. We''ll get a refresh. 

189
00:05:44,190 --> 00:05:46,220
In this example, we have those 

190
00:05:46,220 --> 00:05:49,580
items. Every 1,000 milliseconds, 

191
00:05:49,580 --> 00:05:51,000
we have this interval that 

192
00:05:51,000 --> 00:05:52,860
shuffles those items and 

193
00:05:52,860 --> 00:05:54,150
triggers a re-render with that 

194
00:05:54,150 --> 00:05:55,610
shuffled version of the items. 

195
00:05:55,820 --> 00:05:57,160
We randomize the items every 

196
00:05:57,160 --> 00:05:58,910
time. We have three versions of 

197
00:05:58,910 --> 00:06:00,860
this, one that renders those 

198
00:06:00,860 --> 00:06:03,340
items as inputs without a key, 

199
00:06:04,120 --> 00:06:05,560
another that renders those items 

200
00:06:05,560 --> 00:06:07,200
with inputs with the key of 

201
00:06:07,200 --> 00:06:09,300
index, and then the last that 

202
00:06:09,350 --> 00:06:10,690
renders those items with an 

203
00:06:10,690 --> 00:06:12,430
appropriate key. You''ll notice 

204
00:06:12,430 --> 00:06:13,620
that they''re all updating 

205
00:06:13,620 --> 00:06:15,760
correctly, meaning that they''re 

206
00:06:15,780 --> 00:06:17,810
all jumping around the screen as 

207
00:06:17,810 --> 00:06:20,970
they should, but the focus is 

208
00:06:20,970 --> 00:06:22,500
not updating correctly. I''m 

209
00:06:22,500 --> 00:06:24,480
focused on apple right now. When 

210
00:06:24,480 --> 00:06:26,590
that one moves, my focus doesn''t 

211
00:06:26,590 --> 00:06:29,000
go around with apple. Also, if I 

212
00:06:29,000 --> 00:06:30,420
try to highlight one of these, 

213
00:06:30,630 --> 00:06:31,990
then my highlight goes away as 

214
00:06:31,990 --> 00:06:33,760
well. You''ll notice that the 

215
00:06:33,760 --> 00:06:35,750
With Key as Index suffers from 

216
00:06:35,750 --> 00:06:37,910
the exact same problem. Even 

217
00:06:37,910 --> 00:06:38,650
though it''s not getting the 

218
00:06:38,650 --> 00:06:40,060
warning in the console, you''re 

219
00:06:40,060 --> 00:06:42,950
still not fixing this bug. Only 

220
00:06:42,950 --> 00:06:44,570
when you have a key in there 

221
00:06:44,570 --> 00:06:46,460
will your focus travel around 

222
00:06:46,460 --> 00:06:47,730
with the input that it''s 

223
00:06:48,120 --> 00:06:50,060
associated with, because React 

224
00:06:50,060 --> 00:06:52,270
is able to determine where to 

225
00:06:52,270 --> 00:06:54,400
move the focus as your component 

226
00:06:54,400 --> 00:06:56,970
updates. In review, it''s common 

227
00:06:56,970 --> 00:06:58,930
in React to take an array and 

228
00:06:58,930 --> 00:07:00,960
map that array to an array of 

229
00:07:01,020 --> 00:07:02,950
elements and render that 

230
00:07:02,950 --> 00:07:05,120
directly in your JSX. When you 

231
00:07:05,120 --> 00:07:06,840
do that, it''s important that you 

232
00:07:06,840 --> 00:07:08,470
add a key to the root React 

233
00:07:08,470 --> 00:07:10,120
element of each element in the 

234
00:07:10,120 --> 00:07:11,680
array so that React can track 

235
00:07:11,680 --> 00:07:13,500
changes over time and make sure 

236
00:07:13,530 --> 00:07:14,780
that it preserves the state of 

237
00:07:14,780 --> 00:07:16,700
each element in the array and 

238
00:07:16,700 --> 00:07:17,310
its descendants.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- It doesn‚Äôt take long working with React before you want to render a list of items and when you do, you‚Äôll inevitably encounter this console warning: ‚Äú**Warning**: Each child in a list should have a unique key prop.‚Äù
- This warning is pretty simple to silence by providing the bespoke `key` prop, but it is really useful to understand what that warning is about and the bugs that can happen if you do not address the warning properly.
- `Keys` help React identify which items have changed, are added, or are removed. `Keys` should be given to the elements inside the array to give the elements a stable identity:

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    const allItems = [
      { id: ''a'', value: ''apple'' },
      { id: ''o'', value: ''orange'' },
      { id: ''g'', value: ''grape'' },
      { id: ''p'', value: ''pear'' }
    ];

    function App() {
      const [items, setItems] = React.useState(allItems);

      function addItem() {
        setItems([...items, allItems.find(i => !items.includes(i))]);
      }

      function removeItem(item) {
        setItems(items.filter(i => i !== item));
      }

      return (
        <div>
          <button disabled={items.length >= allItems.length} onClick={addItem}>
            add item
          </button>
          <ul style={{ listStyle: ''none'', paddingLeft: 0 }}>
            {items.map(item => (
              // each iteam needs to have a key prop
              // We‚Äôre using inputs in this example
              // but the same thing can happen for your own components that maintain state.
              <li>
                <button onClick={() => removeItem(item)}>remove</button>{'' ''}
                <label htmlFor={`${item.value}-input`}>{item.value}</label>{'' ''}
                <input id={`${item.value}-input`} defaultValue={item.value} />
              </li>
              // The best way to pick a key is to use a string that uniquely
              // identifies a list item among its siblings
            ))}
          </ul>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById(''root''));
  </script>

  <script type="text/babel">
    function FocusDemo() {
      const [items, setItems] = React.useState([
        { id: ''a'', value: ''apple'' },
        { id: ''o'', value: ''orange'' },
        { id: ''g'', value: ''grape'' },
        { id: ''p'', value: ''pear'' }
      ]);

      React.useEffect(() => {
        const interval = setInterval(() => {
          setItems(shuffle(items));
        }, 1000);
        return () => clearInterval(interval);
      }, []);

      return (
        <div>
          <div>
            <h1>Without Key</h1>
            {items.map(item => (
              <input value={item.value} />
            ))}
          </div>
          <div>
            <h1>With Key as Index</h1>
            {items.map((item, index) => (
              <input key={index} value={item.value} />
            ))}
          </div>
          <div>
            <h1>With Key</h1>
            {items.map(item => (
              <input key={item.id} value={item.value} />
            ))}
          </div>
        </div>
      );
    }

    function shuffle(originalArray) {
      const array = [...originalArray];
      let currentIndex = array.length;
      let temporaryValue;
      let randomIndex;
      // While there remain elements to shuffle...
      while (0 !== currentIndex) {
        // Pick a remaining element...
        randomIndex = Math.floor(Math.random() * currentIndex);
        currentIndex -= 1;
        // And swap it with the current element.
        temporaryValue = array[currentIndex];
        array[currentIndex] = array[randomIndex];
        array[randomIndex] = temporaryValue;
      }
      return array;
    }
    // uncomment this line to demo:
    // ReactDOM.render(<FocusDemo />, document.getElementById(''root''))
  </script>
</body>
```

- You definitely do not want to ignore this warning.
- It''s not recommend using indexes for `keys` if the order of items may change. This can negatively impact performance and may cause issues with component state.

## Additional resource

- [React Docs - Recursing On Children](https://reactjs.org/docs/reconciliation.html#recursing-on-children)
- [Kent''s Blog - Understanding React''s key prop](https://kentcdodds.com/blog/understanding-reacts-key-prop)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'b31bfa42', 'https://d2c5owlt6rorc3.cloudfront.net/react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk/dash/react-use-the-key-prop-when-rendering-a-list-with-react-3a0661b6-IyvHUjACk.mpd', 'https://stream.mux.com/qs9iwtfBlYhtw4qQQo1wmEqEOZnmzAV8TfH3TlsS3dQ.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/23-react-use-the-key-prop-when-rendering-a-list-with-react-12564a86.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6263, 'Make Basic Forms with React', NULL, 'Forms are a basic building block of the web. Every web application uses form elements as a way to accept input from the user. There are a few things to keep in mind with how forms work on the web and in this lesson we‚Äôll learn about those as well as various ways you can retrieve values from elements in the form as well as a few best practices you should consider when working with form elements on the web.

You can learn more about basic forms in the React documentation about [Uncontrolled Components](https://reactjs.org/docs/uncontrolled-components.html).', 549, NULL, '2020-03-11T02:42:26.893Z', '2025-12-13T00:54:53.678Z', 'react-make-basic-forms-with-react-46807143', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-make-basic-forms-with-react-601487f6-J3CZLiMUD/react-make-basic-forms-with-react-601487f6-J3CZLiMUD.jpg', true, NULL, 'Kent C. Dodds: [0:00] We have this username form, and right now we''re just returning todo, but we want to return a form. I''m going to make a form element here, and then we''ll make a div to hold our label username, and then we''ll have an input of type text for our username input, and then we''ll add a button of type submit. This is our submit button, and we''ll say submit. We''ll save that, we''ll get a refresh, and here''s our form. Awesome.

[0:33] We could put an onClick handler on our submit button here, and that would work OK when we click on this button. Forms are actually automatically submitted when you hit enter in an input within the form. People are typically used to that user experience.

[0:48] What I''m going to do instead is add an onSubmit handler here, and if somebody clicks on the submit button, or if they hit enter in this input, then our onSubmit handler is going to be called.

[0:59] Let''s make a function called handleSubmit. Then, we''ll put that handleSubmit right in here and we''ll console log submitted. Let''s save that, get a refresh, say, Joe, hit submit and...Huh. That''s interesting, it goes away.

[1:18] Actually, if you watch closely, you''ll see that it does log but then we get a full page refresh. We can prove that by turning on preserve log. We say Joe again, hit submit, we get submitted and then navigated to that page.

[1:32] Now, the reason that this is happening is because when you submit a form in the browser, it automatically makes a post request to the current URL with the form data. We could see that if we looked at our network tab.

[1:46] If you want to do some JavaScript stuff based on the user''s submitted form, then we don''t want the full page refresh. Instead, we can do our own JavaScript stuff.

[1:54] The handleSubmit function as an event handler will accept an event as the argument. Then we can say event.preventDefault. With that, we will no longer get a full page refresh and we''ll still get the submitted string logged to the console.

[2:09] Our next step is to get the value out of this input because we want to alert the value that the user entered. We need to get our username equals something and we''ll say alert, "You entered username." We can get rid of that console log here. We can say Joe and you entered question mark.

[2:31] How are we going to get that username value? Well, one way we could do this, we could say document.querySelectorInput.value, save that. We say Joe, submit that and here we go, we get Joe. That''s not going to work very well. It won''t scale super well in the real world because the page could have multiple inputs.

[2:52] If we were to render multiples of these, then they could conflict with one another. Querying the entire document breaks the encapsulation of this component because it means that you can''t use this component in the context of other components in an application. We don''t want to query the document.

[3:09] Another thing we can do is we can access the form element from the event. We could say console.logEvent.target and that is going to be our form element. We say Joe, submit that and we''ll get the form element right there.

[3:25] That''s great, but let''s take a look at some of the properties on that form element. Chrome is rendering out this really cool DOM tree similar to what we see in the elements tab, but I want to see the properties that are on the form elements. I''m going to use console.dir, which will log out the properties of that elements.

[3:41] We''ll say Joe, submit and here we go, we have our form. Here, there are a bunch of properties on here. We can see there''s a zero and a one for input and button, so we could actually say username is event.target. We want zero.value, we save this and we get Joe and we get our, "You entered Joe," alert showing up.

[4:04] That works out nicely, but I''m going to get the username from another one of these properties. Let''s see, we''ve got elements right here and elements has a zero and one. We could say event.target.elements.zero.value and save that. That will work as well.

[4:24] I''m not super jazzed about relying implicitly on the order in which these form elements appear because if I were to had another input right here, then I''m going to be toast, "You entered undefined. I don''t want to rely on that."

[4:39] There''s another thing that we can do here and that is by properly associating our label to the input by having an HTML for username input. Then, having an ID of username input right here. Now the label and the input are properly associated. Meaning that I can click on the label and it will focus on the input, which is good for accessibility.

[5:03] When I say Joe in here, hit submit, then we look at our form in our elements property. In addition to the zero and one indexes for each of these elements, we also get this username input value here because the ID of this element inside of our form. You actually get the same thing using the name attribute as well.

[5:29] We look at our form elements, and we see that username input still exists right there.

[5:34] Any elements that have a name or an ID will be attached by that name and ID to this element''s property of the form node. You can reference those by those names and IDs. That''s what we''re going to prefer here. We''ll say username = event.target -- that''s our form -- .elements.usernameInput.value to get the value out of that username input.

[5:58] With that, we can say Joe and we get everything working exactly as we want without the implicitness of querying the entire document or relying on the order of the elements.

[6:09] Another thing that we could do is make a ref for our username input. We''ll say usernameInputRef = React.useRef, and then we could say ref = usernameInputRef, and instead of this, we could say username = usernameInputRef.current.value. Our usernameInputRef.current will be the DOM node for the input, and we''ll get the value from that. This will work as well.

[6:43] There are a couple of ways to do this, and I''ll go ahead and add username = document.querySelector input.value. The reason that I removed that is I really want you to please not use this. It breaks encapsulation of our components. That''s one of the things that we really love about React, is that we can encapsulate logic within our components.

[7:05] I don''t recommend this method or this method, because those implicitly rely on the order in which the elements are rendered and could easily break if you change that order. Either one of these will work just fine.

[7:16] Personally, I think that if you don''t need a ref for the input, that it''s just easier to retrieve the input from the event target elements. It''s recommended that you use HTML for an ID to associate labels to inputs anyway. Given that you already have to do that, this, I think, is the simplest way to get the value from the inputs in your form.

[7:36] With that in mind, let''s go ahead and get rid of all of this. We get rid of that, clean this up, and remove the ref. If I were writing this form today, this is what it would look like.

[7:46] In review, what we had to do here was we created a form that has the single input and label associated to that input, and a button with the type of submit. It''s really important that any button you put inside of a form has a type, because implicitly, it will have a type of submit. That''s not entirely clear, especially if you say cancel for the contents with no specified type that gives this button any submit type, which is really confusing.

[8:12] If you do want to have a cancel button or a reset button, then you want to specify the type is button, which I know is a little redundant, but if you don''t specify a type, then the type will implicitly be submit, which would really confuse your users when they try to click cancel, so we specify that type is submit. We put in submit for the value here.

[8:34] Then instead of putting an onClick handler on the button, we put an onSubmit handler on the form. That way, any other way that the user tries to submit the form will call our submit handler.

[8:44] Then to avoid a full page refresh, we use event.preventDefault, and then we retrieve the user''s input using event target to get the form, and then elements to get the elements of the form and usernameInput to retrieve the input by its ID. Then we get the value from that input to get our username, and then we alert that to our users, or you could submit this to a backend server.', NULL, false, '20-egghead-react-make-basic-forms-with-react-d4e00d42.mp4', 11, true, false, 160, '---
mp4: 67215189
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-make-basic-forms-with-react-601487f6-J3CZLiMUD/react-make-basic-forms-with-react-601487f6-J3CZLiMUD.mp4', 'react-make-basic-forms-with-react-601487f6-J3CZLiMUD', 'zcKL', 'https://egghead-pipeline.s3.amazonaws.com/react-make-basic-forms-with-react-601487f6-J3CZLiMUD/react-make-basic-forms-with-react-601487f6-J3CZLiMUD.mp3?e534e90ccee9d3df?98db', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.898Z', NULL, 8388599, NULL, 8170, 0, NULL, -3050386, '3c4d851270b641038e4eaf0d71fdad33', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/19-basic-forms?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 398528440, '1
00:00:00,170 --> 00:00:01,460
We have this username form, and 

2
00:00:01,460 --> 00:00:02,510
right now we''re just returning 

3
00:00:02,510 --> 00:00:04,060
todo, but we want to return a 

4
00:00:04,060 --> 00:00:05,820
form. I''m going to make a form 

5
00:00:05,820 --> 00:00:08,420
element here, and then we''ll 

6
00:00:08,420 --> 00:00:13,200
make a div to hold our label 

7
00:00:13,740 --> 00:00:18,180
username, and then we''ll have an 

8
00:00:18,240 --> 00:00:22,050
input of type text for our 

9
00:00:22,050 --> 00:00:23,830
username input, and then we''ll 

10
00:00:23,830 --> 00:00:26,330
add a button of type submit. 

11
00:00:26,330 --> 00:00:27,620
This is our submit button, and 

12
00:00:27,700 --> 00:00:29,830
we''ll say submit. We''ll save 

13
00:00:29,830 --> 00:00:30,980
that, we''ll get a refresh, and 

14
00:00:30,980 --> 00:00:33,900
here''s our form. Awesome. We 

15
00:00:33,900 --> 00:00:35,700
could put an onClick handler on 

16
00:00:35,700 --> 00:00:37,240
our submit button here, and that 

17
00:00:37,240 --> 00:00:38,680
would work OK when we click on 

18
00:00:38,680 --> 00:00:40,820
this button. Forms are actually 

19
00:00:40,820 --> 00:00:42,800
automatically submitted when you 

20
00:00:42,800 --> 00:00:44,980
hit enter in an input within the 

21
00:00:44,980 --> 00:00:46,870
form. People are typically used 

22
00:00:46,870 --> 00:00:48,380
to that user experience. What 

23
00:00:48,380 --> 00:00:50,140
I''m going to do instead is add 

24
00:00:50,200 --> 00:00:52,860
an onSubmit handler here, and if 

25
00:00:52,860 --> 00:00:53,950
somebody clicks on the submit 

26
00:00:53,950 --> 00:00:55,940
button, or if they hit enter in 

27
00:00:55,940 --> 00:00:57,720
this input, then our onSubmit 

28
00:00:57,720 --> 00:00:58,970
handler is going to be called. 

29
00:00:59,060 --> 00:01:01,120
Let''s make a function called 

30
00:01:01,120 --> 00:01:04,010
handleSubmit. Then, we''ll put 

31
00:01:04,010 --> 00:01:06,670
that handleSubmit right in here 

32
00:01:06,670 --> 00:01:09,250
and we''ll console log submitted. 

33
00:01:10,070 --> 00:01:11,500
Let''s save that, get a refresh, 

34
00:01:11,910 --> 00:01:16,130
say, Joe, hit submit and...Huh. 

35
00:01:16,230 --> 00:01:17,810
That''s interesting, it goes away. 

36
00:01:18,240 --> 00:01:19,760
Actually, if you watch closely, 

37
00:01:20,570 --> 00:01:22,090
you''ll see that it does log but 

38
00:01:22,090 --> 00:01:23,600
then we get a full page refresh. 

39
00:01:23,600 --> 00:01:25,450
We can prove that by turning on 

40
00:01:25,450 --> 00:01:27,650
preserve log. We say Joe again, 

41
00:01:27,960 --> 00:01:29,820
hit submit, we get submitted and 

42
00:01:29,820 --> 00:01:32,320
then navigated to that page. 

43
00:01:32,740 --> 00:01:33,790
Now, the reason that this is 

44
00:01:33,790 --> 00:01:35,840
happening is because when you 

45
00:01:35,840 --> 00:01:38,290
submit a form in the browser, it 

46
00:01:38,290 --> 00:01:39,770
automatically makes a post 

47
00:01:39,770 --> 00:01:42,360
request to the current URL with 

48
00:01:42,360 --> 00:01:44,550
the form data. We could see that 

49
00:01:44,550 --> 00:01:45,900
if we looked at our network tab. 

50
00:01:46,230 --> 00:01:47,190
If you want to do some 

51
00:01:47,190 --> 00:01:48,530
JavaScript stuff based on the 

52
00:01:48,530 --> 00:01:49,800
user''s submitted form, then we 

53
00:01:49,800 --> 00:01:51,570
don''t want the full page refresh. 

54
00:01:51,730 --> 00:01:53,020
Instead, we can do our own 

55
00:01:53,020 --> 00:01:54,330
JavaScript stuff. The 

56
00:01:54,330 --> 00:01:56,120
handleSubmit function as an 

57
00:01:56,120 --> 00:01:57,660
event handler will accept an 

58
00:01:57,660 --> 00:01:59,650
event as the argument. Then we 

59
00:01:59,650 --> 00:02:02,140
can say event.preventDefault. 

60
00:02:03,230 --> 00:02:05,610
With that, we will no longer get 

61
00:02:05,610 --> 00:02:07,080
a full page refresh and we''ll 

62
00:02:07,080 --> 00:02:08,320
still get the submitted string 

63
00:02:08,410 --> 00:02:10,210
logged to the console. Our next 

64
00:02:10,210 --> 00:02:12,040
step is to get the value out of 

65
00:02:12,040 --> 00:02:13,440
this input because we want to 

66
00:02:13,540 --> 00:02:15,370
alert the value that the user 

67
00:02:15,430 --> 00:02:16,980
entered. We need to get our 

68
00:02:16,980 --> 00:02:19,220
username equals something and 

69
00:02:19,760 --> 00:02:22,730
we''ll say alert, "You entered 

70
00:02:23,490 --> 00:02:25,610
username." We can get rid of 

71
00:02:25,610 --> 00:02:28,090
that console log here. We can 

72
00:02:28,090 --> 00:02:30,710
say Joe and you entered question 

73
00:02:30,710 --> 00:02:32,320
mark. How are we going to get 

74
00:02:32,600 --> 00:02:34,850
that username value? Well, one 

75
00:02:34,850 --> 00:02:35,870
way we could do this, we could 

76
00:02:35,870 --> 00:02:38,980
say document.querySelectorInput.

77
00:02:40,930 --> 00:02:44,130
value, save that. We say Joe, 

78
00:02:44,320 --> 00:02:45,620
submit that and here we go, we 

79
00:02:45,620 --> 00:02:47,360
get Joe. That''s not going to 

80
00:02:47,360 --> 00:02:48,640
work very well. It won''t scale 

81
00:02:48,640 --> 00:02:50,000
super well in the real world 

82
00:02:50,020 --> 00:02:51,080
because the page could have 

83
00:02:51,120 --> 00:02:53,030
multiple inputs. If we were to 

84
00:02:53,030 --> 00:02:54,800
render multiples of these, then 

85
00:02:54,800 --> 00:02:55,890
they could conflict with one 

86
00:02:55,890 --> 00:02:57,660
another. Querying the entire 

87
00:02:57,660 --> 00:02:58,900
document breaks the 

88
00:02:58,900 --> 00:03:01,070
encapsulation of this component 

89
00:03:01,600 --> 00:03:02,830
because it means that you can''t 

90
00:03:02,830 --> 00:03:04,140
use this component in the 

91
00:03:04,140 --> 00:03:05,960
context of other components in 

92
00:03:06,070 --> 00:03:08,230
an application. We don''t want to 

93
00:03:08,230 --> 00:03:09,720
query the document. Another 

94
00:03:09,720 --> 00:03:11,320
thing we can do is we can access 

95
00:03:11,320 --> 00:03:13,220
the form element from the event. 

96
00:03:13,650 --> 00:03:16,070
We could say console.logEvent.

97
00:03:16,450 --> 00:03:18,610
target and that is going to be 

98
00:03:19,600 --> 00:03:21,560
our form element. We say Joe, 

99
00:03:21,640 --> 00:03:23,500
submit that and we''ll get the 

100
00:03:23,500 --> 00:03:24,430
form element right there. 

101
00:03:25,880 --> 00:03:26,830
That''s great, but let''s take a 

102
00:03:26,830 --> 00:03:28,060
look at some of the properties 

103
00:03:28,120 --> 00:03:30,350
on that form element. Chrome is 

104
00:03:30,350 --> 00:03:31,900
rendering out this really cool 

105
00:03:32,370 --> 00:03:33,930
DOM tree similar to what we see 

106
00:03:33,930 --> 00:03:35,210
in the elements tab, but I want 

107
00:03:35,210 --> 00:03:36,220
to see the properties that are 

108
00:03:36,220 --> 00:03:37,470
on the form elements. I''m going 

109
00:03:37,470 --> 00:03:39,430
to use console.dir, which will 

110
00:03:39,430 --> 00:03:41,160
log out the properties of that 

111
00:03:41,160 --> 00:03:43,440
elements. We''ll say Joe, submit 

112
00:03:43,750 --> 00:03:45,240
and here we go, we have our form. 

113
00:03:46,030 --> 00:03:47,630
Here, there are a bunch of 

114
00:03:47,630 --> 00:03:49,710
properties on here. We can see 

115
00:03:49,710 --> 00:03:51,390
there''s a zero and a one for 

116
00:03:51,390 --> 00:03:52,670
input and button, so we could 

117
00:03:52,670 --> 00:03:54,970
actually say username is event.

118
00:03:55,350 --> 00:03:58,510
target. We want zero.value, we 

119
00:03:58,950 --> 00:04:01,660
save this and we get Joe and we 

120
00:04:01,660 --> 00:04:03,200
get our, "You entered Joe," 

121
00:04:03,200 --> 00:04:05,320
alert showing up. That works 

122
00:04:05,320 --> 00:04:07,700
out nicely, but I''m going to get 

123
00:04:07,700 --> 00:04:09,600
the username from another one of 

124
00:04:09,600 --> 00:04:10,760
these properties. Let''s see, 

125
00:04:10,760 --> 00:04:13,450
we''ve got elements right here 

126
00:04:13,710 --> 00:04:15,580
and elements has a zero and one. 

127
00:04:15,670 --> 00:04:17,410
We could say event.target.

128
00:04:17,700 --> 00:04:20,950
elements.zero.value and save 

129
00:04:20,950 --> 00:04:23,260
that. That will work as well. 

130
00:04:24,410 --> 00:04:25,660
I''m not super jazzed about 

131
00:04:25,660 --> 00:04:27,780
relying implicitly on the order 

132
00:04:27,780 --> 00:04:29,270
in which these form elements 

133
00:04:29,300 --> 00:04:30,940
appear because if I were to had 

134
00:04:31,060 --> 00:04:34,660
another input right here, then 

135
00:04:34,660 --> 00:04:36,250
I''m going to be toast, "You 

136
00:04:36,250 --> 00:04:38,770
entered undefined. I don''t want 

137
00:04:38,770 --> 00:04:40,020
to rely on that." There''s 

138
00:04:40,020 --> 00:04:41,050
another thing that we can do 

139
00:04:41,050 --> 00:04:43,280
here and that is by properly 

140
00:04:43,280 --> 00:04:44,940
associating our label to the 

141
00:04:44,940 --> 00:04:47,780
input by having an HTML for 

142
00:04:48,260 --> 00:04:52,910
username input. Then, having an 

143
00:04:52,980 --> 00:04:55,640
ID of username input right here. 

144
00:04:56,350 --> 00:04:57,960
Now the label and the input are 

145
00:04:57,960 --> 00:04:59,300
properly associated. Meaning 

146
00:04:59,300 --> 00:05:00,530
that I can click on the label 

147
00:05:00,530 --> 00:05:01,760
and it will focus on the input, 

148
00:05:01,980 --> 00:05:03,330
which is good for accessibility. 

149
00:05:03,950 --> 00:05:06,400
When I say Joe in here, hit 

150
00:05:06,400 --> 00:05:08,550
submit, then we look at our form 

151
00:05:08,910 --> 00:05:10,580
in our elements property. In 

152
00:05:10,720 --> 00:05:12,560
addition to the zero and one 

153
00:05:12,620 --> 00:05:14,200
indexes for each of these 

154
00:05:14,200 --> 00:05:16,320
elements, we also get this 

155
00:05:16,320 --> 00:05:18,530
username input value here 

156
00:05:19,400 --> 00:05:21,710
because the ID of this element 

157
00:05:21,980 --> 00:05:24,150
inside of our form. You actually 

158
00:05:24,150 --> 00:05:25,630
get the same thing using the 

159
00:05:25,630 --> 00:05:29,510
name attribute as well. We look 

160
00:05:29,510 --> 00:05:31,180
at our form elements, and we see 

161
00:05:31,180 --> 00:05:32,990
that username input still exists 

162
00:05:32,990 --> 00:05:35,480
right there. Any elements that 

163
00:05:35,480 --> 00:05:37,420
have a name or an ID will be 

164
00:05:37,420 --> 00:05:39,690
attached by that name and ID to 

165
00:05:39,690 --> 00:05:41,090
this element''s property of the 

166
00:05:41,090 --> 00:05:42,940
form node. You can reference 

167
00:05:42,940 --> 00:05:44,910
those by those names and IDs. 

168
00:05:45,480 --> 00:05:46,370
That''s what we''re going to 

169
00:05:46,370 --> 00:05:48,150
prefer here. We''ll say username = 

170
00:05:48,720 --> 00:05:51,520
event.target -- that''s our form -- .

171
00:05:52,200 --> 00:05:56,020
elements.usernameInput.value to 

172
00:05:56,020 --> 00:05:57,070
get the value out of that 

173
00:05:57,070 --> 00:05:59,320
username input. With that, we 

174
00:05:59,320 --> 00:06:01,110
can say Joe and we get 

175
00:06:01,110 --> 00:06:02,740
everything working exactly as we 

176
00:06:02,740 --> 00:06:05,240
want without the implicitness of 

177
00:06:05,240 --> 00:06:07,340
querying the entire document or 

178
00:06:07,340 --> 00:06:08,370
relying on the order of the 

179
00:06:08,370 --> 00:06:10,070
elements. Another thing that we 

180
00:06:10,070 --> 00:06:13,260
could do is make a ref for our 

181
00:06:13,260 --> 00:06:15,600
username input. We''ll say 

182
00:06:15,600 --> 00:06:19,920
usernameInputRef = React.useRef, 

183
00:06:21,830 --> 00:06:23,320
and then we could say ref = 

184
00:06:24,390 --> 00:06:28,200
usernameInputRef, and instead of 

185
00:06:28,200 --> 00:06:30,040
this, we could say username = 

186
00:06:30,230 --> 00:06:33,940
usernameInputRef.current.value. 

187
00:06:34,120 --> 00:06:35,810
Our usernameInputRef.current 

188
00:06:35,810 --> 00:06:37,480
will be the DOM node for the 

189
00:06:37,480 --> 00:06:39,060
input, and we''ll get the value 

190
00:06:39,060 --> 00:06:41,250
from that. This will work as 

191
00:06:41,250 --> 00:06:44,280
well. There are a couple of 

192
00:06:44,280 --> 00:06:45,360
ways to do this, and I''ll go 

193
00:06:45,360 --> 00:06:46,750
ahead and add username = 

194
00:06:47,590 --> 00:06:50,830
document.querySelector input.

195
00:06:51,450 --> 00:06:53,920
value. The reason that I removed 

196
00:06:53,920 --> 00:06:56,040
that is I really want you to 

197
00:06:56,320 --> 00:06:58,750
please not use this. It breaks 

198
00:06:58,750 --> 00:07:00,140
encapsulation of our components. 

199
00:07:00,220 --> 00:07:01,280
That''s one of the things that we 

200
00:07:01,280 --> 00:07:03,150
really love about React, is that 

201
00:07:03,150 --> 00:07:04,760
we can encapsulate logic within 

202
00:07:04,760 --> 00:07:05,980
our components. I don''t 

203
00:07:05,980 --> 00:07:07,460
recommend this method or this 

204
00:07:07,460 --> 00:07:08,920
method, because those implicitly 

205
00:07:08,920 --> 00:07:10,310
rely on the order in which the 

206
00:07:10,310 --> 00:07:12,050
elements are rendered and could 

207
00:07:12,070 --> 00:07:13,540
easily break if you change that 

208
00:07:13,540 --> 00:07:15,130
order. Either one of these will 

209
00:07:15,130 --> 00:07:16,870
work just fine. Personally, I 

210
00:07:16,870 --> 00:07:18,250
think that if you don''t need a 

211
00:07:18,300 --> 00:07:19,930
ref for the input, that it''s 

212
00:07:19,930 --> 00:07:21,350
just easier to retrieve the 

213
00:07:21,350 --> 00:07:23,200
input from the event target 

214
00:07:23,270 --> 00:07:25,020
elements. It''s recommended that 

215
00:07:25,020 --> 00:07:27,190
you use HTML for an ID to 

216
00:07:27,190 --> 00:07:28,520
associate labels to inputs 

217
00:07:28,640 --> 00:07:30,660
anyway. Given that you already 

218
00:07:30,660 --> 00:07:32,350
have to do that, this, I think, 

219
00:07:32,400 --> 00:07:34,030
is the simplest way to get the 

220
00:07:34,030 --> 00:07:35,230
value from the inputs in your 

221
00:07:35,230 --> 00:07:36,930
form. With that in mind, let''s 

222
00:07:36,930 --> 00:07:38,410
go ahead and get rid of all of 

223
00:07:38,410 --> 00:07:40,050
this. We get rid of that, clean 

224
00:07:40,050 --> 00:07:42,670
this up, and remove the ref. If 

225
00:07:42,670 --> 00:07:43,920
I were writing this form today, 

226
00:07:44,390 --> 00:07:45,440
this is what it would look like. 

227
00:07:46,130 --> 00:07:47,200
In review, what we had to do 

228
00:07:47,200 --> 00:07:48,940
here was we created a form that 

229
00:07:48,940 --> 00:07:50,730
has the single input and label 

230
00:07:50,730 --> 00:07:53,000
associated to that input, and a 

231
00:07:53,000 --> 00:07:54,840
button with the type of submit. 

232
00:07:55,910 --> 00:07:57,140
It''s really important that any 

233
00:07:57,140 --> 00:07:58,590
button you put inside of a form 

234
00:07:58,850 --> 00:08:01,250
has a type, because implicitly, 

235
00:08:01,540 --> 00:08:02,870
it will have a type of submit. 

236
00:08:03,140 --> 00:08:04,360
That''s not entirely clear, 

237
00:08:04,800 --> 00:08:06,690
especially if you say cancel for 

238
00:08:06,690 --> 00:08:08,680
the contents with no specified 

239
00:08:08,680 --> 00:08:10,050
type that gives this button any 

240
00:08:10,050 --> 00:08:11,530
submit type, which is really 

241
00:08:11,530 --> 00:08:13,260
confusing. If you do want to 

242
00:08:13,260 --> 00:08:15,170
have a cancel button or a reset 

243
00:08:15,170 --> 00:08:17,090
button, then you want to specify 

244
00:08:17,090 --> 00:08:20,240
the type is button, which I know 

245
00:08:20,270 --> 00:08:22,100
is a little redundant, but if 

246
00:08:22,100 --> 00:08:23,390
you don''t specify a type, then 

247
00:08:23,390 --> 00:08:24,640
the type will implicitly be 

248
00:08:24,640 --> 00:08:26,000
submit, which would really 

249
00:08:26,000 --> 00:08:27,440
confuse your users when they try 

250
00:08:27,440 --> 00:08:29,430
to click cancel, so we specify 

251
00:08:29,430 --> 00:08:31,600
that type is submit. We put in 

252
00:08:31,600 --> 00:08:34,300
submit for the value here. Then 

253
00:08:34,300 --> 00:08:35,490
instead of putting an onClick 

254
00:08:35,490 --> 00:08:37,110
handler on the button, we put an 

255
00:08:37,180 --> 00:08:38,760
onSubmit handler on the form. 

256
00:08:39,150 --> 00:08:40,620
That way, any other way that the 

257
00:08:40,620 --> 00:08:42,070
user tries to submit the form 

258
00:08:42,590 --> 00:08:43,990
will call our submit handler. 

259
00:08:44,770 --> 00:08:46,180
Then to avoid a full page 

260
00:08:46,180 --> 00:08:48,080
refresh, we use event.

261
00:08:48,160 --> 00:08:49,920
preventDefault, and then we 

262
00:08:49,920 --> 00:08:52,480
retrieve the user''s input using 

263
00:08:52,780 --> 00:08:54,530
event target to get the form, 

264
00:08:54,530 --> 00:08:55,990
and then elements to get the 

265
00:08:55,990 --> 00:08:57,640
elements of the form and 

266
00:08:57,640 --> 00:08:59,510
usernameInput to retrieve the 

267
00:08:59,510 --> 00:09:02,280
input by its ID. Then we get the 

268
00:09:02,280 --> 00:09:04,120
value from that input to get our 

269
00:09:04,120 --> 00:09:05,950
username, and then we alert that 

270
00:09:05,950 --> 00:09:07,720
to our users, or you could 

271
00:09:07,720 --> 00:09:09,350
submit this to a backend server.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Forms are a basic building block of the web. Every web application uses form elements as a way to accept input from the user.

- There are a few things to keep in mind with how forms work on the web and in this lesson we‚Äôll learn about those as well as various ways you can retrieve values from elements in the form as well as a few best practices you should consider when working with form elements on the web.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function UsernameForm() {
      // When submitting a form, it automatically makes a post request with the data
      function handleSubmit(event) {
        // preventing from automatically sending a post request/full page refresh
        event.preventDefault();
        // Please don''t use this:
        // document.querySelector(''input'').value, this breaks the encapsulation

        // we can access the form element directly, console.dir(event.target)
        // one option: const username = event.target[0].value
        // If ref is not needed, then use the id
        const username = event.target.elements.usernameInput.value;
        // Alerting this to users or sending this to backend server
        alert(`You entered: ${username}`);
      }

      return (
         {/* Creating a form  */}
        <form onSubmit={handleSubmit}>
          <div>
            {/* adding a label - htmlFor="usernameInput" */}
            <label htmlFor="usernameInput">Username:</label>
            <input id="usernameInput" type="text" />
          </div>
          {/* Forms are automatically submitted on type="submit*/}
          {/* Make sure to specify the type on the button */}
          <button type="submit">Submit</button>
        </form>
      );
    }

    ReactDOM.render(<UsernameForm />, document.getElementById(''root''));
  </script>
</body>
```

- You can learn more about basic forms in the React documentation about Uncontrolled Components.

## Additional resource

- [React Docs - Forms](https://reactjs.org/docs/forms.html)
- [Kent''s Blog - Please stop building inaccessible forms](https://kentcdodds.com/blog/please-stop-building-inaccessible-forms-and-how-to-fix-them)
- [Kent''s Livestream - Testing a Multi-Page form](https://www.youtube.com/watch?v=9xaJ78qEJCM)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '46807143', 'https://d2c5owlt6rorc3.cloudfront.net/react-make-basic-forms-with-react-601487f6-J3CZLiMUD/dash/react-make-basic-forms-with-react-601487f6-J3CZLiMUD.mpd', 'https://stream.mux.com/yuDVYgWUE2j00WMxZ2PJGVidcTifypPMNRkG71vZJ5Sk.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/19-react-make-basic-forms-with-react-cfc2ec08.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6264, 'Make Dynamic Forms with React', NULL, 'Often, it can be useful to know what the user‚Äôs input is as they‚Äôre typing it and use that information to change what is rendered. This can be good for dynamic search or filter inputs, or triggering changes when a user checks a checkbox, or a myriad of other use cases. In this example, we‚Äôre going to dynamically show an error message if the user types something invalid so they don‚Äôt have to wait until they submit the form to know they‚Äôre doing something wrong.

To do this we‚Äôll store the input‚Äôs value in state and then use that state to derive an error message which will be displayed if there is an error.', 190, NULL, '2020-03-11T02:42:59.239Z', '2025-12-13T00:54:53.678Z', 'react-make-dynamic-forms-with-react-59050418', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM/react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM.jpg', true, NULL, 'Kent C. Dodds: [0:00] Let''s say that this UsenameForm cannot have UPPER case characters. They can only have lower case characters. We could show the user an error when they hit the Submit button, but it would be a lot better user experience if we display an error message as they''re making changes to this input field if they change it to something that''s not allowed.

[0:18] We need to know what the user''s typing as they''re typing it, not just as they submit it, so we''re going to add an onChange handler right here and here we''ll call this handleChange. We''ll make a function handleChange(), and that will take the event. Then we can use event.target.

[0:36] Because the target of this handleChange(event) is our input, then event.target is going to be the input, .value is going to be the username. We need to store that username somewhere and trigger re-render of the UsenameForm so that it displays the error message if the username is typed incorrectly.

[0:55] Let''s go ahead and add some state to this UsenameForm. We''ll say [username, setUsername] = React.useState('''') and we''ll initialize that to an empty string. In here, we''ll call setUsername with the event.target.value, and then we no longer need to get the username from the form input elements because we''re always going to be keeping this username up-to-date with whatever the user''s specifying.

[1:21] We can get rid of that, and now this username is just referencing that.

[1:25] Next, let''s go ahead and determine whether this isLowerCase by saying username === username.toLowerCase(). If it''s equal to its toLowerCase version of itself, then we know that it is lower case, and we know that we have an error if it''s not lower case. If it is lower case, we''ll just say the error is null, otherwise we''ll say the Username must be lower case.

[1:52] Then we just need to display that error message. We''ll copy that, come down here and make a <div> here with a style = { color: ''red'' } just for the fun of it. We''ll put the error message right in there.

[2:05] We can also make the button disabled if there''s an error. Disabled accepts a Boolean, so we''ll just say Boolean_error. If error is truthy, then we''ll pass a true value for disabled, and if there is no error or it''s falsy, then we''ll pass a false value for disabled.

[2:25] Let''s save that. We get a refresh. If we type an upper-case character, then we''ll get Username must be lower case, the Submit button is disabled. If we type a lower-case character, then we don''t get any problem, until we get an upper-case character in there.

[2:40] If you ever need to know exactly what the user''s typing as they''re typing it, then you can use the onChange event to get access to the value of the input and update that in the state of your component, then changes to that value will trigger a re-render of your component. That state value will be whatever the user''s typed, allowing us to create this error message based on whether the username is lower case.

[3:03] We display that error message here in red in this <div>. We disable the submit button if there is an error message.', NULL, false, '21-egghead-react-make-dynamic-forms-with-react-4b705290.mp4', 11, true, false, 160, '---
mp4: 23323603
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM/react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM.mp4', 'react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM', 'zcKF', 'https://egghead-pipeline.s3.amazonaws.com/react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM/react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM.mp3?c478bc63f3a5c686?82e2', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.275Z', NULL, 8388599, NULL, 8171, 0, NULL, -2669093, 'b07e101ed6424b0f8892649b2c5ba4c1', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/20-dynamic-forms?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 399198796, '1
00:00:00,260 --> 00:00:01,790
Let''s say that this UsenameForm 

2
00:00:01,790 --> 00:00:03,590
cannot have UPPER case 

3
00:00:03,590 --> 00:00:05,070
characters. They can only have 

4
00:00:05,380 --> 00:00:08,050
lower case characters. We could 

5
00:00:08,050 --> 00:00:09,300
show the user an error when they 

6
00:00:09,300 --> 00:00:10,470
hit the Submit button, but it 

7
00:00:10,470 --> 00:00:11,570
would be a lot better user 

8
00:00:11,570 --> 00:00:12,830
experience if we display an 

9
00:00:12,830 --> 00:00:14,290
error message as they''re making 

10
00:00:14,290 --> 00:00:16,200
changes to this input field if 

11
00:00:16,200 --> 00:00:17,150
they change it to something 

12
00:00:17,150 --> 00:00:18,680
that''s not allowed. We need to 

13
00:00:18,680 --> 00:00:20,300
know what the user''s typing as 

14
00:00:20,300 --> 00:00:21,850
they''re typing it, not just as 

15
00:00:21,850 --> 00:00:22,940
they submit it, so we''re going 

16
00:00:22,940 --> 00:00:25,530
to add an onChange handler right 

17
00:00:25,530 --> 00:00:27,560
here and here we''ll call this 

18
00:00:27,560 --> 00:00:30,410
handleChange. We''ll make a 

19
00:00:30,410 --> 00:00:32,310
function handleChange(), and 

20
00:00:32,570 --> 00:00:34,160
that will take the event. Then 

21
00:00:34,280 --> 00:00:36,240
we can use event.target. 

22
00:00:36,880 --> 00:00:38,460
Because the target of this 

23
00:00:38,480 --> 00:00:40,130
handleChange(event) is our input, 

24
00:00:40,530 --> 00:00:42,150
then event.target is going to be 

25
00:00:42,150 --> 00:00:44,640
the input, .value is going to be 

26
00:00:44,680 --> 00:00:47,260
the username. We need to store 

27
00:00:47,260 --> 00:00:48,750
that username somewhere and 

28
00:00:48,750 --> 00:00:49,770
trigger re-render of the 

29
00:00:49,770 --> 00:00:52,040
UsenameForm so that it displays 

30
00:00:52,040 --> 00:00:53,170
the error message if the 

31
00:00:53,170 --> 00:00:55,330
username is typed incorrectly. 

32
00:00:55,810 --> 00:00:57,010
Let''s go ahead and add some 

33
00:00:57,010 --> 00:00:58,690
state to this UsenameForm. We''ll 

34
00:00:58,690 --> 00:00:59,340
say  = 

35
00:00:59,440 --> 00:01:02,220
React.useState('''') and we''ll 

36
00:01:05,000 --> 00:01:06,180
initialize that to an empty 

37
00:01:06,180 --> 00:01:08,330
string. In here, we''ll call 

38
00:01:08,330 --> 00:01:10,850
setUsername with the event.

39
00:01:10,850 --> 00:01:13,490
target.value, and then we no 

40
00:01:13,490 --> 00:01:14,950
longer need to get the username 

41
00:01:15,040 --> 00:01:16,790
from the form input elements 

42
00:01:16,790 --> 00:01:17,890
because we''re always going to be 

43
00:01:17,890 --> 00:01:19,560
keeping this username up-to-date 

44
00:01:19,560 --> 00:01:20,530
with whatever the user''s 

45
00:01:20,530 --> 00:01:21,970
specifying. We can get rid of 

46
00:01:21,970 --> 00:01:23,690
that, and now this username is 

47
00:01:23,690 --> 00:01:26,070
just referencing that. Next, 

48
00:01:26,070 --> 00:01:27,250
let''s go ahead and determine 

49
00:01:27,250 --> 00:01:30,480
whether this isLowerCase by 

50
00:01:30,480 --> 00:01:33,290
saying username === username.

51
00:01:33,630 --> 00:01:36,340
toLowerCase(). If it''s equal to 

52
00:01:36,340 --> 00:01:37,780
its toLowerCase version of 

53
00:01:37,780 --> 00:01:39,420
itself, then we know that it is 

54
00:01:39,420 --> 00:01:41,690
lower case, and we know that we 

55
00:01:41,690 --> 00:01:44,560
have an error if it''s not lower 

56
00:01:44,560 --> 00:01:46,910
case. If it is lower case, we''ll 

57
00:01:46,910 --> 00:01:48,070
just say the error is null, 

58
00:01:48,330 --> 00:01:49,830
otherwise we''ll say the Username 

59
00:01:49,880 --> 00:01:52,430
must be lower case. Then we 

60
00:01:52,430 --> 00:01:54,430
just need to display that error 

61
00:01:54,430 --> 00:01:56,290
message. We''ll copy that, come 

62
00:01:56,290 --> 00:01:58,260
down here and make a <div> here 

63
00:01:58,530 --> 00:02:01,360
with a style = { color: ''red'' } 

64
00:02:01,440 --> 00:02:02,920
just for the fun of it. We''ll 

65
00:02:02,920 --> 00:02:04,260
put the error message right in 

66
00:02:04,920 --> 00:02:06,840
there. We can also make the 

67
00:02:06,840 --> 00:02:10,650
button disabled if there''s an 

68
00:02:10,650 --> 00:02:12,300
error. Disabled accepts a 

69
00:02:12,300 --> 00:02:13,540
Boolean, so we''ll just say 

70
00:02:13,540 --> 00:02:15,770
Boolean_error. If error is 

71
00:02:16,020 --> 00:02:18,390
truthy, then we''ll pass a true 

72
00:02:18,390 --> 00:02:20,750
value for disabled, and if there 

73
00:02:20,750 --> 00:02:22,920
is no error or it''s falsy, then 

74
00:02:22,920 --> 00:02:24,470
we''ll pass a false value for 

75
00:02:24,470 --> 00:02:26,980
disabled. Let''s save that. We 

76
00:02:26,980 --> 00:02:28,420
get a refresh. If we type an 

77
00:02:28,510 --> 00:02:30,200
upper-case character, then we''ll 

78
00:02:30,200 --> 00:02:31,970
get Username must be lower case, 

79
00:02:32,270 --> 00:02:33,590
the Submit button is disabled. 

80
00:02:33,950 --> 00:02:35,430
If we type a lower-case 

81
00:02:35,430 --> 00:02:37,700
character, then we don''t get any 

82
00:02:37,700 --> 00:02:39,290
problem, until we get an upper-

83
00:02:39,290 --> 00:02:41,070
case character in there. If you 

84
00:02:41,070 --> 00:02:42,440
ever need to know exactly what 

85
00:02:42,440 --> 00:02:43,580
the user''s typing as they''re 

86
00:02:43,580 --> 00:02:45,060
typing it, then you can use the 

87
00:02:45,060 --> 00:02:47,170
onChange event to get access to 

88
00:02:47,170 --> 00:02:48,760
the value of the input and 

89
00:02:48,840 --> 00:02:50,590
update that in the state of your 

90
00:02:50,590 --> 00:02:52,250
component, then changes to that 

91
00:02:52,250 --> 00:02:54,040
value will trigger a re-render 

92
00:02:54,110 --> 00:02:55,580
of your component. That state 

93
00:02:55,580 --> 00:02:56,860
value will be whatever the 

94
00:02:56,860 --> 00:02:58,790
user''s typed, allowing us to 

95
00:02:58,790 --> 00:03:00,500
create this error message based 

96
00:03:00,500 --> 00:03:02,470
on whether the username is lower 

97
00:03:02,470 --> 00:03:04,230
case. We display that error 

98
00:03:04,230 --> 00:03:06,220
message here in red in this <div>. 

99
00:03:06,930 --> 00:03:09,390
We disable the submit button if 

100
00:03:09,390 --> 00:03:10,400
there is an error message.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Often, it can be useful to know what the user‚Äôs input is as they‚Äôre typing it and use that information to change what is rendered. This can be **good for dynamic search** or filter inputs, or triggering changes when a user checks a checkbox, or a myriad of other use cases.
- W‚Äôre going to **dynamically show an error message** if the user types something invalid so they don‚Äôt have to wait until they submit the form to know they‚Äôre doing something wrong.
- To do this we‚Äôll store the input‚Äôs value in state and then use that state to derive an error message which will be displayed if there is an error.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function UsernameForm() {
      // adding state to handle username, keeping it up to date
      // updating the current state of the user''s input
      const [username, setUsername] = React.useState('''');
      // determine if it''s lower case / displaying error message
      const isLowerCase = username === username.toLowerCase();
      const error = isLowerCase ? null : ''Username must be lower case'';

      function handleSubmit(event) {
        event.preventDefault();
        alert(`You entered: ${username}`);
      }

      function handleChange(event) {
        setUsername(event.target.value);
      }

      return (
        <form onSubmit={handleSubmit}>
          <div>
            <label htmlFor="usernameInput">Username:</label>
            {/* Calling the function handleChange */}
            <input id="usernameInput" type="text" onChange={handleChange} />
          </div>
          {/* displaying error message */}
          <div style={{ color: ''red'' }}>{error}</div>
          {/* disable button boolean */}
          <button disabled={Boolean(error)} type="submit">
            Submit
          </button>
        </form>
      );
    }

    ReactDOM.render(<UsernameForm />, document.getElementById(''root''));
  </script>
</body>
```

## Additional resource

- [Blog post - Making dynamic form inputs with React](https://goshakkk.name/array-form-inputs/)
- [React Docs - Forms](https://reactjs.org/docs/forms.html)
- [Frontend Masters - Test a Form Component Solution](https://frontendmasters.com/courses/testing-react/test-a-form-component-solution/)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '59050418', 'https://d2c5owlt6rorc3.cloudfront.net/react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM/dash/react-make-dynamic-forms-with-react-897b233b-Un5BIhKSM.mpd', 'https://stream.mux.com/00398I5z02zTC5tYNzaAAHIIg92pm3JWrGRmWhHEEENK4.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/20-react-make-dynamic-forms-with-react-d69753ec.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6265, 'Controlling Form Values with React', NULL, 'There are many situations where you want to programmatically control the value of a form field. Maybe you want to set the value of one field based on the user‚Äôs interactions with another element. Or maybe you want to change the user‚Äôs input as they‚Äôre typing it. In this example, we‚Äôll be preventing the user from typing upper case characters into our field by turning our input from an ‚ÄúUncontrolled field‚Äù to a ‚ÄúControlled field.‚Äù

You can learn more about Controlled fields and components from [the React documentation](https://reactjs.org/docs/forms.html#controlled-components).', 153, NULL, '2020-03-11T02:43:19.712Z', '2025-12-13T00:54:53.678Z', 'react-controlling-form-values-with-react-b7e231a3', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-controlling-form-values-with-react-913848d7-x6Gw6i05v/react-controlling-form-values-with-react-913848d7-x6Gw6i05v.jpg', true, NULL, 'Kent C. Dodds: [0:00] It''s great that we''re able to display an error message if there''s an uppercase character and we disable the submit button, but it would be even cooler if we didn''t allow the user to type uppercase characters in the first place.

[0:11] If they try to type an uppercase character, we just lowercase it for them. We could do that pretty easily by saying setUsername.toLowerCase. Now, the username that''s stored inside of our state is going to be lowercase so we can do uppercase forever. When we hit submit, that''s all going to be lowercase.

[0:32] It''s not exactly a great user experience to be able to type something here and have the end result be different from what I submitted. What we need to do is control the input value to be exactly the same thing that I have in my state because I''m programmatically changing the value that I get from the input to set the value that I store in my state.

[0:52] If I want to keep those two in sync, then I need to control the input''s value. To do this is pretty simple, we simply add a value prop here and we''ll pass in the username.

[1:03] As soon as we pass this value prop on to an input, we''re communicating to React that React no longer needs to manage the state of this input. Now we are going to control that state and it should not change that value to anything other than what we enter in here which includes whatever the user''s typing.

[1:22] If I saved this and I come back up here and I try to type an uppercase string, that''s not going to work. It''s going to lowercase my string for me automatically. Now, it''s impossible for me to type something that''s incorrect. It might be useful to have some sort of info thing here that indicates why I can''t type uppercase characters in here.

[1:42] Hopefully, you get the general idea that if you ever need to make the input value something different from what the user is actually typing, then you can do so by passing a value prop. Let''s go ahead and clean some stuff up here because we no longer need to display an error because it''s impossible to make an error now.

[1:58] We get rid of that submit here. We''ll get rid of the isLowercase and error right here, and we can save that and everything looks great. You can''t tell but I''m holding down the shift key. I promise I''m trying to type something uppercase.

[2:12] The value in the input isn''t uppercase because I''m setting the username to a lowercase version of what''s being typed in that input''s value. Then when React re-renders this component, the username which is all the lowercase characters is getting passed into the value of the input and React is sending that input''s value to the lowercase version of what it was.', NULL, false, '22-egghead-react-controlling-form-values-with-react-62f9ac37.mp4', 11, true, false, 160, '---
mp4: 17726137
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-controlling-form-values-with-react-913848d7-x6Gw6i05v/react-controlling-form-values-with-react-913848d7-x6Gw6i05v.mp4', 'react-controlling-form-values-with-react-913848d7-x6Gw6i05v', 'zcKJ', 'https://egghead-pipeline.s3.amazonaws.com/react-controlling-form-values-with-react-913848d7-x6Gw6i05v/react-controlling-form-values-with-react-913848d7-x6Gw6i05v.mp3?39d3364abf9990c3?7b39', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.459Z', NULL, 8388599, NULL, 8172, 0, NULL, -2287797, '385a0fba9803459988befde1f708fe6c', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/21-controlled-forms?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 399869152, '1
00:00:00,120 --> 00:00:01,220
It''s great that we''re able to 

2
00:00:01,220 --> 00:00:03,250
display an error message if 

3
00:00:03,280 --> 00:00:04,750
there''s an uppercase character 

4
00:00:04,830 --> 00:00:06,130
and we disable the submit button, 

5
00:00:06,460 --> 00:00:07,910
but it would be even cooler if 

6
00:00:07,910 --> 00:00:09,240
we didn''t allow the user to type 

7
00:00:09,320 --> 00:00:10,510
uppercase characters in the 

8
00:00:10,510 --> 00:00:12,200
first place. If they try to 

9
00:00:12,200 --> 00:00:14,040
type an uppercase character, we 

10
00:00:14,040 --> 00:00:15,820
just lowercase it for them. We 

11
00:00:15,820 --> 00:00:17,410
could do that pretty easily by 

12
00:00:17,410 --> 00:00:20,550
saying setUsername.toLowerCase. 

13
00:00:21,440 --> 00:00:23,020
Now, the username that''s stored 

14
00:00:23,080 --> 00:00:25,150
inside of our state is going to 

15
00:00:25,150 --> 00:00:27,070
be lowercase so we can do 

16
00:00:27,100 --> 00:00:29,980
uppercase forever. When we hit 

17
00:00:29,980 --> 00:00:31,250
submit, that''s all going to be 

18
00:00:31,250 --> 00:00:33,580
lowercase. It''s not exactly a 

19
00:00:33,580 --> 00:00:35,170
great user experience to be able 

20
00:00:35,170 --> 00:00:36,990
to type something here and have 

21
00:00:36,990 --> 00:00:38,510
the end result be different from 

22
00:00:38,510 --> 00:00:40,510
what I submitted. What we need 

23
00:00:40,510 --> 00:00:42,850
to do is control the input value 

24
00:00:43,120 --> 00:00:44,790
to be exactly the same thing 

25
00:00:44,880 --> 00:00:47,070
that I have in my state because 

26
00:00:47,070 --> 00:00:48,510
I''m programmatically changing 

27
00:00:48,760 --> 00:00:50,160
the value that I get from the 

28
00:00:50,160 --> 00:00:51,820
input to set the value that I 

29
00:00:51,820 --> 00:00:53,480
store in my state. If I want to 

30
00:00:53,480 --> 00:00:54,920
keep those two in sync, then I 

31
00:00:54,920 --> 00:00:56,050
need to control the input''s 

32
00:00:56,050 --> 00:00:58,560
value. To do this is pretty 

33
00:00:58,560 --> 00:01:00,300
simple, we simply add a value 

34
00:01:00,300 --> 00:01:02,590
prop here and we''ll pass in the 

35
00:01:02,590 --> 00:01:04,980
username. As soon as we pass 

36
00:01:04,980 --> 00:01:06,800
this value prop on to an input, 

37
00:01:07,210 --> 00:01:08,510
we''re communicating to React 

38
00:01:08,880 --> 00:01:10,320
that React no longer needs to 

39
00:01:10,320 --> 00:01:12,380
manage the state of this input. 

40
00:01:12,730 --> 00:01:14,180
Now we are going to control that 

41
00:01:14,180 --> 00:01:15,720
state and it should not change 

42
00:01:15,720 --> 00:01:17,230
that value to anything other 

43
00:01:17,230 --> 00:01:19,200
than what we enter in here which 

44
00:01:19,200 --> 00:01:20,790
includes whatever the user''s 

45
00:01:20,790 --> 00:01:24,780
typing. If I saved this and I 

46
00:01:24,780 --> 00:01:26,240
come back up here and I try to 

47
00:01:26,240 --> 00:01:28,800
type an uppercase string, that''s 

48
00:01:28,800 --> 00:01:30,160
not going to work. It''s going to 

49
00:01:30,160 --> 00:01:31,510
lowercase my string for me 

50
00:01:31,580 --> 00:01:32,930
automatically. Now, it''s 

51
00:01:32,930 --> 00:01:34,190
impossible for me to type 

52
00:01:34,190 --> 00:01:35,510
something that''s incorrect. It 

53
00:01:35,630 --> 00:01:36,850
might be useful to have some 

54
00:01:36,850 --> 00:01:38,650
sort of info thing here that 

55
00:01:38,650 --> 00:01:40,330
indicates why I can''t type 

56
00:01:40,330 --> 00:01:41,650
uppercase characters in here. 

57
00:01:42,190 --> 00:01:43,240
Hopefully, you get the general 

58
00:01:43,240 --> 00:01:44,880
idea that if you ever need to 

59
00:01:44,880 --> 00:01:46,530
make the input value something 

60
00:01:46,530 --> 00:01:47,880
different from what the user is 

61
00:01:47,880 --> 00:01:49,920
actually typing, then you can do 

62
00:01:49,920 --> 00:01:51,980
so by passing a value prop. 

63
00:01:52,350 --> 00:01:53,290
Let''s go ahead and clean some 

64
00:01:53,290 --> 00:01:54,500
stuff up here because we no 

65
00:01:54,500 --> 00:01:55,970
longer need to display an error 

66
00:01:56,100 --> 00:01:57,330
because it''s impossible to make 

67
00:01:57,330 --> 00:01:58,780
an error now. We get rid of 

68
00:01:58,780 --> 00:02:00,690
that submit here. We''ll get rid 

69
00:02:00,690 --> 00:02:02,600
of the isLowercase and error 

70
00:02:03,010 --> 00:02:05,030
right here, and we can save that 

71
00:02:05,310 --> 00:02:07,860
and everything looks great. You 

72
00:02:07,860 --> 00:02:09,080
can''t tell but I''m holding down 

73
00:02:09,080 --> 00:02:10,220
the shift key. I promise I''m 

74
00:02:10,220 --> 00:02:11,150
trying to type something 

75
00:02:11,150 --> 00:02:13,390
uppercase. The value in the 

76
00:02:13,390 --> 00:02:15,140
input isn''t uppercase because 

77
00:02:15,140 --> 00:02:16,920
I''m setting the username to a 

78
00:02:16,920 --> 00:02:18,160
lowercase version of what''s 

79
00:02:18,160 --> 00:02:20,180
being typed in that input''s 

80
00:02:20,180 --> 00:02:22,180
value. Then when React re-

81
00:02:22,180 --> 00:02:23,680
renders this component, the 

82
00:02:23,680 --> 00:02:25,490
username which is all the 

83
00:02:25,490 --> 00:02:27,270
lowercase characters is getting 

84
00:02:27,270 --> 00:02:28,620
passed into the value of the 

85
00:02:28,620 --> 00:02:30,270
input and React is sending that 

86
00:02:30,310 --> 00:02:31,960
input''s value to the lowercase 

87
00:02:31,960 --> 00:02:32,950
version of what it was.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- There are many situations where you want to **programmatically control the value** of a form field.
- Maybe you want to set the value of one field based on the user‚Äôs interactions with another element. Or maybe you want to change the user‚Äôs input as they‚Äôre typing it.
- In this example, we‚Äôll be preventing the user from typing upper case characters into our field by turning our input from an **‚ÄúUncontrolled field‚Äù** to a **‚ÄúControlled field.‚Äù**

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function UsernameForm() {
      const [username, setUsername] = React.useState('''');

      function handleSubmit(event) {
        event.preventDefault();
        alert(`You entered: ${username}`);
      }

      function handleChange(event) {
        // making sure that the value is turned into lower case
        // the input value is now handled with React
        setUsername(event.target.value.toLowerCase());
      }

      return (
        <form onSubmit={handleSubmit}>
          <div>
            <label htmlFor="usernameInput">Username:</label>
            {/* controlling the value with value={username} */}
            <input
              id="usernameInput"
              type="text"
              onChange={handleChange}
              value={username}
            />
          </div>
          <button type="submit">Submit</button>
        </form>
      );
    }

    ReactDOM.render(<UsernameForm />, document.getElementById(''root''));
  </script>
</body>
```

## Additional resource

- [React Docs - Forms](https://reactjs.org/docs/forms.html)
- [Frontend Masters - Test a Form Component Solution](https://frontendmasters.com/courses/testing-react/test-a-form-component-solution/)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'b7e231a3', 'https://d2c5owlt6rorc3.cloudfront.net/react-controlling-form-values-with-react-913848d7-x6Gw6i05v/dash/react-controlling-form-values-with-react-913848d7-x6Gw6i05v.mpd', 'https://stream.mux.com/9NqdGOZLJDuD48902ZUo1013snzltqjl51gUP5UsKFaS8.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/21-react-controlling-form-values-with-react-4627dd2d.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6266, 'Using React Error Boundaries to handle errors in React Components', NULL, 'No matter how hard you try, eventually your app code just isn‚Äôt going to behave the way you expect it to and you‚Äôll need to handle those exceptions. If a render is thrown and unhandled, your application will be removed from the page, leaving the user with a blank screen... Kind of awkward... 

Luckily for us, there‚Äôs a simple way to handle errors in your application using a special kind of component called an [Error Boundary](https://reactjs.org/docs/error-boundaries.html). Unfortunately, there is currently no way to create an Error Boundary component with a function and you have to use a class component instead, but we got another lucky break because there‚Äôs a terrific open source library we can use called [`react-error-boundary`](https://www.npmjs.com/package/react-error-boundary).

In this lesson, we‚Äôll learn how to write our own simple error boundary and then how to use `react-error-boundary` instead. We‚Äôll also learn the implications of where we place our Error Boundaries in our React component tree.', 457, NULL, '2020-03-11T02:43:37.524Z', '2025-12-13T00:54:53.678Z', 'react-using-react-error-boundaries-to-handle-errors-in-react-components', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN/react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN.jpg', true, NULL, 'Kent C. Dodds: [0:00] As hard as you work on your application, sometimes unexpected things will happen. I don''t expect people will be throwing errors in the body of your function, but they could be calling functions that don''t exist, which will [inaudible] results in an error. Let''s take a look at how you can manage these with React.

[0:16] Here we have some explode state, where we initialize that to false. Then we have a button, where when you click on it, it changes that explode state to true. Then, we also render this <div>, where if there is some explode state, then we''ll render that bomb, which will trigger this error.

[0:33] If we take a look at what things look like right now, we click on the bomb and our entire application goes away. We get this Uncaught Error: CABOOM in our console, and if we scroll down here a little bit, React logs out a component stack trace so we can track down which component threw this error.

[0:52] We have our App, and that is rendered right here, and then we have this <div>, which is rendered here, and then we have this <div>, which is rendered here, and then we have this bomb, which is rendered here, and that bomb is the thing that threw the error.

[1:05] It''s giving us this tip. "Consider adding an error boundary to your tree to customize error handling behavior." That''s just what we''re going to do. Normally, I use the third-party library for this, but we''re going to build our own little error boundary.

[1:19] Error boundaries have to be class components, and to create a class component with React, we''re going to say class ErrorBoundary extends React.Component. In the body of our React class component, we''re going to need a render method, and this is what''s going to be rendered. It''s basically the same thing as the body of our regular function components.

[1:42] Here, we''re not going to render anything special with this ErrorBoundary. We''re simply going to return this.props.children, so the React elements we return for this ErrorBoundary are going to be the same React elements that are provided to this ErrorBoundary as children. Let''s go ahead and put those right here inside of this <div>.

[2:01] We''ll say ErrorBoundary, paste in what we had before, and then close off that ErrorBoundary. If we save this, we get a refresh and when I click on this bomb, we get the exact same behavior that we had before. Now let''s make this ErrorBoundary handle that error.

[2:17] The first thing that we''re going to need is some state, so I''ll say error: null, and then we''ll have a static method called getDerivedStateFromError() that''ll accept an error and then it''ll return the state change that we want to make based on this error. We''ll just return an object that has an error property and that''s going to be assigned to the error that we''re getting for this static method.

[2:40] When this happens, we''re going to get a re-render. Let''s grab that error from our state and then we can say if there''s an error, then we''ll return a <div> that says, "Oh no!" Let''s save that and when we click this, we''re going to see "Oh no!"

[3:00] We''ll still see errors logged to the console for our benefit, but the application won''t completely crash. React will simply re-render this ErrorBoundary with the error that was thrown and the ErrorBoundary gets to control what''s being rendered.

[3:13] I''m going to go ahead and make a function component here called ErrorFallback(), which is going to be my generic fallback component for this application. We''ll make this accept a prop called error. It will return a <div> that has a <p> tag with "Something went wrong:" and then a <pre> tag with the error.message.

[3:40] As the user of this error boundary component, I want to be able to provide to the error boundary the fallback component I want it to render when there''s an error. I''m going to provide it the prop FallbackComponent. Here, I''ll provide that component that I just created this ErrorFallback, paste that right in there.

[4:01] For our error boundary to accept and render that, we''re going to have access to that fallback component on this.props. We can say this.props.fallbackComponent and we''ll provide the prop error as error.

[4:18] You may recall that rendering custom components requires that the first character you use is capitalized, but the compiler also has a rule that if there are dots included in the component name, then those will also be treated as custom components, which is why this works.

[4:34] If we save this, we push the button and we''re going to get, "Something went wrong. CABOOM." The app is still working, and we get all of the information logged to the console as well.

[4:45] As I said, I never use class components even for error boundaries because I prefer to use a third-party library, which I''m going to include now and that is called React ErrorBoundary. With the React Error Boundary UMD Export, it exposes a global variable called ReactErrorBoundary and it has a property on there called ErrorBoundary. I''m going to simply assign that to ErrorBoundary.

[5:11] You''ll be pleased to know that I don''t have to change any of my code for this to work. It will to continue to work because we basically built a simple version of the ErrorBoundary from this library. The library is doing a fair a bit more than what we''re doing here, which is why I recommend you do that instead, but the API is exactly the same.

[5:30] One other thing I want to demonstrate here is that this ErrorBoundary can be rendered anywhere in the tree. The location of the ErrorBoundary has a special significance. The ErrorBoundary can handle any errors that are thrown by its descendants. It''s also important to note that the ErrorBoundary is going to render something in place of all of its descendants when there is an error.

[5:50] That means that while we can see the bomb still right here and the rest of our application, if we were to move this ErrorBoundary up to encompass our entire app and save that, when we click this button, then the entire app is replaced by our ErrorFallback component.

[6:08] This may or may not be desirable based on a specific use case, but it could be useful to have one error boundary rendered up here and then other error boundaries rendered throughout your application with more specific ErrorFallbacks.

[6:22] Here we can have "Something went wrong there," and that error is going to be handled by the nearest ErrorBoundary here. Then if something went wrong somewhere else in our application, then this top-level ErrorBoundary could handle that error. This gives us some fine-grained control over what part of the tree is going to be replaced by what''s rendered by our error boundary.

[6:43] Another important thing to note is that our error boundary can only handle certain errors, specifically errors that are happening within the React call stack. It won''t handle errors that are happening in event handlers or if there''s an error in an asynchronous callback, like a Promise handler. It will only handle errors that happen within a React call stack like the render method or a React useEffect callback.

[7:06] In the review, to handle React errors, you need to create an error boundary or, as I recommend, use react-error-boundary from npm. With this error boundary, you can wrap parts of your code. Any descendants of that error boundary will have its errors handled by the error boundary.

[7:23] With the error boundary from the react-error-boundary library, you can provide a FallbackComponent. That FallbackComponent will be rendered in the event of an error, allowing you to recover from the error or simply display an error message for the user to read.', NULL, false, '23-egghead-react-using-react-error-boundaries-to-handle-errors-in-react-components.mp4', 11, true, false, 160, '---
mp4: 58757207
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN/react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN.mp4', 'react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN', 'zcKN', 'https://egghead-pipeline.s3.amazonaws.com/react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN/react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN.mp3?eda48a01e78262c0?a1d8', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.794Z', NULL, 8388599, NULL, 8173, 0, NULL, -1906499, '60483934c35e440cb4af09a3e35714c5', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/22-error-boundaries?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 400539508, '1
00:00:00,040 --> 00:00:01,550
As hard as you work on your 

2
00:00:01,550 --> 00:00:02,850
application, sometimes 

3
00:00:02,920 --> 00:00:05,050
unexpected things will happen. I 

4
00:00:05,050 --> 00:00:06,200
don''t expect people will be 

5
00:00:06,200 --> 00:00:07,640
throwing errors in the body of 

6
00:00:07,640 --> 00:00:09,050
your function, but they could be 

7
00:00:09,050 --> 00:00:10,470
calling functions that don''t 

8
00:00:10,470 --> 00:00:11,430
exist, which will  

9
00:00:11,430 --> 00:00:13,530
results in an error. Let''s take 

10
00:00:13,530 --> 00:00:14,860
a look at how you can manage 

11
00:00:14,860 --> 00:00:17,360
these with React. Here we have 

12
00:00:17,490 --> 00:00:19,390
some explode state, where we 

13
00:00:19,390 --> 00:00:21,280
initialize that to false. Then 

14
00:00:21,280 --> 00:00:22,550
we have a button, where when you 

15
00:00:22,550 --> 00:00:23,890
click on it, it changes that 

16
00:00:23,890 --> 00:00:26,370
explode state to true. Then, we 

17
00:00:26,370 --> 00:00:28,340
also render this <div>, where if 

18
00:00:28,380 --> 00:00:29,900
there is some explode state, 

19
00:00:30,160 --> 00:00:31,280
then we''ll render that bomb, 

20
00:00:31,620 --> 00:00:33,100
which will trigger this error. 

21
00:00:33,760 --> 00:00:35,090
If we take a look at what things 

22
00:00:35,090 --> 00:00:37,010
look like right now, we click on 

23
00:00:37,010 --> 00:00:39,040
the bomb and our entire 

24
00:00:39,110 --> 00:00:41,350
application goes away. We get 

25
00:00:41,350 --> 00:00:43,320
this Uncaught Error: CABOOM in 

26
00:00:43,320 --> 00:00:44,840
our console, and if we scroll 

27
00:00:44,840 --> 00:00:46,420
down here a little bit, React 

28
00:00:46,500 --> 00:00:49,510
logs out a component stack trace 

29
00:00:49,760 --> 00:00:50,920
so we can track down which 

30
00:00:50,920 --> 00:00:52,770
component threw this error. We 

31
00:00:52,770 --> 00:00:54,090
have our App, and that is 

32
00:00:54,090 --> 00:00:55,590
rendered right here, and then we 

33
00:00:55,590 --> 00:00:56,530
have this <div>, which is 

34
00:00:56,530 --> 00:00:58,200
rendered here, and then we have 

35
00:00:58,200 --> 00:00:59,490
this <div>, which is rendered 

36
00:00:59,490 --> 00:01:01,450
here, and then we have this bomb, 

37
00:01:01,540 --> 00:01:03,450
which is rendered here, and that 

38
00:01:03,450 --> 00:01:05,050
bomb is the thing that threw the 

39
00:01:05,050 --> 00:01:07,420
error. It''s giving us this tip. "

40
00:01:07,680 --> 00:01:09,120
Consider adding an error 

41
00:01:09,120 --> 00:01:10,330
boundary to your tree to 

42
00:01:10,330 --> 00:01:11,450
customize error handling 

43
00:01:11,450 --> 00:01:13,220
behavior." That''s just what 

44
00:01:13,220 --> 00:01:15,210
we''re going to do. Normally, I 

45
00:01:15,210 --> 00:01:16,540
use the third-party library for 

46
00:01:16,540 --> 00:01:17,760
this, but we''re going to build 

47
00:01:17,760 --> 00:01:19,160
our own little error boundary. 

48
00:01:19,380 --> 00:01:20,710
Error boundaries have to be 

49
00:01:20,710 --> 00:01:22,570
class components, and to create 

50
00:01:22,600 --> 00:01:24,060
a class component with React, 

51
00:01:24,060 --> 00:01:25,330
we''re going to say class 

52
00:01:25,820 --> 00:01:28,940
ErrorBoundary extends React.

53
00:01:29,260 --> 00:01:31,850
Component. In the body of our 

54
00:01:31,850 --> 00:01:33,200
React class component, we''re 

55
00:01:33,200 --> 00:01:34,640
going to need a render method, 

56
00:01:35,140 --> 00:01:36,290
and this is what''s going to be 

57
00:01:36,290 --> 00:01:37,370
rendered. It''s basically the 

58
00:01:37,370 --> 00:01:39,570
same thing as the body of our 

59
00:01:39,980 --> 00:01:41,220
regular function components. 

60
00:01:42,190 --> 00:01:43,980
Here, we''re not going to render 

61
00:01:43,980 --> 00:01:45,050
anything special with this 

62
00:01:45,050 --> 00:01:46,150
ErrorBoundary. We''re simply 

63
00:01:46,150 --> 00:01:48,710
going to return this.props.

64
00:01:48,830 --> 00:01:50,950
children, so the React elements 

65
00:01:50,980 --> 00:01:52,730
we return for this ErrorBoundary 

66
00:01:52,780 --> 00:01:54,020
are going to be the same React 

67
00:01:54,020 --> 00:01:55,570
elements that are provided to 

68
00:01:55,570 --> 00:01:57,090
this ErrorBoundary as children. 

69
00:01:57,550 --> 00:01:59,190
Let''s go ahead and put those 

70
00:01:59,460 --> 00:02:01,470
right here inside of this <div>. 

71
00:02:01,880 --> 00:02:03,410
We''ll say ErrorBoundary, paste 

72
00:02:03,410 --> 00:02:04,770
in what we had before, and then 

73
00:02:04,770 --> 00:02:08,010
close off that ErrorBoundary. If 

74
00:02:08,010 --> 00:02:09,860
we save this, we get a refresh 

75
00:02:09,970 --> 00:02:11,350
and when I click on this bomb, 

76
00:02:11,630 --> 00:02:12,970
we get the exact same behavior 

77
00:02:12,970 --> 00:02:14,710
that we had before. Now let''s 

78
00:02:14,710 --> 00:02:16,200
make this ErrorBoundary handle 

79
00:02:16,200 --> 00:02:17,740
that error. The first thing 

80
00:02:17,740 --> 00:02:19,160
that we''re going to need is some 

81
00:02:19,160 --> 00:02:21,790
state, so I''ll say error: null, 

82
00:02:22,330 --> 00:02:23,570
and then we''ll have a static 

83
00:02:23,570 --> 00:02:24,360
method called 

84
00:02:24,360 --> 00:02:27,370
getDerivedStateFromError() 

85
00:02:27,710 --> 00:02:29,560
that''ll accept an error and then 

86
00:02:29,560 --> 00:02:30,990
it''ll return the state change 

87
00:02:30,990 --> 00:02:32,700
that we want to make based on 

88
00:02:32,700 --> 00:02:34,390
this error. We''ll just return an 

89
00:02:34,390 --> 00:02:35,590
object that has an error 

90
00:02:35,590 --> 00:02:37,170
property and that''s going to be 

91
00:02:37,170 --> 00:02:38,310
assigned to the error that we''re 

92
00:02:38,310 --> 00:02:39,970
getting for this static method. 

93
00:02:40,600 --> 00:02:41,980
When this happens, we''re going 

94
00:02:41,980 --> 00:02:44,260
to get a re-render. Let''s grab 

95
00:02:44,260 --> 00:02:47,210
that error from our state and 

96
00:02:47,210 --> 00:02:48,920
then we can say if there''s an 

97
00:02:48,970 --> 00:02:52,310
error, then we''ll return a <div> 

98
00:02:52,310 --> 00:02:56,110
that says, "Oh no!" Let''s save 

99
00:02:56,110 --> 00:02:58,610
that and when we click this, 

100
00:02:58,710 --> 00:02:59,730
we''re going to see "Oh no!" 

101
00:03:00,310 --> 00:03:01,660
We''ll still see errors logged to 

102
00:03:01,660 --> 00:03:03,750
the console for our benefit, but 

103
00:03:03,750 --> 00:03:05,050
the application won''t completely 

104
00:03:05,050 --> 00:03:07,000
crash. React will simply re-

105
00:03:07,000 --> 00:03:09,860
render this ErrorBoundary with 

106
00:03:09,860 --> 00:03:11,740
the error that was thrown and 

107
00:03:11,740 --> 00:03:12,680
the ErrorBoundary gets to 

108
00:03:12,680 --> 00:03:13,840
control what''s being rendered. 

109
00:03:13,840 --> 00:03:15,710
I''m going to go ahead and make a 

110
00:03:15,710 --> 00:03:17,130
function component here called 

111
00:03:17,250 --> 00:03:19,290
ErrorFallback(), which is going 

112
00:03:19,290 --> 00:03:20,530
to be my generic fallback 

113
00:03:20,530 --> 00:03:21,880
component for this application. 

114
00:03:22,270 --> 00:03:23,680
We''ll make this accept a prop 

115
00:03:23,720 --> 00:03:27,180
called error. It will return a <

116
00:03:27,180 --> 00:03:31,750
div> that has a <p> tag with "

117
00:03:31,750 --> 00:03:35,750
Something went wrong:" and then 

118
00:03:35,830 --> 00:03:37,610
a <pre> tag with the error.

119
00:03:37,750 --> 00:03:41,680
message. As the user of this 

120
00:03:41,710 --> 00:03:43,860
error boundary component, I want 

121
00:03:43,860 --> 00:03:45,090
to be able to provide to the 

122
00:03:45,090 --> 00:03:46,550
error boundary the fallback 

123
00:03:46,550 --> 00:03:47,890
component I want it to render 

124
00:03:47,890 --> 00:03:49,800
when there''s an error. I''m going 

125
00:03:49,800 --> 00:03:50,810
to provide it the prop 

126
00:03:51,120 --> 00:03:55,320
FallbackComponent. Here, I''ll 

127
00:03:55,320 --> 00:03:56,910
provide that component that I 

128
00:03:56,910 --> 00:03:58,730
just created this ErrorFallback, 

129
00:03:59,370 --> 00:04:02,230
paste that right in there. For 

130
00:04:02,230 --> 00:04:04,040
our error boundary to accept and 

131
00:04:04,040 --> 00:04:05,860
render that, we''re going to have 

132
00:04:05,860 --> 00:04:07,170
access to that fallback 

133
00:04:07,170 --> 00:04:10,060
component on this.props. We can 

134
00:04:10,060 --> 00:04:11,770
say this.props.

135
00:04:11,970 --> 00:04:15,200
fallbackComponent and we''ll 

136
00:04:15,200 --> 00:04:17,930
provide the prop error as error. 

137
00:04:18,420 --> 00:04:19,920
You may recall that rendering 

138
00:04:19,920 --> 00:04:21,490
custom components requires that 

139
00:04:21,490 --> 00:04:23,420
the first character you use is 

140
00:04:23,420 --> 00:04:25,300
capitalized, but the compiler 

141
00:04:25,300 --> 00:04:26,880
also has a rule that if there 

142
00:04:26,880 --> 00:04:28,380
are dots included in the 

143
00:04:28,380 --> 00:04:29,950
component name, then those will 

144
00:04:29,950 --> 00:04:31,310
also be treated as custom 

145
00:04:31,310 --> 00:04:32,670
components, which is why this 

146
00:04:32,670 --> 00:04:36,810
works. If we save this, we push 

147
00:04:36,810 --> 00:04:38,400
the button and we''re going to 

148
00:04:38,400 --> 00:04:39,590
get, "Something went wrong. 

149
00:04:39,710 --> 00:04:41,160
CABOOM." The app is still 

150
00:04:41,160 --> 00:04:43,130
working, and we get all of the 

151
00:04:43,130 --> 00:04:44,030
information logged to the 

152
00:04:44,030 --> 00:04:45,970
console as well. As I said, I 

153
00:04:45,970 --> 00:04:47,620
never use class components even 

154
00:04:47,620 --> 00:04:49,140
for error boundaries because I 

155
00:04:49,140 --> 00:04:50,870
prefer to use a third-party 

156
00:04:50,870 --> 00:04:51,990
library, which I''m going to 

157
00:04:51,990 --> 00:04:54,150
include now and that is called 

158
00:04:54,230 --> 00:04:56,830
React ErrorBoundary. With the 

159
00:04:56,830 --> 00:04:59,830
React Error Boundary UMD Export, 

160
00:05:00,140 --> 00:05:01,550
it exposes a global variable 

161
00:05:01,550 --> 00:05:04,020
called ReactErrorBoundary and it 

162
00:05:04,320 --> 00:05:05,770
has a property on there called 

163
00:05:05,920 --> 00:05:08,960
ErrorBoundary. I''m going to 

164
00:05:08,960 --> 00:05:10,150
simply assign that to 

165
00:05:10,210 --> 00:05:11,920
ErrorBoundary. You''ll be 

166
00:05:11,920 --> 00:05:13,350
pleased to know that I don''t 

167
00:05:13,350 --> 00:05:14,700
have to change any of my code 

168
00:05:14,700 --> 00:05:15,710
for this to work. It will to 

169
00:05:15,710 --> 00:05:17,400
continue to work because we 

170
00:05:17,400 --> 00:05:19,210
basically built a simple version 

171
00:05:19,530 --> 00:05:21,490
of the ErrorBoundary from this 

172
00:05:21,490 --> 00:05:23,260
library. The library is doing a 

173
00:05:23,260 --> 00:05:24,350
fair a bit more than what we''re 

174
00:05:24,350 --> 00:05:25,520
doing here, which is why I 

175
00:05:25,520 --> 00:05:26,980
recommend you do that instead, 

176
00:05:27,320 --> 00:05:29,240
but the API is exactly the same. 

177
00:05:30,440 --> 00:05:31,230
One other thing I want to 

178
00:05:31,230 --> 00:05:32,470
demonstrate here is that this 

179
00:05:32,520 --> 00:05:33,730
ErrorBoundary can be rendered 

180
00:05:33,810 --> 00:05:35,400
anywhere in the tree. The 

181
00:05:35,400 --> 00:05:36,720
location of the ErrorBoundary 

182
00:05:36,720 --> 00:05:38,750
has a special significance. The 

183
00:05:38,750 --> 00:05:40,210
ErrorBoundary can handle any 

184
00:05:40,210 --> 00:05:41,480
errors that are thrown by its 

185
00:05:41,480 --> 00:05:43,900
descendants. It''s also important 

186
00:05:43,900 --> 00:05:45,190
to note that the ErrorBoundary 

187
00:05:45,190 --> 00:05:46,990
is going to render something in 

188
00:05:46,990 --> 00:05:48,600
place of all of its descendants 

189
00:05:48,820 --> 00:05:50,550
when there is an error. That 

190
00:05:50,550 --> 00:05:52,440
means that while we can see the 

191
00:05:52,440 --> 00:05:54,190
bomb still right here and the 

192
00:05:54,190 --> 00:05:56,340
rest of our application, if we 

193
00:05:56,340 --> 00:05:57,700
were to move this ErrorBoundary 

194
00:05:57,700 --> 00:06:01,370
up to encompass our entire app 

195
00:06:01,860 --> 00:06:03,310
and save that, when we click 

196
00:06:03,310 --> 00:06:05,690
this button, then the entire app 

197
00:06:05,690 --> 00:06:07,700
is replaced by our ErrorFallback 

198
00:06:07,750 --> 00:06:09,650
component. This may or may not 

199
00:06:09,650 --> 00:06:11,270
be desirable based on a specific 

200
00:06:11,270 --> 00:06:13,160
use case, but it could be useful 

201
00:06:13,160 --> 00:06:14,570
to have one error boundary 

202
00:06:14,650 --> 00:06:16,740
rendered up here and then other 

203
00:06:16,740 --> 00:06:18,070
error boundaries rendered 

204
00:06:18,070 --> 00:06:19,790
throughout your application with 

205
00:06:19,790 --> 00:06:21,540
more specific ErrorFallbacks. 

206
00:06:22,580 --> 00:06:24,440
Here we can have "Something went 

207
00:06:24,440 --> 00:06:27,540
wrong there," and that error is 

208
00:06:27,540 --> 00:06:28,600
going to be handled by the 

209
00:06:28,600 --> 00:06:30,950
nearest ErrorBoundary here. Then 

210
00:06:30,950 --> 00:06:31,780
if something went wrong 

211
00:06:31,780 --> 00:06:32,510
somewhere else in our 

212
00:06:32,510 --> 00:06:34,830
application, then this top-level 

213
00:06:34,830 --> 00:06:36,050
ErrorBoundary could handle that 

214
00:06:36,130 --> 00:06:38,100
error. This gives us some fine-

215
00:06:38,100 --> 00:06:39,430
grained control over what part 

216
00:06:39,430 --> 00:06:40,350
of the tree is going to be 

217
00:06:40,350 --> 00:06:41,870
replaced by what''s rendered by 

218
00:06:41,940 --> 00:06:43,500
our error boundary. Another 

219
00:06:43,500 --> 00:06:44,960
important thing to note is that 

220
00:06:44,960 --> 00:06:46,410
our error boundary can only 

221
00:06:46,410 --> 00:06:47,720
handle certain errors, 

222
00:06:47,930 --> 00:06:49,250
specifically errors that are 

223
00:06:49,250 --> 00:06:50,790
happening within the React call 

224
00:06:50,790 --> 00:06:52,690
stack. It won''t handle errors 

225
00:06:52,690 --> 00:06:53,800
that are happening in event 

226
00:06:53,800 --> 00:06:56,300
handlers or if there''s an error 

227
00:06:56,300 --> 00:06:57,660
in an asynchronous callback, 

228
00:06:57,660 --> 00:06:59,430
like a Promise handler. It will 

229
00:06:59,430 --> 00:07:00,800
only handle errors that happen 

230
00:07:00,800 --> 00:07:02,770
within a React call stack like 

231
00:07:02,800 --> 00:07:04,780
the render method or a React 

232
00:07:04,780 --> 00:07:06,280
useEffect callback. In the 

233
00:07:06,280 --> 00:07:08,170
review, to handle React errors, 

234
00:07:08,390 --> 00:07:09,570
you need to create an error 

235
00:07:09,570 --> 00:07:12,270
boundary or, as I recommend, use 

236
00:07:12,270 --> 00:07:14,050
react-error-boundary from npm. 

237
00:07:14,410 --> 00:07:15,650
With this error boundary, you 

238
00:07:15,650 --> 00:07:17,700
can wrap parts of your code. Any 

239
00:07:17,700 --> 00:07:18,870
descendants of that error 

240
00:07:18,870 --> 00:07:20,560
boundary will have its errors 

241
00:07:20,560 --> 00:07:22,700
handled by the error boundary. 

242
00:07:23,230 --> 00:07:24,670
With the error boundary from the 

243
00:07:24,670 --> 00:07:26,250
react-error-boundary library, 

244
00:07:26,470 --> 00:07:27,380
you can provide a 

245
00:07:27,380 --> 00:07:28,930
FallbackComponent. That 

246
00:07:28,930 --> 00:07:30,020
FallbackComponent will be 

247
00:07:30,020 --> 00:07:31,550
rendered in the event of an 

248
00:07:31,550 --> 00:07:33,560
error, allowing you to recover 

249
00:07:33,560 --> 00:07:35,520
from the error or simply display 

250
00:07:35,520 --> 00:07:37,090
an error message for the user to 

251
00:07:37,165 --> 00:07:37,490
read.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- There‚Äôs a simple way to handle errors in your application using a special kind of component called an Error Boundary. Unfortunately, there is currently no way to create an Error Boundary component with a function and you have to use a class component instead, but we got another lucky break because there‚Äôs a terrific open source library we can use called [react-error-boundary](https://github.com/bvaughn/react-error-boundary).

- Error boundaries are React components that catch JavaScript errors anywhere in their child component tree, log those errors, and display a fallback UI instead of the component tree that crashed.

- Error boundaries catch errors during rendering, in lifecycle methods, and in constructors of the whole tree below them.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script src="https://unpkg.com/react-error-boundary@1.2.5/dist/umd/react-error-boundary.js"></script>
  <script type="text/babel">
    // This is recommended:
    const ErrorBoundary = ReactErrorBoundary.ErrorBoundary;
    // error boundaries need to be a class component
    // returning this.props.children

    // class ErrorBoundary extends React.Component {
    //   state = {error: null}
    //   static getDerivedStateFromError(error) {
    //     return {error}
    //   }
    //   render() {
    //     const {error} = this.state
    //     if (error) {
    //       return <this.props.FallbackComponent error={error} />
    //     }

    //     return this.props.children
    //   }
    // }

    function ErrorFallback({ error }) {
      return (
        <div>
          {/* controlling error by ErrorBoundary */}
          <p>Something went wrong:</p>
          <pre>{error.message}</pre>
        </div>
      );
    }

    function Bomb() {
      // when this function is called, it throws an error
      throw new Error(''üí• CABOOM üí•'');
      // Note that error boundaries only catch errors in the components below them in the tree.
    }

    function App() {
      const [explode, setExplode] = React.useState(false);
      return (
        <div>
          <div>
            <button onClick={() => setExplode(true)}>üí£</button>
          </div>
          <div>
            {/* controlling error by ErrorBoundary */}
            {/* + providing ErrorFallback */}
            <ErrorBoundary FallbackComponent={ErrorFallback}>
              {explode ? <Bomb /> : ''Push the button Max!''}
            </ErrorBoundary>
          </div>
        </div>
      );
    }
    ReactDOM.render(<App />, document.getElementById(''root''));
  </script>
</body>
```

- The granularity of error boundaries is up to you. You may wrap top-level route components to display a ‚ÄúSomething went wrong‚Äù message to the user, just like server-side frameworks often handle crashes.

## Additional resource

- [React Docs - Error Boundaries](https://reactjs.org/docs/error-boundaries.html)
- [egghead lesson - Handle React Suspense Errors with an Error Boundary](https://egghead.io/lessons/react-handle-react-suspense-errors-with-an-error-boundary)
- [repo - react-error-boundary](https://github.com/bvaughn/react-error-boundary)
- [npm - react-error-boundary](https://www.npmjs.com/package/react-error-boundary)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '740657bb', 'https://d2c5owlt6rorc3.cloudfront.net/react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN/dash/react-using-react-error-boundaries-to-handle-errors-in-react-components-P6dwLgXsN.mpd', 'https://stream.mux.com/KTJBuwEmZDyxCtV901N0177ON8XucI2GMyfdwOYGd3sAs.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/22-react-using-react-error-boundaries-to-handle-errors-in-react-components.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6271, 'Install and use React DevTools', NULL, 'It‚Äôs dangerous to go alone. Here take this: [React DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en). The React Developer Tools extension is extremely useful in developing and debugging React applications. In this lesson we‚Äôll get it installed and play around with some of the features. Definitely take some time to play around with the DevTools on your own. You‚Äôll be using these a lot.', 391, NULL, '2020-03-11T02:45:15.601Z', '2025-12-13T00:54:53.678Z', 'react-install-and-use-react-devtools', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-install-and-use-react-devtools-G-owlfQ95/react-install-and-use-react-devtools-G-owlfQ95.jpg', true, NULL, 'Instructor: [0:00] Here, I can fill out a Pok√©mon name like Pikachu. I submit. I get some Pikachu data. If I make a typo here, then I''m not going to get anything back. It might be useful for me to get an understanding of what''s going on behind the scenes in the state of the components that I''m rendering to this page so that I can debug the problems that are happening in my components.

[0:22] What I''m going to do is I''m going to Google React DevTools. That''ll come up with the Chrome Web Store for React DevTools. There''s also React DevTools supported for other browsers. I''m using Chrome, so I''m going to add this to Chrome. Click on "Add Extension." Then React Developer Tools has been added to Chrome. I can use that by clicking on that icon.

[0:47] When I come back to my app, I''ll go ahead and refresh here. We''ll see that Chrome extension icon for React DevTools has turned red. That''s indicating to us that React is on this page and we''re using the development build of React.

[1:01] When we use the production build of React, then this will look a little differently. We can see that by going to twitter.com because Twitter is built using React. Here, this page is using the production build of React. If we close this and now I open up my DevTools, I can go inspect here, or I can go here to More Tools and Developer Tools.

[1:26] That''ll open up the Developer Tools here. If I click here and look at components, then this is going to show me the components that are driving this page. I can see that we have an app component and we have a Pok√©mon info component.

[1:42] Under the app component, I can see all of the hooks that are being used for this app component to work. We have some state here that is an empty string. As I type in here and click submit, now we see that that state is what I typed. We can even change that value here. We can click undo if we want to undo that change, or we can hit enter to commit that value.

[2:05] Now that value has been committed. You will see that we get null is printed because there is no Pok√©mon by the name of value. If we change this to Mew and hit enter, then we''re going to retrieve Mew''s information. On the Pok√©mon info side, we can see the Pok√©mon name is coming in via props. We can actually change this prop to Mewtwo. Change that prop there.

[2:28] Then we can also see the hooks that are being used by the Pok√©mon info component. We have state is resolved. We also have some more state for the Pok√©mon information itself and some more state. This is for our error state. We can see this hook also has an effect.

[2:45] There are a lot of options that we have here. We can click on this. That will show me the source code for this particular component. If we go back to our components here and click on this button, then that will log this component''s information to the console.

[2:59] We can click that to expand it. We''ll see the props, the hooks, and the root DOM node that''s being rendered by this component. We''ll come back here again. If you want to, you can actually drag this over, since we''re going to be using this a lot. I''m going to move that over there.

[3:14] We also have this button to inspect the matching DOM element. That''ll take us straight to our elements tab here with that element highlighted. Then this is for Suspense. If you''re using any React Suspense components, you can test those out here by suspending the selected component. We also have some options here for the theme and the way that this is displayed.

[3:37] Then we also have some view options for our components tab, where we can filter out different types of components or ever filter them out by their name. If we wanted to get rid of that app, then we could type that in. Now our app is no longer being shown. I do want to show that, so I''ll remove that. Now our app is being shown.

[3:59] We also have a profiler tab that will help us debug performance issues in our app. We can enable record while each component is rendering. We can also hide commits below a certain threshold. If a commit is really fast -- maybe it only takes five milliseconds to update the DOM -- then we can enable that.

[4:16] Now I can go to my profiler. I''ll drag that over here as well. We can hit this button to start profiling where we are, or we can hit this button to reload and start profiling when the page loads. We''ll click on that. Then we can click stop. We''ll see that there''s no data matching the current filter criteria.

[4:35] Let''s go ahead and we''ll uncheck this button. Now we can see that there was a commit. It just happened really fast. That commit was for the initial render of our component. We have our app and our Pok√©mon info. It says that this was rendered because it''s the first time that it was rendered.

[4:51] Now let''s go ahead and do another recording. We''ll say Mew. We''ll submit that and then hit stop. We''ll see a couple of commits here. For this one, it re-rendered because hooks changed and props changed.

[5:05] For this one, it re-rendered because hooks changed. On this commit, it re-rendered because hooks changed again, so the data came back from the Pok√©mon request. Then this re-rendered because we updated our state.

[5:19] The React DevTools gives us this components and this profiler tab in our Developer Tools to give us a lot of insight into what our components are doing while we''re developing them. Then we also have this indicator up here to tell us when we''re using the development build of React versus the production build so we can make sure that our production application uses the production build.

[5:40] One last pro tip I want to show you is if you open up the console while you have the components tab open -- you can do that by hitting the escape key -- then we have our console here. You can type $r. That will give you the hooks, the props, and the type for the component that you have currently selected.

[5:58] We can click on the app. We can do $r again. Now we''ll see the hooks, the props, and the type for that component that we have selected. This is actually very similar to the elements tab, where you can do a $.

[6:09] That will give you the DOM node that you have currently selected in the elements tab. In the components tab, you have a $r. That will give you information on the component that you have currently selected.

[6:22] I strongly advise that you install the React DevTools and play around with them so you become familiar with their capabilities and make you more productive developing React applications.', NULL, false, '28-egghead-react-install-and-use-react-devtools.mp4', 11, true, false, 160, '---
mp4: 28523067
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-install-and-use-react-devtools-G-owlfQ95/react-install-and-use-react-devtools-G-owlfQ95.mp4', 'react-install-and-use-react-devtools-G-owlfQ95', 'zcKX', 'https://egghead-pipeline.s3.amazonaws.com/react-install-and-use-react-devtools-G-owlfQ95/react-install-and-use-react-devtools-G-owlfQ95.mp3?1bfea20080831465?8c00', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.555Z', NULL, 8388599, NULL, 8178, 0, NULL, 1, '806c8bb6748b473b8c6015b9a47231dc', NULL, 71775, 'free', '', '', 'react', '', '', '', '', NULL, 403891288, '1
00:00:00,230 --> 00:00:01,670
Here, I can fill out a Pok√©mon 

2
00:00:01,670 --> 00:00:04,650
name like Pikachu. I submit. I 

3
00:00:04,650 --> 00:00:06,970
get some Pikachu data. If I make 

4
00:00:06,970 --> 00:00:09,020
a typo here, then I''m not going 

5
00:00:09,020 --> 00:00:10,560
to get anything back. It might 

6
00:00:10,560 --> 00:00:12,050
be useful for me to get an 

7
00:00:12,110 --> 00:00:13,630
understanding of what''s going on 

8
00:00:13,950 --> 00:00:15,420
behind the scenes in the state 

9
00:00:15,460 --> 00:00:16,680
of the components that I''m 

10
00:00:16,680 --> 00:00:18,850
rendering to this page so that I 

11
00:00:18,850 --> 00:00:20,670
can debug the problems that are 

12
00:00:20,670 --> 00:00:22,030
happening in my components. 

13
00:00:22,720 --> 00:00:23,960
What I''m going to do is I''m 

14
00:00:23,960 --> 00:00:26,590
going to Google React DevTools. 

15
00:00:27,390 --> 00:00:29,200
That''ll come up with the Chrome 

16
00:00:29,200 --> 00:00:31,030
Web Store for React DevTools. 

17
00:00:31,340 --> 00:00:32,610
There''s also React DevTools 

18
00:00:32,610 --> 00:00:34,100
supported for other browsers. 

19
00:00:34,510 --> 00:00:35,520
I''m using Chrome, so I''m going 

20
00:00:35,520 --> 00:00:38,390
to add this to Chrome. Click on "

21
00:00:38,470 --> 00:00:42,160
Add Extension." Then React 

22
00:00:42,160 --> 00:00:43,440
Developer Tools has been added 

23
00:00:43,440 --> 00:00:45,180
to Chrome. I can use that by 

24
00:00:45,180 --> 00:00:47,640
clicking on that icon. When I 

25
00:00:47,640 --> 00:00:49,600
come back to my app, I''ll go 

26
00:00:49,600 --> 00:00:51,070
ahead and refresh here. We''ll 

27
00:00:51,070 --> 00:00:53,280
see that Chrome extension icon 

28
00:00:53,280 --> 00:00:54,820
for React DevTools has turned 

29
00:00:54,820 --> 00:00:56,910
red. That''s indicating to us 

30
00:00:56,910 --> 00:00:59,080
that React is on this page and 

31
00:00:59,080 --> 00:01:00,240
we''re using the development 

32
00:01:00,260 --> 00:01:02,370
build of React. When we use the 

33
00:01:02,370 --> 00:01:04,440
production build of React, then 

34
00:01:04,440 --> 00:01:05,360
this will look a little 

35
00:01:05,360 --> 00:01:07,020
differently. We can see that by 

36
00:01:07,020 --> 00:01:09,990
going to twitter.com because 

37
00:01:09,990 --> 00:01:11,910
Twitter is built using React. 

38
00:01:13,210 --> 00:01:14,550
Here, this page is using the 

39
00:01:14,550 --> 00:01:17,120
production build of React. If we 

40
00:01:17,120 --> 00:01:18,940
close this and now I open up my 

41
00:01:18,940 --> 00:01:21,060
DevTools, I can go inspect here, 

42
00:01:21,060 --> 00:01:23,730
or I can go here to More Tools 

43
00:01:24,190 --> 00:01:26,690
and Developer Tools. That''ll 

44
00:01:26,690 --> 00:01:28,150
open up the Developer Tools here. 

45
00:01:28,170 --> 00:01:30,460
If I click here and look at 

46
00:01:30,500 --> 00:01:32,690
components, then this is going 

47
00:01:32,690 --> 00:01:34,230
to show me the components that 

48
00:01:34,230 --> 00:01:36,790
are driving this page. I can see 

49
00:01:36,790 --> 00:01:38,180
that we have an app component 

50
00:01:38,740 --> 00:01:40,950
and we have a Pok√©mon info 

51
00:01:40,950 --> 00:01:42,980
component. Under the app 

52
00:01:42,980 --> 00:01:44,300
component, I can see all of the 

53
00:01:44,300 --> 00:01:45,870
hooks that are being used for 

54
00:01:45,870 --> 00:01:47,430
this app component to work. We 

55
00:01:47,430 --> 00:01:49,390
have some state here that is an 

56
00:01:49,390 --> 00:01:52,050
empty string. As I type in here 

57
00:01:52,050 --> 00:01:54,210
and click submit, now we see 

58
00:01:54,210 --> 00:01:55,940
that that state is what I typed. 

59
00:01:56,870 --> 00:01:58,630
We can even change that value 

60
00:01:58,630 --> 00:02:01,120
here. We can click undo if we 

61
00:02:01,120 --> 00:02:02,640
want to undo that change, or we 

62
00:02:02,640 --> 00:02:04,490
can hit enter to commit that 

63
00:02:04,490 --> 00:02:06,740
value. Now that value has been 

64
00:02:06,740 --> 00:02:07,920
committed. You will see that we 

65
00:02:07,920 --> 00:02:09,890
get null is printed because 

66
00:02:09,890 --> 00:02:11,420
there is no Pok√©mon by the name 

67
00:02:11,420 --> 00:02:13,260
of value. If we change this to 

68
00:02:13,620 --> 00:02:15,180
Mew and hit enter, then we''re 

69
00:02:15,180 --> 00:02:16,620
going to retrieve Mew''s 

70
00:02:16,680 --> 00:02:19,670
information. On the Pok√©mon info 

71
00:02:19,670 --> 00:02:20,950
side, we can see the Pok√©mon 

72
00:02:20,950 --> 00:02:23,310
name is coming in via props. We 

73
00:02:23,310 --> 00:02:24,850
can actually change this prop to 

74
00:02:24,850 --> 00:02:27,510
Mewtwo. Change that prop there. 

75
00:02:28,130 --> 00:02:29,740
Then we can also see the hooks 

76
00:02:29,740 --> 00:02:31,370
that are being used by the Pok√©

77
00:02:31,370 --> 00:02:33,120
mon info component. We have 

78
00:02:33,120 --> 00:02:35,000
state is resolved. We also have 

79
00:02:35,000 --> 00:02:36,860
some more state for the Pok√©mon 

80
00:02:36,890 --> 00:02:39,950
information itself and some more 

81
00:02:39,950 --> 00:02:41,730
state. This is for our error 

82
00:02:41,730 --> 00:02:43,840
state. We can see this hook also 

83
00:02:43,840 --> 00:02:45,790
has an effect. There are a lot 

84
00:02:45,790 --> 00:02:47,740
of options that we have here. We 

85
00:02:47,740 --> 00:02:49,000
can click on this. That will 

86
00:02:49,000 --> 00:02:50,670
show me the source code for this 

87
00:02:50,670 --> 00:02:53,140
particular component. If we go 

88
00:02:53,140 --> 00:02:54,770
back to our components here and 

89
00:02:54,770 --> 00:02:56,230
click on this button, then that 

90
00:02:56,230 --> 00:02:57,420
will log this component''s 

91
00:02:57,420 --> 00:02:59,970
information to the console. We 

92
00:02:59,970 --> 00:03:01,130
can click that to expand it. 

93
00:03:01,130 --> 00:03:02,510
We''ll see the props, the hooks, 

94
00:03:02,780 --> 00:03:04,150
and the root DOM node that''s 

95
00:03:04,150 --> 00:03:05,530
being rendered by this component. 

96
00:03:06,750 --> 00:03:08,980
We''ll come back here again. If 

97
00:03:08,980 --> 00:03:10,030
you want to, you can actually 

98
00:03:10,030 --> 00:03:11,720
drag this over, since we''re 

99
00:03:11,720 --> 00:03:12,830
going to be using this a lot. 

100
00:03:12,830 --> 00:03:13,710
I''m going to move that over 

101
00:03:13,710 --> 00:03:16,200
there. We also have this button 

102
00:03:16,200 --> 00:03:17,540
to inspect the matching DOM 

103
00:03:17,540 --> 00:03:18,460
element. That''ll take us 

104
00:03:18,460 --> 00:03:20,300
straight to our elements tab 

105
00:03:20,300 --> 00:03:21,850
here with that element 

106
00:03:21,850 --> 00:03:24,710
highlighted. Then this is for 

107
00:03:24,710 --> 00:03:26,430
Suspense. If you''re using any 

108
00:03:26,430 --> 00:03:28,000
React Suspense components, you 

109
00:03:28,000 --> 00:03:29,910
can test those out here by 

110
00:03:29,910 --> 00:03:31,200
suspending the selected 

111
00:03:31,200 --> 00:03:32,820
component. We also have some 

112
00:03:32,880 --> 00:03:35,480
options here for the theme and 

113
00:03:35,480 --> 00:03:36,770
the way that this is displayed. 

114
00:03:37,100 --> 00:03:38,500
Then we also have some view 

115
00:03:38,500 --> 00:03:40,390
options for our components tab, 

116
00:03:40,730 --> 00:03:41,750
where we can filter out 

117
00:03:41,750 --> 00:03:43,710
different types of components or 

118
00:03:43,710 --> 00:03:44,980
ever filter them out by their 

119
00:03:44,980 --> 00:03:46,370
name. If we wanted to get rid of 

120
00:03:46,370 --> 00:03:48,650
that app, then we could type 

121
00:03:48,650 --> 00:03:51,290
that in. Now our app is no 

122
00:03:51,290 --> 00:03:54,170
longer being shown. I do want to 

123
00:03:54,170 --> 00:03:55,530
show that, so I''ll remove that. 

124
00:03:56,360 --> 00:03:59,270
Now our app is being shown. We 

125
00:03:59,270 --> 00:04:01,210
also have a profiler tab that 

126
00:04:01,210 --> 00:04:03,000
will help us debug performance 

127
00:04:03,000 --> 00:04:04,890
issues in our app. We can enable 

128
00:04:04,890 --> 00:04:06,060
record while each component is 

129
00:04:06,060 --> 00:04:07,470
rendering. We can also hide 

130
00:04:07,470 --> 00:04:08,730
commits below a certain 

131
00:04:08,730 --> 00:04:10,540
threshold. If a commit is really 

132
00:04:10,540 --> 00:04:12,080
fast -- maybe it only takes five 

133
00:04:12,080 --> 00:04:13,940
milliseconds to update the DOM -- 

134
00:04:14,510 --> 00:04:17,490
then we can enable that. Now I 

135
00:04:17,490 --> 00:04:20,260
can go to my profiler. I''ll drag 

136
00:04:20,260 --> 00:04:22,190
that over here as well. We can 

137
00:04:22,190 --> 00:04:23,120
hit this button to start 

138
00:04:23,120 --> 00:04:24,850
profiling where we are, or we 

139
00:04:24,850 --> 00:04:26,340
can hit this button to reload 

140
00:04:26,380 --> 00:04:27,980
and start profiling when the 

141
00:04:27,980 --> 00:04:29,490
page loads. We''ll click on that. 

142
00:04:30,110 --> 00:04:32,180
Then we can click stop. We''ll 

143
00:04:32,180 --> 00:04:33,280
see that there''s no data 

144
00:04:33,280 --> 00:04:34,680
matching the current filter 

145
00:04:34,680 --> 00:04:36,300
criteria. Let''s go ahead and 

146
00:04:36,300 --> 00:04:38,490
we''ll uncheck this button. Now 

147
00:04:38,490 --> 00:04:39,710
we can see that there was a 

148
00:04:39,710 --> 00:04:41,470
commit. It just happened really 

149
00:04:41,470 --> 00:04:43,700
fast. That commit was for the 

150
00:04:43,700 --> 00:04:45,320
initial render of our component. 

151
00:04:45,320 --> 00:04:47,230
We have our app and our Pok√©mon 

152
00:04:47,230 --> 00:04:48,950
info. It says that this was 

153
00:04:48,950 --> 00:04:50,160
rendered because it''s the first 

154
00:04:50,160 --> 00:04:51,900
time that it was rendered. Now 

155
00:04:51,900 --> 00:04:53,280
let''s go ahead and do another 

156
00:04:53,280 --> 00:04:55,360
recording. We''ll say Mew. We''ll 

157
00:04:55,360 --> 00:04:57,980
submit that and then hit stop. 

158
00:04:58,580 --> 00:04:59,950
We''ll see a couple of commits 

159
00:04:59,950 --> 00:05:02,540
here. For this one, it re-

160
00:05:02,540 --> 00:05:03,960
rendered because hooks changed 

161
00:05:03,990 --> 00:05:06,300
and props changed. For this one, 

162
00:05:06,300 --> 00:05:07,890
it re-rendered because hooks 

163
00:05:07,890 --> 00:05:10,710
changed. On this commit, it re-

164
00:05:10,710 --> 00:05:11,980
rendered because hooks changed 

165
00:05:11,980 --> 00:05:14,150
again, so the data came back 

166
00:05:14,310 --> 00:05:16,230
from the Pok√©mon request. Then 

167
00:05:16,230 --> 00:05:17,300
this re-rendered because we 

168
00:05:17,300 --> 00:05:19,650
updated our state. The React 

169
00:05:19,650 --> 00:05:20,820
DevTools gives us this 

170
00:05:20,820 --> 00:05:23,000
components and this profiler tab 

171
00:05:23,210 --> 00:05:24,790
in our Developer Tools to give 

172
00:05:24,790 --> 00:05:26,360
us a lot of insight into what 

173
00:05:26,360 --> 00:05:27,890
our components are doing while 

174
00:05:27,890 --> 00:05:29,660
we''re developing them. Then we 

175
00:05:29,660 --> 00:05:31,500
also have this indicator up here 

176
00:05:31,730 --> 00:05:33,020
to tell us when we''re using the 

177
00:05:33,020 --> 00:05:34,290
development build of React 

178
00:05:34,560 --> 00:05:36,360
versus the production build so 

179
00:05:36,360 --> 00:05:37,270
we can make sure that our 

180
00:05:37,270 --> 00:05:38,720
production application uses the 

181
00:05:38,720 --> 00:05:41,230
production build. One last pro 

182
00:05:41,230 --> 00:05:42,760
tip I want to show you is if you 

183
00:05:42,760 --> 00:05:44,130
open up the console while you 

184
00:05:44,130 --> 00:05:45,560
have the components tab open -- 

185
00:05:45,740 --> 00:05:47,090
you can do that by hitting the 

186
00:05:47,120 --> 00:05:48,960
escape key -- then we have our 

187
00:05:48,960 --> 00:05:51,460
console here. You can type $r. 

188
00:05:51,820 --> 00:05:53,960
That will give you the hooks, 

189
00:05:54,070 --> 00:05:56,150
the props, and the type for the 

190
00:05:56,150 --> 00:05:57,050
component that you have 

191
00:05:57,050 --> 00:05:59,220
currently selected. We can 

192
00:05:59,220 --> 00:06:01,240
click on the app. We can do $r 

193
00:06:01,270 --> 00:06:03,120
again. Now we''ll see the hooks, 

194
00:06:03,120 --> 00:06:04,890
the props, and the type for that 

195
00:06:04,890 --> 00:06:06,030
component that we have selected. 

196
00:06:06,300 --> 00:06:07,790
This is actually very similar to 

197
00:06:07,790 --> 00:06:09,020
the elements tab, where you can 

198
00:06:09,020 --> 00:06:11,960
do a $. That will give you the 

199
00:06:11,960 --> 00:06:13,580
DOM node that you have currently 

200
00:06:13,580 --> 00:06:15,610
selected in the elements tab. In 

201
00:06:15,610 --> 00:06:16,820
the components tab, you have a $

202
00:06:16,880 --> 00:06:18,850
r. That will give you 

203
00:06:18,850 --> 00:06:20,560
information on the component 

204
00:06:20,560 --> 00:06:21,710
that you have currently selected. 

205
00:06:22,310 --> 00:06:23,510
I strongly advise that you 

206
00:06:23,510 --> 00:06:25,110
install the React DevTools and 

207
00:06:25,110 --> 00:06:26,250
play around with them so you 

208
00:06:26,250 --> 00:06:27,320
become familiar with their 

209
00:06:27,320 --> 00:06:29,070
capabilities and make you more 

210
00:06:29,070 --> 00:06:30,340
productive developing React 

211
00:06:30,415 --> 00:06:30,740
applications.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- It‚Äôs dangerous to go alone. Here take this: [React DevTools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en)
- The React Developer Tools extension is extremely useful in developing and debugging React applications. In this lesson we‚Äôll get it installed and play around with some of the features. Definitely take some time to play around with the DevTools on your own. You‚Äôll be using these a lot.

- Installing from Chrome Tools:

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296084/transcript-images/react-install-and-use-react-devtools-devtools.jpg)

- Checking for a production build:

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296082/transcript-images/react-install-and-use-react-devtools-twitter.jpg)

- Inspecting with dev tools:

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296084/transcript-images/react-install-and-use-react-devtools-devtools2.jpg)

- Theme and filtering:

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296083/transcript-images/react-install-and-use-react-devtools-filter.jpg)

- Using the profiling:

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296084/transcript-images/react-install-and-use-react-devtools-profiler.jpg)

- It''s strongly advised that you install the React DevTools and play around with them so you become familiar with their capabilities and more productive developing React applications.

## Additional resource

- [Kent''s Livestream - React DevTools](https://www.youtube.com/watch?v=DQjMiKEwl_E&feature=youtu.be)
- [React Docs - Introducing the New React DevTools](https://reactjs.org/blog/2019/08/15/new-react-devtools.html)
- [Repo - React Developer Tools](https://github.com/bvaughn/react-devtools)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '8f8dbee4', 'https://d2c5owlt6rorc3.cloudfront.net/react-install-and-use-react-devtools-G-owlfQ95/dash/react-install-and-use-react-devtools-G-owlfQ95.mpd', 'https://stream.mux.com/TyjrXZzUQ02aLSvyVNN3l023TWZAQ8AHg2aMdrqu1yPPU.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/27-react-install-and-use-react-devtools.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (352, 'Line and Area Charts with D3', '', 'Create a line chart, then easily convert it to an area chart', 397, NULL, '2015-03-11T00:04:20.059Z', '2025-12-13T00:54:53.678Z', 'd3-line-and-area-charts-with-d3', '', 'f0wi2uxbhk', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-d3-line-and-area-charts-with-d3/d3-line-area-chart.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_f0wi2uxbhk" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-d3-line-and-area-charts-with-d3.mp4" /><meta itemprop="duration" content="PT6M37S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/36968e7b3255b55e0074e34a6b581c6ce21ac26f.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/6f04cad57f548e7b440e3b565e5eec2b1f15589d.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=397.679&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F36968e7b3255b55e0074e34a6b581c6ce21ac26f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F6f04cad57f548e7b440e3b565e5eec2b1f15589d.bin" /><meta itemprop="uploadDate" content="2015-01-11T19:09:33Z" /><object id="wistia_f0wi2uxbhk_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=397.679&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F36968e7b3255b55e0074e34a6b581c6ce21ac26f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F6f04cad57f548e7b440e3b565e5eec2b1f15589d.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=397.679&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F36968e7b3255b55e0074e34a6b581c6ce21ac26f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F6f04cad57f548e7b440e3b565e5eec2b1f15589d.bin" name="wistia_f0wi2uxbhk_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-d3-line-and-area-charts-with-d3.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("f0wi2uxbhk", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/f0wi2uxbhk/metadata.js"></script>', '[00:00] For this lesson, we''re going to use some JSON data. I have a file here that just has a bunch of objects with date and count properties. You can see the date is just in a string format where we''ve got the year, the month, and the day, and then we''ve got three different collections here. I''ve just named them "math," "reading," and "science," as if they were subjects.

[00:21] Our JSON structure is just an object with those three collections on it. If we look at our HTML here, you can see we''ve got a couple of simple styles, the first one being for path nodes. We''re going to have no fill, a three-pixel blue stroke, and then we''ve got our chart object here or our chart ID that just has dimensions and a border around it so we can see where that is.

[00:49] Going down to actually look at the markup, we can see that we''ve got our chart div there, that our style corresponds to, and then we''ve got a few scripts included here. We''ve got jQuery, D3, and Lodash, and then we''ve got the actual meat of our example here, in this script tag.

[01:08] We''ve got our dimensions, but then we load in. All we''re really using jQuery for is to load in this JSON. We''re going to get that back. We''re going to assign it to that subjects variable. Once we get the subjects variable set, we''re going to loop over the keys of it. Those are our different subjects.

[01:31] Then we''re going to loop over the objects in each of those subject collections. What we''re then going to do is we''re going to pass that string-based date through D3''s time formatter to get back an actual date object. Once this runs, the date property will be actual instances of dates.

[01:53] From there, we go ahead and create the path, which is just...We''re going to create the SVG container and then a graphic object and then a path object, and then we''re going to call this updateChart function and pass in the subject of math.

[02:09] If we start to fill in this function, we''re just going to use that subject to create a data variable. That''s the day that we''re going to be concerned with in this particular rendering, and then we''re going to pull out the date properties and the count properties into their own collections. You''ll see why, here, in a second.

[02:30] First, we''ll create our x scale. We''re going to pass into the domain method d3.extent(dates). What that is going to do is it''s going to examine all of the dates in that array and return a two-element array where the minimum date is in the first position and the maximum date is in the second position.

[02:54] We''ll do the same thing for our x scale. In this case, it''s going to be a linear scale instead of a time scale. We''re again going to use d3.extent to get the extent of our counts, and then, again, our range is just the size of our chart.

[03:13] From there, we''re going to create a line object using the d3.svg.line function. This interpolate bundle is just going to give us nice, smooth curves when it interpolates the different points, and then we''re going to set the x property by passing the date property through our x scale. We''re going to set the y property by passing the count property through our y scale.

[03:40] Fairly straightforward. Pretty similar to all the D3 exercises we''ve done in the past. From here, we''re going to do something slightly new. We''re going to take the path object that we created above.

[03:52] We''re going to call datum on it rather than data. What datum does is it doesn''t create a selection like we do when we''re creating multiple shapes. Based on the data, we''re creating a selection. In this case, we just want to apply this entire collection to this one object that we already have.

[04:11] That''s essentially what this is saying, is use this data for this object itself, for the path object. We are going to define a transition with a duration of 450 milliseconds, just so we get some nice animation when we start changing things.

[04:27] Then the last thing we''ll do is we will actually assign that line that we created to the d attribute of our path. Essentially, the data for the path will be that line object that we created. Now we can see, if we go and refresh the chart here, we have our nice, smooth, curved line chart. We''re plotting that math data as a line chart.

[04:50] If we go up here and add a few buttons...We''ll just assign these buttons click handlers to call that updateChart function again and pass in a different subject. Any time we call that function, it''s just going to run through here again and use the proper collection for the data attribute. 

[05:08] It''s going to recalculate the x and y scales. It''s going to recalculate the line object, and then it''s going to again reapply that line object as the data for our path. If we refresh, we see we''ve got our buttons here. We can click these. We get these nice, animated transitions between the different sets of data.

[05:28] As it turns out, it''s really, really simple to convert a line chart to an area chart. The first thing we''re going to do is we''re going to update this style and tell it that we want our paths to actually be filled with a purple color. We''ll give it a little bit of opacity.

[05:46] If we go refresh this and just see, we can see that we get this funky shape since the line is crossing back over itself, but we''re going to fix that now. We''re going to change our d3.svg.line to an area.

[06:02] Really, the only difference between a line and an area shape is that whereas the line has a y property, the area shape actually has two y properties. It has the top and the bottom. Those are named as "y0" and "y1."

[06:19] We''re going to tell it to actually just plot the value of zero for y0 and still use our count for y1. You can see that we then get a nice, filled area shape. We can still use our transitions here. We get these nice, animated transitions between the different subjects.', '', true, '15-egghead-d3-line-and-area-charts-with-d3.mp4', 1, true, false, 1, NULL, NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-d3-line-and-area-charts-with-d3/egghead-d3-line-and-area-charts-with-d3.mp4', 'egghead-d3-line-and-area-charts-with-d3', 'zykm', 'https://egghead-pipeline.s3.amazonaws.com/egghead-d3-line-and-area-charts-with-d3/d3-line-area-chart.mp3', 0, '', '', 'giwomi/3', '', '', NULL, 'published', '2015-03-11T00:04:20.059Z', NULL, 8387216, '', 461, 0, NULL, 14, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/15-d3-line-and-area-charts-with-d3?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -2007379443, '1
00:00:00,590 --> 00:00:01,850
For this lesson, we''re going to 

2
00:00:01,925 --> 00:00:03,400
use some JSON data. I have a 

3
00:00:03,410 --> 00:00:05,720
file here that just has a bunch 

4
00:00:05,730 --> 00:00:08,260
of objects with date and count 

5
00:00:08,270 --> 00:00:09,880
properties. You can see the date 

6
00:00:09,890 --> 00:00:12,640
is just in a string format where 

7
00:00:12,640 --> 00:00:13,910
we''ve got the year, the month, 

8
00:00:13,920 --> 00:00:15,740
and the day, and then we''ve got 

9
00:00:16,120 --> 00:00:17,560
three different collections here. 

10
00:00:17,600 --> 00:00:18,570
I''ve just named them "math," "

11
00:00:18,580 --> 00:00:19,660
reading," and "science," as if 

12
00:00:19,660 --> 00:00:21,770
they were subjects. Our JSON 

13
00:00:22,940 --> 00:00:24,390
structure is just an object with 

14
00:00:24,400 --> 00:00:25,930
those three collections on it. 

15
00:00:26,510 --> 00:00:29,900
If we look at our HTML here, you 

16
00:00:29,910 --> 00:00:30,870
can see we''ve got a couple of 

17
00:00:30,880 --> 00:00:32,310
simple styles, the first one 

18
00:00:32,320 --> 00:00:35,580
being for path nodes. We''re 

19
00:00:35,655 --> 00:00:38,440
going to have no fill, a three-

20
00:00:38,450 --> 00:00:40,710
pixel blue stroke, and then 

21
00:00:40,720 --> 00:00:42,820
we''ve got our chart object here 

22
00:00:42,830 --> 00:00:45,140
or our chart ID that just has 

23
00:00:45,180 --> 00:00:46,800
dimensions and a border around 

24
00:00:46,810 --> 00:00:49,160
it so we can see where that is. 

25
00:00:49,590 --> 00:00:51,950
Going down to actually look at 

26
00:00:52,260 --> 00:00:53,690
the markup, we can see that 

27
00:00:53,700 --> 00:00:55,660
we''ve got our chart div there, 

28
00:00:55,670 --> 00:00:57,620
that our style corresponds to, 

29
00:00:57,660 --> 00:01:00,030
and then we''ve got a few scripts 

30
00:01:00,120 --> 00:01:01,720
included here. We''ve got jQuery, 

31
00:01:01,795 --> 00:01:04,200
D3, and Lodash, and then we''ve 

32
00:01:04,210 --> 00:01:05,750
got the actual meat of our 

33
00:01:05,800 --> 00:01:08,360
example here, in this script tag. 

34
00:01:08,435 --> 00:01:11,530
We''ve got our dimensions, but 

35
00:01:11,540 --> 00:01:14,680
then we load in. All we''re 

36
00:01:14,690 --> 00:01:16,310
really using jQuery for is to 

37
00:01:16,320 --> 00:01:18,640
load in this JSON. We''re going 

38
00:01:18,715 --> 00:01:20,500
to get that back. We''re going to 

39
00:01:20,510 --> 00:01:22,890
assign it to that subjects 

40
00:01:22,900 --> 00:01:25,050
variable. Once we get the 

41
00:01:25,060 --> 00:01:26,740
subjects variable set, we''re 

42
00:01:26,750 --> 00:01:28,340
going to loop over the keys of 

43
00:01:28,350 --> 00:01:30,330
it. Those are our different 

44
00:01:30,340 --> 00:01:32,730
subjects. Then we''re going to 

45
00:01:32,050 --> 00:01:34,210
loop over the objects in each of 

46
00:01:34,220 --> 00:01:37,090
those subject collections. What 

47
00:01:37,090 --> 00:01:38,250
we''re then going to do is we''re 

48
00:01:38,260 --> 00:01:41,700
going to pass that string-based 

49
00:01:41,830 --> 00:01:44,150
date through D3''s time formatter 

50
00:01:44,780 --> 00:01:47,440
to get back an actual date 

51
00:01:47,450 --> 00:01:50,220
object. Once this runs, the date 

52
00:01:50,230 --> 00:01:51,480
property will be actual 

53
00:01:51,490 --> 00:01:53,700
instances of dates. From 

54
00:01:53,710 --> 00:01:54,820
there, we go ahead and create 

55
00:01:54,830 --> 00:01:56,820
the path, which is just...We''re 

56
00:01:56,895 --> 00:01:58,820
going to create the SVG 

57
00:01:58,610 --> 00:02:00,250
container and then a graphic 

58
00:02:00,260 --> 00:02:02,450
object and then a path object, 

59
00:02:02,525 --> 00:02:04,850
and then we''re going to call 

60
00:02:04,925 --> 00:02:06,770
this updateChart function and 

61
00:02:06,780 --> 00:02:08,890
pass in the subject of math. 

62
00:02:09,810 --> 00:02:11,210
If we start to fill in this 

63
00:02:11,280 --> 00:02:13,150
function, we''re just going to 

64
00:02:13,160 --> 00:02:15,270
use that subject to create a 

65
00:02:15,280 --> 00:02:17,310
data variable. That''s the day 

66
00:02:17,320 --> 00:02:18,350
that we''re going to be concerned 

67
00:02:18,360 --> 00:02:20,870
with in this particular 

68
00:02:21,070 --> 00:02:22,580
rendering, and then we''re going 

69
00:02:22,620 --> 00:02:25,490
to pull out the date properties 

70
00:02:25,500 --> 00:02:26,870
and the count properties into 

71
00:02:26,880 --> 00:02:29,000
their own collections. You''ll 

72
00:02:29,010 --> 00:02:30,300
see why, here, in a second. 

73
00:02:30,990 --> 00:02:34,370
First, we''ll create our x scale. 

74
00:02:34,370 --> 00:02:36,020
We''re going to pass into the 

75
00:02:36,030 --> 00:02:40,080
domain method d3.extent(dates). 

76
00:02:40,120 --> 00:02:42,360
What that is going to do is it''s 

77
00:02:42,360 --> 00:02:43,480
going to examine all of the 

78
00:02:43,490 --> 00:02:45,910
dates in that array and return a 

79
00:02:45,920 --> 00:02:47,980
two-element array where the 

80
00:02:47,990 --> 00:02:49,510
minimum date is in the first 

81
00:02:49,520 --> 00:02:51,880
position and the maximum date is 

82
00:02:51,890 --> 00:02:54,690
in the second position. We''ll 

83
00:02:54,690 --> 00:02:58,730
do the same thing for our x 

84
00:02:58,740 --> 00:03:01,100
scale. In this case, it''s going 

85
00:03:01,175 --> 00:03:02,090
to be a linear scale instead of 

86
00:03:02,100 --> 00:03:04,450
a time scale. We''re again going 

87
00:03:04,525 --> 00:03:06,090
to use d3.extent to get the 

88
00:03:06,100 --> 00:03:08,050
extent of our counts, and then, 

89
00:03:08,060 --> 00:03:10,160
again, our range is just the 

90
00:03:10,170 --> 00:03:13,910
size of our chart. From there, 

91
00:03:14,000 --> 00:03:15,540
we''re going to create a line 

92
00:03:15,550 --> 00:03:17,810
object using the d3.svg.line 

93
00:03:17,885 --> 00:03:21,120
function. This interpolate 

94
00:03:21,130 --> 00:03:22,470
bundle is just going to give us 

95
00:03:22,670 --> 00:03:24,440
nice, smooth curves when it 

96
00:03:24,515 --> 00:03:25,330
interpolates the different 

97
00:03:25,340 --> 00:03:27,670
points, and then we''re going to 

98
00:03:27,000 --> 00:03:29,460
set the x property by passing 

99
00:03:29,470 --> 00:03:31,820
the date property through our x 

100
00:03:32,810 --> 00:03:34,970
scale. We''re going to set the y 

101
00:03:34,980 --> 00:03:36,950
property by passing the count 

102
00:03:36,960 --> 00:03:39,950
property through our y scale. 

103
00:03:40,700 --> 00:03:42,600
Fairly straightforward. Pretty 

104
00:03:42,610 --> 00:03:45,060
similar to all the D3 exercises 

105
00:03:45,410 --> 00:03:46,970
we''ve done in the past. From 

106
00:03:46,980 --> 00:03:47,960
here, we''re going to do 

107
00:03:47,570 --> 00:03:49,740
something slightly new. We''re 

108
00:03:49,815 --> 00:03:51,060
going to take the path object 

109
00:03:51,070 --> 00:03:52,580
that we created above. We''re 

110
00:03:52,580 --> 00:03:54,750
going to call datum on it rather 

111
00:03:54,760 --> 00:03:57,590
than data. What datum does is it 

112
00:03:57,600 --> 00:03:59,500
doesn''t create a selection like 

113
00:03:59,510 --> 00:04:01,930
we do when we''re creating 

114
00:04:02,140 --> 00:04:04,200
multiple shapes. Based on the 

115
00:04:04,210 --> 00:04:06,420
data, we''re creating a selection. 

116
00:04:06,430 --> 00:04:07,700
In this case, we just want to 

117
00:04:07,710 --> 00:04:09,920
apply this entire collection to 

118
00:04:09,930 --> 00:04:11,360
this one object that we already 

119
00:04:11,360 --> 00:04:12,650
have. That''s essentially what 

120
00:04:12,660 --> 00:04:14,430
this is saying, is use this data 

121
00:04:14,920 --> 00:04:16,780
for this object itself, for the 

122
00:04:16,790 --> 00:04:19,360
path object. We are going to 

123
00:04:19,370 --> 00:04:20,880
define a transition with a 

124
00:04:20,890 --> 00:04:22,890
duration of 450 milliseconds, 

125
00:04:22,900 --> 00:04:24,020
just so we get some nice 

126
00:04:24,410 --> 00:04:25,940
animation when we start changing 

127
00:04:25,950 --> 00:04:27,780
things. Then the last thing 

128
00:04:27,790 --> 00:04:29,090
we''ll do is we will actually 

129
00:04:29,130 --> 00:04:31,960
assign that line that we created 

130
00:04:32,220 --> 00:04:34,370
to the d attribute of our path. 

131
00:04:34,560 --> 00:04:35,850
Essentially, the data for the 

132
00:04:35,860 --> 00:04:38,220
path will be that line object 

133
00:04:38,230 --> 00:04:40,500
that we created. Now we can see, 

134
00:04:40,510 --> 00:04:41,870
if we go and refresh the chart 

135
00:04:41,880 --> 00:04:44,050
here, we have our nice, smooth, 

136
00:04:44,060 --> 00:04:46,270
curved line chart. We''re 

137
00:04:46,280 --> 00:04:49,470
plotting that math data as a 

138
00:04:49,480 --> 00:04:52,100
line chart. If we go up here 

139
00:04:52,110 --> 00:04:54,120
and add a few buttons...We''ll 

140
00:04:54,160 --> 00:04:56,220
just assign these buttons click 

141
00:04:56,230 --> 00:04:58,070
handlers to call that 

142
00:04:58,145 --> 00:04:59,720
updateChart function again and 

143
00:04:59,730 --> 00:05:02,390
pass in a different subject. Any 

144
00:05:02,400 --> 00:05:03,650
time we call that function, it''s 

145
00:05:03,660 --> 00:05:04,590
just going to run through here 

146
00:05:04,600 --> 00:05:06,790
again and use the proper 

147
00:05:07,080 --> 00:05:08,040
collection for the data 

148
00:05:08,050 --> 00:05:09,030
attribute. It''s going to 

149
00:05:09,105 --> 00:05:11,870
recalculate the x and y scales. 

150
00:05:11,880 --> 00:05:13,090
It''s going to recalculate the 

151
00:05:13,100 --> 00:05:15,040
line object, and then it''s going 

152
00:05:15,050 --> 00:05:17,560
to again reapply that line 

153
00:05:17,460 --> 00:05:19,390
object as the data for our path. 

154
00:05:19,465 --> 00:05:21,580
If we refresh, we see we''ve got 

155
00:05:21,620 --> 00:05:22,850
our buttons here. We can click 

156
00:05:22,860 --> 00:05:24,200
these. We get these nice, 

157
00:05:24,610 --> 00:05:26,800
animated transitions between the 

158
00:05:26,810 --> 00:05:29,210
different sets of data. As it 

159
00:05:29,220 --> 00:05:31,970
turns out, it''s really, really 

160
00:05:31,980 --> 00:05:34,370
simple to convert a line chart 

161
00:05:34,380 --> 00:05:36,500
to an area chart. The first 

162
00:05:36,510 --> 00:05:37,490
thing we''re going to do is we''re 

163
00:05:37,490 --> 00:05:39,430
going to update this style and 

164
00:05:39,440 --> 00:05:40,910
tell it that we want our paths 

165
00:05:41,060 --> 00:05:43,140
to actually be filled with a 

166
00:05:43,150 --> 00:05:45,090
purple color. We''ll give it a 

167
00:05:45,165 --> 00:05:46,940
little bit of opacity. If we 

168
00:05:46,950 --> 00:05:49,180
go refresh this and just see, we 

169
00:05:49,190 --> 00:05:50,760
can see that we get this funky 

170
00:05:50,770 --> 00:05:53,010
shape since the line is crossing 

171
00:05:53,020 --> 00:05:54,860
back over itself, but we''re 

172
00:05:54,935 --> 00:05:56,220
going to fix that now. We''re 

173
00:05:56,295 --> 00:06:00,030
going to change our d3.svg.line 

174
00:06:00,200 --> 00:06:03,050
to an area. Really, the only 

175
00:06:03,060 --> 00:06:04,770
difference between a line and an 

176
00:06:04,780 --> 00:06:07,130
area shape is that whereas the 

177
00:06:07,140 --> 00:06:10,700
line has a y property, the area 

178
00:06:10,710 --> 00:06:12,550
shape actually has two y 

179
00:06:12,560 --> 00:06:14,630
properties. It has the top and 

180
00:06:14,640 --> 00:06:18,180
the bottom. Those are named as "

181
00:06:18,255 --> 00:06:20,580
y0" and "y1." We''re going to 

182
00:06:20,400 --> 00:06:22,870
tell it to actually just plot 

183
00:06:22,880 --> 00:06:25,930
the value of zero for y0 and 

184
00:06:26,010 --> 00:06:28,760
still use our count for y1. You 

185
00:06:28,770 --> 00:06:30,390
can see that we then get a nice, 

186
00:06:30,400 --> 00:06:32,600
filled area shape. We can still 

187
00:06:32,610 --> 00:06:34,820
use our transitions here. We get 

188
00:06:34,830 --> 00:06:36,440
these nice, animated transitions 

189
00:06:36,450 --> 00:06:37,640
between the different subjects.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, 'https://stream.mux.com/KacEu8DKZrENWkj1qx5dHkjklX00vjk00lxSweZezeGoY.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2900, 'Validate Related Fields in an Elm Form', NULL, 'One of the more complex aspects of validation is when you have to validate one field in relation to another (e.g.: that two passwords match, that check-out date is after check-in date, etc). In this lesson we see how to tackle such scenarios.', 463, NULL, '2017-12-21T19:11:23.128Z', '2023-08-08T00:08:20.969Z', 'elm-validate-related-fields-in-an-elm-form', NULL, '1axo63obls', 'https://dcv19h61vib2d.cloudfront.net/thumbs/elm-validate-related-fields-in-an-elm-form-SyGXr5MNM/elm-validate-related-fields-in-an-elm-form-SyGXr5MNM.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_1axo63obls" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="elm-validate-related-fields-in-an-elm-form-SyGXr5MNM.mp4" /><meta itemprop="duration" content="PT7M43S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/6635f5757834af5a86833dcc80e61bca4e361e98.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/70c612d368511da6fcb759b3862f76300a07179f.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=463.2&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F6635f5757834af5a86833dcc80e61bca4e361e98.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F70c612d368511da6fcb759b3862f76300a07179f.bin" /><meta itemprop="uploadDate" content="2018-01-09T19:22:25Z" /><object id="wistia_1axo63obls_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=463.2&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F6635f5757834af5a86833dcc80e61bca4e361e98.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F70c612d368511da6fcb759b3862f76300a07179f.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=463.2&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F6635f5757834af5a86833dcc80e61bca4e361e98.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F70c612d368511da6fcb759b3862f76300a07179f.bin" name="wistia_1axo63obls_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">elm-validate-related-fields-in-an-elm-form-SyGXr5MNM.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("1axo63obls", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/1axo63obls/metadata.js"></script>', 'Instructor: [00:01] Next, I''m going to refactor this form to be a registration form. The most important thing will be to change the heading to be register.

[00:12] I''m going to change the model, remove the message, and replace it with a password field. I''m also going to need another field, which I''m going to call confirmPassword. The form will need to ensure that the two passwords match.

[00:28] Let me now refactor the form accordingly. Let me initialize these fields and create some message types for when the fields change. I handle these new message types, remove the validation code for the message, and then, I still want to use the applicative way to validate that both fields are OK.

[01:09] To do that, I need to add another parameter to the submit function for the confirmPassword field -- even though we ignore this field, because we assume that it''s the same as the password itself -- and send the password in my payload.

[01:27] Next, let me update the view. Here, instead of the text error, I''ll have another input. Let me just copy that for the confirmPassword field. Now, you can see that my form has been updated.

[02:05] Let''s now look at validation for the password and confirmPassword fields. We''ll check that the password is not empty and, furthermore, that it''s a strong password. Let me define this function here. We''re requiring the user to enter a password of six characters or more. Let me validate the password and update the password on the model.

[03:10] Now comes the more interesting part, which is to validate the confirmPassword field. Let me follow the pattern here. This is where we want to check that the passwords match. I could just write a validator inline that says, when you get a password, if that password is the same as the raw value of the password, then it''s OK, else an error with a message, "The passwords don''t match."

[04:18] Let me try that. If I say "hello1" and "hello2," indeed, we get "The passwords don''t match." Let me also check that, if there''s no password, we get the message, "Retype your password." These two validations on the confirmPassword field have the correct precedents.

[04:39] On one level, this seems to work. On the other hand, let me say that there''s nothing here, here say "hello1," and validate. Here, there''s no password, and we get a message that the passwords don''t match. You might feel that if this is not valid in the first place, then why perform a validation to compare it with something else?

[05:02] The other problem is that here we''re using the raw value, which might not be appropriate, for example, if we were comparing two ints. Rather than the raw value, we would like to use the password field in itself. What we would like to do is have a way that says validate that the password is equal to password. Otherwise, show this error.

[05:30] Let me open my validation module, and let me see if I could define such a function. What will be the signature for this? We know that what we want to return is a validator fromAtoA, and then, we have an error message. We have a field of A, and let''s see how we could go about implementing this.

[06:00] This is the other field, and then, we have the error message. We want to return a validator, something that will take an A. We can switch on the validity of the other field. We could say, if it''s valid, then it contains an A. I have to call this one A1 and this one A2. In this case, I can say that if A1 equals A1, then A2, else an error with the given error message.

[06:44] If the other field is invalid or not validated, then I don''t have an A to compare it to. I''m just going to return A2. In other words, I''m not going to apply this validation. There''s no point comparing to another thing when that other thing is invalid. Here, I forgot to put a type parameter. This has a raw value.

[07:10] Let me test this. Let''s say "hello1" and "hello1." There are no errors, as far as the passwords go. If I say "hello" and "hello1," then this goes to invalid. See that we don''t get the mismatch error, which seems to be fine, because the user is going to have to fix this first. If I say "hello2," then, of course, the passwords don''t match. If I fix hello2, then validation passes.', NULL, true, '14-egghead-elm-validate-related-fields-in-an-elm-form.mp4', 150, true, false, 181, '---
mp4: 47976340
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/elm-validate-related-fields-in-an-elm-form-SyGXr5MNM/elm-validate-related-fields-in-an-elm-form-SyGXr5MNM.mp4', 'elm-validate-related-fields-in-an-elm-form-SyGXr5MNM', 'zlqP', 'https://egghead-pipeline.s3.amazonaws.com/elm-validate-related-fields-in-an-elm-form-SyGXr5MNM/elm-validate-related-fields-in-an-elm-form-SyGXr5MNM.mp3?89fd769f597cac0c?bcd1', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:22.851Z', NULL, 8388589, NULL, 3760, 0, NULL, 8388601, 'b1d67160f57111e79f4e315940f194e5', 'https://ellie-app.com/embed/3Ydx3qJ9qa1/0', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383740, '1
00:00:01,700 --> 00:00:03,100
Next, I''m going to refactor this 

2
00:00:03,110 --> 00:00:05,000
form to be a registration form. 

3
00:00:06,140 --> 00:00:07,480
The most important thing will be 

4
00:00:07,490 --> 00:00:09,620
to change the heading to be 

5
00:00:09,620 --> 00:00:13,540
register. I''m going to change 

6
00:00:13,550 --> 00:00:15,630
the model, remove the message, 

7
00:00:15,640 --> 00:00:17,080
and replace it with a password 

8
00:00:17,090 --> 00:00:20,670
field. I''m also going to need 

9
00:00:20,680 --> 00:00:22,780
another field, which I''m going 

10
00:00:22,790 --> 00:00:25,830
to call confirmPassword. The 

11
00:00:25,830 --> 00:00:27,030
form will need to ensure that 

12
00:00:27,040 --> 00:00:29,070
the two passwords match. Let me 

13
00:00:29,145 --> 00:00:30,690
now refactor the form 

14
00:00:30,760 --> 00:00:34,380
accordingly. Let me initialize 

15
00:00:34,480 --> 00:00:39,140
these fields and create some 

16
00:00:39,150 --> 00:00:40,320
message types for when the 

17
00:00:40,330 --> 00:00:46,040
fields change. I handle these 

18
00:00:46,050 --> 00:01:00,460
new message types, remove the 

19
00:01:00,460 --> 00:01:02,000
validation code for the message, 

20
00:01:03,810 --> 00:01:05,300
and then, I still want to use 

21
00:01:05,350 --> 00:01:07,300
the applicative way to validate 

22
00:01:07,310 --> 00:01:09,730
that both fields are OK. To do 

23
00:01:09,740 --> 00:01:11,030
that, I need to add another 

24
00:01:11,040 --> 00:01:12,790
parameter to the submit function 

25
00:01:12,865 --> 00:01:14,830
for the confirmPassword field -- 

26
00:01:15,510 --> 00:01:16,820
even though we ignore this field, 

27
00:01:16,830 --> 00:01:18,330
because we assume that it''s the 

28
00:01:18,340 --> 00:01:19,880
same as the password itself -- 

29
00:01:21,280 --> 00:01:22,440
and send the password in my 

30
00:01:22,450 --> 00:01:28,960
payload. Next, let me update 

31
00:01:28,970 --> 00:01:31,140
the view. Here, instead of the 

32
00:01:31,150 --> 00:01:32,390
text error, I''ll have another 

33
00:01:51,310 --> 00:01:52,940
input. Let me just copy that for 

34
00:01:52,950 --> 00:01:54,270
the confirmPassword field. Now, 

35
00:02:02,300 --> 00:02:03,440
you can see that my form has 

36
00:02:03,450 --> 00:02:05,760
been updated. Let''s now look at 

37
00:02:05,760 --> 00:02:08,070
validation for the password and 

38
00:02:08,145 --> 00:02:14,370
confirmPassword fields. We''ll 

39
00:02:14,370 --> 00:02:15,630
check that the password is not 

40
00:02:15,640 --> 00:02:22,990
empty and, furthermore, that 

41
00:02:23,000 --> 00:02:28,570
it''s a strong password. Let me 

42
00:02:28,570 --> 00:02:47,990
define this function here. We''re 

43
00:02:48,260 --> 00:02:49,550
requiring the user to enter a 

44
00:02:49,560 --> 00:02:51,030
password of six characters or 

45
00:02:51,040 --> 00:02:53,690
more. Let me validate the 

46
00:02:53,700 --> 00:03:04,940
password and update the password 

47
00:03:04,950 --> 00:03:10,960
on the model. Now comes the 

48
00:03:10,970 --> 00:03:12,390
more interesting part, which is 

49
00:03:12,465 --> 00:03:13,990
to validate the confirmPassword 

50
00:03:14,065 --> 00:03:16,320
field. Let me follow the pattern 

51
00:03:16,330 --> 00:03:44,770
here. This is where we want to 

52
00:03:44,780 --> 00:03:46,130
check that the passwords match. 

53
00:03:47,490 --> 00:03:49,860
I could just write a validator 

54
00:03:49,935 --> 00:03:50,960
inline that says, when you get a 

55
00:03:50,980 --> 00:03:55,540
password, if that password is 

56
00:03:55,550 --> 00:03:58,590
the same as the raw value 

57
00:03:58,720 --> 00:04:07,490
of the password, then it''s OK, 

58
00:04:08,820 --> 00:04:11,900
else an error with a message, "

59
00:04:12,920 --> 00:04:19,020
The passwords don''t match." Let 

60
00:04:19,030 --> 00:04:20,830
me try that. If I say "hello1" 

61
00:04:20,905 --> 00:04:26,600
and "hello2," indeed, we get "

62
00:04:26,610 --> 00:04:28,870
The passwords don''t match." Let 

63
00:04:28,870 --> 00:04:31,300
me also check that, if there''s 

64
00:04:31,300 --> 00:04:33,400
no password, we get the message, "

65
00:04:33,475 --> 00:04:35,400
Retype your password." These two 

66
00:04:35,475 --> 00:04:36,600
validations on the 

67
00:04:36,675 --> 00:04:38,330
confirmPassword field have the 

68
00:04:38,340 --> 00:04:40,900
correct precedents. On one 

69
00:04:40,910 --> 00:04:42,700
level, this seems to work. On 

70
00:04:42,775 --> 00:04:44,000
the other hand, let me say that 

71
00:04:44,160 --> 00:04:45,910
there''s nothing here, here say "

72
00:04:45,985 --> 00:04:50,610
hello1," and validate. Here, 

73
00:04:50,610 --> 00:04:51,780
there''s no password, and we get 

74
00:04:51,855 --> 00:04:52,880
a message that the passwords 

75
00:04:52,890 --> 00:04:55,200
don''t match. You might feel that 

76
00:04:55,880 --> 00:04:57,010
if this is not valid in the 

77
00:04:57,020 --> 00:04:59,900
first place, then why perform a 

78
00:04:59,910 --> 00:05:01,290
validation to compare it with 

79
00:05:01,300 --> 00:05:03,080
something else? The other 

80
00:05:03,090 --> 00:05:04,270
problem is that here we''re using 

81
00:05:04,280 --> 00:05:05,980
the raw value, which might not 

82
00:05:05,990 --> 00:05:08,170
be appropriate, for example, if 

83
00:05:08,180 --> 00:05:09,410
we were comparing two ints. 

84
00:05:09,485 --> 00:05:11,530
Rather than the raw value, we 

85
00:05:11,540 --> 00:05:13,400
would like to use the password 

86
00:05:13,410 --> 00:05:16,100
field in itself. What we would 

87
00:05:16,110 --> 00:05:17,620
like to do is have a way that 

88
00:05:17,630 --> 00:05:20,280
says validate that the password 

89
00:05:21,200 --> 00:05:25,520
is equal to password. Otherwise, 

90
00:05:25,530 --> 00:05:31,370
show this error. Let me open my 

91
00:05:31,370 --> 00:05:33,060
validation module, and let me 

92
00:05:33,070 --> 00:05:34,430
see if I could define such a 

93
00:05:34,440 --> 00:05:40,480
function. What will be the 

94
00:05:40,520 --> 00:05:42,490
signature for this? We know that 

95
00:05:42,500 --> 00:05:43,700
what we want to return is a 

96
00:05:43,775 --> 00:05:48,680
validator fromAtoA, and then, we 

97
00:05:48,690 --> 00:05:53,740
have an error message. We have a 

98
00:05:53,770 --> 00:05:57,690
field of A, and let''s see how we 

99
00:05:57,690 --> 00:05:59,120
could go about implementing this. 

100
00:06:00,080 --> 00:06:03,580
This is the other field, and 

101
00:06:03,580 --> 00:06:05,110
then, we have the error message. 

102
00:06:05,185 --> 00:06:07,510
We want to return a validator, 

103
00:06:07,730 --> 00:06:10,950
something that will take an A. 

104
00:06:10,960 --> 00:06:12,480
We can switch on the validity of 

105
00:06:12,490 --> 00:06:20,030
the other field. We could say, 

106
00:06:20,040 --> 00:06:22,490
if it''s valid, then it contains 

107
00:06:22,500 --> 00:06:25,370
an A. I have to call this one A1 

108
00:06:25,790 --> 00:06:29,430
and this one A2. In this case, I 

109
00:06:29,440 --> 00:06:32,170
can say that if A1 equals A1, 

110
00:06:32,245 --> 00:06:40,520
then A2, else an error with the 

111
00:06:40,720 --> 00:06:44,850
given error message. If the 

112
00:06:44,860 --> 00:06:47,020
other field is invalid or not 

113
00:06:47,020 --> 00:06:50,100
validated, then I don''t have an 

114
00:06:50,110 --> 00:06:52,710
A to compare it to. I''m just 

115
00:06:52,710 --> 00:06:57,320
going to return A2. In other 

116
00:06:57,320 --> 00:06:58,620
words, I''m not going to apply 

117
00:06:58,630 --> 00:07:00,280
this validation. There''s no 

118
00:07:00,280 --> 00:07:02,660
point comparing to another thing 

119
00:07:02,670 --> 00:07:04,760
when that other thing is invalid. 

120
00:07:05,560 --> 00:07:07,270
Here, I forgot to put a type 

121
00:07:07,270 --> 00:07:08,950
parameter. This has a raw value. 

122
00:07:10,230 --> 00:07:12,030
Let me test this. Let''s say "

123
00:07:12,105 --> 00:07:17,460
hello1" and "hello1." There are 

124
00:07:17,470 --> 00:07:18,760
no errors, as far as the 

125
00:07:18,800 --> 00:07:22,920
passwords go. If I say "hello" 

126
00:07:22,930 --> 00:07:25,730
and "hello1," then this goes to 

127
00:07:25,730 --> 00:07:28,090
invalid. See that we don''t get 

128
00:07:28,130 --> 00:07:30,060
the mismatch error, which seems 

129
00:07:30,060 --> 00:07:31,450
to be fine, because the user is 

130
00:07:31,460 --> 00:07:32,960
going to have to fix this first. 

131
00:07:34,210 --> 00:07:36,430
If I say "hello2," then, of 

132
00:07:36,440 --> 00:07:37,610
course, the passwords don''t 

133
00:07:37,620 --> 00:07:41,440
match. If I fix hello2, then 

134
00:07:41,440 --> 00:07:42,280
validation passes.

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', '20d2c543', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (2888, 'Customize Validation Error Messages in Elm', NULL, 'In this lesson, we''ll refactor our code by making our validation functions more general by enabling a custom error message. No more hardcoded error messages!', 226, NULL, '2017-12-19T21:07:33.803Z', '2023-08-08T00:08:21.495Z', 'elm-customize-validation-error-messages-in-elm', NULL, '5tojpc1m9d', 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-customize-validation-error-messages-in-elm-SkeQyqUMG/egghead-customize-validation-error-messages-in-elm-SkeQyqUMG.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_5tojpc1m9d" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-customize-validation-error-messages-in-elm-SkeQyqUMG.mp4" /><meta itemprop="duration" content="PT3M46S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/991a880bd7de21cadbbeff21a595a764642c25b7.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/e07300471f6207af8f539531096b4eff2c24f9f6.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=226.8&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F991a880bd7de21cadbbeff21a595a764642c25b7.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe07300471f6207af8f539531096b4eff2c24f9f6.bin" /><meta itemprop="uploadDate" content="2017-12-19T13:10:46Z" /><object id="wistia_5tojpc1m9d_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=226.8&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F991a880bd7de21cadbbeff21a595a764642c25b7.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe07300471f6207af8f539531096b4eff2c24f9f6.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=226.8&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F991a880bd7de21cadbbeff21a595a764642c25b7.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe07300471f6207af8f539531096b4eff2c24f9f6.bin" name="wistia_5tojpc1m9d_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-customize-validation-error-messages-in-elm-SkeQyqUMG.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("5tojpc1m9d", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/5tojpc1m9d/metadata.js"></script>', 'Instructor: [00:01] let''s look at the error messages in application. You can see that the messages are not very nice. This starts with lower case. This starts with upper case.

[00:11] What if I wanted this mandatory field message to be more specific? For example, an email is required. What if I wanted this to be more user-friendly? What if I have a site that involves localization? I have to translate the message depending on the language.

[00:30] The problem is that at the moment our messages are hard-coded in our validation functions. As a rule in functional programming, to make things more general, you add parameters.

[00:40] For example, it''s not empty could take a string as the error message to use. Let''s call it error. Then, we''ll use this error in the arrow case. We''ll do the same for the other validation functions. Here, we''re using string to int. We''ll say result map error with error.

[01:07] Actually, map error expects a function. Let me use always err. I also need to add error as a parameter here. Let me refactor the remaining functions.

[01:36] To make the signature a bit more meaningful still, I could create a type alias error message for string and use this in my signatures to make them even more intention revealing.

[01:53] Now, I have no more hard-coded error messages in my validation logic. The next step is to fix the quote where I perform invalidation. Let me extract a few variables here. I don''t need these parentheses.

[02:14] But I do need to provide the error as an argument. I will say, "An email is required." I will chain that with the following validation with the message, "Please ensure this is a valid email." Now, let me put the valid edit field email in the variable, as well.

[02:51] Let me do a similar refactoring for the other fields.

[03:27] Now, let me see what happens. When I submit, we get the custom message, "An email is required," "A message is required." Let me enter some other data. Again, we see the new messages being displayed...', NULL, true, '10-egghead-elm-customize-validation-error-messages-in-elm.mp4', 150, true, false, 181, '---
mp4: 21417760
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-customize-validation-error-messages-in-elm-SkeQyqUMG/egghead-customize-validation-error-messages-in-elm-SkeQyqUMG.mp4', 'egghead-customize-validation-error-messages-in-elm-SkeQyqUMG', 'zlqJ', 'https://egghead-pipeline.s3.amazonaws.com/egghead-customize-validation-error-messages-in-elm-SkeQyqUMG/egghead-customize-validation-error-messages-in-elm-SkeQyqUMG.mp3?d9b4368e621f91e2?1552', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'removed', '2018-02-09T04:50:18.558Z', NULL, 8388589, NULL, 3669, 0, NULL, 8388591, 'b6d195b0e4bd11e7b916df9fd8042fa8', 'https://ellie-app.com/embed/jZp3LpMsYa1/0', 28751, 'pro', '', 'elm', '', '', '', '', '', NULL, 8383728, '1
00:00:01,230 --> 00:00:03,400
let''s look at the error messages 

2
00:00:03,400 --> 00:00:05,190
in application. You can see that 

3
00:00:05,200 --> 00:00:07,070
the messages are not very nice. 

4
00:00:07,530 --> 00:00:09,350
This starts with lower case. 

5
00:00:09,830 --> 00:00:11,150
This starts with upper case. 

6
00:00:11,225 --> 00:00:14,210
What if I wanted this mandatory 

7
00:00:14,220 --> 00:00:15,360
field message to be more 

8
00:00:15,370 --> 00:00:17,920
specific? For example, an email 

9
00:00:17,930 --> 00:00:20,060
is required. What if I wanted 

10
00:00:20,070 --> 00:00:21,670
this to be more user-friendly? 

11
00:00:22,160 --> 00:00:23,450
What if I have a site that 

12
00:00:23,460 --> 00:00:25,720
involves localization? I have to 

13
00:00:25,720 --> 00:00:27,480
translate the message depending 

14
00:00:27,520 --> 00:00:30,690
on the language. The problem is 

15
00:00:30,700 --> 00:00:32,520
that at the moment our messages 

16
00:00:32,530 --> 00:00:34,160
are hard-coded in our validation 

17
00:00:34,160 --> 00:00:36,210
functions. As a rule in 

18
00:00:36,220 --> 00:00:37,770
functional programming, to make 

19
00:00:37,780 --> 00:00:39,340
things more general, you add 

20
00:00:39,370 --> 00:00:41,700
parameters. For example, it''s 

21
00:00:41,700 --> 00:00:43,970
not empty could take a string as 

22
00:00:43,980 --> 00:00:46,410
the error message to use. Let''s 

23
00:00:46,485 --> 00:00:47,890
call it error. Then, we''ll use 

24
00:00:47,900 --> 00:00:50,270
this error in the arrow case. 

25
00:00:50,345 --> 00:00:51,130
We''ll do the same for the other 

26
00:00:51,205 --> 00:00:59,460
validation functions. Here, 

27
00:00:59,470 --> 00:01:01,490
we''re using string to int. We''ll 

28
00:01:01,650 --> 00:01:05,800
say result map error with error. 

29
00:01:07,520 --> 00:01:09,100
Actually, map error expects a 

30
00:01:09,110 --> 00:01:14,150
function. Let me use always err. 

31
00:01:14,150 --> 00:01:15,650
I also need to add error as a 

32
00:01:15,660 --> 00:01:17,540
parameter here. Let me refactor 

33
00:01:18,370 --> 00:01:36,200
the remaining functions. To 

34
00:01:36,200 --> 00:01:37,430
make the signature a bit more 

35
00:01:37,440 --> 00:01:39,300
meaningful still, I could create 

36
00:01:39,310 --> 00:01:43,800
a type alias error message for 

37
00:01:43,810 --> 00:01:46,290
string and use this in my 

38
00:01:46,300 --> 00:01:47,810
signatures to make them even 

39
00:01:47,820 --> 00:01:53,880
more intention revealing. Now, 

40
00:01:53,880 --> 00:01:55,900
I have no more hard-coded error 

41
00:01:55,910 --> 00:01:57,970
messages in my validation logic. 

42
00:01:58,990 --> 00:02:00,460
The next step is to fix the 

43
00:02:00,470 --> 00:02:01,800
quote where I perform 

44
00:02:01,875 --> 00:02:03,820
invalidation. Let me extract a 

45
00:02:03,820 --> 00:02:12,950
few variables here. I don''t need 

46
00:02:12,960 --> 00:02:16,150
these parentheses. But I do 

47
00:02:16,160 --> 00:02:17,710
need to provide the error as an 

48
00:02:17,720 --> 00:02:19,940
argument. I will say, "An email 

49
00:02:19,950 --> 00:02:24,250
is required." I will chain that 

50
00:02:24,290 --> 00:02:25,570
with the following validation 

51
00:02:25,780 --> 00:02:27,820
with the message, "Please ensure 

52
00:02:27,950 --> 00:02:33,650
this is a valid email." Now, let 

53
00:02:33,660 --> 00:02:35,020
me put the valid edit field 

54
00:02:35,030 --> 00:02:36,480
email in the variable, as well. 

55
00:02:51,110 --> 00:02:52,280
Let me do a similar refactoring 

56
00:02:52,370 --> 00:03:28,220
for the other fields. Now, let 

57
00:03:28,220 --> 00:03:29,940
me see what happens. When I 

58
00:03:30,015 --> 00:03:31,400
submit, we get the custom 

59
00:03:31,410 --> 00:03:33,150
message, "An email is required," "

60
00:03:33,160 --> 00:03:36,130
A message is required." Let me 

61
00:03:35,850 --> 00:03:43,820
enter some other data. Again, we 

62
00:03:43,830 --> 00:03:45,150
see the new messages being 

63
00:03:45,160 --> 00:03:45,780
displayed...

', false, NULL, 'hidden', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', 'c6ac7770', NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6272, 'Build and deploy a React Application with Codesandbox, GitHub, and Netlify', NULL, 'I‚Äôve built and deployed several applications without downloading or editing a single line of code to my local computer, and I did it with [Codesandbox](https://codesandbox.io), [GitHub](https://github.com), and [Netlify](https://www.netlify.com) ([learn more](https://kentcdodds.com/blog/building-production-apps-100-in-the-browser)). In this lesson I‚Äôll show you around some of these tools, and I can‚Äôt wait to see what you do with these amazing tools and your new found knowledge of React.', 270, NULL, '2020-03-11T02:45:40.432Z', '2025-12-13T00:54:53.678Z', 'react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0.jpg', true, NULL, 'Kent C. Dodds: [0:00] Once you figured out how React works locally in an index.html, you probably want to build an actual application, and the best next place to start is by going to codesandbox.io.

[0:11] CodeSandbox is amazing. It''s an entire IDE and prototyping tool for rapid web development built right into the browser. It''s just like a typical development environment that you''d expect from a local development.

[0:26] Let''s go ahead and create a Sandbox. I''m going to create a React Sandbox here from the React template. Here on the right we have our browser. On the left we have our Sandbox. I can say, "Hello You!" and it just gets updated automatically as we go.

[0:44] There are a ton of things that you can do in CodeSandbox. You can add dependencies from npm, you can add external resources, you can even change your typeface. If we hit Command and a comma, you can open up your settings here and change the settings just like you would if you were using VS Code locally. It''s really amazing.

[1:05] You can build your whole app out here. You can have multiple files and use import statements and modules. You can even write tests in here.

[1:12] We could create a new directory called __tests__, and then in that directory, you could have a test.js file. Then, we click on the Test tab, here, and we get to run all the tests that we have in here. We can say test(''this works''). Then, our tests will be run.

[1:33] Another thing you can do with this is you can connect to this with GitHub. I''m going to go ahead and sign in with GitHub, right here. I''ll authorize CodeSandbox and then we''ll sign in right here to authorize CodeSandbox to create repos. Then, I can create a new repository, example-codesandbox. We''ll click Create Repository and CodeSandbox will create a repository on GitHub based on what I have right here.

[2:03] With that, now, I can go to the information here and I see that there''s a link. I can click on that. That opens up in this new GitHub repo that has all of the code that I had for that CodeSandbox.

[2:15] To take it a step even further, I can go to this deployment option and I can deploy this with Now or netlify. Let''s go ahead and try deploying this with netlify. We''ll click Deploy, and then I get a Sandbox Site. Now, netlify is building my CodeSandbox. I can look at the logs here. It''s going to take a minute or two to complete, so I''ll speed that up for you, so you don''t have to wait.

[2:45] It looks like it''s been deployed. I can scroll through all these logs and take a look at what it''s done here and then I can click Visit. That will pop open the site in another tab. This is available on the World Wide Web, so you can send this URL to anyone and they can see the amazing work that you created within CodeSandbox.

[3:05] You can also claim this site so you can make it associated to your Netlify account and even have it wired up to the GitHub repo that you have, so anytime you push changes to this GitHub repo, you can get your site redeployed. Within Netlify, you can even make a custom domain and so you could create an entire application using just CodeSandbox, Netlify and GitHub.

[3:27] Oh, and as you make changes, for example if we say, "Hello There!", then CodeSandbox will automatically fork your sandbox and you can commit changes to the GitHub repo that this CodeSandbox is attached to. We could say change title, we could commit it directly or even open a PR.

[3:49] Let''s go ahead and commit, it''ll create the commit and put it in our repo here. Now we see change title was the latest commit. If we wire up Netlify to our GitHub repo, then Netlify will automatically deploy that change as well.

[4:05] You can work entirely in CodeSandbox, or, if you''d rather work locally, then you can also export this to a zip, unzip that and work through it locally or you can clone this repository and work through it locally as well.

[4:19] There''s an entire world of things that you can do with React once you have these tools at your fingertips. I look forward to seeing the cool things that you build to make the world a better place with your newfound knowledge of React.', NULL, false, '29-egghead-react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify.mp4', 11, true, false, 160, '---
mp4: 23342116
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0.mp4', 'react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0', 'zcKZ', 'https://egghead-pipeline.s3.amazonaws.com/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0.mp3?86c7fa86714db4c7?3e9b', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:52.125Z', NULL, 8388599, NULL, 8179, 0, NULL, 381301, 'e46013dfb6964ab68126805c8915bf48', NULL, 71775, 'free', '', '', 'react', '', '', '', '', NULL, 404561644, '1
00:00:00,260 --> 00:00:01,620
Once you figured out how React 

2
00:00:01,620 --> 00:00:03,700
works locally in an index.html, 

3
00:00:03,700 --> 00:00:05,110
you probably want to build an 

4
00:00:05,110 --> 00:00:07,170
actual application, and the best 

5
00:00:07,170 --> 00:00:08,940
next place to start is by going 

6
00:00:08,940 --> 00:00:12,570
to codesandbox.io. CodeSandbox 

7
00:00:12,690 --> 00:00:15,140
is amazing. It''s an entire IDE 

8
00:00:15,580 --> 00:00:17,150
and prototyping tool for rapid 

9
00:00:17,150 --> 00:00:19,040
web development built right into 

10
00:00:19,040 --> 00:00:20,840
the browser. It''s just like a 

11
00:00:20,840 --> 00:00:22,880
typical development environment 

12
00:00:22,880 --> 00:00:25,460
that you''d expect from a local 

13
00:00:25,460 --> 00:00:27,090
development. Let''s go ahead and 

14
00:00:27,090 --> 00:00:29,250
create a Sandbox. I''m going to 

15
00:00:29,250 --> 00:00:31,490
create a React Sandbox here from 

16
00:00:31,490 --> 00:00:34,060
the React template. Here on the 

17
00:00:34,060 --> 00:00:35,470
right we have our browser. On 

18
00:00:35,470 --> 00:00:37,990
the left we have our Sandbox. I 

19
00:00:37,990 --> 00:00:40,680
can say, "Hello You!" and it 

20
00:00:41,170 --> 00:00:42,870
just gets updated automatically 

21
00:00:42,870 --> 00:00:45,210
as we go. There are a ton of 

22
00:00:45,210 --> 00:00:46,380
things that you can do in 

23
00:00:46,380 --> 00:00:48,020
CodeSandbox. You can add 

24
00:00:48,020 --> 00:00:50,360
dependencies from npm, you can 

25
00:00:50,360 --> 00:00:52,520
add external resources, you can 

26
00:00:52,520 --> 00:00:55,060
even change your typeface. If we 

27
00:00:55,060 --> 00:00:57,310
hit Command and a comma, you can 

28
00:00:57,310 --> 00:00:59,290
open up your settings here and 

29
00:00:59,290 --> 00:01:00,730
change the settings just like 

30
00:01:00,730 --> 00:01:02,200
you would if you were using VS 

31
00:01:02,200 --> 00:01:04,040
Code locally. It''s really 

32
00:01:04,040 --> 00:01:05,920
amazing. You can build your 

33
00:01:05,920 --> 00:01:07,700
whole app out here. You can have 

34
00:01:07,700 --> 00:01:09,480
multiple files and use import 

35
00:01:09,480 --> 00:01:11,450
statements and modules. You can 

36
00:01:11,450 --> 00:01:13,040
even write tests in here. We 

37
00:01:13,040 --> 00:01:14,380
could create a new directory 

38
00:01:14,380 --> 00:01:17,110
called __tests__, and then in 

39
00:01:17,110 --> 00:01:18,870
that directory, you could have a 

40
00:01:18,870 --> 00:01:22,660
test.js file. Then, we click on 

41
00:01:22,660 --> 00:01:24,420
the Test tab, here, and we get 

42
00:01:24,420 --> 00:01:25,680
to run all the tests that we 

43
00:01:25,680 --> 00:01:27,200
have in here. We can say test(''

44
00:01:27,620 --> 00:01:32,750
this works''). Then, our tests 

45
00:01:32,750 --> 00:01:34,410
will be run. Another thing you 

46
00:01:34,410 --> 00:01:35,880
can do with this is you can 

47
00:01:35,880 --> 00:01:37,260
connect to this with GitHub. I''m 

48
00:01:37,610 --> 00:01:39,010
going to go ahead and sign in 

49
00:01:39,010 --> 00:01:41,470
with GitHub, right here. I''ll 

50
00:01:41,470 --> 00:01:43,490
authorize CodeSandbox and then 

51
00:01:43,490 --> 00:01:44,830
we''ll sign in right here to 

52
00:01:44,830 --> 00:01:47,770
authorize CodeSandbox to create 

53
00:01:47,770 --> 00:01:50,080
repos. Then, I can create a new 

54
00:01:50,080 --> 00:01:52,270
repository, example-

55
00:01:52,340 --> 00:01:55,240
codesandbox. We''ll click Create 

56
00:01:55,240 --> 00:01:57,640
Repository and CodeSandbox will 

57
00:01:57,640 --> 00:01:59,890
create a repository on GitHub 

58
00:02:00,340 --> 00:02:02,160
based on what I have right here. 

59
00:02:03,760 --> 00:02:05,020
With that, now, I can go to the 

60
00:02:05,020 --> 00:02:06,490
information here and I see that 

61
00:02:06,490 --> 00:02:08,110
there''s a link. I can click on 

62
00:02:08,950 --> 00:02:10,770
that. That opens up in this new 

63
00:02:10,770 --> 00:02:13,320
GitHub repo that has all of the 

64
00:02:13,320 --> 00:02:14,720
code that I had for that 

65
00:02:14,720 --> 00:02:16,730
CodeSandbox. To take it a step 

66
00:02:16,730 --> 00:02:19,370
even further, I can go to this 

67
00:02:19,370 --> 00:02:21,130
deployment option and I can 

68
00:02:21,130 --> 00:02:23,670
deploy this with Now or netlify. 

69
00:02:24,250 --> 00:02:25,610
Let''s go ahead and try deploying 

70
00:02:25,610 --> 00:02:27,020
this with netlify. We''ll click 

71
00:02:27,050 --> 00:02:31,520
Deploy, and then I get a Sandbox 

72
00:02:31,520 --> 00:02:34,640
Site. Now, netlify is building 

73
00:02:34,640 --> 00:02:36,770
my CodeSandbox. I can look at 

74
00:02:36,770 --> 00:02:38,670
the logs here. It''s going to 

75
00:02:38,670 --> 00:02:40,340
take a minute or two to complete, 

76
00:02:40,570 --> 00:02:41,680
so I''ll speed that up for you, 

77
00:02:41,680 --> 00:02:45,510
so you don''t have to wait. It 

78
00:02:45,720 --> 00:02:47,970
looks like it''s been deployed. I 

79
00:02:47,970 --> 00:02:48,900
can scroll through all these 

80
00:02:48,900 --> 00:02:50,000
logs and take a look at what 

81
00:02:50,000 --> 00:02:52,630
it''s done here and then I can 

82
00:02:52,630 --> 00:02:54,910
click Visit. That will pop open 

83
00:02:55,010 --> 00:02:57,710
the site in another tab. This is 

84
00:02:57,710 --> 00:02:59,180
available on the World Wide Web, 

85
00:02:59,180 --> 00:03:00,460
so you can send this URL to 

86
00:03:00,510 --> 00:03:01,980
anyone and they can see the 

87
00:03:01,980 --> 00:03:03,650
amazing work that you created 

88
00:03:04,010 --> 00:03:05,710
within CodeSandbox. You can 

89
00:03:05,710 --> 00:03:07,330
also claim this site so you can 

90
00:03:07,330 --> 00:03:08,900
make it associated to your 

91
00:03:08,900 --> 00:03:10,820
Netlify account and even have it 

92
00:03:10,820 --> 00:03:13,010
wired up to the GitHub repo that 

93
00:03:13,010 --> 00:03:14,990
you have, so anytime you push 

94
00:03:14,990 --> 00:03:17,110
changes to this GitHub repo, you 

95
00:03:17,110 --> 00:03:18,540
can get your site redeployed. 

96
00:03:18,900 --> 00:03:20,140
Within Netlify, you can even 

97
00:03:20,140 --> 00:03:22,520
make a custom domain and so you 

98
00:03:22,520 --> 00:03:23,570
could create an entire 

99
00:03:23,570 --> 00:03:25,060
application using just 

100
00:03:25,060 --> 00:03:27,240
CodeSandbox, Netlify and GitHub. 

101
00:03:27,870 --> 00:03:30,490
Oh, and as you make changes, for 

102
00:03:30,490 --> 00:03:32,150
example if we say, "Hello There!", 

103
00:03:33,890 --> 00:03:34,960
then CodeSandbox will 

104
00:03:34,960 --> 00:03:37,110
automatically fork your sandbox 

105
00:03:37,450 --> 00:03:40,080
and you can commit changes to 

106
00:03:40,080 --> 00:03:41,470
the GitHub repo that this 

107
00:03:41,470 --> 00:03:43,560
CodeSandbox is attached to. We 

108
00:03:43,560 --> 00:03:46,480
could say change title, we could 

109
00:03:46,480 --> 00:03:48,260
commit it directly or even open 

110
00:03:48,340 --> 00:03:50,310
a PR. Let''s go ahead and commit, 

111
00:03:50,710 --> 00:03:54,520
it''ll create the commit and put 

112
00:03:54,520 --> 00:03:57,220
it in our repo here. Now we see 

113
00:03:57,220 --> 00:03:58,500
change title was the latest 

114
00:03:58,500 --> 00:04:01,160
commit. If we wire up Netlify to 

115
00:04:01,160 --> 00:04:02,940
our GitHub repo, then Netlify 

116
00:04:02,940 --> 00:04:04,200
will automatically deploy that 

117
00:04:04,200 --> 00:04:06,230
change as well. You can work 

118
00:04:06,230 --> 00:04:08,930
entirely in CodeSandbox, or, if 

119
00:04:08,930 --> 00:04:10,500
you''d rather work locally, then 

120
00:04:10,500 --> 00:04:12,150
you can also export this to a 

121
00:04:12,150 --> 00:04:13,810
zip, unzip that and work through 

122
00:04:13,810 --> 00:04:16,000
it locally or you can clone this 

123
00:04:16,000 --> 00:04:17,630
repository and work through it 

124
00:04:17,630 --> 00:04:19,380
locally as well. There''s an 

125
00:04:19,380 --> 00:04:20,900
entire world of things that you 

126
00:04:20,900 --> 00:04:22,430
can do with React once you have 

127
00:04:22,430 --> 00:04:23,900
these tools at your fingertips. 

128
00:04:24,300 --> 00:04:25,320
I look forward to seeing the 

129
00:04:25,320 --> 00:04:26,660
cool things that you build to 

130
00:04:26,660 --> 00:04:27,880
make the world a better place 

131
00:04:28,070 --> 00:04:29,410
with your newfound knowledge of 

132
00:04:29,485 --> 00:04:29,810
React.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Once you''ve figured out how React works locally in an index.html, you probably want to build an actual application and the best next place to start is by going to [codesandbox.io](codesandbox.io).

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296084/transcript-images/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-codesandbox.jpg)

- There are a ton of things that you can do in CodeSandbox. You can add dependencies from npm, you can add external resources, you can even change your typeface.
- I can create a new repository. Example, CodeSandbox. We''ll click Create Repository and CodeSandbox will create a repository on GitHub based on what I have right here.

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296084/transcript-images/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-deploy.jpg)

- You can also deploy with Netlify.

- Within Netlify, you can even make a custom domain and so you could create an entire application using just CodeSandbox, Netlify, and GitHub.

![](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296084/transcript-images/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-website.jpg)

## Additional resource

- [CodeSandbox](https://codesandbox.io)
- [Netlify](https://www.netlify.com)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '8f8e33df', 'https://d2c5owlt6rorc3.cloudfront.net/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0/dash/react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify-ByL7A8uy0.mpd', 'https://stream.mux.com/GhYFpj7znI46vcVqGd2GtiCcjrZRIX9nRjuHtdJkDDg.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/28-react-build-and-deploy-a-react-application-with-codesandbox-github-and-netlify.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6274, 'A Beginners Guide to React Outro', NULL, 'A Beginners Guide to React Outro', 37, NULL, '2020-03-11T22:47:28.375Z', '2025-12-13T00:54:53.678Z', 'react-a-beginners-guide-to-react-outro', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-a-beginners-guide-to-react-outro-By1HTmBwU/react-a-beginners-guide-to-react-outro-By1HTmBwU.jpg', true, NULL, 'Kent C. Dodds: [0:00] Did you have a good time? I had a good time.

[0:02] I hope this gave you the foundation that you need if you''re just getting started with React, so that you can build upon this and make amazing experiences with React. If you''ve been using React for a while and you just came here to solidify your understanding of the fundamentals, I hope this did that for you, too.

[0:18] I''m excited about React because I think that it can make the world a better place by making us more productive in building the applications that we''re building for our users. I hope that you take the opportunity to build some amazing experiences with this amazing library that we have, that we love, that we call React.', NULL, false, '30-egghead-react-a-beginners-guide-to-react-outro.mp4', 11, true, false, 160, '---
mp4: 6115692
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-a-beginners-guide-to-react-outro-By1HTmBwU/react-a-beginners-guide-to-react-outro-By1HTmBwU.mp4', 'react-a-beginners-guide-to-react-outro-By1HTmBwU', 'zcCR', 'https://egghead-pipeline.s3.amazonaws.com/react-a-beginners-guide-to-react-outro-By1HTmBwU/react-a-beginners-guide-to-react-outro-By1HTmBwU.mp3?cabee1133e8bd300?93db', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.941Z', NULL, 8388599, NULL, 8060, 0, NULL, 4384954, '7244a984f5f74eb589e291540b40be7d', NULL, 71775, 'free', '', '', 'react', '', '', '', '', NULL, 405902356, '1
00:00:00,630 --> 00:00:02,130
Did you have a good time? I had 

2
00:00:02,130 --> 00:00:03,510
a good time. I hope this gave 

3
00:00:03,510 --> 00:00:04,860
you the foundation that you need 

4
00:00:04,930 --> 00:00:05,860
if you''re just getting started 

5
00:00:05,860 --> 00:00:07,130
with React, so that you can 

6
00:00:07,130 --> 00:00:09,220
build upon this and make amazing 

7
00:00:09,220 --> 00:00:11,390
experiences with React. If 

8
00:00:11,390 --> 00:00:12,510
you''ve been using React for a 

9
00:00:12,510 --> 00:00:13,720
while and you just came here to 

10
00:00:13,720 --> 00:00:15,200
solidify your understanding of 

11
00:00:15,200 --> 00:00:16,680
the fundamentals, I hope this 

12
00:00:16,680 --> 00:00:18,280
did that for you, too. I''m 

13
00:00:18,280 --> 00:00:20,080
excited about React because I 

14
00:00:20,080 --> 00:00:21,320
think that it can make the world 

15
00:00:21,320 --> 00:00:23,220
a better place by making us more 

16
00:00:23,220 --> 00:00:24,580
productive in building the 

17
00:00:24,580 --> 00:00:25,710
applications that we''re building 

18
00:00:25,710 --> 00:00:27,590
for our users. I hope that you 

19
00:00:27,590 --> 00:00:29,490
take the opportunity to build 

20
00:00:29,490 --> 00:00:31,490
some amazing experiences with 

21
00:00:31,490 --> 00:00:33,610
this amazing library that we 

22
00:00:33,610 --> 00:00:35,560
have, that we love, that we call 

23
00:00:35,635 --> 00:00:35,960
React.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '## Additional resource

- [Kent''s Website](http://kentcdodds.com/)
- [Egghead](https://egghead.io/)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', '282c6bd9', 'https://d2c5owlt6rorc3.cloudfront.net/react-a-beginners-guide-to-react-outro-By1HTmBwU/dash/react-a-beginners-guide-to-react-outro-By1HTmBwU.mpd', 'https://stream.mux.com/l7se7XgGLeogm014YpB7YUwHZDznc2l93unhNfyMqLCI.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/29-react-a-beginners-guide-to-react-outro.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5772, 'Remove Changes from a Commit Before Pushing', NULL, 'If we''ve already committed changes that we _don''t_ want to push, we can also remove those with `git reset`, but we''re going to reset back to a specific commit, either with:

`git reset HEAD~1`

or

`git reset [HASH]`

and that will effectively "undo" the commits before that hash. 

Then we can add and commit only the changes that we want.', 181, NULL, '2019-11-28T06:00:16.379Z', '2025-12-13T00:54:53.678Z', 'git-remove-changes-from-a-commit-before-pushing', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H/scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H.jpg', true, NULL, 'Instructor: [00:01] We''re in @.js here and let''s make a function called hello world and that function is just going to alert hello. Then sometime later we close this file and open our index.html file and we''re going to put a description in here. That will say, "Here''s how to fix some common git mistakes."

[00:26] What we want to do is commit just this index to html file, but if we''re careless and we just do a Git Add-A without looking and we commit that, then we have Git Commit-M adds a description to index. Now if we do Git Status, we can see we''re ahead by two commands.

[00:48] We almost PUSH, but before pushing we''re smart and what we want to do is see what we''re about to PUSH. We do a diff on origin master with our current head. What we see is that we have app.js changes that are about to go up, as well as our HTML changes. We realize that we want to get rid of this JavaScript before we push.

[01:11] Let''s take a look at the log with git log, one line. What we want to do is undo this commit because this commit is the one with the mistake in it. To do that, we''re going to use git reset. Git reset takes us back to where we want to reset to. There''s two ways we could specify that.

[01:31] We want to reset back to this commit here. We could say head and then go back one. That''s head ~ 1 and that will go to head and then back on the 301 or we could say git reset and then we could copy this hash exactly so we know what we''re resetting to. Now we have reset and we have unstaged changes.

[01:55] If we do a git status, now it says we have these changes that are not staged for commit. It''s like we didn''t even commit them in the first place. For this reason, you really want to be careful. If we had pushed this commit already and then we reset it, then that means we are changing the history that other people may have already downloaded.

[02:14] We only want to use reset on branches that we haven''t pushed yet. Now, we could git add index.html, which is the only change we want to add and then double check with git status. We have the index to be committed and we are not committing app.js.

[02:33] Now we can commit a description for index. If we do a git status now, we have app.js not staged for a commit. We are two commits ahead of origin/master. We can do git log --oneline now. We''ve gotten rid of that old commit. We are replacing it with this new one.', NULL, true, '04-egghead-git-remove-changes-from-a-commit-before-pushing.mp4', 210, true, false, 401, '---
mp4: 17695185
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H/scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H.mp4', 'scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H', 'zduu', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H/scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H.mp3?7122715137622d3b?ed0f', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:03.745Z', NULL, 8388602, NULL, 7239, 0, NULL, 6664192, '81e2b10d424f4aeeaf094196e23e5bc6', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 149826364, '1
00:00:01,040 --> 00:00:04,040
We''re in @.js here and let''s 

2
00:00:04,040 --> 00:00:05,450
make a function called hello 

3
00:00:05,450 --> 00:00:07,600
world and that function is just 

4
00:00:07,600 --> 00:00:10,590
going to alert hello. Then 

5
00:00:10,590 --> 00:00:12,200
sometime later we close this 

6
00:00:12,200 --> 00:00:14,870
file and open our index.html 

7
00:00:14,870 --> 00:00:16,730
file and we''re going to put a 

8
00:00:16,730 --> 00:00:18,680
description in here. That will 

9
00:00:18,680 --> 00:00:21,040
say, "Here''s how to fix some 

10
00:00:21,040 --> 00:00:26,590
common git mistakes." What we 

11
00:00:26,590 --> 00:00:28,730
want to do is commit just this 

12
00:00:28,770 --> 00:00:31,060
index to html file, but if we''re 

13
00:00:31,060 --> 00:00:32,800
careless and we just do a Git 

14
00:00:32,920 --> 00:00:36,080
Add-A without looking and we 

15
00:00:36,080 --> 00:00:38,930
commit that, then we have Git 

16
00:00:38,930 --> 00:00:41,830
Commit-M adds a description to 

17
00:00:41,830 --> 00:00:45,030
index. Now if we do Git Status, 

18
00:00:45,590 --> 00:00:46,910
we can see we''re ahead by two 

19
00:00:46,910 --> 00:00:49,300
commands. We almost PUSH, but 

20
00:00:49,350 --> 00:00:51,370
before pushing we''re smart and 

21
00:00:51,370 --> 00:00:52,530
what we want to do is see what 

22
00:00:52,530 --> 00:00:54,590
we''re about to PUSH. We do a 

23
00:00:54,590 --> 00:00:57,320
diff on origin master with our 

24
00:00:57,320 --> 00:00:59,600
current head. What we see is 

25
00:00:59,600 --> 00:01:01,460
that we have app.js changes that 

26
00:01:01,460 --> 00:01:03,700
are about to go up, as well as 

27
00:01:03,700 --> 00:01:08,000
our HTML changes. We realize 

28
00:01:08,000 --> 00:01:09,450
that we want to get rid of this 

29
00:01:09,450 --> 00:01:10,810
JavaScript before we push. 

30
00:01:11,920 --> 00:01:13,140
Let''s take a look at the log 

31
00:01:13,140 --> 00:01:15,810
with git log, one line. What we 

32
00:01:15,810 --> 00:01:17,880
want to do is undo this commit 

33
00:01:18,720 --> 00:01:19,940
because this commit is the one 

34
00:01:19,940 --> 00:01:22,080
with the mistake in it. To do 

35
00:01:22,080 --> 00:01:23,150
that, we''re going to use git 

36
00:01:23,250 --> 00:01:26,200
reset. Git reset takes us back 

37
00:01:26,200 --> 00:01:28,310
to where we want to reset to. 

38
00:01:29,080 --> 00:01:29,910
There''s two ways we could 

39
00:01:29,910 --> 00:01:32,410
specify that. We want to reset 

40
00:01:32,540 --> 00:01:34,670
back to this commit here. We 

41
00:01:34,670 --> 00:01:37,200
could say head and then go back 

42
00:01:37,320 --> 00:01:40,440
one. That''s head ~ 1 and that 

43
00:01:40,440 --> 00:01:42,300
will go to head and then back on 

44
00:01:42,300 --> 00:01:44,530
the 301 or we could say git 

45
00:01:44,530 --> 00:01:46,250
reset and then we could copy 

46
00:01:46,570 --> 00:01:48,850
this hash exactly so we know 

47
00:01:48,850 --> 00:01:51,560
what we''re resetting to. Now we 

48
00:01:51,560 --> 00:01:53,810
have reset and we have unstaged 

49
00:01:53,840 --> 00:01:56,470
changes. If we do a git status, 

50
00:01:57,490 --> 00:01:58,210
now it says we have these 

51
00:01:58,210 --> 00:01:59,480
changes that are not staged for 

52
00:01:59,480 --> 00:02:01,600
commit. It''s like we didn''t even 

53
00:02:01,600 --> 00:02:02,800
commit them in the first place. 

54
00:02:04,560 --> 00:02:05,710
For this reason, you really want 

55
00:02:05,710 --> 00:02:07,340
to be careful. If we had pushed 

56
00:02:07,340 --> 00:02:09,020
this commit already and then we 

57
00:02:09,020 --> 00:02:10,950
reset it, then that means we are 

58
00:02:10,950 --> 00:02:12,310
changing the history that other 

59
00:02:12,310 --> 00:02:13,300
people may have already 

60
00:02:13,300 --> 00:02:15,600
downloaded. We only want to use 

61
00:02:15,600 --> 00:02:17,300
reset on branches that we 

62
00:02:17,300 --> 00:02:19,890
haven''t pushed yet. Now, we 

63
00:02:19,890 --> 00:02:22,630
could git add index.html, which 

64
00:02:22,630 --> 00:02:23,820
is the only change we want to 

65
00:02:23,820 --> 00:02:25,780
add and then double check with 

66
00:02:25,820 --> 00:02:28,390
git status. We have the index to 

67
00:02:28,390 --> 00:02:30,340
be committed and we are not 

68
00:02:30,390 --> 00:02:34,170
committing app.js. Now we can 

69
00:02:34,170 --> 00:02:37,490
commit a description for index. 

70
00:02:41,360 --> 00:02:43,950
If we do a git status now, we 

71
00:02:43,950 --> 00:02:46,950
have app.js not staged for a 

72
00:02:46,950 --> 00:02:50,250
commit. We are two commits ahead 

73
00:02:50,350 --> 00:02:53,190
of origin/master. We can do git 

74
00:02:53,220 --> 00:02:55,520
log --oneline now. We''ve gotten 

75
00:02:55,520 --> 00:02:57,310
rid of that old commit. We are 

76
00:02:57,310 --> 00:02:58,690
replacing it with this new one.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'Inside of the `app.js` created earlier, we can create a function `helloWorld` that contains `alert("hello!")`. Later, you might close that file and open the `index.html` and make changes to that file like adding a description.

## app.js
```js
// our app js code

function helloWorld() {
  alert("hello!")
}
```

## index.html
```html
<html>
  <head>
    <script type="text/javascript" src="/app.js"></script>
  </head>
  <body>

    <h1>Fixing git mistakes</h1>
    <p>Here''s how to fix some common git mistakes</p>
  </body>
</html>  
```

You may be tempted to use `git add -A` alongside a simple commit message after that, but it will be clear that you are ahead by 2 commits. If you''re able to see this before committing, you want to see what you''re about to push. To check, run `git diff origin/master HEAD` to see the changes to all files edited.

If you realize you want to get rid of something before you push, check the log with `git log --oneline` to see which commit you''d like to undo. You have to decide where you want to reset to, so after finding the desired commit use `git reset {LOCATION}`. The location can be a hash associated with a commit or something like `HEAD~1` which takes you to HEAD, then back down the tree 1 time.

After performing a `git reset`, your files should return to the unstaged location. **It''s important to be careful to not use `git reset` after pushing a commit because it''ll change the history other people may have already downloaded.** So, only use reset on branches that aren''t pushed yet.

Now, you can `git add index.html` and `git commit -m "Adds desc for index"` to fix what went wrong earlier. Using `git status` will us we have the `app.js` not staged for commit and that we are two commits ahead of origin/master. You can use `git log --oneline` to verify the old commit was replaced with the new one.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '44811933', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H/dash/scikit-learn-remove-changes-from-a-commit-before-pushing-Bkn3Z_32H.mpd', 'https://stream.mux.com/RuTKEezGhdS4Il6L4DM7xLx6Ppy3zDpemji6egSyo8k.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5773, 'Use and Compare the Different git Reset Options: --hard, --soft, and --mixed', NULL, '`git reset` has three primary options that we might use: `--soft`, `--hard` and `--mixed` (the default).

We''ll use `git reset` to undo the latest commit in all three ways, and compare the result of reseting with each flag.', 172, NULL, '2019-11-28T06:11:39.365Z', '2025-12-13T00:54:53.678Z', 'git-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr/scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr.jpg', true, NULL, 'Instructor: [0:00] If we take a look at git status, we have app.js which is not staged for commit. Let''s open that and let''s add those changes. We can do git add app.js and then git commit app jsChanges. If we do a git log oneline, we have this commit in our local tree. Let''s explore the different ways we could reset this if we wanted to.

[0:26] We can do git --help reset and here''s all the different options. The most common flags you''ll see are soft, hard or mixed, which is the default. Let''s look at each of those. First, we''ll do a git reset --soft and we want to reset to back one from the HEAD. We''ll do HEAD~1 to go back one.

[0:50] Once we do that, we can do a git status. We can see now that we have changes to be committed. What happened is we had changes that were committed and when we get reset --soft, that''s like taking those changes and moving them back into the staging area. Nothing else changed. We just took our commit and moved it into the staging area.

[1:09] If we do a log oneline now, we don''t have that commit anymore because we undid the commit. Let''s redo that commit so we can try again. We''ll do take two. Now if we do a git log oneline, then we have take two is our latest commit.

[1:25] Now let''s git reset --mixed HEAD. We want to go back one again. This is the same as just saying git reset and then going back one, because mixed is the default. Now it says we have unstaged changes. Let''s do a git status.

[1:41] Whereas before we had changes to be committed, these are changes not staged for commit. Mixed takes it back even one step further. It removes the commit, and then it unstages those changes. In app.js, our function is still there. We still have all the code. It just brought it all the way back to our working directory.

[2:01] Let''s add app.js again. We''ll commit it for take three. Now if we do a git log oneline, we have take three. Now we''re about to do a git reset --hard but watch out because you almost never want to do this in real life, and you''ll see why.

[2:22] Let''s do git reset --hard. We want to HEAD~1, so going back one. We can see in our text editor, it got rid of that code. If we do a git status, we have nothing here except for our two commits which we had previously.

[2:39] What happened is, it got rid of the commit, it unstaged the changes, and then also removed them from our working directory. We lost the work that we did. We lost that function. That''s why you usually don''t want to do a git reset --hard.', NULL, true, '05-egghead-git-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed.mp4', 210, true, false, 401, '---
mp4: 20171211
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr/scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr.mp4', 'scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr', 'zdus', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr/scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr.mp3?c3fc746a5e00bb63?7bca', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:03.814Z', NULL, 8388602, NULL, 7241, 0, NULL, 7561216, '3412c6e6e3c3439bbd9315566b3ccc60', NULL, 265830, 'free', '', '', '', 'git', '', '', '', NULL, 151167076, '1
00:00:00,790 --> 00:00:02,510
If we take a look at git status, 

2
00:00:02,970 --> 00:00:04,830
we have app.js which is not 

3
00:00:04,830 --> 00:00:06,820
staged for commit. Let''s open 

4
00:00:06,820 --> 00:00:09,850
that and let''s add those changes. 

5
00:00:09,850 --> 00:00:12,410
We can do git add app.js and 

6
00:00:12,410 --> 00:00:15,150
then git commit app jsChanges. 

7
00:00:16,680 --> 00:00:19,110
If we do a git log oneline, we 

8
00:00:19,110 --> 00:00:20,490
have this commit in our local 

9
00:00:20,490 --> 00:00:23,030
tree. Let''s explore the 

10
00:00:23,030 --> 00:00:24,360
different ways we could reset 

11
00:00:24,360 --> 00:00:27,200
this if we wanted to. We can do 

12
00:00:27,560 --> 00:00:30,550
git --help reset and here''s all 

13
00:00:30,550 --> 00:00:32,440
the different options. The most 

14
00:00:32,440 --> 00:00:34,260
common flags you''ll see are soft, 

15
00:00:35,060 --> 00:00:37,190
hard or mixed, which is the 

16
00:00:37,190 --> 00:00:39,140
default. Let''s look at each of 

17
00:00:39,140 --> 00:00:41,920
those. First, we''ll do a git 

18
00:00:41,920 --> 00:00:45,170
reset --soft and we want to 

19
00:00:45,170 --> 00:00:47,570
reset to back one from the HEAD. 

20
00:00:47,730 --> 00:00:50,210
We''ll do HEAD~1 to go back one. 

21
00:00:50,620 --> 00:00:51,780
Once we do that, we can do a git 

22
00:00:51,780 --> 00:00:54,090
status. We can see now that we 

23
00:00:54,090 --> 00:00:55,440
have changes to be committed. 

24
00:00:56,380 --> 00:00:58,160
What happened is we had changes 

25
00:00:58,160 --> 00:00:59,770
that were committed and when we 

26
00:00:59,770 --> 00:01:01,710
get reset --soft, that''s like 

27
00:01:02,250 --> 00:01:04,140
taking those changes and moving 

28
00:01:04,140 --> 00:01:05,500
them back into the staging area. 

29
00:01:06,310 --> 00:01:07,410
Nothing else changed. We just 

30
00:01:07,410 --> 00:01:08,440
took our commit and moved it 

31
00:01:08,440 --> 00:01:09,770
into the staging area. If we do 

32
00:01:09,770 --> 00:01:12,160
a log oneline now, we don''t have 

33
00:01:12,160 --> 00:01:13,540
that commit anymore because we 

34
00:01:13,590 --> 00:01:15,900
undid the commit. Let''s redo 

35
00:01:15,900 --> 00:01:17,160
that commit so we can try again. 

36
00:01:17,640 --> 00:01:20,050
We''ll do take two. Now if we do 

37
00:01:20,100 --> 00:01:22,500
a git log oneline, then we have 

38
00:01:22,630 --> 00:01:24,090
take two is our latest commit. 

39
00:01:25,060 --> 00:01:28,080
Now let''s git reset --mixed HEAD. 

40
00:01:28,850 --> 00:01:30,320
We want to go back one again. 

41
00:01:30,930 --> 00:01:32,260
This is the same as just saying 

42
00:01:32,260 --> 00:01:34,000
git reset and then going back 

43
00:01:34,000 --> 00:01:35,120
one, because mixed is the 

44
00:01:35,120 --> 00:01:37,190
default. Now it says we have 

45
00:01:37,290 --> 00:01:39,330
unstaged changes. Let''s do a git 

46
00:01:39,330 --> 00:01:42,660
status. Whereas before we had 

47
00:01:42,850 --> 00:01:44,750
changes to be committed, these 

48
00:01:44,790 --> 00:01:46,300
are changes not staged for 

49
00:01:46,300 --> 00:01:48,860
commit. Mixed takes it back even 

50
00:01:48,860 --> 00:01:50,820
one step further. It removes the 

51
00:01:50,820 --> 00:01:52,890
commit, and then it unstages 

52
00:01:52,890 --> 00:01:56,050
those changes. In app.js, our 

53
00:01:56,050 --> 00:01:57,660
function is still there. We 

54
00:01:57,660 --> 00:01:59,240
still have all the code. It just 

55
00:01:59,240 --> 00:02:00,100
brought it all the way back to 

56
00:02:00,100 --> 00:02:02,150
our working directory. Let''s 

57
00:02:02,570 --> 00:02:05,170
add app.js again. We''ll commit 

58
00:02:05,170 --> 00:02:10,940
it for take three. Now if we do 

59
00:02:10,940 --> 00:02:12,940
a git log oneline, we have take 

60
00:02:12,940 --> 00:02:15,810
three. Now we''re about to do a 

61
00:02:15,810 --> 00:02:18,010
git reset --hard but watch out 

62
00:02:18,060 --> 00:02:19,410
because you almost never want to 

63
00:02:19,410 --> 00:02:20,900
do this in real life, and you''ll 

64
00:02:20,900 --> 00:02:23,160
see why. Let''s do git reset --

65
00:02:23,340 --> 00:02:26,480
hard. We want to HEAD~1, so 

66
00:02:26,480 --> 00:02:30,430
going back one. We can see in 

67
00:02:30,430 --> 00:02:31,760
our text editor, it got rid of 

68
00:02:31,760 --> 00:02:34,410
that code. If we do a git status, 

69
00:02:34,940 --> 00:02:37,190
we have nothing here except for 

70
00:02:37,190 --> 00:02:38,250
our two commits which we had 

71
00:02:38,250 --> 00:02:40,330
previously. What happened is, 

72
00:02:40,330 --> 00:02:41,860
it got rid of the commit, it 

73
00:02:41,940 --> 00:02:43,650
unstaged the changes, and then 

74
00:02:43,650 --> 00:02:44,900
also removed them from our 

75
00:02:44,900 --> 00:02:47,150
working directory. We lost the 

76
00:02:47,180 --> 00:02:48,620
work that we did. We lost that 

77
00:02:48,620 --> 00:02:50,460
function. That''s why you usually 

78
00:02:50,460 --> 00:02:51,630
don''t want to do a git reset --

79
00:02:51,705 --> 00:02:52,030
hard.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, 'If our `app.js` is modified and we run the commands

```
git add app.js
git commit -m "app js changes"
git log --oneline
```

it will commit the file locally and we can see the commit in your tree.

**Running `git --help reset` will show the different reset options.**

The common flags you will see are `--soft`, `--hard`, and `--mixed`. If you try `git reset --soft HEAD~1` to reset back one from the HEAD, it will take the previously committed `app.js` and move it back to the staging area.

We can redo this with `git commit -m "take 2"` and try a reset with `git reset --mixed HEAD~1`, the `app.js` removes the commit as well as unstages the changes.

Trying another reset, we can run `git add app.js` and `git commit -m "take 3"` to prepare our file. We can enter `git reset --hard HEAD~1`, but see that it actually causes us to lose our work. It gets rid of the commit, unstages the changes, and removes them from our directory. **Because we lose our work doing so, you don''t usually want to do a `git reset --hard`.**

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', '1849e1b7', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr/dash/scikit-learn-use-and-compare-the-different-git-reset-options-hard-soft-and-mixed-S1doVu2nr.mpd', 'https://stream.mux.com/K9jNygf00rrcBobB9AHA4FvSu00AYdSAgwONsu9yHrdhM.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (5783, 'Fix a Pull Request that has a Merge Conflict', NULL, 'If we try to make a pull request on github that has a conflict, there are a few ways to fix it.

We''re going to first back out of the pull request, and then merge `master` into our feature branch.

We''ll manage the merge conflict locally, and then do a new pull request (which will not have the conflict)', 140, NULL, '2019-11-28T10:01:32.840Z', '2020-12-29T04:46:54.542Z', 'git-fix-a-pull-request-that-has-a-merge-conflict', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB.jpg', true, NULL, NULL, NULL, true, '13-egghead-git-fix-a-pull-request-that-has-a-merge-conflict.mp4', 210, true, false, 401, '---
mp4: 15685023
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB.mp4', 'scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB', 'zduk', 'https://egghead-pipeline.s3.amazonaws.com/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB.mp3?11b929885e856fee?3dc0', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2019-12-12T02:34:04.136Z', NULL, 8388602, NULL, 7251, 0, NULL, 8386688, '23ae9d42444f420ab4bc631ec93af051', NULL, 265830, 'free', '', '', '', 'git', 'github', '', '', NULL, 157870636, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '```bash
git checkout -b conflicts_branch

# Add ''Line4'' and ''Line5''

git commit -am "add line4 and line5"
git push origin conflicts_branch

git checkout master

# Add ''Line6'' and ''Line7''`
git commit -am "add line6 and line7"
git push origin master
```

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/fix-common-git-mistakes/notes)', 'lesson', 'd3a82b30', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB/dash/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB.mpd', 'https://d2c5owlt6rorc3.cloudfront.net/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB/hls/scikit-learn-fix-a-pull-request-that-has-a-merge-conflict-HkYYci3nB.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6245, 'Create a User Interface with Vanilla JavaScript and DOM', NULL, 'You can create a simple user interface on the web using HTML and CSS. But as soon as you want to make your application interactive, you need to use JavaScript to manipulate the DOM (Document Object Model) to listen to user events and make updates to the user interface. In this lesson we''ll learn how to create a `<div>` element using raw JavaScript and browser APIs.', 92, NULL, '2020-03-11T02:25:20.683Z', '2025-12-13T00:54:53.678Z', 'react-create-a-user-interface-with-vanilla-javascript-and-dom', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI/react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI.jpg', true, NULL, 'Kent C. Dodds: [0:00] To start, we''re going to need a body. Inside of here, we''re going to have a div with an ID of root. That''s where our application is going to be mounted. Then we''ll have a script. Our type for our script is going to be text/JavaScript. Inside of here, we need to get access to this div. I''m going to make a variable called rootElement. That''ll document.getElementById root.

[0:29] Then I''m going to take this rootElement and append a child. We need to append an element to this. Let''s create that element with document.createElement. We''ll make it a div. For this element, we want the text content to be "Hello, world." Just for fun, we''ll have the element.className equal container. We''ll save that and get a refresh here. Now we have "Hello, world."

[0:56] If we look at the output, we have one thing from that Browsersync, but then here is our application at the root. That''s the div we created with the class name of container and the text content of "Hello, world." Then here''s our JavaScript code that we wrote.

[1:11] In review, to create a user interface in JavaScript, you''re going to need to have a place where you append your JavaScript-generated DOM elements. We''re going to get access to that element from the document APIs. Then we''ll create our own element. We''ll add some properties onto that element. Then we''ll append that element to our rootElement.', NULL, false, '02-egghead-react-create-a-user-interface-with-vanilla-javascript-and-dom.mp4', 11, true, false, 160, '---
mp4: 6858176
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI/react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI.mp4', 'react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI', 'zcjc', 'https://egghead-pipeline.s3.amazonaws.com/react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI/react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI.mp3?8162a6202f100b38?cb32', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:49.840Z', NULL, 8388599, NULL, 7798, 0, NULL, -8373712, 'f1aadaff37344ae0a29206f899fc5c83', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/01-document-create-element?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 386462032, '1
00:00:00,400 --> 00:00:01,600
To start, we''re going to need a 

2
00:00:01,600 --> 00:00:03,710
body. Inside of here, we''re 

3
00:00:03,710 --> 00:00:05,310
going to have a div with an ID 

4
00:00:05,310 --> 00:00:07,600
of root. That''s where our 

5
00:00:07,600 --> 00:00:08,780
application is going to be 

6
00:00:08,780 --> 00:00:10,480
mounted. Then we''ll have a 

7
00:00:10,480 --> 00:00:13,460
script. Our type for our script 

8
00:00:13,460 --> 00:00:15,500
is going to be text/JavaScript. 

9
00:00:16,600 --> 00:00:18,250
Inside of here, we need to get 

10
00:00:18,250 --> 00:00:20,470
access to this div. I''m going to 

11
00:00:20,470 --> 00:00:22,330
make a variable called 

12
00:00:22,440 --> 00:00:25,200
rootElement. That''ll document.

13
00:00:25,590 --> 00:00:29,600
getElementById root. Then I''m 

14
00:00:29,600 --> 00:00:31,310
going to take this rootElement 

15
00:00:31,440 --> 00:00:33,910
and append a child. We need to 

16
00:00:33,910 --> 00:00:36,370
append an element to this. Let''s 

17
00:00:36,370 --> 00:00:38,220
create that element with 

18
00:00:38,220 --> 00:00:41,120
document.createElement. We''ll 

19
00:00:41,120 --> 00:00:43,660
make it a div. For this element, 

20
00:00:43,780 --> 00:00:46,180
we want the text content to be "

21
00:00:46,420 --> 00:00:48,940
Hello, world." Just for fun, 

22
00:00:48,940 --> 00:00:51,110
we''ll have the element.className 

23
00:00:51,280 --> 00:00:53,460
equal container. We''ll save that 

24
00:00:53,460 --> 00:00:54,780
and get a refresh here. Now we 

25
00:00:54,780 --> 00:00:56,700
have "Hello, world." If we look 

26
00:00:56,750 --> 00:00:58,390
at the output, we have one thing 

27
00:00:58,390 --> 00:00:59,860
from that Browsersync, but then 

28
00:00:59,940 --> 00:01:02,480
here is our application at the 

29
00:01:02,480 --> 00:01:04,950
root. That''s the div we created 

30
00:01:04,950 --> 00:01:06,500
with the class name of container 

31
00:01:06,610 --> 00:01:08,350
and the text content of "Hello, 

32
00:01:08,350 --> 00:01:09,800
world." Then here''s our 

33
00:01:09,800 --> 00:01:11,090
JavaScript code that we wrote. 

34
00:01:11,640 --> 00:01:13,010
In review, to create a user 

35
00:01:13,010 --> 00:01:14,850
interface in JavaScript, you''re 

36
00:01:14,850 --> 00:01:16,160
going to need to have a place 

37
00:01:16,160 --> 00:01:17,660
where you append your JavaScript-

38
00:01:17,660 --> 00:01:19,610
generated DOM elements. We''re 

39
00:01:19,610 --> 00:01:20,970
going to get access to that 

40
00:01:20,970 --> 00:01:23,360
element from the document APIs. 

41
00:01:24,010 --> 00:01:25,330
Then we''ll create our own 

42
00:01:25,330 --> 00:01:27,150
element. We''ll add some 

43
00:01:27,150 --> 00:01:28,480
properties onto that element. 

44
00:01:28,950 --> 00:01:30,450
Then we''ll append that element 

45
00:01:30,760 --> 00:01:31,960
to our rootElement.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- To create a user interface with JavaScript you will need a place to append your JavaScript DOM (Document Object Model) elements. This will be the `root` of our application.
- Get access to that element using the document''s API.
- We create our element and add properties to it.
- Finally, appended it to the DOM element.

```html
<body>
  <div id="root"></div>
  <script type="text/javascript">
    const rootElement = document.getElementById(''root'');
    const element = document.createElement(''div'');
    element.textContent = ''Hello World'';
    element.className = ''container'';
    rootElement.appendChild(element);
  </script>
</body>
```

## Additional resource

- [Egghead - Select a DOM Element with document.getElementById](https://egghead.io/lessons/javascript-select-a-dom-element-with-document-getelementbyid)
- [MDN - `Element` Documentation](https://developer.mozilla.org/en-US/docs/Web/API/Element)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'e7759607', 'https://d2c5owlt6rorc3.cloudfront.net/react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI/dash/react-v2-01-create-a-user-interface-with-vanilla-javascript-and-dom-rJShvuIrI.mpd', 'https://stream.mux.com/NYQD3500wWaNi1XDTglL00iRKFaKvrG00J4DoUpRcX7AgA.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/courses/the-beginner-s-guide-to-react/notes/01-react-create-a-user-interface-with-vanilla-javascript-and-dom.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6252, 'Understand and Use Interpolation in JSX', NULL, 'Now that we have a good foundation on React elements, JSX, custom elements, and props, let‚Äôs write a React component that has some conditional logic in it to explore the interpolation characteristics of JSX syntax. We‚Äôll learn that interpolation is not unique to JSX and we‚Äôll learn the limitations and capabilities of interpolation in JSX. With this knowledge, we‚Äôll be more productive using JSX.', 392, NULL, '2020-03-11T02:37:08.706Z', '2025-12-13T00:54:53.678Z', 'react-understand-and-use-interpolation-in-jsx', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU/egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU.jpg', true, NULL, 'Instructor: [00:00] Here we have a React element that is a React fragment. As its children, we have a character count with the text of "hello world," and a character count with the text of "empty string." Ultimately, we want this to render the text "hello world has 11 characters," and the text "empty string has no characters."

[00:18] Let''s go ahead and implement this. We already have our function component here. We''re accepting the text prop and destructuring it right there. What we''re going to do is I want to wrap this in a div, and then we want to say the text and text has text.length characters. That''s for this first case.

[00:39] We need to interpolate some stuff here. For this text right here, I think it would be easiest to interpolate all of this as a template literal, so we''ll do that. We''ll put this inside of curly braces inside of that template literal. Then we''ll put an extra space after this. 

[00:56] For the text length, we can interpolate that right there. We''ll save this, and here we have the text "hello world has 11 characters." Let''s go ahead and put this text length in a strong element so that it''s bold. We''ll say strong, text length, strong, save that. Now it''s bolded. 

[01:16] We don''t want to say text length for zero characters. We want it to say no characters. Let''s go ahead and say our length is equal to, if there is a text length, then we''ll say the text length. Otherwise, we''ll say no. Then we can interpolate that directly into here. Now we''re getting 11 characters and no characters. 

[01:38] Thanks to this curly braces allowing interpolation, we could take this whole expression, paste it directly into there, and get rid of that variable altogether. That will work just as well. Now let''s say we don''t want "no" to be inside of this strong. We only want this strong to be wrapped around an actual number. That will require us to change things up a little bit. 

[01:58] I''ll add that right here. We''ll say text.length, so if there is a length, then we want that in a strong with text.length. Otherwise, we''ll just use the string no. With that, let''s go ahead and interpolate this character string as a string so we can have an explicit space right there. Then we''ll save this. Now we get 11 as bolded, and "no" as not bolded.

[02:23] It looks like Prettier added this extra space here. It''s not really necessary, so I''ll go ahead and remove that, and we''ll get the same result here. 

[02:30] The reason that I wanted to show you this was to demonstrate what it''s like to go between JSX land and JavaScript land and back again. Let''s follow the flow of this syntax. When we start in the function, this is JavaScript land. We can do JavaScript functions, if statements, all of that stuff. Then when we do the return and this open parentheses, that''s still JavaScript land.

[02:49] We enter JSX land by doing this open-angle bracket with the tag. Now we''re in JSX land, and we have prop syntax, we have children syntax, and then we have our closing tag, and we enter JavaScript land again. Inside of the opening and closing tag, we''re in JSX land. Once we do an opening curly brace, we''re now in JavaScript land again.

[03:12] This is a limited JavaScript land because we can only do expressions. We''re not allowed to do things like for loops, if statements, or any of that. It has to be an expression of JavaScript that evaluates to some value. A string like this or a ternary like this, those are expressions, and those are allowed within the curly braces.

[03:34] If you stop to consider what this JSX is compiled to, this should all make sense. Let''s take a look at the JavaScript code that Babel generates for us. Here we have our character counter. We''re calling react.createElement. We pass the div that''s representing this div right here. It''s not taking any props, so we get null. Then as the third argument, we get this string. 

[03:55] Let''s go ahead and write this over here. We have react.createElement div, null for the props, and then the string, the text, and so on. If we wanted to, instead of passing this string, do some sort of if statement, that wouldn''t work at all. It doesn''t make any sense to pass a statement as an argument to a function. 

[04:16] For the same reason, you can''t use statements inside of the curly braces of JSX because the curly braces basically are saying, "Hey, Babel, as you get to this part, I want you to take everything between these two curly braces and then just stick it in this argument of the createElement call." Having a good understanding of how Babel is compiling your JSX will help you use JSX more effectively.

[04:37] Once we enter that closing curly brace, we''re back in JSX land. Then we come back to this curly brace, and we''re now in JavaScript land again. We have this expression. While we''re in the middle of this JavaScript land with the ternary expression, we actually enter JSX land again, so we''re a couple layers into this.

[04:55] We start out in JavaScript. Then we go into JSX, then we go into JavaScript, then we go into JSX again, and then we go into JavaScript. We exit JavaScript, we enter JSX, we exit JSX, and we''re back into JavaScript. Then we exit JavaScript and go into JSX. This back and forth between JavaScript and JSX is really common. 

[05:20] This type of interpolation is not unique to just JSX. In fact, we have a couple other examples of interpolation right here. This file is an HTML file, and we start with HTML all right here. We''re still going through HTML until we hit the end of this opening script tag. Now we''re in JavaScript land. We also have style tags, and now we''re in CSS land. HTML has always had this type of interpolation. 

[05:46] JavaScript also has built-in interpolation when we''re talking about template literals. Right here, we have this template literal. We''re in string land. Then when we do the $ {, now we''re in JavaScript land. In fact, this has the same limitations that JSX has for its interpolations. 

[06:04] Specifically, you can''t use if statements, for loops, or switch statements in here. Whatever you put in here has to be an expression. That expression can be complex. We can put ternaries in there. We could even put an immediately invoked function expression, though I don''t advise that.

[06:20] Having a strong understanding of JSX and interpolating JavaScript expressions is key to using JSX well. It''s something that you''ll get better with over time as you''re using JSX.', NULL, false, '09-egghead-react-understand-and-use-interpolation-in-jsx.mp4', 11, true, false, 160, '---
mp4: 45356758
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU/egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU.mp4', 'egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU', 'zcjo', 'https://egghead-pipeline.s3.amazonaws.com/egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU/egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU.mp3?09bbef05ea8c72ef?8932', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:50.845Z', NULL, 8388599, NULL, 7806, 0, NULL, -7212938, '27d224150ea6488f8608cbb43f99a221', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/08-jsx-interpolation?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 391154524, '1
00:00:00,420 --> 00:00:01,880
Here we have a React element 

2
00:00:01,930 --> 00:00:04,460
that is a React fragment. As its 

3
00:00:04,460 --> 00:00:05,690
children, we have a character 

4
00:00:05,690 --> 00:00:07,310
count with the text of "hello 

5
00:00:07,310 --> 00:00:08,810
world," and a character count 

6
00:00:08,810 --> 00:00:10,290
with the text of "empty string." 

7
00:00:10,900 --> 00:00:12,060
Ultimately, we want this to 

8
00:00:12,060 --> 00:00:14,000
render the text "hello world has 

9
00:00:14,000 --> 00:00:16,060
11 characters," and the text "

10
00:00:16,210 --> 00:00:18,140
empty string has no characters." 

11
00:00:18,630 --> 00:00:20,190
Let''s go ahead and implement 

12
00:00:20,190 --> 00:00:21,130
this. We already have our 

13
00:00:21,130 --> 00:00:22,390
function component here. We''re 

14
00:00:22,390 --> 00:00:24,490
accepting the text prop and 

15
00:00:24,490 --> 00:00:25,800
destructuring it right there. 

16
00:00:26,310 --> 00:00:27,720
What we''re going to do is I want 

17
00:00:27,720 --> 00:00:29,680
to wrap this in a div, and then 

18
00:00:29,680 --> 00:00:33,180
we want to say the text and text 

19
00:00:33,930 --> 00:00:37,510
has text.length characters. 

20
00:00:37,740 --> 00:00:39,540
That''s for this first case. 

21
00:00:39,640 --> 00:00:40,720
We need to interpolate some 

22
00:00:40,720 --> 00:00:43,540
stuff here. For this text right 

23
00:00:43,540 --> 00:00:44,630
here, I think it would be 

24
00:00:44,630 --> 00:00:46,050
easiest to interpolate all of 

25
00:00:46,050 --> 00:00:48,090
this as a template literal, so 

26
00:00:48,110 --> 00:00:50,040
we''ll do that. We''ll put this 

27
00:00:50,120 --> 00:00:52,470
inside of curly braces inside of 

28
00:00:52,470 --> 00:00:53,820
that template literal. Then 

29
00:00:53,820 --> 00:00:55,340
we''ll put an extra space after 

30
00:00:55,340 --> 00:00:57,340
this. For the text length, 

31
00:00:57,670 --> 00:00:59,170
we can interpolate that right 

32
00:00:59,170 --> 00:01:01,480
there. We''ll save this, and here 

33
00:01:01,480 --> 00:01:02,740
we have the text "hello world 

34
00:01:02,740 --> 00:01:04,830
has 11 characters." Let''s go 

35
00:01:04,830 --> 00:01:06,510
ahead and put this text length 

36
00:01:06,560 --> 00:01:08,560
in a strong element so that it''s 

37
00:01:08,560 --> 00:01:11,460
bold. We''ll say strong, text 

38
00:01:11,460 --> 00:01:15,120
length, strong, save that. Now 

39
00:01:15,120 --> 00:01:17,000
it''s bolded. We don''t want 

40
00:01:17,000 --> 00:01:18,460
to say text length for zero 

41
00:01:18,460 --> 00:01:20,210
characters. We want it to say no 

42
00:01:20,210 --> 00:01:21,780
characters. Let''s go ahead and 

43
00:01:21,780 --> 00:01:24,200
say our length is equal to, if 

44
00:01:24,200 --> 00:01:26,380
there is a text length, then 

45
00:01:26,380 --> 00:01:28,100
we''ll say the text length. 

46
00:01:28,880 --> 00:01:31,770
Otherwise, we''ll say no. Then we 

47
00:01:31,770 --> 00:01:33,260
can interpolate that directly 

48
00:01:33,260 --> 00:01:36,420
into here. Now we''re getting 11 

49
00:01:36,420 --> 00:01:38,290
characters and no characters. 

50
00:01:38,530 --> 00:01:39,850
Thanks to this curly braces 

51
00:01:39,940 --> 00:01:41,280
allowing interpolation, we could 

52
00:01:41,390 --> 00:01:42,840
take this whole expression, 

53
00:01:43,220 --> 00:01:44,560
paste it directly into there, 

54
00:01:44,800 --> 00:01:45,940
and get rid of that variable 

55
00:01:45,960 --> 00:01:47,710
altogether. That will work just 

56
00:01:47,710 --> 00:01:49,350
as well. Now let''s say we don''t 

57
00:01:49,350 --> 00:01:51,190
want "no" to be inside of this 

58
00:01:51,230 --> 00:01:53,440
strong. We only want this strong 

59
00:01:53,590 --> 00:01:55,260
to be wrapped around an actual 

60
00:01:55,260 --> 00:01:57,470
number. That will require us to 

61
00:01:57,470 --> 00:01:58,640
change things up a little bit. 

62
00:01:58,640 --> 00:02:00,510
I''ll add that right here. We''ll 

63
00:02:00,510 --> 00:02:03,520
say text.length, so if there is 

64
00:02:03,620 --> 00:02:05,290
a length, then we want that in a 

65
00:02:05,290 --> 00:02:07,960
strong with text.length. 

66
00:02:08,340 --> 00:02:09,380
Otherwise, we''ll just use the 

67
00:02:09,380 --> 00:02:11,540
string no. With that, let''s go 

68
00:02:11,540 --> 00:02:12,990
ahead and interpolate this 

69
00:02:12,990 --> 00:02:15,000
character string as a string so 

70
00:02:15,000 --> 00:02:16,570
we can have an explicit space 

71
00:02:16,570 --> 00:02:17,800
right there. Then we''ll save 

72
00:02:17,800 --> 00:02:21,380
this. Now we get 11 as bolded, 

73
00:02:21,570 --> 00:02:23,710
and "no" as not bolded. It 

74
00:02:23,760 --> 00:02:25,180
looks like Prettier added this 

75
00:02:25,210 --> 00:02:26,560
extra space here. It''s not 

76
00:02:26,560 --> 00:02:27,740
really necessary, so I''ll go 

77
00:02:27,740 --> 00:02:29,530
ahead and remove that, and we''ll 

78
00:02:29,530 --> 00:02:30,460
get the same result here. 

79
00:02:30,740 --> 00:02:31,990
The reason that I wanted to show 

80
00:02:31,990 --> 00:02:33,530
you this was to demonstrate what 

81
00:02:33,530 --> 00:02:35,520
it''s like to go between JSX land 

82
00:02:35,650 --> 00:02:36,990
and JavaScript land and back 

83
00:02:36,990 --> 00:02:38,940
again. Let''s follow the flow of 

84
00:02:38,940 --> 00:02:40,430
this syntax. When we start in 

85
00:02:40,430 --> 00:02:41,950
the function, this is JavaScript 

86
00:02:41,950 --> 00:02:43,310
land. We can do JavaScript 

87
00:02:43,310 --> 00:02:44,800
functions, if statements, all of 

88
00:02:44,800 --> 00:02:46,610
that stuff. Then when we do the 

89
00:02:46,610 --> 00:02:48,400
return and this open parentheses, 

90
00:02:48,520 --> 00:02:49,700
that''s still JavaScript land. 

91
00:02:49,990 --> 00:02:52,080
We enter JSX land by doing this 

92
00:02:52,110 --> 00:02:54,150
open-angle bracket with the tag. 

93
00:02:54,550 --> 00:02:56,150
Now we''re in JSX land, and we 

94
00:02:56,150 --> 00:02:58,600
have prop syntax, we have 

95
00:02:58,620 --> 00:03:00,500
children syntax, and then we 

96
00:03:00,500 --> 00:03:02,020
have our closing tag, and we 

97
00:03:02,020 --> 00:03:03,550
enter JavaScript land again. 

98
00:03:04,140 --> 00:03:05,700
Inside of the opening and 

99
00:03:05,700 --> 00:03:07,720
closing tag, we''re in JSX land. 

100
00:03:08,130 --> 00:03:09,500
Once we do an opening curly 

101
00:03:09,500 --> 00:03:11,460
brace, we''re now in JavaScript 

102
00:03:11,460 --> 00:03:13,530
land again. This is a limited 

103
00:03:13,530 --> 00:03:14,870
JavaScript land because we can 

104
00:03:14,870 --> 00:03:16,790
only do expressions. We''re not 

105
00:03:16,790 --> 00:03:18,890
allowed to do things like for 

106
00:03:18,890 --> 00:03:21,310
loops, if statements, or any of 

107
00:03:21,310 --> 00:03:23,620
that. It has to be an expression 

108
00:03:23,680 --> 00:03:25,340
of JavaScript that evaluates to 

109
00:03:25,340 --> 00:03:27,870
some value. A string like this 

110
00:03:28,160 --> 00:03:30,600
or a ternary like this, those 

111
00:03:30,600 --> 00:03:31,970
are expressions, and those are 

112
00:03:31,970 --> 00:03:33,730
allowed within the curly braces. 

113
00:03:34,200 --> 00:03:35,550
If you stop to consider what 

114
00:03:35,550 --> 00:03:37,770
this JSX is compiled to, this 

115
00:03:37,770 --> 00:03:39,110
should all make sense. Let''s 

116
00:03:39,110 --> 00:03:40,850
take a look at the JavaScript 

117
00:03:40,850 --> 00:03:42,940
code that Babel generates for us. 

118
00:03:43,360 --> 00:03:44,450
Here we have our character 

119
00:03:44,450 --> 00:03:45,820
counter. We''re calling react.

120
00:03:45,880 --> 00:03:47,630
createElement. We pass the div 

121
00:03:47,910 --> 00:03:48,950
that''s representing this div 

122
00:03:48,950 --> 00:03:50,720
right here. It''s not taking any 

123
00:03:50,720 --> 00:03:52,640
props, so we get null. Then as 

124
00:03:52,640 --> 00:03:54,340
the third argument, we get this 

125
00:03:54,340 --> 00:03:56,160
string. Let''s go ahead and 

126
00:03:56,160 --> 00:03:57,290
write this over here. We have 

127
00:03:57,290 --> 00:04:00,720
react.createElement div, null 

128
00:04:00,720 --> 00:04:02,100
for the props, and then the 

129
00:04:02,100 --> 00:04:05,100
string, the text, and so on. If 

130
00:04:05,290 --> 00:04:06,940
we wanted to, instead of passing 

131
00:04:06,940 --> 00:04:09,190
this string, do some sort of if 

132
00:04:09,190 --> 00:04:11,190
statement, that wouldn''t work at 

133
00:04:11,190 --> 00:04:12,570
all. It doesn''t make any sense 

134
00:04:12,570 --> 00:04:13,960
to pass a statement as an 

135
00:04:13,980 --> 00:04:16,280
argument to a function. For 

136
00:04:16,280 --> 00:04:17,640
the same reason, you can''t use 

137
00:04:17,640 --> 00:04:19,160
statements inside of the curly 

138
00:04:19,160 --> 00:04:21,590
braces of JSX because the curly 

139
00:04:21,590 --> 00:04:23,030
braces basically are saying, "

140
00:04:23,030 --> 00:04:24,820
Hey, Babel, as you get to this 

141
00:04:24,820 --> 00:04:26,130
part, I want you to take 

142
00:04:26,130 --> 00:04:27,190
everything between these two 

143
00:04:27,190 --> 00:04:28,800
curly braces and then just stick 

144
00:04:28,800 --> 00:04:30,260
it in this argument of the 

145
00:04:30,260 --> 00:04:32,210
createElement call." Having a 

146
00:04:32,210 --> 00:04:33,510
good understanding of how Babel 

147
00:04:33,510 --> 00:04:35,460
is compiling your JSX will help 

148
00:04:35,460 --> 00:04:37,040
you use JSX more effectively. 

149
00:04:37,650 --> 00:04:39,250
Once we enter that closing curly 

150
00:04:39,250 --> 00:04:41,330
brace, we''re back in JSX land. 

151
00:04:41,780 --> 00:04:43,430
Then we come back to this curly 

152
00:04:43,430 --> 00:04:44,460
brace, and we''re now in 

153
00:04:44,460 --> 00:04:45,780
JavaScript land again. We have 

154
00:04:45,780 --> 00:04:47,790
this expression. While we''re in 

155
00:04:47,790 --> 00:04:49,370
the middle of this JavaScript 

156
00:04:49,370 --> 00:04:51,220
land with the ternary expression, 

157
00:04:51,530 --> 00:04:53,610
we actually enter JSX land again, 

158
00:04:53,610 --> 00:04:55,070
so we''re a couple layers into 

159
00:04:55,070 --> 00:04:56,360
this. We start out in 

160
00:04:56,360 --> 00:04:58,210
JavaScript. Then we go into JSX, 

161
00:04:59,170 --> 00:05:01,470
then we go into JavaScript, then 

162
00:05:01,470 --> 00:05:03,270
we go into JSX again, and then 

163
00:05:03,270 --> 00:05:05,850
we go into JavaScript. We exit 

164
00:05:05,850 --> 00:05:09,650
JavaScript, we enter JSX, we 

165
00:05:09,650 --> 00:05:11,900
exit JSX, and we''re back into 

166
00:05:11,900 --> 00:05:13,850
JavaScript. Then we exit 

167
00:05:13,850 --> 00:05:16,100
JavaScript and go into JSX. This 

168
00:05:16,100 --> 00:05:17,090
back and forth between 

169
00:05:17,090 --> 00:05:19,050
JavaScript and JSX is really 

170
00:05:19,050 --> 00:05:20,890
common. This type of 

171
00:05:20,890 --> 00:05:22,920
interpolation is not unique to 

172
00:05:22,920 --> 00:05:25,120
just JSX. In fact, we have a 

173
00:05:25,120 --> 00:05:26,540
couple other examples of 

174
00:05:26,540 --> 00:05:28,640
interpolation right here. This 

175
00:05:28,640 --> 00:05:30,430
file is an HTML file, and we 

176
00:05:30,430 --> 00:05:32,300
start with HTML all right here. 

177
00:05:32,750 --> 00:05:34,120
We''re still going through HTML 

178
00:05:34,120 --> 00:05:35,470
until we hit the end of this 

179
00:05:35,510 --> 00:05:37,470
opening script tag. Now we''re in 

180
00:05:37,470 --> 00:05:39,470
JavaScript land. We also have 

181
00:05:39,470 --> 00:05:42,110
style tags, and now we''re in CSS 

182
00:05:42,490 --> 00:05:44,860
land. HTML has always had this 

183
00:05:44,860 --> 00:05:45,920
type of interpolation. 

184
00:05:46,140 --> 00:05:47,610
JavaScript also has built-in 

185
00:05:47,640 --> 00:05:49,250
interpolation when we''re talking 

186
00:05:49,250 --> 00:05:50,820
about template literals. Right 

187
00:05:50,820 --> 00:05:51,980
here, we have this template 

188
00:05:51,980 --> 00:05:53,750
literal. We''re in string land. 

189
00:05:54,030 --> 00:05:57,080
Then when we do the $ {, now 

190
00:05:57,080 --> 00:05:58,760
we''re in JavaScript land. In 

191
00:05:58,760 --> 00:06:00,520
fact, this has the same 

192
00:06:00,520 --> 00:06:03,130
limitations that JSX has for its 

193
00:06:03,170 --> 00:06:05,000
interpolations. Specifically, 

194
00:06:05,430 --> 00:06:07,600
you can''t use if statements, for 

195
00:06:07,600 --> 00:06:09,250
loops, or switch statements in 

196
00:06:09,250 --> 00:06:10,810
here. Whatever you put in here 

197
00:06:10,810 --> 00:06:12,790
has to be an expression. That 

198
00:06:12,790 --> 00:06:14,300
expression can be complex. We 

199
00:06:14,300 --> 00:06:16,100
can put ternaries in there. We 

200
00:06:16,100 --> 00:06:17,250
could even put an immediately 

201
00:06:17,250 --> 00:06:18,530
invoked function expression, 

202
00:06:18,730 --> 00:06:19,690
though I don''t advise that. 

203
00:06:20,040 --> 00:06:21,880
Having a strong understanding of 

204
00:06:21,880 --> 00:06:24,310
JSX and interpolating JavaScript 

205
00:06:24,310 --> 00:06:26,730
expressions is key to using JSX 

206
00:06:27,100 --> 00:06:28,460
well. It''s something that you''ll 

207
00:06:28,460 --> 00:06:29,960
get better with over time as 

208
00:06:29,960 --> 00:06:30,830
you''re using JSX.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- **Template literals** are string literals allowing embedded expressions. You can use multi-line strings and string interpolation features with them.

- Let‚Äôs write a React component that has some conditional logic in it to explore the interpolation characteristics of JSX syntax:

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function CharacterCount({ text }) {
      // this is JavaScript land
      return (
        // inside of the brackets it''s React land
        <div>
          {/* this is all JavaScript land  */}
          {`The text "${text}" has `}
          {/* this is a conditional (ternary) operator */}
          {/* This operator is frequently used as a shortcut for the if statement */}
          {text.length ? <strong>{text.length}</strong> : ''No''}
          {'' characters''}
        </div>
        // this is JavaScript land
      );
    }

    const element = (
      <>
        <CharacterCount text="Hello World" />
        <CharacterCount text="" />
      </>
    );

    ReactDOM.render(element, document.getElementById(''root''));
  </script>
</body>
```

- Inside the curly braces, it''s _JavaScript land_, but it''s limited to only expressions.
- Interpolation is not unique to React or JavaScript, we also see it in HTML when we use `script` tags or `style` tags.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function CharacterCount({ text }) {
      return (
        <div>
          {/* this is all JavaScript land  */}
          {/* but it''s limited to only expressions that evaluate to some value */}
          {/* no loops, switch, or if statements  */}
          {`The text "${text}" has `}
          {text.length ? <strong>{text.length}</strong> : ''No''}
          {'' characters''}
        </div>
      );
    }

    const element = (
      <>
        <CharacterCount text="Hello World" />
        <CharacterCount text="" />
      </>
    );

    ReactDOM.render(element, document.getElementById(''root''));
  </script>
</body>
```

## Additional resource

- [MDN - Template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)
- [Conditional (ternary) operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)
- [What is JSX? - Kent''s Blog](https://kentcdodds.com/blog/what-is-jsx/)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'd4ce2c10', 'https://d2c5owlt6rorc3.cloudfront.net/egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU/dash/egghead-v2-08-understand-and-use-interpolation-in-jsx-HkkplFIHU.mpd', 'https://stream.mux.com/XVt5eA3zvbYc01KeU6LVQvcvEzBF4X5yky4bJdzQEol00.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/08-react-understand-and-use-interpolation-in-jsx.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6269, 'Make HTTP Requests with React', NULL, 'Most useful React applications involve interacting with a server to load and persist data. To do this on the web, we use HTTP requests with [the browser‚Äôs built-in fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) (or you may use some other open source library that‚Äôs built on top of this API). HTTP requests like this are inherently asynchronous in nature and they‚Äôre also side-effects so we‚Äôll need to manage not only starting the request, but also what we should show the user while the request is ‚Äúin flight.‚Äù

In this lesson we‚Äôll use a public GraphQL server that serves up pokemon data to load information for a given pokemon name. We‚Äôll learn how to fetch that data inside a `React.useEffect` callback and display the results when the request completes.', 243, NULL, '2020-03-11T02:44:36.365Z', '2025-12-13T00:54:53.678Z', 'react-make-http-requests-with-react-e06e2e96', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-make-http-requests-with-react-5d541462-ta5pliYg0/react-make-http-requests-with-react-5d541462-ta5pliYg0.jpg', true, NULL, 'Instructor: [0:00] Here we have an app that''s managing a Pok√©mon name state, and then we''re rendering out a form, and we''re rendering an input. Every time we submit our form, we''re going to update the Pok√©mon name to whatever the user typed in the input.

[0:13] When this is re-rendered, we''re going to render the Pok√©mon info with that Pok√©mon name, and then the Pok√©mon info should render our information based on that Pok√©mon. If we type in Pikachu, then we should request in formation for Pikachu.

[0:31] We need to get that information by fetching it from a server. We have this helper function here called fetch Pok√©mon that creates a Pok√©mon GraphQL query. Then we''re using Window.fetch to fetch this public API that has Pok√©mon information.

[0:47] We''re making a post. We We have our proper headers to accept JSON then we serialize and we specify our body is a JSON stringified version of our query. The variables for our query which is the name of the Pok√©mon.

[1:03] Then when that promise resolves we''re going to take the response parse it as JSON and when that''s done, we''ll get that response object and pluck the Pok√©mon off of the data in the response. We can call this function to get the information for this Pok√©mon that we get as a prop but our render method here has to be synchronous.

[1:27] Our fetchPok√©mon function is asynchronous. Making HTTP request like this is a side effect so we''re going to use the React useEffect hook. We''ll say React.useEffect and the first thing that I want to say here is if there''s no pok√©monName, they haven''t entered a Pok√©mon name yet or they submitted an empty one then we''ll simply return. We don''t need to make a request for that.

[1:52] Otherwise, we''ll call that fetchPok√©mon with the pok√©monName and then in our success handler for this promise, we''ll get the Pok√©mon data and we can set some state. Let''s go ahead and manage some state for this.

[2:07] We''ll have use state for Pok√©mon and we''ll call setPok√©mon, and we''ll initialize this to null. Down here, let''s rename this from Pok√©mon to pok√©monData. Then we can call setPok√©mon with the pok√©monData.

[2:25] Down here we can say if no Pok√©mon then we''ll return just a ... to indicate the reloading. Otherwise we know we have the pok√©monData and so, we can render it right here. Let''s JSON stringify this. I''ll put that in a pre so we get the right spacing. Say, JSON stringify Pok√©mon, null, two to get nice spacing for JSON.

[2:51] We''ll save this. We have a ... right here. Because there''s no Pok√©mon then we can enter in Pikachu, submit that, and we get Pikachu''s information.

[3:01] In review, to do anything asynchronous, that is a side effect that needs to happen inside a useEffect callback. For our Pok√©mon info, we accept that pok√©monName and in our callback, if there''s no pok√©monName specified, then we''ll simply return. Otherwise, we''ll fetch the pok√©monData with that pok√©monName.

[3:19] Then when we get that data back, we''ll update our own state to have that data that will trigger re-rendering of Pok√©mon info. We can return the stringified version of that pok√©monData. We could apply an optimization here to make sure that this useEffect only runs when we want it to by putting pok√©monName in here.

[3:39] That way, this useEffect will only rerun when the pok√©monName changes. We could also add an if statement here for if there''s no pok√©monName supplied, then we could say return, submit a Pok√©mon. With that we get submit a Pok√©mon then we can type in something like Pikachu. Submit that and we''ll get Pikachu''s information loaded up.', NULL, false, '26-egghead-react-make-http-requests-with-react-d69dfa09.mp4', 11, true, false, 160, '---
mp4: 26745545
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-make-http-requests-with-react-5d541462-ta5pliYg0/react-make-http-requests-with-react-5d541462-ta5pliYg0.mp4', 'react-make-http-requests-with-react-5d541462-ta5pliYg0', 'zcKT', 'https://egghead-pipeline.s3.amazonaws.com/react-make-http-requests-with-react-5d541462-ta5pliYg0/react-make-http-requests-with-react-5d541462-ta5pliYg0.mp3?e6c437ff85b7ae5a?3d97', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:51.690Z', NULL, 8388599, NULL, 8176, 0, NULL, -762599, '89be3a4ea6624f3bb38f64db76ef1870', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/25-http?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 402550576, '1
00:00:00,120 --> 00:00:01,340
Here we have an app that''s 

2
00:00:01,340 --> 00:00:03,220
managing a Pok√©mon name state, 

3
00:00:03,610 --> 00:00:04,630
and then we''re rendering out a 

4
00:00:04,630 --> 00:00:06,660
form, and we''re rendering an 

5
00:00:06,700 --> 00:00:08,830
input. Every time we submit our 

6
00:00:08,830 --> 00:00:10,060
form, we''re going to update the 

7
00:00:10,060 --> 00:00:11,400
Pok√©mon name to whatever the 

8
00:00:11,400 --> 00:00:13,920
user typed in the input. When 

9
00:00:13,920 --> 00:00:15,560
this is re-rendered, we''re going 

10
00:00:15,560 --> 00:00:17,530
to render the Pok√©mon info with 

11
00:00:17,530 --> 00:00:19,590
that Pok√©mon name, and then the 

12
00:00:19,590 --> 00:00:21,710
Pok√©mon info should render our 

13
00:00:21,740 --> 00:00:23,200
information based on that Pok√©

14
00:00:23,200 --> 00:00:28,040
mon. If we type in Pikachu, then 

15
00:00:28,040 --> 00:00:29,630
we should request in formation 

16
00:00:29,770 --> 00:00:31,840
for Pikachu. We need to get 

17
00:00:31,840 --> 00:00:33,480
that information by fetching it 

18
00:00:33,480 --> 00:00:35,380
from a server. We have this 

19
00:00:35,380 --> 00:00:36,620
helper function here called 

20
00:00:36,620 --> 00:00:39,010
fetch Pok√©mon that creates a Pok√©

21
00:00:39,010 --> 00:00:40,970
mon GraphQL query. Then we''re 

22
00:00:40,970 --> 00:00:43,540
using Window.fetch to fetch this 

23
00:00:43,720 --> 00:00:46,270
public API that has Pok√©mon 

24
00:00:46,270 --> 00:00:47,770
information. We''re making a 

25
00:00:47,770 --> 00:00:49,870
post. We We have our proper 

26
00:00:49,870 --> 00:00:52,070
headers to accept JSON then we 

27
00:00:52,070 --> 00:00:54,370
serialize and we specify our 

28
00:00:54,370 --> 00:00:56,920
body is a JSON stringified 

29
00:00:57,250 --> 00:00:59,700
version of our query. The 

30
00:00:59,770 --> 00:01:01,620
variables for our query which is 

31
00:01:01,620 --> 00:01:04,170
the name of the Pok√©mon. Then 

32
00:01:04,340 --> 00:01:05,800
when that promise resolves we''re 

33
00:01:05,800 --> 00:01:08,980
going to take the response parse 

34
00:01:08,980 --> 00:01:11,250
it as JSON and when that''s done, 

35
00:01:11,350 --> 00:01:12,970
we''ll get that response object 

36
00:01:13,440 --> 00:01:15,360
and pluck the Pok√©mon off of the 

37
00:01:15,360 --> 00:01:17,510
data in the response. We can 

38
00:01:17,510 --> 00:01:19,080
call this function to get the 

39
00:01:19,080 --> 00:01:21,320
information for this Pok√©mon 

40
00:01:21,530 --> 00:01:24,180
that we get as a prop but our 

41
00:01:24,180 --> 00:01:25,770
render method here has to be 

42
00:01:25,770 --> 00:01:28,580
synchronous. Our fetchPok√©mon 

43
00:01:28,580 --> 00:01:31,290
function is asynchronous. Making 

44
00:01:31,630 --> 00:01:33,580
HTTP request like this is a side 

45
00:01:33,580 --> 00:01:35,170
effect so we''re going to use the 

46
00:01:35,170 --> 00:01:37,520
React useEffect hook. We''ll say 

47
00:01:37,520 --> 00:01:41,620
React.useEffect and the first 

48
00:01:41,620 --> 00:01:43,040
thing that I want to say here is 

49
00:01:43,110 --> 00:01:45,310
if there''s no pok√©monName, they 

50
00:01:45,830 --> 00:01:47,220
haven''t entered a Pok√©mon name 

51
00:01:47,220 --> 00:01:48,610
yet or they submitted an empty 

52
00:01:48,610 --> 00:01:50,570
one then we''ll simply return. We 

53
00:01:50,570 --> 00:01:51,750
don''t need to make a request for 

54
00:01:51,750 --> 00:01:53,540
that. Otherwise, we''ll call 

55
00:01:53,540 --> 00:01:56,490
that fetchPok√©mon with the pok√©

56
00:01:56,490 --> 00:02:00,020
monName and then in our success 

57
00:02:00,020 --> 00:02:01,670
handler for this promise, we''ll 

58
00:02:01,670 --> 00:02:05,060
get the Pok√©mon data and we can 

59
00:02:05,060 --> 00:02:06,370
set some state. Let''s go ahead 

60
00:02:06,370 --> 00:02:07,670
and manage some state for this. 

61
00:02:07,950 --> 00:02:10,550
We''ll have use state for Pok√©mon 

62
00:02:10,910 --> 00:02:12,970
and we''ll call setPok√©mon, and 

63
00:02:13,260 --> 00:02:14,770
we''ll initialize this to null. 

64
00:02:15,340 --> 00:02:17,310
Down here, let''s rename this 

65
00:02:17,310 --> 00:02:19,510
from Pok√©mon to pok√©monData. 

66
00:02:20,410 --> 00:02:23,150
Then we can call setPok√©mon with 

67
00:02:23,150 --> 00:02:26,180
the pok√©monData. Down here we 

68
00:02:26,180 --> 00:02:29,550
can say if no Pok√©mon then we''ll 

69
00:02:29,550 --> 00:02:31,640
return just a ... to indicate 

70
00:02:31,640 --> 00:02:33,570
the reloading. Otherwise we know 

71
00:02:33,570 --> 00:02:35,450
we have the pok√©monData and so, 

72
00:02:35,450 --> 00:02:36,700
we can render it right here. 

73
00:02:38,400 --> 00:02:40,770
Let''s JSON stringify this. I''ll 

74
00:02:40,770 --> 00:02:42,190
put that in a pre so we get the 

75
00:02:42,190 --> 00:02:44,200
right spacing. Say, JSON 

76
00:02:44,200 --> 00:02:49,240
stringify Pok√©mon, null, two to 

77
00:02:49,240 --> 00:02:51,170
get nice spacing for JSON. 

78
00:02:51,810 --> 00:02:53,680
We''ll save this. We have a ... 

79
00:02:54,290 --> 00:02:55,850
right here. Because there''s no 

80
00:02:55,850 --> 00:02:57,670
Pok√©mon then we can enter in 

81
00:02:57,670 --> 00:02:59,740
Pikachu, submit that, and we get 

82
00:02:59,740 --> 00:03:01,670
Pikachu''s information. In 

83
00:03:01,670 --> 00:03:02,910
review, to do anything 

84
00:03:02,910 --> 00:03:04,220
asynchronous, that is a side 

85
00:03:04,220 --> 00:03:05,490
effect that needs to happen 

86
00:03:05,530 --> 00:03:08,320
inside a useEffect callback. For 

87
00:03:08,370 --> 00:03:10,160
our Pok√©mon info, we accept that 

88
00:03:10,160 --> 00:03:12,320
pok√©monName and in our callback, 

89
00:03:12,470 --> 00:03:13,700
if there''s no pok√©monName 

90
00:03:13,700 --> 00:03:15,080
specified, then we''ll simply 

91
00:03:15,080 --> 00:03:17,000
return. Otherwise, we''ll fetch 

92
00:03:17,000 --> 00:03:18,690
the pok√©monData with that pok√©

93
00:03:18,690 --> 00:03:20,720
monName. Then when we get that 

94
00:03:20,720 --> 00:03:22,330
data back, we''ll update our own 

95
00:03:22,330 --> 00:03:24,600
state to have that data that 

96
00:03:24,600 --> 00:03:25,890
will trigger re-rendering of Pok√©

97
00:03:25,890 --> 00:03:28,890
mon info. We can return the 

98
00:03:28,890 --> 00:03:30,730
stringified version of that pok√©

99
00:03:30,730 --> 00:03:32,730
monData. We could apply an 

100
00:03:32,730 --> 00:03:34,190
optimization here to make sure 

101
00:03:34,190 --> 00:03:35,690
that this useEffect only runs 

102
00:03:35,690 --> 00:03:37,620
when we want it to by putting 

103
00:03:37,620 --> 00:03:40,520
pok√©monName in here. That way, 

104
00:03:41,000 --> 00:03:42,630
this useEffect will only rerun 

105
00:03:42,630 --> 00:03:45,160
when the pok√©monName changes. We 

106
00:03:45,160 --> 00:03:47,100
could also add an if statement 

107
00:03:47,100 --> 00:03:48,890
here for if there''s no pok√©

108
00:03:48,890 --> 00:03:51,600
monName supplied, then we could 

109
00:03:51,600 --> 00:03:54,530
say return, submit a Pok√©mon. 

110
00:03:56,160 --> 00:03:57,500
With that we get submit a Pok√©

111
00:03:57,500 --> 00:03:59,160
mon then we can type in 

112
00:03:59,160 --> 00:04:00,510
something like Pikachu. Submit 

113
00:04:00,510 --> 00:04:02,390
that and we''ll get Pikachu''s 

114
00:04:02,390 --> 00:04:03,550
information loaded up.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Most useful React applications involve interacting with a server to load and persist data. To do this on the web, we use **HTTP requests** with the browser‚Äôs built-in fetch API.
- HTTP requests like this are inherently asynchronous in nature and **they‚Äôre also side-effects** so we‚Äôll need to manage not only starting the request, but also what we should show the user while the request is ‚Äúin flight.‚Äù

- In this lesson we‚Äôll use a public **GraphQL server**that serves up pokemon data to load information for a given pokemon name. We‚Äôll learn how to fetch that data inside a React.useEffect callback and display the results when the request completes.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function PokemonInfo({ pokemonName }) {
      const [pokemon, setPokemon] = React.useState(null);

      React.useEffect(() => {
        if (!pokemonName) {
          return;
        }
        // Calling fetchPokemon and setting state for the data
        fetchPokemon(pokemonName).then(pokemonData => {
          setPokemon(pokemonData);
        });
      }, [pokemonName]);

      if (!pokemonName) {
        return ''Submit a pokemon'';
      }

      if (!pokemon) {
        return ''...'';
      }
      // The effect hook called useEffect is used to fetch the data with axios from the API
      // and to set the data in the local state of the component with the state hook''s update function.
      // The promise resolving happens with async/await.

      return <pre>{JSON.stringify(pokemon, null, 2)}</pre>;
    }

    function App() {
      const [pokemonName, setPokemonName] = React.useState('''');

      function handleSubmit(event) {
        event.preventDefault();
        setPokemonName(event.target.elements.pokemonName.value);
      }

      return (
        <div>
          <form onSubmit={handleSubmit}>
            <label htmlFor="pokemonName">Pokemon Name</label>
            <div>
              <input id="pokemonName" />
              <button type="submit">Submit</button>
            </div>
          </form>
          <hr />
          <PokemonInfo pokemonName={pokemonName} />
        </div>
      );
    }
    // GraphQL server that serves up pokemon data to load information for a given pokemon name
    function fetchPokemon(name) {
      const pokemonQuery = `
        query ($name: String) {
          pokemon(name: $name) {
            id
            number
            name
            attacks {
              special {
                name
                type
                damage
              }
            }
          }
        }
      `;

      // The Fetch API is a web standard built into most modern browsers to let us make HTTP requests to the server.
      // Using the Fetch API starts with calling the fetch() function, which allows us to make HTTP requests with the standard HTTP verbs: GET, POST, PUT, PATCH and DELETE.
      // The fetch function returns a promise which resolves when the request completes.
      // Making fetch call is a side-effect, so we are going to use the useEffect Hook
      return window
        .fetch(''https://graphql-pokemon.now.sh'', {
          // learn more about this API here: https://graphql-pokemon.now.sh/
          method: ''POST'',
          headers: {
            ''content-type'': ''application/json;charset=UTF-8''
          },
          body: JSON.stringify({
            query: pokemonQuery,
            variables: { name }
          })
        })
        .then(r => r.json())
        .then(response => response.data.pokemon);
    }

    ReactDOM.render(<App />, document.getElementById(''root''));
  </script>
</body>
```

## Additional resource

- [egghead courses - GraphQL](https://egghead.io/browse/tools/graphql)
- [React Docs - AJAX and APIs](https://reactjs.org/docs/faq-ajax.html)
- [Kent''s Livestream - Testing axios](https://www.youtube.com/watch?v=YJKtzS1jGsI)
- [MDN - An overview of HTTP](https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'e06e2e96', 'https://d2c5owlt6rorc3.cloudfront.net/react-make-http-requests-with-react-5d541462-ta5pliYg0/dash/react-make-http-requests-with-react-5d541462-ta5pliYg0.mpd', 'https://stream.mux.com/Qp00alQSb5OqY5fEST61oipqGTWOSyWCu001PSdwQjOEY.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginners-guide-to-react/notes/25-react-make-http-requests-with-react-2fc53967.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6270, 'Handle HTTP Errors with React', NULL, 'Unfortunately, sometimes a server request fails and we need to display a helpful error message to the user. In this lesson we‚Äôll handle a promise rejection so we can collect that error information, and we‚Äôll also learn how we can best display manage the state of our request so we have a deterministic render method to ensure we always show the user the proper information based on the current state of our React component.

A common mistake people make is to create a state variable called `isLoading` and set that to `true` or `false`. Instead, we‚Äôll be using a `status` variable which can be set to `idle`, `pending`, `resolved`, or `rejected`. You can learn more about why this is important from [Stop using isLoading booleans](https://kentcdodds.com/blog/stop-using-isloading-booleans).', 241, NULL, '2020-03-11T02:44:55.683Z', '2025-12-13T00:54:53.678Z', 'react-handle-http-errors-with-react', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-handle-http-errors-with-react--66NMfZU3/react-handle-http-errors-with-react--66NMfZU3.jpg', true, NULL, 'Instructor: [0:00] Now what would happen if there was some sort of server error or maybe we made the request incorrectly? Let''s take a look here.

[0:06] Let''s go down to our query. We''ll make a typo. We''ll say, "Nam" instead of "Name." We''ll save that.

[0:12] When I type in here, I can say, "Mew" and then submit. As a user, I''m just going to see this "...". That''s not going to be useful at all. Let''s see what''s going on here in our developer tools. I''ll go ahead and refresh.

[0:26] We''ll type Mew again. Let''s clear out our network tab. Then we hit submit. We''re going to get a network error indicating that we cannot query field nam on type Pok√©mon. It gives a suggestion for, "Did you mean name?"

[0:41] The specific error is beside the point. We just need to show the user something a little bit more useful than leaving them in a loading state forever.

[0:49] Let''s come back up here before we fix our code. Let''s add some state for the error state. We''ll say setError. We''ll initialize that to null. Then we''ll say if there''s an error, then we''ll return, "Oh, no..."

[1:06] In a real application, maybe you''d be a little bit more helpful than that. Let''s add an error handler here as a second argument to our then call. This will be our error data.

[1:17] We''ll say setError with the error data. Then we could submit that. We''ll type the Pok√©mon name again. We see, "Oh, no." Now we need to try again.

[1:29] The problem that we''ll face now is that if the user does try again and the server is successful, the way that we have our code structured is not going to work with that. What I''m going to do is I''m going to add a new state here for status.

[1:42] We''ll have setStatus. We''ll initialize that status to idle, meaning right now the Pokemon info is not doing anything useful.

[1:51] Then we can say that the idle status is when we want to render submitAPokemon. If the status is idle, then we''ll say, "submitAPokemon." When we start fetching a new Pok√©mon, then we can say, "setStatus pending."

[2:10] Then we can have this represent if the status is pending, then we want to return a "..." to indicate to the user that we''re pending. When we have a successful request, then we can say, "setStatus to resolved."

[2:26] If we''re resolved, then we want to return the Pok√©mon data. If the status is resolved, then we''ll return the Pok√©mon data in a pre tag here.

[2:38] Then if there''s an error, we''ll say, "setStatus rejected." Down here, we''ll say, "Status is rejected." Then we''ll render, "Oh, no."

[2:50] Now our render method is very predictable. We always know when our component is going to render what. If I try to type in Mew again, we''re going to see, "Submit a Pok√©mon first."

[3:01] We''ll see "..." while it''s pending. Then we''ll see "Oh, no." when it''s been rejected.

[3:06] We''ll fix our typo right here. We''ll save that. Now we see "Submit a Pok√©mon" because we''re idle. We''ll type in Mew. Hit submit.

[3:15] We get that "..." Then we see Mew''s details. If we try another Pok√©mon, then we''ll see a "..." We''ll see that Pok√©mon''s details.

[3:25] Let''s go ahead and review. We added some error handling by creating some error state management. We added an error handler to our promise chain. If we get some error data, then we''re going to set that error data so that we can render something useful to the user indicating that there''s been a problem.

[3:42] To avoid some state bugs, we added a status state so that we could start out with idle. When we start fetching the Pok√©mon, we can set it to pending. When we get the Pok√©mon, we can set it to resolved, or if there''s a failure in getting the Pok√©mon, then we set it to rejected. That helps us to avoid bugs.', NULL, false, '27-egghead-react-handle-http-errors-with-react.mp4', 11, true, false, 160, '---
mp4: 23490314
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-handle-http-errors-with-react--66NMfZU3/react-handle-http-errors-with-react--66NMfZU3.mp4', 'react-handle-http-errors-with-react--66NMfZU3', 'zcKV', 'https://egghead-pipeline.s3.amazonaws.com/react-handle-http-errors-with-react--66NMfZU3/react-handle-http-errors-with-react--66NMfZU3.mp3?32102cdb336255a3?6090', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:52.108Z', NULL, 8388599, NULL, 8177, 0, NULL, -381299, '8bec226a0e814fcba69b7af26c6672b4', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/26-http-errors?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 403220932, '1
00:00:00,150 --> 00:00:01,250
Now what would happen if there 

2
00:00:01,250 --> 00:00:02,930
was some sort of server error or 

3
00:00:02,930 --> 00:00:04,170
maybe we made the request 

4
00:00:04,170 --> 00:00:05,740
incorrectly? Let''s take a look 

5
00:00:05,740 --> 00:00:06,880
here. Let''s go down to our 

6
00:00:06,880 --> 00:00:09,040
query. We''ll make a typo. We''ll 

7
00:00:09,040 --> 00:00:10,830
say, "Nam" instead of "Name." 

8
00:00:11,270 --> 00:00:13,690
We''ll save that. When I type in 

9
00:00:13,690 --> 00:00:15,780
here, I can say, "Mew" and then 

10
00:00:15,780 --> 00:00:18,420
submit. As a user, I''m just 

11
00:00:18,420 --> 00:00:19,370
going to see this "...". That''s 

12
00:00:19,370 --> 00:00:21,060
not going to be useful at all. 

13
00:00:21,440 --> 00:00:22,740
Let''s see what''s going on here 

14
00:00:22,800 --> 00:00:24,850
in our developer tools. I''ll go 

15
00:00:24,850 --> 00:00:26,400
ahead and refresh. We''ll type 

16
00:00:26,400 --> 00:00:28,550
Mew again. Let''s clear out our 

17
00:00:28,550 --> 00:00:30,180
network tab. Then we hit submit. 

18
00:00:30,860 --> 00:00:32,420
We''re going to get a network 

19
00:00:32,420 --> 00:00:34,960
error indicating that we cannot 

20
00:00:34,960 --> 00:00:37,590
query field nam on type Pok√©mon. 

21
00:00:38,010 --> 00:00:39,800
It gives a suggestion for, "Did 

22
00:00:39,800 --> 00:00:41,950
you mean name?" The specific 

23
00:00:41,950 --> 00:00:43,850
error is beside the point. We 

24
00:00:43,850 --> 00:00:45,160
just need to show the user 

25
00:00:45,160 --> 00:00:46,100
something a little bit more 

26
00:00:46,100 --> 00:00:47,840
useful than leaving them in a 

27
00:00:47,840 --> 00:00:49,860
loading state forever. Let''s 

28
00:00:49,860 --> 00:00:51,300
come back up here before we fix 

29
00:00:51,300 --> 00:00:53,700
our code. Let''s add some state 

30
00:00:53,850 --> 00:00:56,240
for the error state. We''ll say 

31
00:00:56,240 --> 00:00:58,160
setError. We''ll initialize that 

32
00:00:58,160 --> 00:01:01,050
to null. Then we''ll say if 

33
00:01:01,370 --> 00:01:03,650
there''s an error, then we''ll 

34
00:01:03,650 --> 00:01:07,330
return, "Oh, no..." In a real 

35
00:01:07,330 --> 00:01:08,430
application, maybe you''d be a 

36
00:01:08,430 --> 00:01:09,420
little bit more helpful than 

37
00:01:09,420 --> 00:01:11,770
that. Let''s add an error handler 

38
00:01:11,770 --> 00:01:13,710
here as a second argument to our 

39
00:01:13,710 --> 00:01:15,540
then call. This will be our 

40
00:01:15,630 --> 00:01:19,440
error data. We''ll say setError 

41
00:01:19,540 --> 00:01:22,620
with the error data. Then we 

42
00:01:22,620 --> 00:01:25,010
could submit that. We''ll type 

43
00:01:25,010 --> 00:01:27,080
the Pok√©mon name again. We see, "

44
00:01:27,150 --> 00:01:29,080
Oh, no." Now we need to try 

45
00:01:29,080 --> 00:01:30,150
again. The problem that we''ll 

46
00:01:30,150 --> 00:01:31,580
face now is that if the user 

47
00:01:31,580 --> 00:01:33,150
does try again and the server is 

48
00:01:33,150 --> 00:01:34,770
successful, the way that we have 

49
00:01:34,770 --> 00:01:36,610
our code structured is not going 

50
00:01:36,610 --> 00:01:37,900
to work with that. What I''m 

51
00:01:37,900 --> 00:01:40,310
going to do is I''m going to add 

52
00:01:40,410 --> 00:01:42,720
a new state here for status. 

53
00:01:42,860 --> 00:01:45,210
We''ll have setStatus. We''ll 

54
00:01:45,210 --> 00:01:47,270
initialize that status to idle, 

55
00:01:47,580 --> 00:01:49,040
meaning right now the Pokemon 

56
00:01:49,070 --> 00:01:50,700
info is not doing anything 

57
00:01:50,700 --> 00:01:53,540
useful. Then we can say that 

58
00:01:53,540 --> 00:01:55,230
the idle status is when we want 

59
00:01:55,230 --> 00:01:57,910
to render submitAPokemon. If the 

60
00:01:57,910 --> 00:02:01,000
status is idle, then we''ll say, "

61
00:02:01,000 --> 00:02:04,300
submitAPokemon." When we start 

62
00:02:04,300 --> 00:02:06,000
fetching a new Pok√©mon, then we 

63
00:02:06,000 --> 00:02:09,110
can say, "setStatus pending." 

64
00:02:10,560 --> 00:02:12,730
Then we can have this represent 

65
00:02:12,800 --> 00:02:15,830
if the status is pending, then 

66
00:02:15,830 --> 00:02:17,510
we want to return a "..." to 

67
00:02:17,850 --> 00:02:19,000
indicate to the user that we''re 

68
00:02:19,000 --> 00:02:20,360
pending. When we have a 

69
00:02:20,360 --> 00:02:21,840
successful request, then we can 

70
00:02:21,840 --> 00:02:24,500
say, "setStatus to resolved." 

71
00:02:26,500 --> 00:02:27,970
If we''re resolved, then we want 

72
00:02:27,970 --> 00:02:30,850
to return the Pok√©mon data. If 

73
00:02:30,880 --> 00:02:33,540
the status is resolved, then 

74
00:02:33,540 --> 00:02:36,310
we''ll return the Pok√©mon data in 

75
00:02:36,310 --> 00:02:38,960
a pre tag here. Then if there''s 

76
00:02:38,960 --> 00:02:41,120
an error, we''ll say, "setStatus 

77
00:02:41,390 --> 00:02:44,760
rejected." Down here, we''ll say, "

78
00:02:44,760 --> 00:02:47,780
Status is rejected." Then we''ll 

79
00:02:47,780 --> 00:02:50,820
render, "Oh, no." Now our 

80
00:02:50,820 --> 00:02:52,090
render method is very 

81
00:02:52,090 --> 00:02:54,650
predictable. We always know when 

82
00:02:54,650 --> 00:02:56,010
our component is going to render 

83
00:02:56,010 --> 00:02:58,560
what. If I try to type in Mew 

84
00:02:58,560 --> 00:03:00,100
again, we''re going to see, "

85
00:03:00,330 --> 00:03:01,990
Submit a Pok√©mon first." We''ll 

86
00:03:01,990 --> 00:03:03,540
see "..." while it''s pending. 

87
00:03:03,830 --> 00:03:05,250
Then we''ll see "Oh, no." when 

88
00:03:05,250 --> 00:03:07,410
it''s been rejected. We''ll fix 

89
00:03:07,410 --> 00:03:09,310
our typo right here. We''ll save 

90
00:03:09,310 --> 00:03:11,740
that. Now we see "Submit a Pok√©

91
00:03:11,740 --> 00:03:13,450
mon" because we''re idle. We''ll 

92
00:03:13,610 --> 00:03:15,550
type in Mew. Hit submit. We get 

93
00:03:15,550 --> 00:03:17,400
that "..." Then we see Mew''s 

94
00:03:17,400 --> 00:03:20,360
details. If we try another Pok√©

95
00:03:20,360 --> 00:03:22,750
mon, then we''ll see a "..." 

96
00:03:23,140 --> 00:03:24,590
We''ll see that Pok√©mon''s details. 

97
00:03:25,340 --> 00:03:27,340
Let''s go ahead and review. We 

98
00:03:27,340 --> 00:03:28,770
added some error handling by 

99
00:03:28,770 --> 00:03:30,110
creating some error state 

100
00:03:30,110 --> 00:03:32,130
management. We added an error 

101
00:03:32,130 --> 00:03:34,270
handler to our promise chain. If 

102
00:03:34,270 --> 00:03:35,800
we get some error data, then 

103
00:03:35,800 --> 00:03:36,960
we''re going to set that error 

104
00:03:36,960 --> 00:03:38,350
data so that we can render 

105
00:03:38,350 --> 00:03:39,820
something useful to the user 

106
00:03:40,040 --> 00:03:41,070
indicating that there''s been a 

107
00:03:41,070 --> 00:03:43,470
problem. To avoid some state 

108
00:03:43,470 --> 00:03:46,610
bugs, we added a status state so 

109
00:03:46,610 --> 00:03:47,780
that we could start out with 

110
00:03:47,840 --> 00:03:49,920
idle. When we start fetching the 

111
00:03:49,920 --> 00:03:51,070
Pok√©mon, we can set it to 

112
00:03:51,150 --> 00:03:54,650
pending. When we get the Pok√©mon, 

113
00:03:54,650 --> 00:03:56,320
we can set it to resolved, or if 

114
00:03:56,350 --> 00:03:57,490
there''s a failure in getting the 

115
00:03:57,490 --> 00:03:58,600
Pok√©mon, then we set it to 

116
00:03:58,600 --> 00:04:00,850
rejected. That helps us to avoid 

117
00:04:00,925 --> 00:04:01,250
bugs.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- Unfortunately, sometimes a server request fails and we need to display a helpful error message to the user.
- We‚Äôll handle a promise rejection so we can collect that error information, and we‚Äôll also learn how we can best display manage the state of our request so we have a deterministic render method to ensure we always show the user the proper information based on the current state of our React component.

```html
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
  <script type="text/babel">
    function PokemonInfo({ pokemonName }) {
      // A common mistake people make is to create a state variable called `isLoading` and set that to true or false.
      // Instead, we‚Äôll be using a status variable which can be set to idle, pending, resolved, or rejected.

      // Adding state to Pokemon status
      const [status, setStatus] = React.useState(''idle'');
      const [pokemon, setPokemon] = React.useState(null);
      // Adding state to handle errors
      const [error, setError] = React.useState(null);

      React.useEffect(() => {
        if (!pokemonName) {
          return;
        }
        // setting the status when the data is resolved
        setStatus(''pending'');
        fetchPokemon(pokemonName).then(
          pokemonData => {
            setStatus(''resolved'');
            setPokemon(pokemonData);
          },
          errorData => {
            setStatus(''rejected'');
            setError(errorData);
          }
        );
      }, [pokemonName]);
      // this is very predictable, now that we can handle the status
      // In order to force an error yourself, you can alter the pokemonQuery into something invalid.
      if (status === ''idle'') {
        return ''Submit a pokemon'';
      }

      if (status === ''rejected'') {
        return ''Oh no...'';
      }

      if (status === ''pending'') {
        return ''...'';
      }

      if (status === ''resolved'') {
        return <pre>{JSON.stringify(pokemon, null, 2)}</pre>;
      }
    }

    function App() {
      const [pokemonName, setPokemonName] = React.useState('''');

      function handleSubmit(event) {
        event.preventDefault();
        setPokemonName(event.target.elements.pokemonName.value);
      }

      return (
        <div>
          <form onSubmit={handleSubmit}>
            <label htmlFor="pokemonName">Pokemon Name</label>
            <div>
              <input id="pokemonName" />
              <button type="submit">Submit</button>
            </div>
          </form>
          <hr />
          <PokemonInfo pokemonName={pokemonName} />
        </div>
      );
    }

    function fetchPokemon(name) {
      const pokemonQuery = `
        query ($name: String) {
          pokemon(name: $name) {
            id
            number
            name
            attacks {
              special {
                name
                type
                damage
              }
            }
          }
        }
      `;

      return window
        .fetch(''https://graphql-pokemon.now.sh'', {
          // learn more about this API here: https://graphql-pokemon.now.sh/
          method: ''POST'',
          headers: {
            ''content-type'': ''application/json;charset=UTF-8''
          },
          body: JSON.stringify({
            query: pokemonQuery,
            variables: { name }
          })
        })
        .then(r => r.json())
        .then(response => response.data.pokemon);
    }

    ReactDOM.render(<App />, document.getElementById(''root''));
  </script>
</body>
```

## Additional resource

- [ROBIN WIERUCH - How to fetch data with React Hooks?](https://www.robinwieruch.de/react-hooks-fetch-data)
- [Kent''s Blog - How to use React Context effectively](https://kentcdodds.com/blog/how-to-use-react-context-effectively)
- [repo - react-error-boundary](https://github.com/bvaughn/react-error-boundary)

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'a9de2258', 'https://d2c5owlt6rorc3.cloudfront.net/react-handle-http-errors-with-react--66NMfZU3/dash/react-handle-http-errors-with-react--66NMfZU3.mpd', 'https://stream.mux.com/bWyB6XOX8aWUA8vKuf01BJsb36CjeAVi00t2bqXQiYYmo.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/26-react-handle-http-errors-with-react.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (6273, 'A Beginners Guide to React Introduction', NULL, 'Welcome to The Beginner‚Äôs Guide to React! I‚Äôm happy you‚Äôre here. I recommend that you watch all of these videos through once without touching the keyboard. Just take notes. Then you can watch them a second time and follow along and change/break the code and review the bits that you need. I‚Äôll show you how I get things up and running, but feel free to copy/paste the code to an environment where you feel comfortable.', 346, NULL, '2020-03-11T21:30:44.211Z', '2025-12-13T00:54:53.678Z', 'react-a-beginners-guide-to-react-introduction', NULL, NULL, 'https://dcv19h61vib2d.cloudfront.net/thumbs/react-a-beginners-guide-to-react-introduction-rkaNT7BD8/react-a-beginners-guide-to-react-introduction-rkaNT7BD8.jpg', true, NULL, 'Kent C. Dodds: [0:00] What is up, folks? My name is Kent C. Dodds, and I am super excited to be your teacher here on egghead.io, where I''m going to take you through the Beginner''s Guide to React JS. We''re going to start from the very, very beginning.

[0:11] Whether you''ve been doing React for a long time, you just want to sharpen yourself on the fundamentals or you''ve never done any React before and you''re just curious, this is going to be a perfect place for you because we''re going to start with a totally blank slate.

[0:24] When we''re using React, we''re using a bunch of other tools in the ecosystem around it. You''ve got a router, you''ve got state management, you''ve got the building tools like webpack or parser or whatever it is that you''re using.

[0:35] When you''re using all these tools, it can be pretty difficult to isolate what is React and what is it doing for me. If you don''t isolate it effectively, then you can''t use it very effectively.

[0:46] We start out with a literal blank index.html file. We write some HTML in it. We write some JavaScript directly in that HTML file. Then, poof. All of a sudden, we''re writing some JavaScript to create DOM nodes. We''re inserting those DOM nodes into the page. We are making it dynamic. It''s awesome.

[1:03] Then, we switch over from regular JavaScript to React, so you get a good sense of what piece of this puzzle is React solving and how can I use it most effectively in building applications.

[1:15] Then, we upgrade to JSX. I''ll show you some tricks of JSX. We go all the way through forms and HTTP, error handling, all of that stuff. You''re going to love this.

[1:27] When we get down to the very end, we''re going to use some awesome tools like CodeSandbox, GitHub, and Netlify to deploy our application to the world. You can show it to your friends, family, your dog, and whoever it is that you want to show this to. You''ll be so excited that you''ve built something that is available on the World Wide Web with React. It''s super, super cool.

[1:50] Let''s go ahead. We''ll dive into the workshop stuff so that you can see where the files are, how to get things up and running if you want to follow along, or if you just want to tinker with things as we go. Then, we can get into this awesome workshop that I''ve prepared for you.

[2:06] The workshop is available to you on GitHub. You''ll find it on my GitHub, kentcdodds/beginners-guide-to-react. I recommend that you switch the branch to egghead. That way, you make sure that the stuff that you''re working with is exactly the same stuff that I recorded in the course and if we make any changes in the future, that will have them on the master branch. The egghead branch will always be exactly what you see me do in the course.

[2:32] The course is just a bunch of HTML files, plus this start script that we''ll take a look at. You can download this using Git if you''re comfortable with that or you can just click Download ZIP and that will download the ZIP file to your computer. You can open that up and extract that and this is what you''re going to find at the end of the day.

[2:49] I am using VS Code. You can feel free to use Sublime or text editor or whatever it is that you want to, but I recommend VS Code and it''s great. We''ve got each one of the lessons right here as HTML files that you can go through.

[3:04] The HTML file that''s available here is the finished version of our code. You can work through each one of these after watching the video, tinker around with it a little bit.

[3:15] To get things up and going, you can just open this up, so we can click on Reveal in Finder here. We can double click on that and it will just open it right up in the browser for you. That will work for lots of this, but some of these lessons require that you''re running a real server.

[3:35] There are a couple ways that you can do that if you can figure out how to make that work yourself. I have the start script and that''s what I''m using. We''re using a tool called Browsersync. We''re using npx to get that running. npx comes bundled with Node. If you get Node.js installed, then you can use npx.

[3:51] You can just copy and paste this in a terminal window. That will get Browsersync up and running and then you can open up localhost:3000, where that will show you a listing of all the files. We''ll go ahead and click on this first one.

[4:04] Typically, in the workshop, I''ve got this open up side-by-side with my code editor. You''re going to have it look a little bit like this. Here, you''ll notice that I can hit save key and it automatically reloads.

[4:19] We''ll also want to have our developer tools open. I''ve got our developer tools right here. I have that up here at the bottom. We have two scripts in here that you don''t find in the source code. That''s added by Browsersync.

[4:34] The cool thing about Browsersync is that you don''t have to manually hit the reload button, you just go ahead and change something, hit save and it will automatically reload for you. That''s why we''re going with Browsersync. It''s really nice for this.

[4:50] You can feel free to play around with this stuff. As we go, you can clear this stuff out and type it out yourself or you can just wait until I go through the material and then you tinker around with the finished product, or you can just watch through the whole thing, take notes and then go through it again later on your own.

[5:08] Whatever works best for you, I do recommend that the first time you go through this, you just watch and take notes because that typically ends up in a better experience for most people, but you do it however you want to.

[5:19] I can''t tell you how excited I am for you to go through this. I''ve worked hard to try to make this as approachable as possible, give you a deep foundational understanding without getting too much in the weeds. I can''t wait to see the cool things that you build with this knowledge that you acquire through going through this material.

[5:36] Please do let me know what you build and what you create with this knowledge of React. I can''t wait for you to experience this. Let''s go ahead and jump into the course.', NULL, false, '01-egghead-react-a-beginners-guide-to-react-introduction.mp4', 11, true, false, 160, '---
mp4: 45766779
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/react-a-beginners-guide-to-react-introduction-rkaNT7BD8/react-a-beginners-guide-to-react-introduction-rkaNT7BD8.mp4', 'react-a-beginners-guide-to-react-introduction-rkaNT7BD8', 'zcCT', 'https://egghead-pipeline.s3.amazonaws.com/react-a-beginners-guide-to-react-introduction-rkaNT7BD8/react-a-beginners-guide-to-react-introduction-rkaNT7BD8.mp3?76c1a07303d84dd3?9542', 0, NULL, NULL, NULL, NULL, NULL, NULL, 'published', '2020-03-25T01:04:49.350Z', NULL, 8388599, NULL, 8061, 0, NULL, -8382649, '6bb00e436c334039905b1303f2861df5', 'https://codesandbox.io/embed/github/kentcdodds/beginners-guide-to-react/tree/codesandbox/01-document-create-element?fontsize=14&hidenavigation=1&theme=dark', 71775, 'free', '', '', 'react', '', '', '', '', NULL, 405232000, '1
00:00:00,770 --> 00:00:02,080
What is up, folks? My name is 

2
00:00:02,080 --> 00:00:03,650
Kent C. Dodds, and I am super 

3
00:00:03,650 --> 00:00:04,950
excited to be your teacher here 

4
00:00:04,950 --> 00:00:06,500
on egghead.io, where I''m going 

5
00:00:06,500 --> 00:00:07,210
to take you through the 

6
00:00:07,210 --> 00:00:09,020
Beginner''s Guide to React JS. 

7
00:00:09,020 --> 00:00:10,030
We''re going to start from the 

8
00:00:10,030 --> 00:00:11,870
very, very beginning. Whether 

9
00:00:11,870 --> 00:00:12,970
you''ve been doing React for a 

10
00:00:12,970 --> 00:00:13,950
long time, you just want to 

11
00:00:13,950 --> 00:00:14,760
sharpen yourself on the 

12
00:00:14,760 --> 00:00:16,640
fundamentals or you''ve never 

13
00:00:16,640 --> 00:00:17,800
done any React before and you''re 

14
00:00:17,800 --> 00:00:19,590
just curious, this is going to 

15
00:00:19,590 --> 00:00:20,800
be a perfect place for you 

16
00:00:21,080 --> 00:00:22,120
because we''re going to start 

17
00:00:22,280 --> 00:00:23,930
with a totally blank slate. 

18
00:00:24,270 --> 00:00:25,540
When we''re using React, we''re 

19
00:00:25,540 --> 00:00:27,570
using a bunch of other tools in 

20
00:00:27,570 --> 00:00:28,770
the ecosystem around it. You''ve 

21
00:00:28,770 --> 00:00:30,060
got a router, you''ve got state 

22
00:00:30,060 --> 00:00:31,920
management, you''ve got the 

23
00:00:31,920 --> 00:00:33,680
building tools like webpack or 

24
00:00:33,680 --> 00:00:34,890
parser or whatever it is that 

25
00:00:34,890 --> 00:00:36,650
you''re using. When you''re using 

26
00:00:36,650 --> 00:00:37,990
all these tools, it can be 

27
00:00:38,120 --> 00:00:40,070
pretty difficult to isolate what 

28
00:00:40,070 --> 00:00:41,420
is React and what is it doing 

29
00:00:41,420 --> 00:00:43,440
for me. If you don''t isolate it 

30
00:00:43,440 --> 00:00:45,030
effectively, then you can''t use 

31
00:00:45,030 --> 00:00:46,870
it very effectively. We start 

32
00:00:46,870 --> 00:00:49,560
out with a literal blank index.

33
00:00:49,590 --> 00:00:51,790
html file. We write some HTML in 

34
00:00:51,790 --> 00:00:53,220
it. We write some JavaScript 

35
00:00:53,220 --> 00:00:55,140
directly in that HTML file. Then, 

36
00:00:55,290 --> 00:00:56,860
poof. All of a sudden, we''re 

37
00:00:57,030 --> 00:00:58,180
writing some JavaScript to 

38
00:00:58,180 --> 00:00:59,220
create DOM nodes. We''re 

39
00:00:59,220 --> 00:01:00,700
inserting those DOM nodes into 

40
00:01:00,700 --> 00:01:02,200
the page. We are making it 

41
00:01:02,200 --> 00:01:04,360
dynamic. It''s awesome. Then, we 

42
00:01:04,360 --> 00:01:05,610
switch over from regular 

43
00:01:05,610 --> 00:01:07,500
JavaScript to React, so you get 

44
00:01:07,500 --> 00:01:09,860
a good sense of what piece of 

45
00:01:09,860 --> 00:01:12,210
this puzzle is React solving and 

46
00:01:12,210 --> 00:01:13,450
how can I use it most 

47
00:01:13,450 --> 00:01:14,800
effectively in building 

48
00:01:14,800 --> 00:01:16,640
applications. Then, we upgrade 

49
00:01:16,640 --> 00:01:18,420
to JSX. I''ll show you some 

50
00:01:18,420 --> 00:01:21,050
tricks of JSX. We go all the way 

51
00:01:21,230 --> 00:01:24,140
through forms and HTTP, error 

52
00:01:24,140 --> 00:01:25,470
handling, all of that stuff. 

53
00:01:25,770 --> 00:01:27,210
You''re going to love this. When 

54
00:01:27,210 --> 00:01:28,700
we get down to the very end, 

55
00:01:28,920 --> 00:01:30,380
we''re going to use some awesome 

56
00:01:30,380 --> 00:01:32,090
tools like CodeSandbox, GitHub, 

57
00:01:32,090 --> 00:01:34,750
and Netlify to deploy our 

58
00:01:34,750 --> 00:01:38,150
application to the world. You 

59
00:01:38,150 --> 00:01:39,520
can show it to your friends, 

60
00:01:39,640 --> 00:01:41,340
family, your dog, and whoever it 

61
00:01:41,340 --> 00:01:42,630
is that you want to show this to. 

62
00:01:42,970 --> 00:01:44,500
You''ll be so excited that you''ve 

63
00:01:44,500 --> 00:01:45,740
built something that is 

64
00:01:45,740 --> 00:01:48,130
available on the World Wide Web 

65
00:01:48,430 --> 00:01:50,270
with React. It''s super, super 

66
00:01:50,270 --> 00:01:52,300
cool. Let''s go ahead. We''ll 

67
00:01:52,300 --> 00:01:54,380
dive into the workshop stuff so 

68
00:01:54,380 --> 00:01:56,130
that you can see where the files 

69
00:01:56,130 --> 00:01:57,350
are, how to get things up and 

70
00:01:57,350 --> 00:01:58,350
running if you want to follow 

71
00:01:58,350 --> 00:02:00,000
along, or if you just want to 

72
00:02:00,000 --> 00:02:01,390
tinker with things as we go. 

73
00:02:01,700 --> 00:02:04,120
Then, we can get into this 

74
00:02:04,360 --> 00:02:05,480
awesome workshop that I''ve 

75
00:02:05,480 --> 00:02:07,480
prepared for you. The workshop 

76
00:02:07,480 --> 00:02:09,010
is available to you on GitHub. 

77
00:02:09,170 --> 00:02:10,570
You''ll find it on my GitHub, 

78
00:02:10,600 --> 00:02:12,450
kentcdodds/beginners-guide-to-

79
00:02:12,450 --> 00:02:14,430
react. I recommend that you 

80
00:02:14,430 --> 00:02:16,390
switch the branch to egghead. 

81
00:02:16,760 --> 00:02:18,450
That way, you make sure that the 

82
00:02:18,450 --> 00:02:19,690
stuff that you''re working with 

83
00:02:19,760 --> 00:02:21,610
is exactly the same stuff that I 

84
00:02:21,610 --> 00:02:23,490
recorded in the course and if we 

85
00:02:23,490 --> 00:02:24,960
make any changes in the future, 

86
00:02:25,260 --> 00:02:26,410
that will have them on the 

87
00:02:26,410 --> 00:02:27,980
master branch. The egghead 

88
00:02:27,980 --> 00:02:29,900
branch will always be exactly 

89
00:02:29,900 --> 00:02:31,680
what you see me do in the course. 

90
00:02:32,190 --> 00:02:33,380
The course is just a bunch of 

91
00:02:33,510 --> 00:02:35,830
HTML files, plus this start 

92
00:02:35,830 --> 00:02:36,970
script that we''ll take a look at. 

93
00:02:37,420 --> 00:02:38,910
You can download this using Git 

94
00:02:38,910 --> 00:02:40,050
if you''re comfortable with that 

95
00:02:40,120 --> 00:02:41,350
or you can just click Download 

96
00:02:41,350 --> 00:02:43,070
ZIP and that will download the 

97
00:02:43,070 --> 00:02:45,150
ZIP file to your computer. You 

98
00:02:45,150 --> 00:02:46,490
can open that up and extract 

99
00:02:46,490 --> 00:02:48,160
that and this is what you''re 

100
00:02:48,160 --> 00:02:49,330
going to find at the end of the 

101
00:02:49,330 --> 00:02:52,270
day. I am using VS Code. You 

102
00:02:52,270 --> 00:02:53,980
can feel free to use Sublime or 

103
00:02:53,980 --> 00:02:55,350
text editor or whatever it is 

104
00:02:55,350 --> 00:02:56,510
that you want to, but I 

105
00:02:56,680 --> 00:02:58,300
recommend VS Code and it''s great. 

106
00:02:58,840 --> 00:03:00,420
We''ve got each one of the 

107
00:03:00,420 --> 00:03:02,860
lessons right here as HTML files 

108
00:03:02,860 --> 00:03:04,840
that you can go through. The 

109
00:03:05,220 --> 00:03:07,110
HTML file that''s available here 

110
00:03:07,400 --> 00:03:09,660
is the finished version of our 

111
00:03:10,280 --> 00:03:12,040
code. You can work through each 

112
00:03:12,040 --> 00:03:13,260
one of these after watching the 

113
00:03:13,260 --> 00:03:14,890
video, tinker around with it a 

114
00:03:14,890 --> 00:03:17,010
little bit. To get things up 

115
00:03:17,010 --> 00:03:19,440
and going, you can just open 

116
00:03:19,440 --> 00:03:21,080
this up, so we can click on 

117
00:03:21,080 --> 00:03:23,910
Reveal in Finder here. We can 

118
00:03:23,910 --> 00:03:25,140
double click on that and it will 

119
00:03:25,140 --> 00:03:26,650
just open it right up in the 

120
00:03:26,650 --> 00:03:29,160
browser for you. That will work 

121
00:03:29,160 --> 00:03:31,080
for lots of this, but some of 

122
00:03:31,080 --> 00:03:33,310
these lessons require that 

123
00:03:33,310 --> 00:03:34,920
you''re running a real server. 

124
00:03:35,320 --> 00:03:36,360
There are a couple ways that you 

125
00:03:36,360 --> 00:03:37,460
can do that if you can figure 

126
00:03:37,460 --> 00:03:38,460
out how to make that work 

127
00:03:38,460 --> 00:03:40,400
yourself. I have the start 

128
00:03:40,400 --> 00:03:41,850
script and that''s what I''m using. 

129
00:03:42,090 --> 00:03:43,420
We''re using a tool called 

130
00:03:43,420 --> 00:03:45,770
Browsersync. We''re using npx to 

131
00:03:45,770 --> 00:03:47,780
get that running. npx comes 

132
00:03:47,780 --> 00:03:49,330
bundled with Node. If you get 

133
00:03:49,400 --> 00:03:50,840
Node.js installed, then you can 

134
00:03:50,840 --> 00:03:53,030
use npx. You can just copy and 

135
00:03:53,030 --> 00:03:55,210
paste this in a terminal window. 

136
00:03:55,440 --> 00:03:56,860
That will get Browsersync up and 

137
00:03:56,860 --> 00:03:58,380
running and then you can open up 

138
00:03:58,380 --> 00:04:00,290
localhost:3000, where that will 

139
00:04:00,290 --> 00:04:01,430
show you a listing of all the 

140
00:04:01,430 --> 00:04:02,950
files. We''ll go ahead and click 

141
00:04:02,950 --> 00:04:04,980
on this first one. Typically, 

142
00:04:05,010 --> 00:04:06,610
in the workshop, I''ve got this 

143
00:04:06,650 --> 00:04:08,620
open up side-by-side with my 

144
00:04:08,620 --> 00:04:10,240
code editor. You''re going to 

145
00:04:10,460 --> 00:04:13,840
have it look a little bit like 

146
00:04:13,970 --> 00:04:15,940
this. Here, you''ll notice that I 

147
00:04:15,940 --> 00:04:18,290
can hit save key and it 

148
00:04:18,320 --> 00:04:20,190
automatically reloads. We''ll 

149
00:04:20,190 --> 00:04:21,770
also want to have our developer 

150
00:04:21,770 --> 00:04:23,930
tools open. I''ve got our 

151
00:04:23,930 --> 00:04:25,840
developer tools right here. I 

152
00:04:25,840 --> 00:04:27,110
have that up here at the bottom. 

153
00:04:27,950 --> 00:04:30,270
We have two scripts in here that 

154
00:04:30,270 --> 00:04:31,780
you don''t find in the source 

155
00:04:31,780 --> 00:04:33,090
code. That''s added by 

156
00:04:33,090 --> 00:04:35,870
Browsersync. The cool thing 

157
00:04:35,870 --> 00:04:37,040
about Browsersync is that you 

158
00:04:37,040 --> 00:04:38,410
don''t have to manually hit the 

159
00:04:38,410 --> 00:04:40,360
reload button, you just go ahead 

160
00:04:40,400 --> 00:04:43,470
and change something, hit save 

161
00:04:43,730 --> 00:04:44,980
and it will automatically reload 

162
00:04:44,980 --> 00:04:47,670
for you. That''s why we''re going 

163
00:04:47,670 --> 00:04:48,810
with Browsersync. It''s really 

164
00:04:48,810 --> 00:04:50,730
nice for this. You can feel 

165
00:04:50,730 --> 00:04:51,850
free to play around with this 

166
00:04:51,850 --> 00:04:54,180
stuff. As we go, you can clear 

167
00:04:54,180 --> 00:04:56,050
this stuff out and type it out 

168
00:04:56,050 --> 00:04:57,480
yourself or you can just wait 

169
00:04:57,530 --> 00:04:59,830
until I go through the material 

170
00:04:59,830 --> 00:05:01,130
and then you tinker around with 

171
00:05:01,130 --> 00:05:02,930
the finished product, or you can 

172
00:05:02,930 --> 00:05:04,230
just watch through the whole 

173
00:05:04,230 --> 00:05:06,370
thing, take notes and then go 

174
00:05:06,370 --> 00:05:07,560
through it again later on your 

175
00:05:07,640 --> 00:05:09,480
own. Whatever works best for 

176
00:05:09,480 --> 00:05:11,050
you, I do recommend that the 

177
00:05:11,050 --> 00:05:12,210
first time you go through this, 

178
00:05:12,210 --> 00:05:13,940
you just watch and take notes 

179
00:05:14,160 --> 00:05:15,480
because that typically ends up 

180
00:05:15,480 --> 00:05:16,720
in a better experience for most 

181
00:05:16,720 --> 00:05:18,430
people, but you do it however 

182
00:05:18,430 --> 00:05:20,020
you want to. I can''t tell you 

183
00:05:20,020 --> 00:05:21,470
how excited I am for you to go 

184
00:05:21,470 --> 00:05:23,110
through this. I''ve worked hard 

185
00:05:23,110 --> 00:05:24,260
to try to make this as 

186
00:05:24,260 --> 00:05:26,010
approachable as possible, give 

187
00:05:26,010 --> 00:05:27,710
you a deep foundational 

188
00:05:27,710 --> 00:05:29,040
understanding without getting 

189
00:05:29,040 --> 00:05:31,170
too much in the weeds. I can''t 

190
00:05:31,170 --> 00:05:32,510
wait to see the cool things that 

191
00:05:32,510 --> 00:05:33,550
you build with this knowledge 

192
00:05:33,550 --> 00:05:34,930
that you acquire through going 

193
00:05:34,930 --> 00:05:36,810
through this material. Please 

194
00:05:36,810 --> 00:05:38,900
do let me know what you build 

195
00:05:38,900 --> 00:05:40,080
and what you create with this 

196
00:05:40,080 --> 00:05:42,700
knowledge of React. I can''t wait 

197
00:05:42,700 --> 00:05:43,820
for you to experience this. 

198
00:05:44,080 --> 00:05:45,520
Let''s go ahead and jump into the 

199
00:05:45,595 --> 00:05:45,920
course.

', true, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, '- No requirements needed when taking this course.
- Recommend that you watch all of these videos through once without touching the keyboard. Just take notes. Then watch them a second time and follow along and change/break the code and review the bits that you need.
- Download or clone the source code: [**Course Repo**](https://github.com/kentcdodds/beginners-guide-to-react/tree/egghead) and ‚ö†Ô∏è switch to the egghead branch.

* Copy and paste the `start` script in a terminal window to locally serve all the files. Access the files in `localhost:3000`.

  - `npx browser-sync start --server --files "./*.html" --no-open --no-notify --directory`
  - `npx` comes bundled with Node.js
  - browsersync automatically reloads any changes made to the code.
  - More info on [browsersync](https://github.com/wesbos/browser-sync-remote-example)

* Recommended setup:

```
- code editor opened
- browsersync running
- developer tools opened
```

![img](https://res.cloudinary.com/dg3gyk0gu/image/upload/v1591296082/transcript-images/react-a-beginners-guide-to-react-introduction-setupsetup.jpg)

## Additional resource

- Check out Kent''s [Uses Page](https://kentcdodds.com/uses/) to learn more about his setup.

[‚úèÔ∏è Edit on GitHub](https://github.com/eggheadio/eggheadio-course-notes/tree/master/the-beginners-guide-to-react/notes)', 'lesson', 'd52f700b', 'https://d2c5owlt6rorc3.cloudfront.net/react-a-beginners-guide-to-react-introduction-rkaNT7BD8/dash/react-a-beginners-guide-to-react-introduction-rkaNT7BD8.mpd', 'https://stream.mux.com/G3zGTAwQnllaR9ZS1ZTOIxjOvfc00AlwNeM27IzMyDmY.m3u8', 'https://cdn.jsdelivr.net/gh/eggheadio/eggheadio-course-notes/the-beginner-s-guide-to-react/notes/00-react-a-beginners-guide-to-react-introduction.md', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (335, 'Cleaner D3 code with selection.call()', '', 'selection.call() method in D3 can aid in code organization and flexibility by eliminating the need to use chained method calls for every operation.', 416, NULL, '2015-02-06T20:34:50.703Z', '2019-02-13T04:02:32.118Z', 'd3-cleaner-d3-code-with-selection-call', '', '8hmxuzzcuj', '', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_8hmxuzzcuj" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-d3-cleaner-d3-code-with-selectioncall.mp4" /><meta itemprop="duration" content="PT6M51S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/125b5f1528776672e00fbec655345046667a0dea.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/844f288b68375b01ba86c0951b4001ac41052e35.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=411.311&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F125b5f1528776672e00fbec655345046667a0dea.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F844f288b68375b01ba86c0951b4001ac41052e35.bin" /><meta itemprop="uploadDate" content="2015-02-06T15:33:56Z" /><object id="wistia_8hmxuzzcuj_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=411.311&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F125b5f1528776672e00fbec655345046667a0dea.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F844f288b68375b01ba86c0951b4001ac41052e35.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=411.311&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F125b5f1528776672e00fbec655345046667a0dea.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F844f288b68375b01ba86c0951b4001ac41052e35.bin" name="wistia_8hmxuzzcuj_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-d3-cleaner-d3-code-with-selectioncall.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("8hmxuzzcuj", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/8hmxuzzcuj/metadata.js"></script>', 'Last time, we looked at D3, we created some transitions that we then orchestrated, and can run from clicking this update button.To review, here is our button that caused that, and then, our update function runs through the dataset, updates all their values to random numbers, and then our actual transition is defined here. We are going to selectAll the circles, start the transition there, do the x properties and fill, y properties and fill, and then the radius and the fill.

What we are going to show today is, how to better organize this code using the call method of D3 selection object. D3 selection is the result of something like this, it''s a very fundamental part of the D3 API, and you can use call to better organize your code, and give yourself some better flexibility. We are actually using call in a couple of places already, like here, for our xAxis, so, we define the xAxis here, and this code that creates the axis knows how to work, or how to operate on a selection. That is what enables us to do .call and pass in the function there for the xAxis.

To get a better idea of how that actually works, we are going to do things a little bit differently. The first thing we are going to do, is separate out our existing transition into its own function. We''ll call that, steppedTransition, since we''ve got that staggering effect there, and it''s going to take selection as an argument. Then what we are going to do here is, we are going to grab this whole big chain of things, replace it with a call to steppedTransition, and then if we put this up here, and say selection, then move down here, put that there.

We shall have the same exact behavior now, but we''ve got that code moved out of the way. You can see there, that it still works the same way, but we''ve now got it separated. What this makes it easier to do, is a few things. First thing we''ll show is, maybe we want a alternate transition, and we''ll call this one, plainTransition. We are going to get rid of this stepped nature here. We still need a transition definition, we still want it to take 500 milliseconds, but we are going to get rid of these intermediate steps, like setting it to orange, setting up the second transition, and that duration. We are going to get rid of all of that, we are going to do the same thing here.

Now we are saying, create one transition that takes half a second, set all of these three properties, and set the style to fill. We can then come down here, copy this name, come down here, and instead of telling it to call steppedTransition, we are going to tell it to call plainTransition. If we save that, go to refresh this, and now, click update, everything is going to happen at once.

Another thing that you can do, now that you have these methods broken out that work on selections independently, is you can create other selections. If we filter our selection here, we can modify which pieces of the selection actually get operated on. If we do something like, d.x < 50, that''s only going to operate on items on the left side of our chart.

What I am going to do here, because this currently is updating the data for everything on the chart. I am going to change this from an _.each call to a D3 selection.each operation here. We are going to select all the circles, we are going to filter out any of them, whose x is not less than 50, and then, each one that''s left will pass through this and get a new data value applied to those three properties, then we''ll call that plainTransition again. If we go over here and refresh, click update, you can see only the items on the left side are being subjected to our transitions here.

What we can do, we can separate out this new data here and get that out of our way, newData up there. We''ve got that broken out just to make it a little easier to see here. We can then operate on, or create a separate item here. Let''s do x > 50, it will get its data updated, and then we''ll send it through the steppedTransition. Everything on the left half should do a smooth animate to their new place, everything on the right half will do a stepped transition. It''s kind of hard to follow there, but that is in fact what''s going on. You can tell because, we''ve got some of these purple items immediately, whereas the other ones go to orange, then blue, then purple.

That is basically, it. One other thing to note, you can pass arguments into these items once they have been passed out and called with call. So if we make this duration, and we''ll have our duration passed in to this function, instead of being hard-coded, the stepTransition''s got a few of them. We won''t bother with that, but now when we call plainTransition, we can pass in some long duration, like two full seconds so the plainTransition will take a lot longer, the stepped one will go as normal. If you then go refresh, run that, you can see that we''ve got some items slowly moving to their new spots smoothly, whereas the other ones go through that stepped motion at the normal rate. That''s just a few of the ways you can use call. it''s very good for organizing codes, splitting code up into pieces, and making things more flexible in general.', '', true, '14-egghead-d3-cleaner-d3-code-with-selection-call.mp4', 1, true, false, 1, NULL, NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-d3-cleaner-d3-code-with-selectioncall/egghead-d3-cleaner-d3-code-with-selectioncall.mp4', 'egghead-d3-cleaner-d3-code-with-selectioncall', NULL, 'https://egghead-pipeline.s3.amazonaws.com/egghead-d3-cleaner-d3-code-with-selectioncall/13---call-method.mp3', 0, '', '', 'jolabu/2', '', '', NULL, 'published', '2015-02-06T20:34:50.703Z', NULL, 8387216, '', 26, 0, NULL, 13, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/14-d3-cleaner-d3-code-with-selection-call?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1916211027, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (71, 'Basics of SVG', '', 'In this lesson, Ben guides you through converting your D3 bar chart from HTML elements into SVG.', 363, NULL, '2013-11-26T23:15:15.800Z', '2019-02-13T04:01:42.071Z', 'd3-basics-of-svg', '', 'zo5hd2d0q9', 't_71_d3_svg_basics.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_zo5hd2d0q9" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="71 - Egghead.io - D3 - Basics of SVG" /><meta itemprop="duration" content="PT6M3S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/28608cb5d2e84f683ce45bcc3db8930e5f951c9a.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/e181e0259a14ec507a10516e8e6bcc8798b9c3ff.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=363.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F28608cb5d2e84f683ce45bcc3db8930e5f951c9a.jpg%3Ft%3D1385478029044%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe181e0259a14ec507a10516e8e6bcc8798b9c3ff.bin" /><meta itemprop="uploadDate" content="2013-11-26T14:53:46Z" /><object id="wistia_zo5hd2d0q9_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:540px;position:relative;width:960px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=363.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F28608cb5d2e84f683ce45bcc3db8930e5f951c9a.jpg%3Ft%3D1385478029044%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe181e0259a14ec507a10516e8e6bcc8798b9c3ff.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=363.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F28608cb5d2e84f683ce45bcc3db8930e5f951c9a.jpg%3Ft%3D1385478029044%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fe181e0259a14ec507a10516e8e6bcc8798b9c3ff.bin" name="wistia_zo5hd2d0q9_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">71 - Egghead.io - D3 - Basics of SVG</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("zo5hd2d0q9", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/zo5hd2d0q9/metadata.js"></script>', '**Ben Clinkinbeard**: We now have a column chart that will scale our bars based on a multiplier that we give it but, as you can see, it actually scales from the top which is not exactly a behavior that you''re commonly going to want. And so, to fix that we''re going to go ahead and convert this to an SVG chart which will make a couple of things a lot easier.

Actually, we''re going to do this. Let''s say we''re going to build our chart inside of this chart area, which this gray shape will just make it a little bit easier to see what''s going on and where it''s scaling from. You''ll notice that all I had to do to change where our chart is built is to tell it to use the chart area ID.

D3 uses CSS 3 selectors in all of its select statements so anything that''s valid there will work for you.

Actually, I''m also going to pull out the root SVG element into its own variable. We''ll say "Select that DIV and then append in SVG." Go ahead and fill that back in there. We want to go ahead and give our SVG element a width and a height as well so we''ll say, "Attribute width is 400," and "Attribute height is 300." That matches the size of this gray box we have here.

You''ll notice when using SVG you don''t need to give pixel units. You don''t need to attach the PX because that''s a given in SVG. 

We still don''t have anything on our chart. That is because we need to change this part of our chart. We''re no longer going to be using DIVs but SVG rect elements. We''ll place both of our DIVs at that. We can still use our class here but our height is no longer a style. It''s just an attribute.

As I mentioned before, there''s no need for pixels so if we did that we''re now going to have to give it a width because SVG elements cannot get their width from CSS.

You can now see we do have a bar on there but it''s not exactly positioned correctly. Let''s do this. Let''s give it an X position. We''re going to want to spread those over the size of our area, obviously. We''ll say, "Return D times 20." That''s what we picked as the width of our chart.

Actually, we don''t...This is a good example. We actually don''t want to multiply the data element by 20. We want to multiply its index. And so, if you supply a second parameter to any of these functions that are in the attribute calls the second parameter, which generally uses I, is going to be the count or the position in the data set. The first one will be zero, then one, and on and on.

We''ve now set up X and you can see they are appropriately staggered. If we set the Y we can actually affect where they''re placed. So Y of 20, that''s not what we want. But if we do a Y of zero you can see that they''re still staggered but they''re not positioned correctly. Let''s actually add a little bit of padding here so "Plus two." What am I not doing right there?

5 times 20 plus 2. Do I need to get rid of that? So 22? There we go. We actually just need to give it a little bit more than the width there but that should have been obvious to me.

The next thing we''ll fix, and actually you can see that our style is not working. I realize that that''s because we are setting the background color which is not what SVG elements use. They use a fill attribute. And so, if we change that to fill you can see we''ve got our nice teal bars back.

Our bars are still sort of upside down. You generally expect them to come from the bottom up. To do that we''re going to use our Y function here. We''ll pass in the DU. We don''t need the index this time. We will return...The height of our chart is 300 so we''re going to say 300 minus whatever the height is. You can see below that the height is D times 8. And so, now we''ve got these things glued to the bottom.

This isn''t terribly flexible and so one of the next thing we''ll cover are scales and ranges. But you can see now we have converted this to a chart that actually scales its items from the bottom though we''ve got a couple of these values hard coded in here. And so, it''s going to make it hard for us to show how to change this.

Let''s do this. We''ll put our multiplier up here as eight and use that in both of these place so that our Y and our height are based on this multiplier. If we wanted to go change the scale we can say, "Five," or "Two," or "12."

There you go. We''ve gotten the same behavior back that we had before except now we''re using SVG and we''re properly scaling from the bottom as you would generally expect a chart to do.

In the next videos we''ll see how to make this a lot more flexible.', '', true, '02-egghead-d3-basics-of-svg.mp4', 1, true, false, 1, '---
mp4: 36343620
', NULL, '', 'd3-basics-of-svg', NULL, '', 0, '', '', 'piqato/3', '', '', NULL, 'published', '2013-11-26T23:15:15.800Z', NULL, 8387216, '', 849, 0, NULL, 1, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/02-d3-basics-of-svg?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1965147015, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (259, 'Basic Transitions with D3', '', 'D3 has some great tools that make animating your charts relatively simple. We will take a look at create smooth animated transitions with lots of options.', 320, NULL, '2014-10-16T14:21:58.242Z', '2025-12-13T00:54:53.678Z', 'd3-basic-transitions-with-d3', '', 'qs0c2kqutl', '', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_qs0c2kqutl" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-d3-basic-transitions.mp4" /><meta itemprop="duration" content="PT5M20S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/35716371beaafef8f9e364944c054f7a186b4fa5.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/369d1f8e6b1ec0af043ecbc79e10fbdeaa3b9fbf.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=320.367&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F35716371beaafef8f9e364944c054f7a186b4fa5.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F369d1f8e6b1ec0af043ecbc79e10fbdeaa3b9fbf.bin" /><meta itemprop="uploadDate" content="2014-10-13T17:24:51Z" /><object id="wistia_qs0c2kqutl_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=320.367&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F35716371beaafef8f9e364944c054f7a186b4fa5.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F369d1f8e6b1ec0af043ecbc79e10fbdeaa3b9fbf.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=320.367&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F35716371beaafef8f9e364944c054f7a186b4fa5.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F369d1f8e6b1ec0af043ecbc79e10fbdeaa3b9fbf.bin" name="wistia_qs0c2kqutl_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-d3-basic-transitions.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("qs0c2kqutl", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/qs0c2kqutl/metadata.js"></script>', '[00:00] Now that we''ve added some basic interaction to the chart, let''s take a look at adding some animated transitions. The first thing we''ll do is click a button that will actually trigger our transition. Then we''ll just have that button call a function called update.

[00:13] What that function is going to do is simply loop over our dataset with the underscore or low dash each method. As we get each object, we''ll just update the x, y, and r properties with the same code that we do to initially create it, which is just assigning a random number somewhere between 0and 100 for the x and y, and then somewhere between 5 and 15 for the radius.

[00:36] Now that we have this function in place, we can go over here and test it. We can see that we can click the button, and it is actually calling this function, but the chart isn''t updating it. That''s because we''re updating the properties of our data objects, but we''re not actually telling the chart itself to re-render.

[00:56] To get the chart to actually re-render, we need to get a reference to all of our circles and have them actually update their properties, so the cx, cy, and r attributes. If you''ll notice, this is the same exact code that we''re using when we initially create the chart. We''re just going to rerun it in response to our button click here.

[01:18] If we now go over and click our update button, you''ll see that we do get our chart to update, but they''re just sort of snapping into their new places and appearing in their new positions. We want to add some nice, smooth animated transitions.

[01:32] The way we do that is using another one of D3''s awesomely simple methods, which is just called transition. Then we''re going to give it a duration of 500 milliseconds, so half a second. When we click our button, we get a nice smooth animation.

[01:49] You can see that that transition applies to all three of those attribute assignments that happened after it, so the x, the y, and the r property are all updated based on that.

[02:04] Another sort of basic thing that D3 lets you control with your transitions is you can apply a delay. In this case, we''ll add a 250 millisecond delay. When we click our button, we get a short little delay before the transition actually plays.

[02:23] A blanket delay probably isn''t terribly useful. But we can, again, replace this static value with a function that''s going to be past a datum and that datum''s index in our dataset. What we can do here is use that index to sort of create a stagger. We''re actually going to multiply the index by 25 milliseconds.

[02:46] You can see our bubbles sort of stagger the beginnings of their animations, creating a slightly more organic effect. D3 also allows you to specify various easing functions that can be used to affect the way that your bubbles or elements animate.

[03:03] If we specify the elastic easing type, you''ll see that the bubbles sort of bounce into their new place. There''s a pretty long list of different types that you can play with to get exactly the type of movement that you really want.

[03:16] We''re now animating our bubbles'' position and size smoothly in response to our click. Everything happens all at once, but D3 actually makes it very simple to add some more control over your animations and act on pieces independently. What we''re actually going to do here is we''re going to copy our transition and duration calls, and we''re going to move that to each one of our attribute assignments.

[03:47] You''ll see that we can then sequence these movements so that when we click our button the elements animate along the x axis and then along the y, and then their radius updates. Each call to transition and duration affects the next or any following attribute assignments. But once we call transition again, that''s going to create a second sequence to transition.

[04:12] Interpolating things like x position, and y position, and radius are fairly simple to do. It''s not surprising that D3 can do that for us. But it can also do some other things. One thing that we''re going to look at here is actually animating a color change. Rather than changing an attribute on the SVG tag, we''re actually going to change a style property, in this case fill.

[04:37] We''ll just tell it to change it to purple here, as part of the last step. We get our x and y animations. Along with our radius change, we''ll get that color change as well, since we''re attaching to that final step in our animation sequence.

[04:53] If we then copy this style change and add a new one to each of our first two steps, we can then have these transition to other colors. Then we''ll get a different color as each part of our animation plays. Now, if we save this and let it play, we''ll see that as we change x axis, y axis, and radius, we get a color change with each step along the way.', '', true, '12-egghead-d3-basic-transitions-with-d3.mp4', 1, true, false, 1, NULL, NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/basic-transitions-with-d3/egghead-d3-basic-transitions.mp4', 'basic-transitions-with-d3', '0ko', 'https://egghead-pipeline.s3.amazonaws.com/basic-transitions-with-d3/egghead-d3-basic-transitions.mp3', 0, '', '', 'hehoyaw/1', '', '', NULL, 'published', '2014-10-16T14:21:58.242Z', NULL, 8387216, '', 455, 0, NULL, 11, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/12-d3-basic-transitions-with-d3?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1953750963, '1
00:00:00,550 --> 00:00:01,570
Now that we''ve added some basic 

2
00:00:01,580 --> 00:00:02,920
interaction to the chart, let''s 

3
00:00:02,930 --> 00:00:04,110
take a look at adding some 

4
00:00:04,120 --> 00:00:06,200
animated transitions. The first 

5
00:00:06,210 --> 00:00:07,460
thing we''ll do is click a button 

6
00:00:07,550 --> 00:00:09,030
that will actually trigger our 

7
00:00:09,030 --> 00:00:10,930
transition. Then we''ll just have 

8
00:00:10,940 --> 00:00:12,080
that button call a function 

9
00:00:12,090 --> 00:00:13,400
called update. What that 

10
00:00:13,410 --> 00:00:15,160
function is going to do is 

11
00:00:14,400 --> 00:00:15,910
simply loop over our dataset 

12
00:00:15,980 --> 00:00:18,260
with the underscore or low dash 

13
00:00:18,390 --> 00:00:20,820
each method. As we get each 

14
00:00:20,830 --> 00:00:22,700
object, we''ll just update the x, 

15
00:00:22,710 --> 00:00:24,570
y, and r properties with the 

16
00:00:24,580 --> 00:00:26,870
same code that we do to 

17
00:00:26,880 --> 00:00:28,100
initially create it, which is 

18
00:00:28,110 --> 00:00:30,030
just assigning a random number 

19
00:00:30,600 --> 00:00:32,280
somewhere between 0and 100 for 

20
00:00:32,290 --> 00:00:33,720
the x and y, and then somewhere 

21
00:00:33,730 --> 00:00:36,180
between 5 and 15 for the radius. 

22
00:00:36,540 --> 00:00:37,560
Now that we have this function 

23
00:00:37,570 --> 00:00:39,540
in place, we can go over here 

24
00:00:39,550 --> 00:00:42,270
and test it. We can see that we 

25
00:00:42,280 --> 00:00:45,200
can click the button, and it is 

26
00:00:45,210 --> 00:00:46,570
actually calling this function, 

27
00:00:46,690 --> 00:00:48,760
but the chart isn''t updating it. 

28
00:00:48,900 --> 00:00:50,360
That''s because we''re updating 

29
00:00:50,410 --> 00:00:51,970
the properties of our data 

30
00:00:52,010 --> 00:00:53,310
objects, but we''re not actually 

31
00:00:53,320 --> 00:00:55,890
telling the chart itself to re-

32
00:00:55,900 --> 00:00:57,330
render. To get the chart to 

33
00:00:57,340 --> 00:00:58,940
actually re-render, we need to 

34
00:00:58,950 --> 00:01:00,340
get a reference to all of our 

35
00:01:00,350 --> 00:01:02,180
circles and have them actually 

36
00:01:02,250 --> 00:01:04,010
update their properties, so the 

37
00:01:04,085 --> 00:01:08,270
cx, cy, and r attributes. If 

38
00:01:08,280 --> 00:01:09,840
you''ll notice, this is the same 

39
00:01:09,850 --> 00:01:11,820
exact code that we''re using when 

40
00:01:11,830 --> 00:01:14,250
we initially create the chart. 

41
00:01:14,250 --> 00:01:15,510
We''re just going to rerun it in 

42
00:01:15,520 --> 00:01:16,830
response to our button click 

43
00:01:16,840 --> 00:01:20,000
here. If we now go over and 

44
00:01:20,010 --> 00:01:21,570
click our update button, you''ll 

45
00:01:21,680 --> 00:01:23,020
see that we do get our chart to 

46
00:01:23,060 --> 00:01:25,280
update, but they''re just sort of 

47
00:01:24,960 --> 00:01:27,000
snapping into their new places 

48
00:01:27,010 --> 00:01:28,160
and appearing in their new 

49
00:01:28,170 --> 00:01:30,080
positions. We want to add some 

50
00:01:30,090 --> 00:01:31,590
nice, smooth animated 

51
00:01:31,600 --> 00:01:33,630
transitions. The way we do that 

52
00:01:33,640 --> 00:01:36,640
is using another one of D3''s 

53
00:01:36,490 --> 00:01:38,870
awesomely simple methods, which 

54
00:01:38,880 --> 00:01:41,050
is just called transition. Then 

55
00:01:41,050 --> 00:01:41,870
we''re going to give it a 

56
00:01:41,880 --> 00:01:44,600
duration of 500 milliseconds, so 

57
00:01:44,610 --> 00:01:46,870
half a second. When we click our 

58
00:01:46,880 --> 00:01:48,640
button, we get a nice smooth 

59
00:01:48,650 --> 00:01:50,450
animation. You can see that 

60
00:01:50,460 --> 00:01:53,080
that transition applies to all 

61
00:01:53,090 --> 00:01:54,740
three of those attribute 

62
00:01:55,210 --> 00:01:57,250
assignments that happened after 

63
00:01:57,260 --> 00:01:59,940
it, so the x, the y, and the r 

64
00:01:59,950 --> 00:02:02,690
property are all updated based 

65
00:02:02,700 --> 00:02:06,300
on that. Another sort of basic 

66
00:02:06,375 --> 00:02:09,540
thing that D3 lets you control 

67
00:02:10,180 --> 00:02:11,710
with your transitions is you can 

68
00:02:11,720 --> 00:02:14,550
apply a delay. In this case, 

69
00:02:14,560 --> 00:02:16,380
we''ll add a 250 millisecond 

70
00:02:16,455 --> 00:02:19,960
delay. When we click our button, 

71
00:02:19,970 --> 00:02:21,240
we get a short little delay 

72
00:02:21,370 --> 00:02:22,800
before the transition actually 

73
00:02:22,850 --> 00:02:25,880
plays. A blanket delay probably 

74
00:02:25,890 --> 00:02:28,430
isn''t terribly useful. But we 

75
00:02:28,440 --> 00:02:30,170
can, again, replace this static 

76
00:02:30,180 --> 00:02:31,860
value with a function that''s 

77
00:02:31,870 --> 00:02:34,950
going to be past a datum and 

78
00:02:35,160 --> 00:02:36,230
that datum''s index in our 

79
00:02:36,280 --> 00:02:38,690
dataset. What we can do here is 

80
00:02:38,700 --> 00:02:40,520
use that index to sort of create 

81
00:02:40,570 --> 00:02:42,720
a stagger. We''re actually going 

82
00:02:42,730 --> 00:02:45,740
to multiply the index by 25 

83
00:02:45,770 --> 00:02:47,440
milliseconds. You can see our 

84
00:02:47,450 --> 00:02:50,110
bubbles sort of stagger the 

85
00:02:50,120 --> 00:02:51,590
beginnings of their animations, 

86
00:02:51,850 --> 00:02:53,810
creating a slightly more organic 

87
00:02:54,600 --> 00:02:55,780
effect. D3 also allows you to 

88
00:02:55,790 --> 00:02:58,180
specify various easing functions 

89
00:02:58,190 --> 00:03:00,650
that can be used to affect the 

90
00:03:00,660 --> 00:03:02,160
way that your bubbles or 

91
00:03:02,410 --> 00:03:04,170
elements animate. If we specify 

92
00:03:04,180 --> 00:03:06,530
the elastic easing type, you''ll 

93
00:03:06,540 --> 00:03:07,650
see that the bubbles sort of 

94
00:03:07,660 --> 00:03:08,990
bounce into their new place. 

95
00:03:09,065 --> 00:03:12,200
There''s a pretty long list of 

96
00:03:12,260 --> 00:03:13,250
different types that you can 

97
00:03:13,260 --> 00:03:14,560
play with to get exactly the 

98
00:03:14,570 --> 00:03:15,710
type of movement that you really 

99
00:03:15,720 --> 00:03:18,300
want. We''re now animating our bubbles''

100
00:03:18,250 --> 00:03:20,950
 position and size smoothly in 

101
00:03:20,960 --> 00:03:22,120
response to our click. 

102
00:03:22,120 --> 00:03:23,890
Everything happens all at once, 

103
00:03:23,990 --> 00:03:27,250
but D3 actually makes it very 

104
00:03:27,260 --> 00:03:30,050
simple to add some more control 

105
00:03:30,060 --> 00:03:32,460
over your animations and act on 

106
00:03:32,470 --> 00:03:34,820
pieces independently. What we''re 

107
00:03:34,830 --> 00:03:36,410
actually going to do here is 

108
00:03:36,420 --> 00:03:40,880
we''re going to copy our 

109
00:03:40,600 --> 00:03:42,270
transition and duration calls, 

110
00:03:42,650 --> 00:03:44,540
and we''re going to move that to 

111
00:03:44,690 --> 00:03:46,970
each one of our attribute 

112
00:03:46,980 --> 00:03:48,820
assignments. You''ll see that we 

113
00:03:48,830 --> 00:03:50,160
can then sequence these 

114
00:03:50,170 --> 00:03:52,070
movements so that when we click 

115
00:03:52,080 --> 00:03:54,520
our button the elements animate 

116
00:03:54,530 --> 00:03:56,490
along the x axis and then along 

117
00:03:56,500 --> 00:03:57,850
the y, and then their radius 

118
00:03:57,860 --> 00:04:00,620
updates. Each call to transition 

119
00:04:00,630 --> 00:04:04,140
and duration affects the next or 

120
00:04:04,280 --> 00:04:05,690
any following attribute 

121
00:04:05,700 --> 00:04:07,630
assignments. But once we call 

122
00:04:07,640 --> 00:04:09,450
transition again, that''s going 

123
00:04:09,525 --> 00:04:11,130
to create a second sequence to 

124
00:04:11,170 --> 00:04:12,330
transition. Interpolating 

125
00:04:13,710 --> 00:04:15,410
things like x position, and y 

126
00:04:15,420 --> 00:04:18,300
position, and radius are fairly 

127
00:04:18,310 --> 00:04:20,340
simple to do. It''s not 

128
00:04:20,340 --> 00:04:21,820
surprising that D3 can do that 

129
00:04:21,830 --> 00:04:23,260
for us. But it can also do some 

130
00:04:23,270 --> 00:04:24,710
other things. One thing that 

131
00:04:24,720 --> 00:04:26,020
we''re going to look at here is 

132
00:04:26,110 --> 00:04:28,120
actually animating a color 

133
00:04:28,130 --> 00:04:30,650
change. Rather than changing an 

134
00:04:30,660 --> 00:04:33,190
attribute on the SVG tag, we''re 

135
00:04:33,200 --> 00:04:34,930
actually going to change a style 

136
00:04:34,940 --> 00:04:36,490
property, in this case fill. 

137
00:04:37,160 --> 00:04:38,410
We''ll just tell it to change it 

138
00:04:38,420 --> 00:04:39,990
to purple here, as part of the 

139
00:04:40,000 --> 00:04:42,130
last step. We get our x and y 

140
00:04:42,140 --> 00:04:44,000
animations. Along with our 

141
00:04:44,010 --> 00:04:46,720
radius change, we''ll get that 

142
00:04:46,730 --> 00:04:47,990
color change as well, since 

143
00:04:48,000 --> 00:04:49,600
we''re attaching to that final 

144
00:04:49,610 --> 00:04:52,550
step in our animation sequence. 

145
00:04:53,080 --> 00:04:55,370
If we then copy this style 

146
00:04:55,380 --> 00:04:58,360
change and add a new one to each 

147
00:04:58,370 --> 00:05:00,270
of our first two steps, we can 

148
00:05:00,280 --> 00:05:02,810
then have these transition to 

149
00:05:02,820 --> 00:05:04,750
other colors. Then we''ll get a 

150
00:05:06,130 --> 00:05:07,670
different color as each part of 

151
00:05:07,680 --> 00:05:09,770
our animation plays. Now, if we 

152
00:05:09,780 --> 00:05:12,670
save this and let it play, we''ll 

153
00:05:12,680 --> 00:05:16,250
see that as we change x axis, y 

154
00:05:16,260 --> 00:05:18,300
axis, and radius, we get a color 

155
00:05:18,310 --> 00:05:19,870
change with each step along the 

156
00:05:19,880 --> 00:05:20,220
way.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, 'https://stream.mux.com/9zEcmD6KQqpSWnTY9lWFYGhFL4JQijLRPX5a5GXw8Y4.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (304, 'Creating Axes with D3', '', 'Learn the ins and outs of creating chart axes in D3, as well as some options for customizing them.', 452, NULL, '2015-01-07T22:32:57.237Z', '2019-02-13T04:02:26.256Z', 'd3-creating-axes-with-d3', '', 'v2res9aguy', '', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_v2res9aguy" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-d3-creating-axes-with-d3.mp4" /><meta itemprop="duration" content="PT7M32S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/24c7cb5c6c8ec7e2a83209750b7e98196c9da8cb.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/edb466e00811b71bfbd5d511f541004c82e6497e.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=452.591&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F24c7cb5c6c8ec7e2a83209750b7e98196c9da8cb.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fedb466e00811b71bfbd5d511f541004c82e6497e.bin" /><meta itemprop="uploadDate" content="2015-01-06T23:17:23Z" /><object id="wistia_v2res9aguy_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=452.591&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F24c7cb5c6c8ec7e2a83209750b7e98196c9da8cb.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fedb466e00811b71bfbd5d511f541004c82e6497e.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=452.591&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F24c7cb5c6c8ec7e2a83209750b7e98196c9da8cb.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fedb466e00811b71bfbd5d511f541004c82e6497e.bin" name="wistia_v2res9aguy_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-d3-creating-axes-with-d3.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("v2res9aguy", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/v2res9aguy/metadata.js"></script>', '', '', true, '13-egghead-d3-creating-axes-with-d3.mp4', 1, true, false, 1, NULL, NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-d3-creating-axes-with-d3/egghead-d3-creating-axes-with-d3.mp4', 'egghead-d3-creating-axes-with-d3', 'zzbZ', 'https://egghead-pipeline.s3.amazonaws.com/egghead-d3-creating-axes-with-d3/09---intro-to-axes.mp3', 0, '', '', 'tigizi/2', '', '', NULL, 'published', '2015-01-07T22:32:57.237Z', NULL, 8387216, '', 362, 0, NULL, 12, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/13-d3-creating-axes-with-d3?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1928947791, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (591, 'Responsive D3 charts with the viewBox attribute', '', 'Ensuring your charts are responsive is essential if you want them to work regardless of the user''s device and screen size. In this lesson we''ll learn how the viewBox attribute of SVG elements works, and apply that knowledge to make a future-proof D3 chart.', 675, NULL, '2015-09-28T03:05:22.055Z', '2025-12-13T00:54:53.678Z', 'd3-responsive-d3-charts-with-the-viewbox-attribute', '', '6w70o12a2t', '', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_6w70o12a2t" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-responsive-d3-charts-with-the-viewbox-attribute.mp4" /><meta itemprop="duration" content="PT11M15S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/e83f977999aa4da90b4f8d8464f844469cdf96d4.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/bf663958c4013340d4d29551e272d8107ed55b59.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=675.802&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe83f977999aa4da90b4f8d8464f844469cdf96d4.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fbf663958c4013340d4d29551e272d8107ed55b59.bin" /><meta itemprop="uploadDate" content="2015-09-15T16:18:12Z" /><object id="wistia_6w70o12a2t_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=675.802&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe83f977999aa4da90b4f8d8464f844469cdf96d4.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fbf663958c4013340d4d29551e272d8107ed55b59.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=675.802&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fe83f977999aa4da90b4f8d8464f844469cdf96d4.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fbf663958c4013340d4d29551e272d8107ed55b59.bin" name="wistia_6w70o12a2t_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-responsive-d3-charts-with-the-viewbox-attribute.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("6w70o12a2t", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/6w70o12a2t/metadata.js"></script>', '[00:01] Making your D3 charts responsive can be accomplished in a number of ways, but we''re going to take a look at using the viewBox attribute of SVG tags. We''ve got a simple example here, where we''ve got a div which has got a couple of funds inside that div.

[00:14] Then we have a div where we''re going to build our chart, and then we''re including D3 itself in our JavaScript code. If we look at our styles here, we''ve just got a style for our chart div, and a style for our SVG tag. We''ve got a gray background on our div, and a blue background on our SVG, just so we can see where each container is.

[00:39] If we look at our page here, we can see that our div resizes as we resize the page, but our SVG tag is static. It''s not going to change based on the browser resizing. Now, our buttons here just call our resize SVG function, pass in dimensions and then that function just updates the width and height attributes of our SVG tag.

[01:02] If we actually go try those out, we can see that our SVG blue background does change sizes, but our chart itself doesn''t resize, and that''s what we''re going to fix. If we look at the code that''s actually building this chart, we can see that we''re just selecting that chart div, and then appending our SVG tag, setting it''s width and height, and then we''re calling this function that I''ve named init.

[01:28] Before we get to that, we''ve got our within their height defined up here. We''ve got a very simple array of data, and then we''ve got some X and Y scales that we''re going to use just to make sure that our chart fills the SVG tag, so we''ll use those when sizing our bars.

[01:46] If we now look at the init function, you can see we just use the regular D3 code to create a rect shape for each piece of our data. We set it''s fill style to be green, and then we''re just using the scales to set our X and Y, and width and height for all of those bars.

[02:10] We''re using those to ensure that everything fills that area. You can see that it is, in fact, working. Now, the viewBox attribute that we''re going to be taking a look at is explained in a lot of detail, and with a lot of other stuff in this absolutely excellent series of articles by Sarah Suidon that I highly, highly recommend you checking out.

[02:32] We''re interested in the viewPort and the viewBox, so if we''re going to scroll down here and just show you a couple important pieces here. This tells us that the viewPort is the viewing area where the SVG will be visible. You can think of the viewPort as a window through which you can see a particular scene.

[02:52] For our purposes, at least, you can essentially think of the viewPort as the SVG tag itself. Whatever width and height attributes we put on that SVG tag, that''s going to be the size of our viewPort. Now, if we come down and look at this section of the article that discusses the viewBox that we''re going to be using, it says you can think of the viewBox as the real coordinate system, because it''s the coordinate system used to draw the SVG graphics.

[03:20] The article also tells us that you specify your own user coordinate system using the viewBox attribute. If the system has the same aspect ratio as the viewPort coordinate system, it''ll stretch to fill it. Essentially, otherwise, is not going to fill it because it''s going to be off in one direction or another.

[03:37] In those cases, use an attribute called preserveAspectRatio, which we''re not really going to get into in this lesson. The important thing is that this is going to stretch to fill the viewPort area. The dimensions that we give in the viewBox attribute are going to stretch to make the attributes on the SVG tag, the width and height attributes on the SVG tag.

[04:02] Knowing that, we can take a look at what''s actually going on here, in our example. Before we go on, I''m actually going to change the size here to 600 by 600, just so that we can fit everything in our viewPort here, and not have to scroll around. Then we''ll go ahead and let''s make this padding a little smaller, so now everything actually fits in there and we can see exactly what''s going on.

[04:26] Now, if we take our existing code and just add the viewBox attribute to the SVG tag, we''ll see how that changes the behavior here. The viewBox attribute takes a space separated list, not comma separated, so we''re just going to do zero zero to start at the top left, and then give it the same width and height.

[04:46] You can see now, when we resize our SVG tag, our actual chart scales to fill that tag. You can see, in the inspector here, our viewBox is still 400 by 400, but the SVG has changed to 600 by 600 and it''s then scaling up to fill that space, just like we talked about before.

[05:06] They really are being scaled. They''re not being redrawn to fill the space, it''s simply scaling those vectors. Just by adding that attribute, you do get some benefits of making sure that your chart actually fills the space. Now, one thing I want to show here is that the way that viewBox behaves can be a little bit counter-intuitive at times.

[05:30] If we divide our width and height in half here, so our width and height is 400, we''re going to set our viewBox to be 200 by 200. What''s going to happen if we refresh? Well, it turns out that the chart is too big to actually fit in the viewPort, it''s too big to fit in the SVG tag.

[05:52] What''s going on here is it''s actually drawing the chart in a 200 by 200 square, essentially the top left corner of our SVG tag, and then that viewBox is actually getting scaled up to fill the 400 by 400 space, and that means that our bars in our chart are actually mostly out of view here.

[06:14] It''s being drawn small, and scaled up entirely, and now it doesn''t fit in our area. You can see, if we change the size of the SVG tag, the relationship stays the same. What we actually can do is, if we want it smaller, we can set our viewBox to be twice as big as our SVG tag, and then when the viewBox gets scaled down to fit in that width and height, our chart actually gets scaled down.

[06:48] Now you can see that our chart is actually filling up half as much room as the SVG tag has. It''s sort of backwards there, but if you think about how the scaling and things work, it does make sense. I definitely encourage you to check out that article more, because it really explains it in a lot of depth, and even has an interactive explorer where you can play with different settings.

[07:09] Now that we have a basic understanding of the underlying pieces, I want to take a look at another article that provided the base implementation of what I generally use these days. It''s an article by Brendan Sudol, and it''s exactly what we''re looking to learn about here, responsive D3.

[07:30] He has abstracted this stuff into a nice little function called Responsify, where essentially you just pass in any SVG tag, and it makes your chart responsive. We''re going to go ahead and paste in his code, into our application here, and then we''ll take a look at what this actually does.

[07:50] In this function, we''re going to pass in the SVG tag itself, and then this code is going to go and find the parent container. In our case, that''s going to be our chart div, this tag here. Once it has a reference to that parent container, it''s just going to get the width and height.

[08:11] This code is actually going to get the width and the height, regardless of how those width and height are set, it''ll get the actual measured dimensions of that. Lastly, it''ll calculate the aspect ratio by dividing the width and the height. The next step in this function is to actually create that viewBox attribute that we had been manually setting before.

[08:36] This is going to set the viewBox equal to the width and the height that is actually measures from the parent container. Then it''s going to set that preserveAspectRatio attribute which we ignore for now, and then it''s going to call a resize function.

[08:53] This Responsify function also sets up a resize listener, so this is setting it up so that whenever the browser window gets resized, it''s also going to call this resize function. It calls it when you initially call this function, or pass your SVG tag into this function, and then it''ll also call this function any time the browser window resizes.

[09:17] What does this resize function do? It gets the width of the parent container again. This is, again, going to be our enclosing div. It finds the current width of it, so maybe the page was resized, and it recalculates that width. Then it simply updates the SVG tags width and height attributes accordingly.

[09:42] It sets the width to be the same as the container width, and then it sets the height based on that aspect ratio. In our case, our example here is just a one by one square, so that ratio doesn''t come into play, but it is handy to have that there if you have a non-square chart, which is generally going to be the case.

[10:01] This function is only going to be updating the width and height attributes of the SVG tag, but the fact that we have the viewBox set will ensure that everything stays scaled properly. We can come down here, now, to where we''re creating ours, and get rid of the viewBox that we manually created.

[10:23] Then we''ll just add this call to Responsify when our chart initially gets created. We set up our chart, we build the initial size and everything, and then we pass that SVG tag through to Responsify, and that''ll set up all of our responsiveness.

[10:40] If we save that, you can look over here and see it''s already the scaling to fill the space, and now if we look at the SVG tag, notice our viewBox is 400, but our width and our height are filling the available space. The SVG tag has been updated by the Responsify function to match the size of the chart, and everything is getting filled thanks to that viewBox attribute.

[11:04] We can see these numbers update. If we resize our SVG tags, dimensions are getting updated, and our viewBox is staying the same, but everything is still filling that available area.', '', true, '16-egghead-d3-responsive-d3-charts-with-the-viewbox-attribute.mp4', 1, true, false, 1, NULL, NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/egghead-responsive-d3-charts-with-the-viewbox-attribute/egghead-responsive-d3-charts-with-the-viewbox-attribute.mp4', 'egghead-responsive-d3-charts-with-the-viewbox-attribute', 'zw42', 'https://egghead-pipeline.s3.amazonaws.com/egghead-responsive-d3-charts-with-the-viewbox-attribute/viewBox.mp3', 0, '', '', 'keliqo/3', '', '', NULL, 'published', '2015-10-19T22:28:12.800Z', NULL, 8341220, '', 896, 0, NULL, 15, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/16-d3-responsive-d3-charts-with-the-viewbox-attribute?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -2021456919, '1
00:00:01,080 --> 00:00:02,060
Making your D3 charts responsive 

2
00:00:02,070 --> 00:00:03,480
can be accomplished in a number 

3
00:00:03,490 --> 00:00:04,560
of ways, but we''re going to take 

4
00:00:04,570 --> 00:00:05,780
a look at using the viewBox 

5
00:00:05,855 --> 00:00:09,570
attribute of SVG tags. We''ve got 

6
00:00:09,580 --> 00:00:11,150
a simple example here, where 

7
00:00:11,225 --> 00:00:12,610
we''ve got a div which has got a 

8
00:00:12,620 --> 00:00:14,840
couple of funds inside that div. 

9
00:00:14,700 --> 00:00:15,650
Then we have a div where we''re 

10
00:00:15,650 --> 00:00:17,200
going to build our chart, and 

11
00:00:17,210 --> 00:00:18,970
then we''re including D3 itself 

12
00:00:19,040 --> 00:00:21,950
in our JavaScript code. If we 

13
00:00:21,960 --> 00:00:23,200
look at our styles here, we''ve 

14
00:00:23,210 --> 00:00:25,850
just got a style for our chart 

15
00:00:25,925 --> 00:00:29,460
div, and a style for our SVG tag. 

16
00:00:29,740 --> 00:00:31,490
We''ve got a gray background on 

17
00:00:31,565 --> 00:00:33,660
our div, and a blue background 

18
00:00:33,670 --> 00:00:35,580
on our SVG, just so we can see 

19
00:00:36,060 --> 00:00:39,270
where each container is. If we 

20
00:00:39,280 --> 00:00:41,630
look at our page here, we can 

21
00:00:41,640 --> 00:00:43,660
see that our div resizes as we 

22
00:00:43,735 --> 00:00:45,670
resize the page, but our SVG tag 

23
00:00:46,130 --> 00:00:48,080
is static. It''s not going to 

24
00:00:47,320 --> 00:00:49,960
change based on the browser 

25
00:00:50,035 --> 00:00:51,660
resizing. Now, our buttons here 

26
00:00:51,670 --> 00:00:53,750
just call our resize SVG 

27
00:00:53,900 --> 00:00:56,330
function, pass in dimensions and 

28
00:00:56,340 --> 00:00:58,730
then that function just updates 

29
00:00:58,740 --> 00:01:00,260
the width and height attributes 

30
00:01:00,350 --> 00:01:02,670
of our SVG tag. If we actually 

31
00:01:02,680 --> 00:01:04,490
go try those out, we can see 

32
00:01:04,500 --> 00:01:07,950
that our SVG blue background 

33
00:01:07,960 --> 00:01:09,730
does change sizes, but our chart 

34
00:01:09,740 --> 00:01:11,310
itself doesn''t resize, and 

35
00:01:11,385 --> 00:01:13,710
that''s what we''re going to fix. 

36
00:01:12,850 --> 00:01:14,320
If we look at the code that''s 

37
00:01:14,330 --> 00:01:15,650
actually building this chart, we 

38
00:01:15,660 --> 00:01:16,580
can see that we''re just 

39
00:01:16,950 --> 00:01:19,050
selecting that chart div, and 

40
00:01:19,125 --> 00:01:21,280
then appending our SVG tag, 

41
00:01:21,680 --> 00:01:23,020
setting it''s width and height, 

42
00:01:23,020 --> 00:01:24,250
and then we''re calling this 

43
00:01:24,360 --> 00:01:26,320
function that I''ve named init. 

44
00:01:28,480 --> 00:01:29,960
Before we get to that, we''ve got 

45
00:01:29,970 --> 00:01:32,830
our within their height defined 

46
00:01:32,840 --> 00:01:34,520
up here. We''ve got a very simple 

47
00:01:34,670 --> 00:01:36,650
array of data, and then we''ve 

48
00:01:36,660 --> 00:01:38,480
got some X and Y scales that 

49
00:01:38,490 --> 00:01:39,620
we''re going to use just to make 

50
00:01:39,630 --> 00:01:41,790
sure that our chart fills the 

51
00:01:41,865 --> 00:01:44,930
SVG tag, so we''ll use those when 

52
00:01:44,940 --> 00:01:47,060
sizing our bars. If we now look 

53
00:01:47,070 --> 00:01:49,080
at the init function, you can 

54
00:01:49,090 --> 00:01:51,700
see we just use the regular D3 

55
00:01:51,775 --> 00:01:56,150
code to create a rect shape for 

56
00:01:56,160 --> 00:01:58,430
each piece of our data. We set 

57
00:01:59,790 --> 00:02:01,930
it''s fill style to be green, and 

58
00:02:01,940 --> 00:02:04,630
then we''re just using the scales 

59
00:02:04,670 --> 00:02:07,810
to set our X and Y, and width 

60
00:02:07,820 --> 00:02:09,480
and height for all of those bars. 

61
00:02:10,430 --> 00:02:11,630
We''re using those to ensure that 

62
00:02:11,640 --> 00:02:14,250
everything fills that area. You 

63
00:02:14,260 --> 00:02:15,440
can see that it is, in fact, 

64
00:02:15,450 --> 00:02:19,250
working. Now, the viewBox 

65
00:02:19,280 --> 00:02:20,220
attribute that we''re going to be 

66
00:02:20,230 --> 00:02:22,020
taking a look at is explained in 

67
00:02:22,070 --> 00:02:23,520
a lot of detail, and with a lot 

68
00:02:23,530 --> 00:02:25,090
of other stuff in this 

69
00:02:25,190 --> 00:02:27,800
absolutely excellent series of 

70
00:02:27,810 --> 00:02:30,710
articles by Sarah Suidon that I 

71
00:02:30,720 --> 00:02:32,000
highly, highly recommend you 

72
00:02:32,010 --> 00:02:33,600
checking out. We''re interested 

73
00:02:33,610 --> 00:02:36,060
in the viewPort and the viewBox, 

74
00:02:36,270 --> 00:02:38,160
so if we''re going to scroll down 

75
00:02:38,170 --> 00:02:39,400
here and just show you a couple 

76
00:02:40,260 --> 00:02:42,480
important pieces here. This 

77
00:02:42,490 --> 00:02:43,990
tells us that the viewPort is 

78
00:02:44,000 --> 00:02:46,270
the viewing area where the SVG 

79
00:02:45,920 --> 00:02:47,570
will be visible. You can think 

80
00:02:47,580 --> 00:02:48,810
of the viewPort as a window 

81
00:02:48,820 --> 00:02:49,870
through which you can see a 

82
00:02:49,880 --> 00:02:52,880
particular scene. For our 

83
00:02:52,890 --> 00:02:53,960
purposes, at least, you can 

84
00:02:53,970 --> 00:02:54,920
essentially think of the 

85
00:02:54,995 --> 00:02:58,120
viewPort as the SVG tag itself. 

86
00:02:58,120 --> 00:03:00,010
Whatever width and height 

87
00:03:00,020 --> 00:03:02,300
attributes we put on that SVG 

88
00:03:01,960 --> 00:03:03,820
tag, that''s going to be the size 

89
00:03:04,830 --> 00:03:05,330
of our viewPort. Now, if we come 

90
00:03:05,340 --> 00:03:07,180
down and look at this section of 

91
00:03:07,190 --> 00:03:08,970
the article that discusses the 

92
00:03:09,045 --> 00:03:10,280
viewBox that we''re going to be 

93
00:03:10,310 --> 00:03:12,710
using, it says you can think of 

94
00:03:12,720 --> 00:03:14,380
the viewBox as the real 

95
00:03:14,390 --> 00:03:16,120
coordinate system, because it''s 

96
00:03:16,130 --> 00:03:17,930
the coordinate system used to 

97
00:03:17,940 --> 00:03:20,090
draw the SVG graphics. The 

98
00:03:20,100 --> 00:03:21,410
article also tells us that you 

99
00:03:21,420 --> 00:03:23,290
specify your own user coordinate 

100
00:03:23,300 --> 00:03:25,290
system using the viewBox 

101
00:03:25,110 --> 00:03:27,100
attribute. If the system has the 

102
00:03:27,110 --> 00:03:29,110
same aspect ratio as the 

103
00:03:29,185 --> 00:03:30,540
viewPort coordinate system, 

104
00:03:30,640 --> 00:03:31,840
it''ll stretch to fill it. 

105
00:03:32,300 --> 00:03:33,740
Essentially, otherwise, is not 

106
00:03:33,750 --> 00:03:34,770
going to fill it because it''s 

107
00:03:34,845 --> 00:03:36,430
going to be off in one direction 

108
00:03:36,440 --> 00:03:38,840
or another. In those cases, use 

109
00:03:40,220 --> 00:03:41,220
an attribute called 

110
00:03:41,295 --> 00:03:42,600
preserveAspectRatio, which we''re 

111
00:03:42,610 --> 00:03:43,810
not really going to get into in 

112
00:03:43,820 --> 00:03:45,830
this lesson. The important thing 

113
00:03:45,840 --> 00:03:48,060
is that this is going to stretch 

114
00:03:48,110 --> 00:03:50,690
to fill the viewPort area. The 

115
00:03:50,700 --> 00:03:53,960
dimensions that we give in the 

116
00:03:54,035 --> 00:03:55,300
viewBox attribute are going to 

117
00:03:55,310 --> 00:03:58,040
stretch to make the attributes 

118
00:03:58,100 --> 00:03:59,720
on the SVG tag, the width and 

119
00:03:59,730 --> 00:04:02,100
height attributes on the SVG tag. 

120
00:04:02,550 --> 00:04:04,450
Knowing that, we can take a look 

121
00:04:04,520 --> 00:04:06,360
at what''s actually going on here, 

122
00:04:06,610 --> 00:04:08,570
in our example. Before we go on, 

123
00:04:08,580 --> 00:04:10,950
I''m actually going to change the 

124
00:04:10,960 --> 00:04:13,710
size here to 600 by 600, just so 

125
00:04:13,720 --> 00:04:15,640
that we can fit everything in 

126
00:04:15,650 --> 00:04:16,890
our viewPort here, and not have 

127
00:04:16,900 --> 00:04:19,260
to scroll around. Then we''ll go 

128
00:04:19,260 --> 00:04:20,820
ahead and let''s make this 

129
00:04:20,930 --> 00:04:23,140
padding a little smaller, so now 

130
00:04:23,410 --> 00:04:24,670
everything actually fits in 

131
00:04:24,680 --> 00:04:25,890
there and we can see exactly 

132
00:04:25,900 --> 00:04:27,330
what''s going on. Now, if we 

133
00:04:27,340 --> 00:04:29,650
take our existing code and just 

134
00:04:29,660 --> 00:04:32,880
add the viewBox attribute to the 

135
00:04:32,955 --> 00:04:34,870
SVG tag, we''ll see how that 

136
00:04:34,880 --> 00:04:37,330
changes the behavior here. The 

137
00:04:37,405 --> 00:04:39,320
viewBox attribute takes a space 

138
00:04:39,330 --> 00:04:40,840
separated list, not comma 

139
00:04:40,850 --> 00:04:42,190
separated, so we''re just going 

140
00:04:41,800 --> 00:04:43,830
to do zero zero to start at the 

141
00:04:43,840 --> 00:04:45,150
top left, and then give it the 

142
00:04:45,160 --> 00:04:47,120
same width and height. You can 

143
00:04:47,130 --> 00:04:50,190
see now, when we resize our SVG 

144
00:04:49,170 --> 00:04:52,480
tag, our actual chart scales to 

145
00:04:52,490 --> 00:04:54,180
fill that tag. You can see, in 

146
00:04:54,190 --> 00:04:56,030
the inspector here, our viewBox 

147
00:04:56,105 --> 00:04:59,230
is still 400 by 400, but the SVG 

148
00:04:59,240 --> 00:05:01,760
has changed to 600 by 600 and 

149
00:05:01,770 --> 00:05:04,370
it''s then scaling up to fill 

150
00:05:04,380 --> 00:05:05,990
that space, just like we talked 

151
00:05:06,000 --> 00:05:07,650
about before. They really are 

152
00:05:07,660 --> 00:05:09,310
being scaled. They''re not being 

153
00:05:09,320 --> 00:05:11,300
redrawn to fill the space, it''s 

154
00:05:11,310 --> 00:05:12,900
simply scaling those vectors. 

155
00:05:13,150 --> 00:05:15,280
Just by adding that attribute, 

156
00:05:15,290 --> 00:05:17,620
you do get some benefits of 

157
00:05:17,680 --> 00:05:19,910
making sure that your chart 

158
00:05:19,920 --> 00:05:22,290
actually fills the space. Now, 

159
00:05:22,530 --> 00:05:24,060
one thing I want to show here is 

160
00:05:24,070 --> 00:05:26,370
that the way that viewBox 

161
00:05:26,430 --> 00:05:28,260
behaves can be a little bit 

162
00:05:28,350 --> 00:05:30,770
counter-intuitive at times. If 

163
00:05:30,780 --> 00:05:33,610
we divide our width and height 

164
00:05:34,030 --> 00:05:36,330
in half here, so our width and 

165
00:05:36,340 --> 00:05:38,340
height is 400, we''re going to 

166
00:05:38,370 --> 00:05:41,220
set our viewBox to be 200 by 200. 

167
00:05:39,240 --> 00:05:43,730
What''s going to happen if we 

168
00:05:43,740 --> 00:05:46,410
refresh? Well, it turns out that 

169
00:05:47,070 --> 00:05:49,120
the chart is too big to actually 

170
00:05:49,130 --> 00:05:50,650
fit in the viewPort, it''s too 

171
00:05:50,660 --> 00:05:52,400
big to fit in the SVG tag. 

172
00:05:52,760 --> 00:05:53,970
What''s going on here is it''s 

173
00:05:53,980 --> 00:05:56,020
actually drawing the chart in a 

174
00:05:56,095 --> 00:05:58,820
200 by 200 square, essentially 

175
00:05:58,830 --> 00:06:00,630
the top left corner of our SVG 

176
00:06:00,790 --> 00:06:03,160
tag, and then that viewBox is 

177
00:06:03,170 --> 00:06:05,070
actually getting scaled up to 

178
00:06:05,080 --> 00:06:08,310
fill the 400 by 400 space, and 

179
00:06:08,320 --> 00:06:11,610
that means that our bars in our 

180
00:06:11,620 --> 00:06:13,380
chart are actually mostly out of 

181
00:06:13,390 --> 00:06:15,650
view here. It''s being drawn 

182
00:06:15,660 --> 00:06:18,850
small, and scaled up entirely, 

183
00:06:18,920 --> 00:06:21,300
and now it doesn''t fit in our 

184
00:06:22,120 --> 00:06:23,550
area. You can see, if we change 

185
00:06:23,560 --> 00:06:27,750
the size of the SVG tag, the 

186
00:06:26,560 --> 00:06:28,060
relationship stays the same. 

187
00:06:29,330 --> 00:06:32,530
What we actually can do is, if 

188
00:06:32,530 --> 00:06:34,980
we want it smaller, we can set 

189
00:06:35,340 --> 00:06:37,260
our viewBox to be twice as big 

190
00:06:37,300 --> 00:06:41,250
as our SVG tag, and then when 

191
00:06:41,690 --> 00:06:43,800
the viewBox gets scaled down to 

192
00:06:43,810 --> 00:06:45,780
fit in that width and height, 

193
00:06:46,400 --> 00:06:47,830
our chart actually gets scaled 

194
00:06:47,840 --> 00:06:48,870
down. Now you can see that our 

195
00:06:48,880 --> 00:06:50,160
chart is actually filling up 

196
00:06:50,480 --> 00:06:53,470
half as much room as the SVG tag 

197
00:06:53,545 --> 00:06:55,530
has. It''s sort of backwards 

198
00:06:55,540 --> 00:06:56,710
there, but if you think about 

199
00:06:56,720 --> 00:06:58,250
how the scaling and things work, 

200
00:06:58,325 --> 00:07:00,510
it does make sense. I definitely 

201
00:07:00,520 --> 00:07:01,630
encourage you to check out that 

202
00:07:01,640 --> 00:07:03,480
article more, because it really 

203
00:07:03,490 --> 00:07:05,040
explains it in a lot of depth, 

204
00:07:05,200 --> 00:07:07,050
and even has an interactive 

205
00:07:07,060 --> 00:07:08,540
explorer where you can play with 

206
00:07:08,550 --> 00:07:09,750
different settings. Now that we 

207
00:07:09,750 --> 00:07:12,100
have a basic understanding of 

208
00:07:12,350 --> 00:07:14,900
the underlying pieces, I want to 

209
00:07:14,910 --> 00:07:16,380
take a look at another article 

210
00:07:17,800 --> 00:07:19,610
that provided the base 

211
00:07:19,620 --> 00:07:20,760
implementation of what I 

212
00:07:20,770 --> 00:07:23,100
generally use these days. It''s 

213
00:07:23,110 --> 00:07:25,550
an article by Brendan Sudol, and 

214
00:07:25,670 --> 00:07:27,770
it''s exactly what we''re looking 

215
00:07:27,780 --> 00:07:29,930
to learn about here, responsive 

216
00:07:30,005 --> 00:07:31,670
D3. He has abstracted this 

217
00:07:31,680 --> 00:07:32,950
stuff into a nice little 

218
00:07:32,960 --> 00:07:34,080
function called Responsify, 

219
00:07:34,155 --> 00:07:36,050
where essentially you just pass 

220
00:07:36,060 --> 00:07:39,820
in any SVG tag, and it makes 

221
00:07:39,830 --> 00:07:41,270
your chart responsive. We''re 

222
00:07:40,990 --> 00:07:43,260
going to go ahead and paste in 

223
00:07:43,270 --> 00:07:46,230
his code, into our application 

224
00:07:46,240 --> 00:07:47,950
here, and then we''ll take a look 

225
00:07:47,990 --> 00:07:50,390
at what this actually does. In 

226
00:07:50,400 --> 00:07:51,680
this function, we''re going to 

227
00:07:51,360 --> 00:07:54,470
pass in the SVG tag itself, and 

228
00:07:54,480 --> 00:07:56,720
then this code is going to go 

229
00:07:56,730 --> 00:07:58,510
and find the parent container. 

230
00:07:59,170 --> 00:08:01,370
In our case, that''s going to be 

231
00:08:01,650 --> 00:08:05,080
our chart div, this tag here. 

232
00:08:06,070 --> 00:08:07,730
Once it has a reference to that 

233
00:08:07,740 --> 00:08:09,340
parent container, it''s just 

234
00:08:09,340 --> 00:08:10,730
going to get the width and 

235
00:08:10,740 --> 00:08:11,970
height. This code is actually 

236
00:08:12,045 --> 00:08:13,300
going to get the width and the 

237
00:08:12,980 --> 00:08:15,300
height, regardless of how those 

238
00:08:15,310 --> 00:08:16,910
width and height are set, it''ll 

239
00:08:16,920 --> 00:08:19,050
get the actual measured 

240
00:08:19,290 --> 00:08:21,520
dimensions of that. Lastly, 

241
00:08:21,570 --> 00:08:23,650
it''ll calculate the aspect ratio 

242
00:08:24,020 --> 00:08:25,490
by dividing the width and the 

243
00:08:25,490 --> 00:08:28,380
height. The next step in this 

244
00:08:28,390 --> 00:08:31,080
function is to actually create 

245
00:08:31,100 --> 00:08:32,790
that viewBox attribute that we 

246
00:08:32,800 --> 00:08:36,370
had been manually setting before. 

247
00:08:36,570 --> 00:08:39,170
This is going to set the viewBox 

248
00:08:39,110 --> 00:08:40,660
equal to the width and the 

249
00:08:40,670 --> 00:08:43,020
height that is actually measures 

250
00:08:43,030 --> 00:08:45,430
from the parent container. Then 

251
00:08:45,430 --> 00:08:48,110
it''s going to set that 

252
00:08:48,185 --> 00:08:48,910
preserveAspectRatio attribute 

253
00:08:48,560 --> 00:08:50,650
which we ignore for now, and 

254
00:08:50,660 --> 00:08:53,240
then it''s going to call a resize 

255
00:08:53,315 --> 00:08:54,440
function. This Responsify 

256
00:08:55,150 --> 00:08:57,960
function also sets up a resize 

257
00:08:58,210 --> 00:09:00,490
listener, so this is setting it 

258
00:09:00,500 --> 00:09:02,700
up so that whenever the browser 

259
00:09:02,710 --> 00:09:04,420
window gets resized, it''s also 

260
00:09:04,430 --> 00:09:06,380
going to call this resize 

261
00:09:06,455 --> 00:09:07,070
function. It calls it when you 

262
00:09:07,190 --> 00:09:08,740
initially call this function, or 

263
00:09:08,750 --> 00:09:11,050
pass your SVG tag into this 

264
00:09:11,060 --> 00:09:12,700
function, and then it''ll also 

265
00:09:12,710 --> 00:09:14,580
call this function any time the 

266
00:09:14,590 --> 00:09:18,050
browser window resizes. What 

267
00:09:18,060 --> 00:09:21,270
does this resize function do? It 

268
00:09:21,270 --> 00:09:25,330
gets the width of the parent 

269
00:09:25,340 --> 00:09:27,200
container again. This is, again, 

270
00:09:27,275 --> 00:09:28,860
going to be our enclosing div. 

271
00:09:29,330 --> 00:09:31,140
It finds the current width of it, 

272
00:09:31,150 --> 00:09:33,280
so maybe the page was resized, 

273
00:09:33,355 --> 00:09:34,560
and it recalculates that width. 

274
00:09:34,770 --> 00:09:38,440
Then it simply updates the SVG 

275
00:09:38,700 --> 00:09:40,740
tags width and height attributes 

276
00:09:41,270 --> 00:09:43,100
accordingly. It sets the width 

277
00:09:43,110 --> 00:09:44,530
to be the same as the container 

278
00:09:44,540 --> 00:09:45,810
width, and then it sets the 

279
00:09:45,820 --> 00:09:48,490
height based on that aspect 

280
00:09:48,500 --> 00:09:50,240
ratio. In our case, our example 

281
00:09:50,250 --> 00:09:52,570
here is just a one by one square, 

282
00:09:52,950 --> 00:09:54,740
so that ratio doesn''t come into 

283
00:09:54,750 --> 00:09:56,200
play, but it is handy to have 

284
00:09:56,210 --> 00:09:59,010
that there if you have a non-

285
00:09:59,020 --> 00:10:00,610
square chart, which is generally 

286
00:10:00,685 --> 00:10:02,070
going to be the case. This 

287
00:10:02,080 --> 00:10:03,830
function is only going to be 

288
00:10:04,050 --> 00:10:05,080
updating the width and height 

289
00:10:05,180 --> 00:10:08,470
attributes of the SVG tag, but 

290
00:10:08,640 --> 00:10:09,740
the fact that we have the 

291
00:10:09,815 --> 00:10:12,580
viewBox set will ensure that 

292
00:10:12,590 --> 00:10:16,010
everything stays scaled properly. 

293
00:10:17,360 --> 00:10:18,860
We can come down here, now, to 

294
00:10:18,870 --> 00:10:20,050
where we''re creating ours, and 

295
00:10:20,060 --> 00:10:21,570
get rid of the viewBox that we 

296
00:10:21,740 --> 00:10:23,750
manually created. Then we''ll 

297
00:10:23,750 --> 00:10:25,890
just add this call to Responsify 

298
00:10:26,790 --> 00:10:28,020
when our chart initially gets 

299
00:10:28,030 --> 00:10:30,600
created. We set up our chart, we 

300
00:10:30,610 --> 00:10:33,330
build the initial size and 

301
00:10:33,340 --> 00:10:34,770
everything, and then we pass 

302
00:10:34,780 --> 00:10:36,580
that SVG tag through to 

303
00:10:36,655 --> 00:10:38,520
Responsify, and that''ll set up 

304
00:10:38,950 --> 00:10:40,630
all of our responsiveness. If 

305
00:10:40,640 --> 00:10:41,910
we save that, you can look over 

306
00:10:41,920 --> 00:10:43,540
here and see it''s already the 

307
00:10:43,615 --> 00:10:45,770
scaling to fill the space, and 

308
00:10:45,780 --> 00:10:47,810
now if we look at the SVG tag, 

309
00:10:47,820 --> 00:10:50,190
notice our viewBox is 400, but 

310
00:10:50,200 --> 00:10:51,470
our width and our height are 

311
00:10:51,480 --> 00:10:54,500
filling the available space. The 

312
00:10:54,575 --> 00:10:57,680
SVG tag has been updated by the 

313
00:10:57,755 --> 00:10:59,080
Responsify function to match the 

314
00:10:59,090 --> 00:11:01,040
size of the chart, and 

315
00:11:01,190 --> 00:11:02,320
everything is getting filled 

316
00:11:02,330 --> 00:11:03,700
thanks to that viewBox attribute. 

317
00:11:04,130 --> 00:11:06,260
We can see these numbers update. 

318
00:11:06,270 --> 00:11:08,120
If we resize our SVG tags, 

319
00:11:09,350 --> 00:11:11,080
dimensions are getting updated, 

320
00:11:11,090 --> 00:11:12,310
and our viewBox is staying the 

321
00:11:12,320 --> 00:11:13,980
same, but everything is still 

322
00:11:13,990 --> 00:11:15,650
filling that available area.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, 'https://stream.mux.com/V93qSzI2lmIjt2XxhPQA48uMSryYlKo00Z9vtKwHIaCY.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (88, 'Color Scales', '', 'In this addition to Ben''s series of lessons on D3, you''ll explore the use of color scales in your D3 charts. ', 219, NULL, '2014-01-08T22:04:44.237Z', '2019-02-13T04:01:44.445Z', 'd3-color-scales', '', 'pfuqtc6uwb?', 't_88_d3_color_scales.jpg', true, '<div class="wistia_responsive_padding" style="padding:62.5% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;"><iframe src="https://fast.wistia.net/embed/iframe/pfuqtc6uwb?%3FembedType=seo&playerPreference=html5&videoFoam=true" title="Wistia video player" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="100%" height="100%"></iframe></div></div>
<script src="https://fast.wistia.net/assets/external/E-v1.js" async></script>', 'Ben: Just to show the true power of D3 scales and how integral they are to making yourself proficient with D3, we''re going to do one more thing here that shows how they can really just interpolate any values that are possible to be interpolated.

We''ve removed the color of our bar in the style sheet, put our number of bars down to a more reasonable 75 here. What we''re going to do next is we''re actually going to copy our Y scale and we''re going to change it into a color scale. We just change the name there. We''re still using D3 scale linear.

Instead of the domain being zero and the actual number, we''re actually going to just have it be the max itself and zero. Then our range, instead of using the height of our chart as the range, we''re actually just going to give it the names of a couple of colors. We''re going to say orange and purple there, because I''m a horrible designer. We''re going to get rid of that, we don''t need that anymore.

Here, we''re actually going to do something, a nice little trick that I actually just learned myself recently, which is that if you''re just going to do something like this where you just define a function, pass in the datum, and then return that datum past to a scale. There''s actually a shorthand for that, which is just to pass in the scale itself.

Now you can see that our bars are colored according to their value. Where their value falls between zero and the maximum number in the dataset, their fill is going to be set as an interpolated value between orange and purple. You can see that the very smallest values here are orange and the very tallest values are purple.

You can, obviously, change that. You want it to go from yellow to purple. It looks like we''ve lost our debugging here for some reason. There we go. Yellow to purple there, and you want to change it, make it yellow to green. You can see there, the possibilities are pretty simple.

Just to show that this shorthand is the same functionality as this, I''m just going to copy this, replace it there, and then throw it back in our color scale. You can see it''s the same output if you''re doing color scale, the datum pass end. You can just pass end the scale without even writing this function, which is pretty nice.

Just to show another option here, if you were to pass in the index and you get the...the problem here, why everything''s yellow. We need to change our domain. We''re actually not worried about the domain of the data itself this time. In this case, we''re actually just interested in the length of the dataset.

Since we''re using its position within there, if we change the domain to be from zero to the number at all events, then the position within that dataset is going to determine which of those colors that we get assigned.

Now you can see a nice progression from yellow to green, just based on position.', '', true, '06-egghead-d3-color-scales.mp4', 1, true, false, 1, '---
mp4: 26521858
', NULL, '', 'd3-color-scales', NULL, '', 0, '', '', 'kicaze/3', '', '', NULL, 'published', '2014-01-08T22:04:44.237Z', NULL, 8387216, '', 852, 0, NULL, 5, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/06-d3-color-scales?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1941014199, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (119, 'Scatter Plot', '', 'Up until now we''ve just looked at bar charts. A handy chart, no doubt, but D3 offers a variety of charts you can work with. In this lesson we''ll convert the bar chart into a basic scatter (or bubble) chart.', 159, NULL, '2014-03-01T01:40:59.763Z', '2019-02-13T04:01:49.585Z', 'd3-scatter-plot', '', '7yd2p4kmvy', 't_119_d3_scatter_plot.jpg', true, '<div class="wistia_responsive_padding" style="padding:62.5% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_7yd2p4kmvy" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="119 - Egghead.io - D3 - Scatter Plot" /><meta itemprop="duration" content="PT2M39S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/8d202b1f51ddf982f1652c1e0deeb9693e559809.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/97db43304995c5cea85a15af58dea2f1c143dcbc.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=159.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F8d202b1f51ddf982f1652c1e0deeb9693e559809.bin%3Fimage_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F97db43304995c5cea85a15af58dea2f1c143dcbc.bin" /><meta itemprop="uploadDate" content="2014-02-28T17:30:25Z" /><object id="wistia_7yd2p4kmvy_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:600px;position:relative;width:960px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=159.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F8d202b1f51ddf982f1652c1e0deeb9693e559809.bin%3Fimage_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F97db43304995c5cea85a15af58dea2f1c143dcbc.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=159.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F8d202b1f51ddf982f1652c1e0deeb9693e559809.bin%3Fimage_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F97db43304995c5cea85a15af58dea2f1c143dcbc.bin" name="wistia_7yd2p4kmvy_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">119 - Egghead.io - D3 - Scatter Plot</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("7yd2p4kmvy", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/7yd2p4kmvy/metadata.js"></script>', 'Instructor: Let''s convert our column chart to a scatter plot.

The first change we''re going to make is that we''re going to return actual objects from our data set. We''re going to have objects that have an x, y, and r property. You can see the x and y are somewhere between 0 and 100, and then r is somewhere between 0 and 30.

The next thing we need to do is to convert our x scale back to a linear scale, a simple mapping from an input domain to an output range. We''ll go ahead and convert or rangeBands call back into a plain old range, using the width of our chart again. In this case we''re mapping from 0 to 100 in the domain.

The next thing we need to do is, we''re going to be using circles instead of rectangles. I''ve also created a new style for us, which I called Bubble since scatter plots are sometimes referred to as bubble charts.

The next thing you''ll notice is the attributes we''re going to set. Rather than setting the x and y and the width and the height like we did for our rectangles, we''re going to be setting properties named cx, cy, and r. cx and cy stand for center-x and center-y, and then the r is the radius of the circle.

One thing that goes back to something we covered earlier but extends it a little bit is that we can extend our d3-max call here to pass in the data set as well as an accessor function. Since our data set is now actual objects and not numbers, we need to tell d3-max which property of that datum we''re interested in. In this case, it''s the y property.

The next thing we''ll have to do, again, because we''re not using just plain numbers here but rather objects. We need to create functions that pass the correct property into our scales rather than just...We can supply the scale if we''re just going to pass the datum itself through that scale. But since we need to pull off properties in this case, we need to create these functions and then pass the properties that we''re interested in to those scales.

Now you can see. We have a basic scatter plot. We''ve got some opacity in the styles so you can see the overlays. That''s it.
', '', true, '09-egghead-d3-scatter-plot.mp4', 1, true, false, 1, '---
mp4: 20668517
', NULL, '', 'd3-scatter-plot', NULL, '', 0, '', '', 'panixe/1', '', '', NULL, 'published', '2014-03-01T01:40:59.763Z', NULL, 8387216, '', 323, 0, NULL, 8, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/09-d3-scatter-plot?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1929618147, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (96, 'Quantitative Scales', '', 'In D3 quantitative scales allow you do easily divide aspects of your chart evenly based on the dataset. In this lesson, Ben will continue to show you the variety of scaling options available in D3.', 239, NULL, '2014-01-28T07:23:27.336Z', '2019-02-13T04:01:46.314Z', 'd3-quantitative-scales', '', 'qshfrzk4n4', 't_96_d3_quantitative_scales.jpg', true, '<div class="wistia_responsive_padding" style="padding:62.5% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_qshfrzk4n4" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="96 - Egghead.io - D3 - Quantitative Scales" /><meta itemprop="duration" content="PT4M" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/a923888955c90985db089ba14747f21c25c56685.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/5a695cfaba216b7e2ff0f0283e694a8822ec50d6.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=240.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fa923888955c90985db089ba14747f21c25c56685.jpg%3Ft%3D1390864555634%26image_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F5a695cfaba216b7e2ff0f0283e694a8822ec50d6.bin" /><meta itemprop="uploadDate" content="2014-01-27T22:43:22Z" /><object id="wistia_qshfrzk4n4_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:600px;position:relative;width:960px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=240.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fa923888955c90985db089ba14747f21c25c56685.jpg%3Ft%3D1390864555634%26image_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F5a695cfaba216b7e2ff0f0283e694a8822ec50d6.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=240.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fa923888955c90985db089ba14747f21c25c56685.jpg%3Ft%3D1390864555634%26image_crop_resized%3D960x600&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F5a695cfaba216b7e2ff0f0283e694a8822ec50d6.bin" name="wistia_qshfrzk4n4_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">96 - Egghead.io - D3 - Quantitative Scales</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("qshfrzk4n4", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/qshfrzk4n4/metadata.js"></script>', '', '', true, '07-egghead-d3-quantitative-scales.mp4', 1, true, false, 1, '---
mp4: 36447182
', NULL, '', 'd3-quantitative-scales', NULL, '', 0, '', '', 'nemati/2', '', '', NULL, 'published', '2014-01-28T07:23:27.336Z', NULL, 8387216, '', 391, 0, NULL, 6, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/07-d3-quantitative-scales?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1625276523, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (82, 'rangeBands', '', 'Expanding on the concepts of dynamic scaling in D3, in this lesson Ben discusses the use of `rangeBands` to horizontally scale your D3 charts.', 330, NULL, '2013-12-20T22:30:22.376Z', '2019-02-13T04:01:43.659Z', 'd3-rangebands', '', 'y573v4migt', 't_82_d3_rangeBands.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_y573v4migt" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="82 - Egghead.io - D3 - rangeBands" /><meta itemprop="duration" content="PT5M30S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/dfbae4eaf32f9013c687a65a4fd1ced83d2c7f4b.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/80639783f36d559abc74d2260212452fc6217508.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=330.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fdfbae4eaf32f9013c687a65a4fd1ced83d2c7f4b.jpg%3Ft%3D1387549302623%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F80639783f36d559abc74d2260212452fc6217508.bin" /><meta itemprop="uploadDate" content="2013-12-20T13:33:48Z" /><object id="wistia_y573v4migt_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:540px;position:relative;width:960px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=330.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fdfbae4eaf32f9013c687a65a4fd1ced83d2c7f4b.jpg%3Ft%3D1387549302623%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F80639783f36d559abc74d2260212452fc6217508.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=330.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2Fdfbae4eaf32f9013c687a65a4fd1ced83d2c7f4b.jpg%3Ft%3D1387549302623%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F80639783f36d559abc74d2260212452fc6217508.bin" name="wistia_y573v4migt_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">Expanding on the concepts of dynamic scaling in D3, in this lesson Ben discusses the use of rangeBands to horizontally scale your D3 charts.</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("y573v4migt", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/y573v4migt/metadata.js"></script>', '', 'https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?videoUrl=https://embed-ssl.wistia.com/deliveries/0b1b73409880b41727a2bc10cee360b79d731b16.bin&amp;stillUrl=https://embed-ssl.wistia.com/deliveries/b45335e7b14121c915c712de33eae93ef5df5bc8.bin&amp;controlsVisibleOnLoad=false&amp;unbufferedSeek=false&amp;autoLoad=false&amp;autoPlay=true&amp;endVideoBehavior=default&amp;embedServiceURL=http://distillery.wistia.com/x&amp;accountKey=wistia-production_91975&amp;mediaID=wistia-production_5408543&amp;mediaDuration=330.0&amp;fullscreenDisabled=false', true, '05-egghead-d3-rangebands.mp4', 1, true, false, 1, '---
mp4: 35173081
', NULL, '', 'd3-rangebands', NULL, '', 0, '', '', 'tatuyo/4', '', '', NULL, 'published', '2013-12-20T22:30:22.376Z', NULL, 8388606, '', 851, 0, NULL, 4, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/05-d3-rangebands?show=lib%2Fscript.js,preview', NULL, 'd3, pro', 'd3', '', '', '', '', '', '', NULL, -1954421319, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (76, 'd3.max', '', 'In this lesson Ben shows you how to use `d3.max` to normalize your dataset visually within the specific bounds of a variable domain.', 191, NULL, '2013-12-10T22:17:52.631Z', '2019-02-13T04:01:42.801Z', 'd3-d3-max', '', '9qmxxrqhev', 't_76_d3_d3.max.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_9qmxxrqhev" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="76 - Egghead.io - D3 - d3.max" /><meta itemprop="duration" content="PT3M11S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/971b0ab1e1307ced48ec9e17226e1eaa6d70021e.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/35e59ea41e2eec7b522079953e5baa4befd88552.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=191.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F971b0ab1e1307ced48ec9e17226e1eaa6d70021e.jpg%3Ft%3D1386684675949%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F35e59ea41e2eec7b522079953e5baa4befd88552.bin" /><meta itemprop="uploadDate" content="2013-12-10T14:07:08Z" /><object id="wistia_9qmxxrqhev_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:540px;position:relative;width:960px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=191.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F971b0ab1e1307ced48ec9e17226e1eaa6d70021e.jpg%3Ft%3D1386684675949%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F35e59ea41e2eec7b522079953e5baa4befd88552.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=191.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F971b0ab1e1307ced48ec9e17226e1eaa6d70021e.jpg%3Ft%3D1386684675949%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F35e59ea41e2eec7b522079953e5baa4befd88552.bin" name="wistia_9qmxxrqhev_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">76 - Egghead.io - D3 - d3.max</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("9qmxxrqhev", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/9qmxxrqhev/metadata.js"></script>', '**Ben Clinkinbeard**: ...so now that we have our chart using scale here to actually size things properly and somewhat dynamically, I wanted to show one of the ways that D3 has a couple utilities that can actually make things more flexible. We''re actually going to replace our static data set here with a set of random numbers, and I''ve included underscore for this purpose. 

I''m just going to use sort of the shortcut method for creating a random set of data. So we''re going to return a random number somewhere between 0 and 50. You can see there that we have our data populated. I chose 15 items this time just to make the chart a little fuller. Basically all this range function is doing is creating an array of 15 items. I believe they range from 0 to 14 or 1 to 15, something like that, and then we''re basically just using that as a shortcut to run this function 15 times and return the numbers. 

We now have our chart filled with random data, and we know that they''re always going to fit on there because the maximum number that this can produce is 50 and we''ve got our upper limit of our domain set to 50. That''s all well and good, but a lot of times you are not going to know the data domain beforehand. You need to be able to sort of adjust that on the fly. 

Just to show that, if you say had your data somewhere between 0 and 100, in this case a lot of those items are going to run off of the chart because our upper limit is set to 50. In order to make things easier, D3 actually has a couple of utility methods that we can use. In this case we''re going to use the max method. We''re going to pass in our dataset and you can now see that everything fits on our chart. 

Basically what this is doing is that D3.max when you pass in an array it looks through that array and finds the maximum value and returns that value. Basically what this is doing, you''ll notice that one of these items is always pinned to the top here. It''s going to do that regardless of what we make the upper limit, or the maximum value in our data, because we''re using that maximum value as the top of our domain. 

More than likely you probably want a little bit of padding for your domain, you don''t want everything to be pinned to the very top. If we actually do times 1.1, we''ll say, you can then always get a little bit of padding at the top of your chart there. So even if we were to change some of this data to be as high as, as large as 100, we''re always going to have that padding at the top. Change it to 400, 500, whatever you want. ', '', true, '04-egghead-d3-d3-max.mp4', 1, true, false, 1, '---
mp4: 20052526
', NULL, '', 'd3-d3-max', NULL, '', 0, '', '', 'xuvuko/2', '', '', NULL, 'published', '2013-12-10T22:17:52.631Z', NULL, 8387216, '', 850, 0, NULL, 3, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/04-d3-d3-max?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1956432387, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (150, 'Debugging with Dev Tools', '', 'D3 debugging is fully supported within Chrome Dev Tools. This is extremely useful!', 119, NULL, '2014-04-17T23:49:58.240Z', '2025-12-13T00:54:53.678Z', 'd3-debugging-with-dev-tools', '', 'l1wurj7xr2', '', true, '<div class="wistia_responsive_padding" style="padding:62.5% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_l1wurj7xr2" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="d3-devtools.mp4" /><meta itemprop="duration" content="PT1M59S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/0536783903d71f50901510ba51ba6e7f0bfc5660.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/28252f4ff992bbe161b5e665b0df7ab5a2e7f499.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=119.0&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F0536783903d71f50901510ba51ba6e7f0bfc5660.bin%3Fimage_crop_resized%3D640x400&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F28252f4ff992bbe161b5e665b0df7ab5a2e7f499.bin" /><meta itemprop="uploadDate" content="2014-04-13T03:46:47Z" /><object id="wistia_l1wurj7xr2_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:400px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=119.0&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F0536783903d71f50901510ba51ba6e7f0bfc5660.bin%3Fimage_crop_resized%3D640x400&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F28252f4ff992bbe161b5e665b0df7ab5a2e7f499.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=119.0&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F0536783903d71f50901510ba51ba6e7f0bfc5660.bin%3Fimage_crop_resized%3D640x400&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F28252f4ff992bbe161b5e665b0df7ab5a2e7f499.bin" name="wistia_l1wurj7xr2_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">d3-devtools.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("l1wurj7xr2", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/l1wurj7xr2/metadata.js"></script>', 'Man 1: [00:00] One of the nicest things about the fact that D3 uses web standards and SVG to draw the charts is how debuggable it is in something like Dev Tools. Here, if we inspect our scatter plot, we can actually use the Dev Tools Inspector to navigate our visualization.

[00:22] If we click on that, we then see the tag in the markup of the document. Then, of course, you can access the most recently selected item in the console with the "$0expression. What that gives us is, again, that element. 

[00:40] One other thing to note is that D3 very handily provides this "__data__" object and attaches it to that DOM element. We can actually see the data object that is being represented by this DOM element.

[01:00] The other nice thing is that we now have a reference to this element. We can then go and actually tweak the styles of it. We can say, "Fill is red. Stroke is, I don''t know, green."

[01:15] Not that you''re going to use this for a lot of things, but you can use it to go in and tweak layout and appearance. Rather than having to go edit your code every time, rerun the visualization, you can just tweak it here, get the values you want, and then move back to your code.

[01:36] If you wanted to change the appearance of all of your items, you just change the style for the class that has been applied to all of the elements. You can inspect the data, inspect the appearance, change the appearance, change the data, everything that you need to debug those things in the browser.
', '', true, '10-egghead-debugging-with-dev-tools.mp4', 1, true, false, 1, '---
mp4: 13789566
', NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/dev-tools/d3-devtools.mp4', 'dev-tools', '3ZF', 'https://egghead-pipeline.s3.amazonaws.com/dev-tools/d3-devtools.mp3', 0, '', '', 'wudose/1', '', '', NULL, 'published', '2014-04-17T23:49:58.240Z', NULL, 8387216, '', 404, 0, NULL, 9, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/10-debugging-with-dev-tools?show=lib%2Fscript.js,preview', NULL, 'd3, pro', 'd3', '', '', '', '', '', '', NULL, -1932299571, '1
00:00:00,770 --> 00:00:01,990
One of the nicest things about 

2
00:00:02,150 --> 00:00:04,780
the fact that D3 uses web 

3
00:00:04,780 --> 00:00:07,710
standards and SVG to draw the 

4
00:00:07,710 --> 00:00:09,560
charts is how debuggable it is 

5
00:00:09,600 --> 00:00:10,920
in something like Dev Tools. 

6
00:00:11,480 --> 00:00:15,450
Here, if we inspect our scatter 

7
00:00:15,450 --> 00:00:17,510
plot, we can actually use the 

8
00:00:17,510 --> 00:00:20,630
Dev Tools Inspector to navigate 

9
00:00:20,720 --> 00:00:22,370
our visualization. If we 

10
00:00:22,410 --> 00:00:24,870
click on that, we then see the 

11
00:00:24,870 --> 00:00:26,550
tag in the markup of the 

12
00:00:26,550 --> 00:00:28,560
document. Then, of course, you 

13
00:00:28,560 --> 00:00:30,480
can access the most recently 

14
00:00:30,480 --> 00:00:32,860
selected item in the console 

15
00:00:32,990 --> 00:00:36,290
with the "$0expression. What 

16
00:00:36,290 --> 00:00:38,260
that gives us is, again, that 

17
00:00:38,380 --> 00:00:42,000
element. One other thing to 

18
00:00:42,000 --> 00:00:44,890
note is that D3 very handily 

19
00:00:45,370 --> 00:00:50,080
provides this "__data__" object 

20
00:00:50,740 --> 00:00:53,170
and attaches it to that DOM 

21
00:00:53,170 --> 00:00:55,460
element. We can actually see the 

22
00:00:55,530 --> 00:00:56,870
data object that is being 

23
00:00:56,870 --> 00:00:59,460
represented by this DOM element. 

24
00:01:00,650 --> 00:01:02,530
The other nice thing is that we 

25
00:01:02,530 --> 00:01:03,920
now have a reference to this 

26
00:01:03,970 --> 00:01:06,560
element. We can then go and 

27
00:01:06,560 --> 00:01:09,190
actually tweak the styles of it. 

28
00:01:09,190 --> 00:01:11,790
We can say, "Fill is red. Stroke 

29
00:01:11,790 --> 00:01:15,800
is, I don''t know, green." Not 

30
00:01:16,450 --> 00:01:19,520
that you''re going to use this 

31
00:01:19,520 --> 00:01:20,850
for a lot of things, but you can 

32
00:01:20,850 --> 00:01:24,150
use it to go in and tweak layout 

33
00:01:24,150 --> 00:01:27,420
and appearance. Rather than 

34
00:01:27,420 --> 00:01:28,880
having to go edit your code 

35
00:01:28,880 --> 00:01:29,880
every time, rerun the 

36
00:01:29,880 --> 00:01:31,560
visualization, you can just 

37
00:01:31,600 --> 00:01:33,040
tweak it here, get the values 

38
00:01:33,040 --> 00:01:34,870
you want, and then move back to 

39
00:01:35,990 --> 00:01:37,840
your code. If you wanted to 

40
00:01:38,370 --> 00:01:40,030
change the appearance of all of 

41
00:01:40,030 --> 00:01:43,180
your items, you just change the 

42
00:01:43,350 --> 00:01:45,870
style for the class that has 

43
00:01:45,870 --> 00:01:46,900
been applied to all of the 

44
00:01:46,900 --> 00:01:49,830
elements. You can inspect the 

45
00:01:49,830 --> 00:01:52,320
data, inspect the appearance, 

46
00:01:52,320 --> 00:01:53,630
change the appearance, change 

47
00:01:53,630 --> 00:01:56,130
the data, everything that you 

48
00:01:56,130 --> 00:01:58,040
need to debug those things in 

49
00:01:58,040 --> 00:01:58,500
the browser. 

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, 'https://stream.mux.com/63HO5NfGH6wiIxGOn3RvKBih700f00wQJ3ShVEDANYucs.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (100, 'Margins', '', 'This lesson will show you how to add margins to your D3 charts to give them the elbow room they deserve.', 99, NULL, '2014-02-05T22:18:37.153Z', '2019-02-13T04:01:46.811Z', 'd3-margins', '', 'ya665ciswl', 't_100_d3_margins2.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_ya665ciswl" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="100 - Egghead.io - D3 - Margins" /><meta itemprop="duration" content="PT1M39S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/8a8a1088e6d59ea3a78f502bd25e326711110760.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/46ae07c5c992de0100b34d476095cecd70c6d229.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=99.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F8a8a1088e6d59ea3a78f502bd25e326711110760.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F46ae07c5c992de0100b34d476095cecd70c6d229.bin" /><meta itemprop="uploadDate" content="2014-02-05T15:01:44Z" /><object id="wistia_ya665ciswl_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=99.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F8a8a1088e6d59ea3a78f502bd25e326711110760.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F46ae07c5c992de0100b34d476095cecd70c6d229.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=99.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2F8a8a1088e6d59ea3a78f502bd25e326711110760.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F46ae07c5c992de0100b34d476095cecd70c6d229.bin" name="wistia_ya665ciswl_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">This lesson will show you how to add margins to your D3 charts to give them the elbow room they deserve.</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("ya665ciswl", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/ya665ciswl/metadata.js"></script>', 'Ben Clinkinbeard: There''s a well established way in D3 to add margins to charts. You can do things like add axes without affecting the rest of your charting code. The way you do that is with a margin object like you see here.

Once you have that margin object defined, you are going to want to update your width and height properties and subtract the horizontal properties from your width and the vertical properties from your height, so you''re working with an inner size to the chart.

Once you do that, you need to add those margin properties back into the code that creates the SBG tag. Our SBG tag is filling up that whole outer size of 400 by 300.

The last step is to add a G element which is a graphics container in SBG. Then offset that graphic element by our left and top margins.

It is worth noting that since we''re appending this G element, our SBG variable up here is going to be referring to that graphic element and not the SBG tag itself. Since the G element is what we want to work with, that''s OK.

Since we started with margins of zero for everything, nothing looks different. It looks the same as it did before. You can see now, if we go up here and modify those properties, our chart will update and redraw itself and give us plenty of room to create our axes here.', 'https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?videoUrl=https://embed-ssl.wistia.com/deliveries/bf2b8c2b2713ad395c7707a3e610551d866a595c.bin&amp;stillUrl=https://embed-ssl.wistia.com/deliveries/8a8a1088e6d59ea3a78f502bd25e326711110760.bin&amp;controlsVisibleOnLoad=false&amp;unbufferedSeek=true&amp;autoLoad=false&amp;autoPlay=true&amp;endVideoBehavior=default&amp;embedServiceURL=http://distillery.wistia.com/x&amp;accountKey=wistia-production_91975&amp;mediaID=wistia-production_5826715&amp;mediaDuration=99.0&amp;fullscreenDisabled=false', true, '08-egghead-d3-margins.mp4', 1, true, false, 1, '---
mp4: 10269892
', NULL, '', 'd3-margins', NULL, '', 0, '', '', 'vunipu/2', '', '', NULL, 'published', '2014-02-05T22:18:37.153Z', NULL, 8387216, '', 2, 0, NULL, 7, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/08-d3-margins?show=lib%2Fscript.js,preview', NULL, 'd3, pro', 'd3', '', '', '', '', '', '', NULL, -1833757239, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (231, 'Basic D3 chart interactivity', '', 'D3 has tools to make basic chart interactivity relatively simple.', 261, NULL, '2014-08-28T21:11:29.318Z', '2025-12-13T00:54:53.678Z', 'd3-basic-d3-chart-interactivity', '
', '5lc41klhno', '', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_5lc41klhno" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="egghead-d3-basic-interaction.mp4" /><meta itemprop="duration" content="PT4M21S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/c057f6cfd79f78db64d8c3cb387e20a466780e0f.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/3e5b471204d547888920fff4fee4f608f22b43c6.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=261.48&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fc057f6cfd79f78db64d8c3cb387e20a466780e0f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F3e5b471204d547888920fff4fee4f608f22b43c6.bin" /><meta itemprop="uploadDate" content="2014-08-28T14:03:05Z" /><object id="wistia_5lc41klhno_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:360px;position:relative;width:640px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=261.48&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fc057f6cfd79f78db64d8c3cb387e20a466780e0f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F3e5b471204d547888920fff4fee4f608f22b43c6.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="controlsVisibleOnLoad=true&customColor=7b796a&fullscreenDisabled=true&mediaDuration=261.48&showVolume=true&stillUrl=https%3A%2F%2Fembed-ssl.wistia.com%2Fdeliveries%2Fc057f6cfd79f78db64d8c3cb387e20a466780e0f.bin%3Fimage_crop_resized%3D640x360&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F3e5b471204d547888920fff4fee4f608f22b43c6.bin" name="wistia_5lc41klhno_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">egghead-d3-basic-interaction.mp4</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("5lc41klhno", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/5lc41klhno/metadata.js"></script>', 'Lecturer: [00:01] Last time, we left off we had a nice little scatter plot or bubble chart here, but it''s completely static right now. There''s no interaction with it.

[00:12] You can see here we''re creating our circles and then assigning the X and Y positions and the radius based on a couple of scales that we have and then just using the radius directly. To add interaction, D3 actually makes it extremely simple. We can do that by using the "on-method" of the D3 selection object. What we actually have at the end of this method chain is a selection that refers to all of the circles on our chart.

[00:41] And so, we''re just going to tell it .on [''mouseover''] d3.select[this] ", "this" being the bubble that we''ve moused over. I want you to set the style named fill to red. If we save that file, go over here and refresh the browser we can see we do, in fact, now, have the ability to roll over these items, and get them to turn red but they''re not turning back to the original color.

[01:11] In order to fix that, we''re going to go and we''re going to add an .on [''mouseout''] method. We''ll set the fill style back to teal. Now, you can see that we can actually roll over and roll back out. The things are rest properly. While this technically works, it''s not a great approach, because as you start to add complexity to what happens during your interactions you can start to get code that''s a little bit messy.

[01:41] If, for example, we wanted to change the stroke weight when we mouse over one of these items and make it have a thicker stroke, then, we can do that, but we''re also going to have to add code to the mouseout handler to undo that, as well, when you roll out of the item. Otherwise, it''s going to stay in the wrong state.

[02:02] A better approach then editing styles directly is to actually just use a separate CSS class. If we go up here to our CSS we can see the .dot class that we have applied to all of our existing circles. We''re just going to add a new class called .active. We''ll give it a nice magenta fill so that it stands out and then change the stroke weight like we did before.

[02:30] Now, to actually apply that new class D3 actually offers a really nice method for this sort of thing. It operates on a D3 selection, we''ll say "d3.select [this] " to select the item again. Then, we use the classed method, where you pass it the name of a CSS class, and then, either a true or a false flag to tell D3 to either add that class or remove that class from the item.

[02:59] Now that we have that, we can simply roll over these, add the active class to that item or remove it based on whether we''re rolling in or out of the item. The last thing I want to show is something I mentioned previously, which is that these functions that got called in response to these events actually do have a reference to the data item that these bubbles represent. And so, if we copy our existing handlers here, and we''ll create a mousedown handler in this case...

[03:31] You can see we''ve already got the [d] argument in our function here. What we can actually then do is change our code to instead of updating the style we will actually have it set one of these attributes that are the same attributes that we used in creating the circles to begin with but we''ll set it to a new value.

[03:52] In this case, when we mouse down on an item we''re going to set its radius attribute to be the r property of its data object and multiply that by two so it will be twice as large. And then, we''ll create a mouseup handler that puts it back to the correct value using the radius directly.

[04:11] Now, you can see that we can actually click on these items and while our mousedown is on it will increase in size and then it will go back when we release.', '', true, '11-egghead-d3-basic-d3-chart-interactivity.mp4', 1, true, false, 1, NULL, NULL, 'https://d3cxrxf04bhbwz.cloudfront.net/lessons/basic-d3-chart-interactivity/egghead-d3-basic-interaction.mp4', 'basic-d3-chart-interactivity', '1He', 'https://egghead-pipeline.s3.amazonaws.com/basic-d3-chart-interactivity/egghead-d3-basic-interaction.mp3', 0, '', '', 'goqiso/3', '', '', NULL, 'published', '2014-08-28T21:11:29.318Z', NULL, 8387216, '', 173, 0, NULL, 10, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/11-d3-basic-d3-chart-interactivity?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1926266367, '1
00:00:01,450 --> 00:00:03,110
Last time, we left off we had a 

2
00:00:03,120 --> 00:00:05,610
nice little scatter plot or 

3
00:00:05,620 --> 00:00:07,830
bubble chart here, but it''s 

4
00:00:07,840 --> 00:00:09,310
completely static right now. 

5
00:00:09,320 --> 00:00:11,690
There''s no interaction with it. 

6
00:00:12,090 --> 00:00:13,440
You can see here we''re creating 

7
00:00:13,450 --> 00:00:15,330
our circles and then assigning 

8
00:00:15,405 --> 00:00:18,920
the X and Y positions and the 

9
00:00:18,930 --> 00:00:20,850
radius based on a couple of 

10
00:00:20,860 --> 00:00:21,870
scales that we have and then 

11
00:00:21,880 --> 00:00:23,200
just using the radius directly. 

12
00:00:23,275 --> 00:00:26,980
To add interaction, D3 actually 

13
00:00:26,990 --> 00:00:28,940
makes it extremely simple. We 

14
00:00:28,950 --> 00:00:31,880
can do that by using the "on-

15
00:00:32,000 --> 00:00:34,180
method" of the D3 selection 

16
00:00:34,190 --> 00:00:36,250
object. What we actually have at 

17
00:00:36,260 --> 00:00:38,520
the end of this method chain is 

18
00:00:38,560 --> 00:00:40,610
a selection that refers to all 

19
00:00:40,620 --> 00:00:41,760
of the circles on our chart. 

20
00:00:41,850 --> 00:00:42,950
And so, we''re just going to tell 

21
00:00:42,960 --> 00:00:44,600
it .on  d3.select

22
00:00:47,440 --> 00:00:48,980
 ", "this" being the bubble that 

23
00:00:48,990 --> 00:00:51,570
we''ve moused over. I want you to 

24
00:00:51,580 --> 00:00:54,110
set the style named fill to red. 

25
00:00:55,410 --> 00:00:57,050
If we save that file, go over 

26
00:00:57,060 --> 00:00:59,160
here and refresh the browser we 

27
00:00:59,170 --> 00:01:01,340
can see we do, in fact, now, 

28
00:01:01,350 --> 00:01:03,850
have the ability to roll over 

29
00:01:03,860 --> 00:01:05,280
these items, and get them to 

30
00:01:05,290 --> 00:01:08,160
turn red but they''re not turning 

31
00:01:08,235 --> 00:01:11,750
back to the original color. In 

32
00:01:11,760 --> 00:01:13,650
order to fix that, we''re going 

33
00:01:13,725 --> 00:01:15,180
to go and we''re going to add an .

34
00:01:15,210 --> 00:01:17,790
on  method. We''ll 

35
00:01:17,790 --> 00:01:21,160
set the fill style back to teal. 

36
00:01:21,820 --> 00:01:22,980
Now, you can see that we can 

37
00:01:22,990 --> 00:01:24,420
actually roll over and roll back 

38
00:01:24,430 --> 00:01:26,810
out. The things are rest 

39
00:01:26,880 --> 00:01:29,580
properly. While this technically 

40
00:01:29,590 --> 00:01:31,620
works, it''s not a great approach, 

41
00:01:31,630 --> 00:01:34,490
because as you start to add 

42
00:01:34,500 --> 00:01:36,560
complexity to what happens 

43
00:01:36,930 --> 00:01:38,990
during your interactions you can 

44
00:01:39,065 --> 00:01:40,870
start to get code that''s a 

45
00:01:40,880 --> 00:01:42,030
little bit messy. If, for 

46
00:01:42,440 --> 00:01:44,430
example, we wanted to change the 

47
00:01:44,440 --> 00:01:46,790
stroke weight when we mouse over 

48
00:01:46,800 --> 00:01:48,200
one of these items and make it 

49
00:01:48,210 --> 00:01:50,580
have a thicker stroke, then, we 

50
00:01:50,590 --> 00:01:51,840
can do that, but we''re also 

51
00:01:51,850 --> 00:01:54,220
going to have to add code to the 

52
00:01:54,295 --> 00:01:56,340
mouseout handler to undo that, 

53
00:01:56,350 --> 00:01:58,360
as well, when you roll out of 

54
00:01:58,370 --> 00:01:59,700
the item. Otherwise, it''s going 

55
00:01:59,775 --> 00:02:02,980
to stay in the wrong state. A 

56
00:02:03,360 --> 00:02:05,730
better approach then 

57
00:02:05,730 --> 00:02:08,480
editing styles directly is to 

58
00:02:08,490 --> 00:02:10,950
actually just use a separate CSS 

59
00:02:11,025 --> 00:02:13,350
class. If we go up here to our 

60
00:02:13,425 --> 00:02:16,180
CSS we can see the .dot class 

61
00:02:16,190 --> 00:02:17,890
that we have applied to all of 

62
00:02:18,980 --> 00:02:21,310
our existing circles. We''re just 

63
00:02:21,310 --> 00:02:23,470
going to add a new class called .

64
00:02:23,740 --> 00:02:25,320
active. We''ll give it a nice 

65
00:02:25,330 --> 00:02:26,810
magenta fill so that it stands 

66
00:02:26,820 --> 00:02:28,720
out and then change the stroke 

67
00:02:28,730 --> 00:02:30,840
weight like we did before. Now, 

68
00:02:31,450 --> 00:02:34,030
to actually apply that new class 

69
00:02:34,105 --> 00:02:38,350
D3 actually offers a really nice 

70
00:02:38,800 --> 00:02:40,390
method for this sort of thing. 

71
00:02:40,490 --> 00:02:42,030
It operates on a D3 selection, 

72
00:02:42,105 --> 00:02:43,850
we''ll say "d3.select  " to 

73
00:02:43,860 --> 00:02:46,060
select the item again. Then, we 

74
00:02:46,070 --> 00:02:48,530
use the classed method, where 

75
00:02:48,540 --> 00:02:51,930
you pass it the name of a CSS 

76
00:02:51,740 --> 00:02:53,100
class, and then, either a true 

77
00:02:53,110 --> 00:02:56,900
or a false flag to tell D3 to 

78
00:02:55,710 --> 00:02:57,520
either add that class or remove 

79
00:02:57,530 --> 00:03:00,110
that class from the item. Now 

80
00:03:00,120 --> 00:03:01,980
that we have that, we can simply 

81
00:03:01,990 --> 00:03:04,090
roll over these, add the active 

82
00:03:04,100 --> 00:03:06,630
class to that item or remove it 

83
00:03:06,790 --> 00:03:08,320
based on whether we''re rolling 

84
00:03:08,330 --> 00:03:11,080
in or out of the item. The last 

85
00:03:11,060 --> 00:03:12,380
thing I want to show is 

86
00:03:12,440 --> 00:03:13,780
something I mentioned previously, 

87
00:03:13,790 --> 00:03:16,370
which is that these functions 

88
00:03:16,380 --> 00:03:18,000
that got called in response to 

89
00:03:18,010 --> 00:03:19,570
these events actually do have a 

90
00:03:19,580 --> 00:03:22,900
reference to the data item that 

91
00:03:22,910 --> 00:03:24,930
these bubbles represent. And so, 

92
00:03:24,970 --> 00:03:26,740
if we copy our existing handlers 

93
00:03:26,750 --> 00:03:29,390
here, and we''ll create a 

94
00:03:29,465 --> 00:03:30,620
mousedown handler in this case... 

95
00:03:31,020 --> 00:03:31,980
You can see we''ve already got 

96
00:03:32,060 --> 00:03:35,230
the  argument in our function 

97
00:03:35,240 --> 00:03:37,320
here. What we can actually then 

98
00:03:37,330 --> 00:03:40,320
do is change our code to instead 

99
00:03:40,330 --> 00:03:42,440
of updating the style we will 

100
00:03:42,440 --> 00:03:43,840
actually have it set one of 

101
00:03:43,850 --> 00:03:45,800
these attributes that are the 

102
00:03:45,810 --> 00:03:48,080
same attributes that we used in 

103
00:03:48,130 --> 00:03:49,390
creating the circles to begin 

104
00:03:49,400 --> 00:03:51,570
with but we''ll set it to a new 

105
00:03:51,580 --> 00:03:54,070
value. In this case, when we 

106
00:03:54,160 --> 00:03:55,980
mouse down on an item we''re 

107
00:03:55,990 --> 00:03:57,470
going to set its radius 

108
00:03:57,480 --> 00:03:59,900
attribute to be the r property 

109
00:03:59,910 --> 00:04:01,770
of its data object and multiply 

110
00:04:01,780 --> 00:04:03,820
that by two so it will be twice 

111
00:04:04,370 --> 00:04:06,760
as large. And then, we''ll create 

112
00:04:06,835 --> 00:04:08,910
a mouseup handler that puts it 

113
00:04:08,920 --> 00:04:10,890
back to the correct value using 

114
00:04:10,900 --> 00:04:12,880
the radius directly. Now, you 

115
00:04:12,890 --> 00:04:14,170
can see that we can actually 

116
00:04:14,580 --> 00:04:15,890
click on these items and while 

117
00:04:16,360 --> 00:04:17,710
our mousedown is on it will 

118
00:04:17,720 --> 00:04:19,940
increase in size and then it 

119
00:04:19,550 --> 00:04:21,200
will go back when we release.

', false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, 'https://stream.mux.com/JDoeewDMvJl02Hd7tabYU02NXTHfpSM243Lp4ASmzd67U.m3u8', NULL, NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO lessons (id, title, youtube_id, summary, duration, position, created_at, updated_at, slug, ascii, wistia_id, thumb_url, published, embed_markup, transcript, wistia_embed_meta, is_pro_content, aws_filename, instructor_id, can_count_views, full_source_download, series_id, file_sizes, display_id, rss_url, title_url, casting_words_order, audio_url, plays_count, github_repo, repo_tag, jsbin_url, codepen_id, git_branch, tweeted_on, state, published_at, publish_at, row_order, github_user, current_lesson_version_id, difficulty_rating, retired_at, series_row_order, assembly_id, plunker_url, creator_id, cached_tag_list, cached_library_list, cached_language_list, cached_framework_list, cached_tool_list, cached_platform_list, cached_skillset_list, cached_skill_level_list, gist_url, popularity_order, srt, free_forever, old_technology, visibility_state, square_cover_file_name, square_cover_content_type, square_cover_file_size, square_cover_updated_at, square_cover_processing, site, code_url, notes, resource_type, guid, current_video_dash_url, current_video_hls_url, staff_notes_url, revenue_share_instructor_id) VALUES (74, 'Scaling Basics', '', 'In this lesson Ben shows you the basics of dynamically scaling your charts in D3. Scaling is a deep concept, so this is the first video in a series that will cover this topic.', 261, NULL, '2013-12-05T05:37:53.654Z', '2019-02-13T04:01:42.485Z', 'd3-scaling-basics', '', 'f2xioom9p5', 't_74_d3_scaling_basics.jpg', true, '<div class="wistia_responsive_padding" style="padding:56.25% 0 0 0;position:relative;"><div class="wistia_responsive_wrapper" style="height:100%;left:0;position:absolute;top:0;width:100%;">
<div id="wistia_f2xioom9p5" class="wistia_embed" style="width:100%;height:100%;"><div itemprop="video" itemscope itemtype="http://schema.org/VideoObject"><meta itemprop="name" content="74 - Egghead.io - D3 - Scaling Basics" /><meta itemprop="duration" content="PT4M21S" /><meta itemprop="thumbnailUrl" content="https://embed-ssl.wistia.com/deliveries/2b2140af50e501fac556334236147835d4a0bb69.bin" /><meta itemprop="contentURL" content="http://embed.wistia.com/deliveries/99d5959f0c0f26c7adf81702be6478db0955cbd4.bin" /><meta itemprop="embedURL" content="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20&autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=261.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F2b2140af50e501fac556334236147835d4a0bb69.jpg%3Ft%3D1386191013060%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F99d5959f0c0f26c7adf81702be6478db0955cbd4.bin" /><meta itemprop="uploadDate" content="2013-12-04T20:50:10Z" /><object id="wistia_f2xioom9p5_seo" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" style="display:block;height:540px;position:relative;width:960px;"><param name="movie" value="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20"></param><param name="allowfullscreen" value="true"></param><param name="bgcolor" value="#000000"></param><param name="wmode" value="opaque"></param><param name="flashvars" value="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=261.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F2b2140af50e501fac556334236147835d4a0bb69.jpg%3Ft%3D1386191013060%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F99d5959f0c0f26c7adf81702be6478db0955cbd4.bin"></param><embed src="https://embed-ssl.wistia.com/flash/embed_player_v2.0.swf?2017-04-20" allowfullscreen="true" bgcolor=#000000 flashvars="autoPlay=false&banner=false&controlsVisibleOnLoad=true&customColor=7b796a&endVideoBehavior=default&fullscreenDisabled=true&mediaDuration=261.0&playButtonVisible=true&showPlayButton=true&showPlaybar=true&showVolume=true&stillUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F2b2140af50e501fac556334236147835d4a0bb69.jpg%3Ft%3D1386191013060%26image_crop_resized%3D960x540&unbufferedSeek=false&videoUrl=http%3A%2F%2Fembed.wistia.com%2Fdeliveries%2F99d5959f0c0f26c7adf81702be6478db0955cbd4.bin" name="wistia_f2xioom9p5_html" style="display:block;height:100%;position:relative;width:100%;" type="application/x-shockwave-flash" wmode="opaque"></embed></object><noscript itemprop="description">74 - Egghead.io - D3 - Scaling Basics</noscript></div></div>
</div></div>
<script charset="ISO-8859-1" src="https://fast.wistia.com/assets/external/E-v1.js"></script>
<script>
wistiaEmbed = Wistia.embed("f2xioom9p5", {
  videoFoam: "true",
  playerPreference: "html5"
});
</script>
<script charset="ISO-8859-1" src="//fast.wistia.com/embed/medias/f2xioom9p5/metadata.js"></script>', '**Ben Clinkinbeard**: So our columns now scale properly from the bottom of the chart, but it''s still not exactly flexible the way that we''ve built things, and to fix that we''re going to use D3''s built-in scale capabilities. We''re just going to create our width and our height in some variables here so that we can use these elsewhere, and we''ll do that.

Now we have our width and our height set up. We actually... well, let''s leave that multiplier for now. Let''s create our scale, so if we say "var yScale = d3.scale.linear"... D3 has other types of scales, like logarithmic scales and things like that, but we just want a straight, linear mapping.

We''re going to say that our domain, you always use a two-element array for domains and ranges, so we''ve got a domain that runs from a minimum of 0 to a maximum of 25, and our range is going to be from 0 to our height.

I believe the formal definition for a scale is that it''s a function that takes a value in an input domain and maps it to a value in an output range, so in our case here, any values that get passed into this scale are going to be mapped to the domain of 0 to 25, and depending on where they fall, that will be mapped to a corresponding value that falls between 0 and height, which in our case is 300.

Obviously you could pass in a value that doesn''t fit in this range, and you''re going to end up with something outside of the range, but it still does the mapping based on those proportions.

What we can actually now do is, instead of doing this random D times multiplier, we can just use our yScale that we''ve created and pass in our data item, so you can see it''s now scaling those based on the yScale, and you can see that the size of them has changed because of the values of those things.

Actually, what we need to do here is we want to have this use the same height value, so here we''ve got our chart now fully using our dynamically set height and our yScale. The height of these bars is going to be determined by passing the datum into the yScale.

The Y value is going to take that same value, the datum passed into the yScale, and subtract that from the height of our chart, and all that essentially functions to do is to pin these columns to the bottom of the chart, if you were to say 40, or whatever, there, it''s going to float a little bit above the bottom there, just so you can see what''s going on there.

We''re now taking our values that are in our data set here. They''re being evaluated to figure out where on this spectrum of 0 to 25 that they fall, and that''s mapping to an output range of height, so it should not be surprising that the last bar here is filling the chart because its value is 25 and that is the maximum value on our domain, and the maximum value of our range is our height, so they map one-to-one.

If we were to change the input domain and say, "The maximum value that may be in our data is actually 50," this is actually going to fill exactly half the chart, so you can see that this gives you a lot more flexibility to just...

You set up your scales to match what you have to work with in our UI and then your data will automatically be adjusted to work properly, we were to add, say, 50 in here now, it''s going to fill that space. If we were to change it to 49, you can see that it''s slightly under, and maybe change it to 40. You''ve got this completely dynamic chart now.', '', true, '03-egghead-d3-scaling-basics.mp4', 1, true, false, 1, '---
mp4: 28478279
', NULL, '', 'd3-scaling-basics', NULL, '', 0, '', '', 'witasi/4', '', '', NULL, 'published', '2013-12-05T05:37:53.654Z', NULL, 8388606, '', 848, 0, NULL, 2, NULL, 'https://embed.plnkr.co/github/eggheadio-projects/use-d3-v3-to-build-interactive-charts-with-javascript/03-d3-scaling-basics?show=lib%2Fscript.js,preview', NULL, 'pro, d3', 'd3', '', '', '', '', '', '', NULL, -1827724035, NULL, false, NULL, 'indexed', NULL, NULL, NULL, NULL, NULL, 'egghead.io', NULL, NULL, 'lesson', NULL, NULL, NULL, NULL, NULL) ON CONFLICT (id) DO NOTHING;

-- Tags (7)
INSERT INTO tags (id, name, taggings_count, image_file_name, image_content_type, image_file_size, image_updated_at, slug, description, url, label, popularity_order, updated_at, context) VALUES (26, 'react', 2756, 'react.png', 'image/png', 47765, '2018-08-14T01:33:01.723Z', 'react', 'React is one of the web‚Äôs most popular frameworks for building JavaScript applications. 

If you know what you‚Äôre doing, React can drastically simplify how you build, use, and maintain code.

Whether you‚Äôre a React newbie or you‚Äôre ready for advanced techniques, you can level-up with egghead. Explore our in-depth courses, lessons, and community resources to build more powerful applications and crack open your career.', 'https://facebook.github.io/react/', 'React', -367810399, '2022-02-02T02:22:32.227Z', 'topics') ON CONFLICT (id) DO NOTHING;
INSERT INTO tags (id, name, taggings_count, image_file_name, image_content_type, image_file_size, image_updated_at, slug, description, url, label, popularity_order, updated_at, context) VALUES (20, 'pro', 4043, NULL, NULL, NULL, NULL, 'pro', NULL, NULL, 'pro', -265123875, '2021-01-04T19:15:31.092Z', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO tags (id, name, taggings_count, image_file_name, image_content_type, image_file_size, image_updated_at, slug, description, url, label, popularity_order, updated_at, context) VALUES (276, 'github', 103, 'github_logo.png', 'image/png', 17397, '2018-08-14T01:33:01.708Z', 'github', 'GitHub fosters a fast, flexible, and collaborative development process that lets you work on your own or with others.', 'https://github.com/', 'GitHub', 175591192, '2022-02-02T02:22:32.475Z', 'topics') ON CONFLICT (id) DO NOTHING;
INSERT INTO tags (id, name, taggings_count, image_file_name, image_content_type, image_file_size, image_updated_at, slug, description, url, label, popularity_order, updated_at, context) VALUES (638, 'git', 115, 'gitlogo.png', 'image/png', 93239, '2018-08-14T01:33:01.730Z', 'git', 'Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.', 'https://git-scm.com/', 'git', 182078130, '2022-02-02T02:22:32.830Z', 'topics') ON CONFLICT (id) DO NOTHING;
INSERT INTO tags (id, name, taggings_count, image_file_name, image_content_type, image_file_size, image_updated_at, slug, description, url, label, popularity_order, updated_at, context) VALUES (21, 'free', 5429, NULL, NULL, NULL, NULL, 'free', NULL, NULL, 'free', 239982734, '2021-01-04T19:15:37.251Z', NULL) ON CONFLICT (id) DO NOTHING;
INSERT INTO tags (id, name, taggings_count, image_file_name, image_content_type, image_file_size, image_updated_at, slug, description, url, label, popularity_order, updated_at, context) VALUES (397, 'elm', 166, 'elm.png', 'image/png', 4518, '2018-08-14T01:33:01.701Z', 'elm', 'Elm is a programming language that provides a clean functional syntax for writing HTML web applications. It promises zero runtime exceptions, fast rendering, time-travel debugging, and much more.', 'http://elm-lang.org/', 'Elm', 489664077, '2022-02-02T02:22:32.769Z', 'topics') ON CONFLICT (id) DO NOTHING;
INSERT INTO tags (id, name, taggings_count, image_file_name, image_content_type, image_file_size, image_updated_at, slug, description, url, label, popularity_order, updated_at, context) VALUES (9, 'd3', 114, 'd3.png', 'image/png', 25437, '2018-08-14T01:37:07.670Z', 'd3', 'D3.js is a JavaScript library for manipulating documents based on data. D3 helps you bring data to life using HTML, SVG and CSS. D3‚Äôs emphasis on web standards gives you the full capabilities of modern browsers without tying yourself to a proprietary framework, combining powerful visualization components and a data-driven approach to DOM manipulation.', 'https://d3js.org/', 'D3', 693884161, '2022-02-02T02:22:32.179Z', 'topics') ON CONFLICT (id) DO NOTHING;

-- Taggings (195)
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33967, 21, 5765, 'Lesson', NULL, NULL, 'tags', '2019-11-28T03:51:13.534Z', '2019-11-28T03:51:13.534Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33968, 638, 5765, 'Lesson', NULL, NULL, 'tools', '2019-11-28T03:55:33.622Z', '2019-11-28T03:55:33.622Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33969, 276, 5765, 'Lesson', NULL, NULL, 'platforms', '2019-11-28T03:55:36.948Z', '2019-11-28T03:55:36.948Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33970, 21, 5766, 'Lesson', NULL, NULL, 'tags', '2019-11-28T04:15:24.610Z', '2019-11-28T04:15:24.610Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33971, 638, 5766, 'Lesson', NULL, NULL, 'tools', '2019-11-28T04:15:58.741Z', '2019-11-28T04:15:58.741Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33979, 21, 5770, 'Lesson', NULL, NULL, 'tags', '2019-11-28T05:32:39.044Z', '2019-11-28T05:32:39.044Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33980, 638, 5770, 'Lesson', NULL, NULL, 'tools', '2019-11-28T05:33:12.545Z', '2019-11-28T05:33:12.545Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33983, 21, 5772, 'Lesson', NULL, NULL, 'tags', '2019-11-28T06:00:18.607Z', '2019-11-28T06:00:18.607Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33984, 638, 5772, 'Lesson', NULL, NULL, 'tools', '2019-11-28T06:01:02.966Z', '2019-11-28T06:01:02.966Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33986, 21, 5773, 'Lesson', NULL, NULL, 'tags', '2019-11-28T06:11:41.541Z', '2019-11-28T06:11:41.541Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33987, 638, 5773, 'Lesson', NULL, NULL, 'tools', '2019-11-28T06:12:27.095Z', '2019-11-28T06:12:27.095Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33989, 21, 5774, 'Lesson', NULL, NULL, 'tags', '2019-11-28T06:29:43.317Z', '2019-11-28T06:29:43.317Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33990, 638, 5774, 'Lesson', NULL, NULL, 'tools', '2019-11-28T06:30:14.775Z', '2019-11-28T06:30:14.775Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33992, 21, 5776, 'Lesson', NULL, NULL, 'tags', '2019-11-28T06:36:27.339Z', '2019-11-28T06:36:27.339Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (33993, 638, 5776, 'Lesson', NULL, NULL, 'tools', '2019-11-28T06:36:58.930Z', '2019-11-28T06:36:58.930Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41090, 26, 6261, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:41:41.007Z', '2020-03-11T02:41:41.007Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34001, 21, 5779, 'Lesson', NULL, NULL, 'tags', '2019-11-28T07:49:38.045Z', '2019-11-28T07:49:38.045Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (32744, 638, 401, 'Series', NULL, NULL, 'tools', '2019-11-06T04:25:07.242Z', '2019-11-06T04:25:07.242Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34002, 638, 5779, 'Lesson', NULL, NULL, 'tools', '2019-11-28T07:50:09.551Z', '2019-11-28T07:50:09.551Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34004, 21, 5780, 'Lesson', NULL, NULL, 'tags', '2019-11-28T07:59:39.899Z', '2019-11-28T07:59:39.899Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41094, 26, 6263, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:42:26.937Z', '2020-03-11T02:42:26.937Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41095, 21, 6263, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:42:30.754Z', '2020-03-11T02:42:30.754Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41106, 26, 6269, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:44:36.392Z', '2020-03-11T02:44:36.392Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41107, 21, 6269, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:44:39.811Z', '2020-03-11T02:44:39.811Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34005, 638, 5780, 'Lesson', NULL, NULL, 'tools', '2019-11-28T08:00:23.523Z', '2019-11-28T08:00:23.523Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41099, 21, 6265, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:43:23.180Z', '2020-03-11T02:43:23.180Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41109, 21, 6270, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:44:58.673Z', '2020-03-11T02:44:58.673Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34006, 21, 5781, 'Lesson', NULL, NULL, 'tags', '2019-11-28T08:46:01.378Z', '2019-11-28T08:46:01.378Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34007, 638, 5781, 'Lesson', NULL, NULL, 'tools', '2019-11-28T08:46:52.005Z', '2019-11-28T08:46:52.005Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41059, 26, 6246, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:29:21.201Z', '2020-03-11T02:29:21.201Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41060, 21, 6246, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:29:23.515Z', '2020-03-11T02:29:23.515Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41101, 21, 6266, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:43:41.030Z', '2020-03-11T02:43:41.030Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34008, 276, 5781, 'Lesson', NULL, NULL, 'platforms', '2019-11-28T08:46:54.832Z', '2019-11-28T08:46:54.832Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41057, 26, 6245, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:25:20.721Z', '2020-03-11T02:25:20.721Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41058, 21, 6245, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:25:23.215Z', '2020-03-11T02:25:23.215Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41091, 21, 6261, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:41:44.629Z', '2020-03-11T02:41:44.629Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41103, 21, 6267, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:43:57.899Z', '2020-03-11T02:43:57.899Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41194, 26, 6274, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T22:47:28.411Z', '2020-03-11T22:47:28.411Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34009, 21, 5782, 'Lesson', NULL, NULL, 'tags', '2019-11-28T08:51:33.187Z', '2019-11-28T08:51:33.187Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34010, 638, 5782, 'Lesson', NULL, NULL, 'tools', '2019-11-28T08:52:01.342Z', '2019-11-28T08:52:01.342Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41061, 26, 6247, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:30:14.339Z', '2020-03-11T02:30:14.339Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41062, 21, 6247, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:30:16.602Z', '2020-03-11T02:30:16.602Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41104, 26, 6268, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:44:18.118Z', '2020-03-11T02:44:18.118Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34011, 21, 5783, 'Lesson', NULL, NULL, 'tags', '2019-11-28T10:01:34.849Z', '2019-11-28T10:01:34.849Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34012, 638, 5783, 'Lesson', NULL, NULL, 'tools', '2019-11-28T10:02:15.555Z', '2019-11-28T10:02:15.555Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34013, 276, 5783, 'Lesson', NULL, NULL, 'platforms', '2019-11-28T10:02:19.262Z', '2019-11-28T10:02:19.262Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41063, 26, 6248, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:30:45.194Z', '2020-03-11T02:30:45.194Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41064, 21, 6248, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:30:47.762Z', '2020-03-11T02:30:47.762Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41105, 21, 6268, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:44:21.304Z', '2020-03-11T02:44:21.304Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34014, 21, 5784, 'Lesson', NULL, NULL, 'tags', '2019-11-28T10:21:16.538Z', '2019-11-28T10:21:16.538Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34015, 638, 5784, 'Lesson', NULL, NULL, 'tools', '2019-11-28T10:22:33.526Z', '2019-11-28T10:22:33.526Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34016, 276, 5784, 'Lesson', NULL, NULL, 'platforms', '2019-11-28T10:22:35.613Z', '2019-11-28T10:22:35.613Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41065, 26, 6249, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:31:51.136Z', '2020-03-11T02:31:51.136Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41066, 21, 6249, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:31:53.756Z', '2020-03-11T02:31:53.756Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41110, 26, 6271, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:45:15.651Z', '2020-03-11T02:45:15.651Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41179, 26, 6273, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T21:30:44.248Z', '2020-03-11T21:30:44.248Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41180, 21, 6273, 'Lesson', NULL, NULL, 'tags', '2020-03-11T21:30:47.582Z', '2020-03-11T21:30:47.582Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34017, 21, 5785, 'Lesson', NULL, NULL, 'tags', '2019-11-28T10:46:29.456Z', '2019-11-28T10:46:29.456Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34018, 638, 5785, 'Lesson', NULL, NULL, 'tools', '2019-11-28T10:47:12.666Z', '2019-11-28T10:47:12.666Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41067, 26, 6250, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:35:55.364Z', '2020-03-11T02:35:55.364Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41068, 21, 6250, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:35:58.981Z', '2020-03-11T02:35:58.981Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41081, 21, 6256, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:39:48.065Z', '2020-03-11T02:39:48.065Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41092, 26, 6262, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:42:06.404Z', '2020-03-11T02:42:06.404Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41093, 21, 6262, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:42:09.286Z', '2020-03-11T02:42:09.286Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41100, 26, 6266, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:43:37.568Z', '2020-03-11T02:43:37.568Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41108, 26, 6270, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:44:55.709Z', '2020-03-11T02:44:55.709Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41111, 21, 6271, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:45:19.317Z', '2020-03-11T02:45:19.317Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34019, 21, 5786, 'Lesson', NULL, NULL, 'tags', '2019-11-28T10:56:21.286Z', '2019-11-28T10:56:21.286Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34020, 638, 5786, 'Lesson', NULL, NULL, 'tools', '2019-11-28T10:57:01.743Z', '2019-11-28T10:57:01.743Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41073, 21, 6252, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:37:12.037Z', '2020-03-11T02:37:12.037Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41076, 26, 6254, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:38:19.425Z', '2020-03-11T02:38:19.425Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34021, 21, 5787, 'Lesson', NULL, NULL, 'tags', '2019-11-28T11:04:25.465Z', '2019-11-28T11:04:25.465Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41070, 26, 6251, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:36:24.565Z', '2020-03-11T02:36:24.565Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41071, 21, 6251, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:36:27.513Z', '2020-03-11T02:36:27.513Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41072, 26, 6252, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:37:08.734Z', '2020-03-11T02:37:08.734Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41078, 26, 6255, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:39:12.711Z', '2020-03-11T02:39:12.711Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41088, 26, 6260, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:41:24.451Z', '2020-03-11T02:41:24.451Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41112, 26, 6272, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:45:40.458Z', '2020-03-11T02:45:40.458Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41113, 21, 6272, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:45:43.726Z', '2020-03-11T02:45:43.726Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34022, 638, 5787, 'Lesson', NULL, NULL, 'tools', '2019-11-28T11:05:10.960Z', '2019-11-28T11:05:10.960Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34023, 21, 5788, 'Lesson', NULL, NULL, 'tags', '2019-11-28T11:15:18.804Z', '2019-11-28T11:15:18.804Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34035, 276, 5791, 'Lesson', NULL, NULL, 'platforms', '2019-11-28T11:51:40.306Z', '2019-11-28T11:51:40.306Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41074, 26, 6253, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:37:41.017Z', '2020-03-11T02:37:41.017Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41084, 26, 6258, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:40:40.392Z', '2020-03-11T02:40:40.392Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41085, 21, 6258, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:40:43.882Z', '2020-03-11T02:40:43.882Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41086, 26, 6259, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:41:04.624Z', '2020-03-11T02:41:04.624Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41087, 21, 6259, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:41:08.702Z', '2020-03-11T02:41:08.702Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41089, 21, 6260, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:41:27.408Z', '2020-03-11T02:41:27.408Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34024, 638, 5788, 'Lesson', NULL, NULL, 'tools', '2019-11-28T11:16:26.661Z', '2019-11-28T11:16:26.661Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34027, 276, 5789, 'Lesson', NULL, NULL, 'platforms', '2019-11-28T11:27:26.990Z', '2019-11-28T11:27:26.990Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41075, 21, 6253, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:37:44.286Z', '2020-03-11T02:37:44.286Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41079, 21, 6255, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:39:16.048Z', '2020-03-11T02:39:16.048Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41080, 26, 6256, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:39:43.200Z', '2020-03-11T02:39:43.200Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41098, 26, 6265, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:43:19.736Z', '2020-03-11T02:43:19.736Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34025, 21, 5789, 'Lesson', NULL, NULL, 'tags', '2019-11-28T11:26:45.145Z', '2019-11-28T11:26:45.145Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34026, 638, 5789, 'Lesson', NULL, NULL, 'tools', '2019-11-28T11:27:25.294Z', '2019-11-28T11:27:25.294Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41077, 21, 6254, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:38:22.672Z', '2020-03-11T02:38:22.672Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41097, 21, 6264, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:43:02.314Z', '2020-03-11T02:43:02.314Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41102, 26, 6267, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:43:55.156Z', '2020-03-11T02:43:55.156Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34030, 21, 5790, 'Lesson', NULL, NULL, 'tags', '2019-11-28T11:45:18.616Z', '2019-11-28T11:45:18.616Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41082, 26, 6257, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:40:16.468Z', '2020-03-11T02:40:16.468Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41083, 21, 6257, 'Lesson', NULL, NULL, 'tags', '2020-03-11T02:40:19.901Z', '2020-03-11T02:40:19.901Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41096, 26, 6264, 'Lesson', NULL, NULL, 'frameworks', '2020-03-11T02:42:59.268Z', '2020-03-11T02:42:59.268Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (41195, 21, 6274, 'Lesson', NULL, NULL, 'tags', '2020-03-11T22:47:31.599Z', '2020-03-11T22:47:31.599Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34033, 21, 5791, 'Lesson', NULL, NULL, 'tags', '2019-11-28T11:51:01.470Z', '2019-11-28T11:51:01.470Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (92, 20, 88, 'Lesson', NULL, NULL, 'tags', '2014-01-08T22:31:11.911Z', '2014-01-08T22:31:11.911Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (126, 20, 71, 'Lesson', NULL, NULL, 'tags', '2014-01-08T22:42:50.154Z', '2014-01-08T22:42:50.154Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (127, 20, 74, 'Lesson', NULL, NULL, 'tags', '2014-01-08T22:42:50.193Z', '2014-01-08T22:42:50.193Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (132, 20, 76, 'Lesson', NULL, NULL, 'tags', '2014-01-08T22:42:50.382Z', '2014-01-08T22:42:50.382Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (175, 21, 66, 'Lesson', NULL, NULL, 'tags', '2014-01-08T22:42:52.178Z', '2014-01-08T22:42:52.178Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (248, 20, 96, 'Lesson', NULL, NULL, 'tags', '2014-01-28T07:23:29.388Z', '2014-01-28T07:23:29.388Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (303, 20, 119, 'Lesson', NULL, NULL, 'tags', '2014-03-01T01:41:00.356Z', '2014-03-01T01:41:00.356Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9360, 9, 96, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:26.348Z', '2017-02-03T06:08:26.348Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9368, 9, 231, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:26.988Z', '2017-02-03T06:08:26.988Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9378, 9, 591, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:27.723Z', '2017-02-03T06:08:27.723Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (531, 20, 231, 'Lesson', NULL, NULL, 'tags', '2014-08-28T21:11:29.707Z', '2014-08-28T21:11:29.707Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (616, 20, 259, 'Lesson', NULL, NULL, 'tags', '2014-10-16T14:22:01.721Z', '2014-10-16T14:22:01.721Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9374, 9, 335, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:27.389Z', '2017-02-03T06:08:27.389Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (893, 20, 304, 'Lesson', NULL, NULL, 'tags', '2015-01-07T22:33:00.443Z', '2015-01-07T22:33:00.443Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19696, 397, 2862, 'Lesson', NULL, NULL, 'languages', '2017-12-14T06:09:51.412Z', '2017-12-14T06:09:51.412Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (1019, 20, 335, 'Lesson', NULL, NULL, 'tags', '2015-02-06T20:34:54.500Z', '2015-02-06T20:34:54.500Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9376, 9, 352, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:27.666Z', '2017-02-03T06:08:27.666Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (1106, 20, 352, 'Lesson', NULL, NULL, 'tags', '2015-03-11T00:04:25.603Z', '2015-03-11T00:04:25.603Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9352, 9, 74, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:25.656Z', '2017-02-03T06:08:25.656Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (15781, 9, 304, 'Lesson', NULL, NULL, 'tags', '2017-06-22T06:40:15.430Z', '2017-06-22T06:40:15.430Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (15875, 9, 259, 'Lesson', NULL, NULL, 'tags', '2017-06-22T07:18:52.677Z', '2017-06-22T07:18:52.677Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19752, 397, 181, 'Series', NULL, NULL, 'languages', '2017-12-15T06:09:43.250Z', '2017-12-15T06:09:43.250Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19902, 397, 2900, 'Lesson', NULL, NULL, 'languages', '2017-12-21T19:16:37.027Z', '2017-12-21T19:16:37.027Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19987, 397, 2906, 'Lesson', NULL, NULL, 'languages', '2017-12-27T01:38:32.006Z', '2017-12-27T01:38:32.006Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20800, 20, 2861, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:05.135Z', '2018-02-16T04:55:05.135Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20801, 20, 2878, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:05.593Z', '2018-02-16T04:55:05.593Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20802, 20, 2879, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:05.835Z', '2018-02-16T04:55:05.835Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20803, 20, 2881, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:06.070Z', '2018-02-16T04:55:06.070Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20804, 20, 2882, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:06.223Z', '2018-02-16T04:55:06.223Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20805, 20, 2883, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:06.372Z', '2018-02-16T04:55:06.372Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20806, 20, 2885, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:06.535Z', '2018-02-16T04:55:06.535Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20807, 20, 2888, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:06.739Z', '2018-02-16T04:55:06.739Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20808, 20, 3129, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:06.908Z', '2018-02-16T04:55:06.908Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20809, 20, 2896, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:07.164Z', '2018-02-16T04:55:07.164Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20810, 20, 2897, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:07.336Z', '2018-02-16T04:55:07.336Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20811, 20, 2900, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:07.560Z', '2018-02-16T04:55:07.560Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20812, 20, 2905, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:07.751Z', '2018-02-16T04:55:07.751Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20813, 20, 2902, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:07.916Z', '2018-02-16T04:55:07.916Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20814, 20, 2906, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:08.153Z', '2018-02-16T04:55:08.153Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20815, 20, 2907, 'Lesson', NULL, NULL, 'tags', '2018-02-16T04:55:08.423Z', '2018-02-16T04:55:08.423Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (1969, 20, 591, 'Lesson', NULL, NULL, 'tags', '2015-12-24T09:50:33.982Z', '2015-12-24T09:50:33.982Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19754, 397, 2879, 'Lesson', NULL, NULL, 'languages', '2017-12-15T06:11:13.240Z', '2017-12-15T06:11:13.240Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9362, 9, 100, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:26.497Z', '2017-02-03T06:08:26.497Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (18507, 20, 82, 'Lesson', NULL, NULL, 'tags', '2017-10-07T04:53:06.188Z', '2017-10-07T04:53:06.188Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (18508, 20, 100, 'Lesson', NULL, NULL, 'tags', '2017-10-07T04:53:06.375Z', '2017-10-07T04:53:06.375Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (18509, 20, 150, 'Lesson', NULL, NULL, 'tags', '2017-10-07T04:53:06.532Z', '2017-10-07T04:53:06.532Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9355, 9, 88, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:25.719Z', '2017-02-03T06:08:25.719Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9366, 9, 150, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:26.805Z', '2017-02-03T06:08:26.805Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9350, 9, 71, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:25.484Z', '2017-02-03T06:08:25.484Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9372, 9, 304, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:27.222Z', '2017-02-03T06:08:27.222Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34031, 638, 5790, 'Lesson', NULL, NULL, 'tools', '2019-11-28T11:46:03.652Z', '2019-11-28T11:46:03.652Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34032, 276, 5790, 'Lesson', NULL, NULL, 'platforms', '2019-11-28T11:46:05.645Z', '2019-11-28T11:46:05.645Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (34034, 638, 5791, 'Lesson', NULL, NULL, 'tools', '2019-11-28T11:51:38.045Z', '2019-11-28T11:51:38.045Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (15813, 9, 71, 'Lesson', NULL, NULL, 'tags', '2017-06-22T06:40:41.516Z', '2017-06-22T06:40:41.516Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9353, 9, 76, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:25.667Z', '2017-02-03T06:08:25.667Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9370, 9, 259, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:27.097Z', '2017-02-03T06:08:27.097Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (15805, 9, 66, 'Lesson', NULL, NULL, 'tags', '2017-06-22T06:40:37.950Z', '2017-06-22T06:40:37.950Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9357, 9, 82, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:25.901Z', '2017-02-03T06:08:25.901Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9364, 9, 119, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:26.706Z', '2017-02-03T06:08:26.706Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (11144, 9, 1, 'Series', NULL, NULL, 'libraries', '2017-02-03T09:36:02.074Z', '2017-02-03T09:36:02.074Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19883, 397, 2896, 'Lesson', NULL, NULL, 'languages', '2017-12-20T16:42:03.512Z', '2017-12-20T16:42:03.512Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (18740, 26, 160, 'Series', NULL, NULL, 'frameworks', '2017-10-21T01:54:52.833Z', '2017-10-21T01:54:52.833Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19804, 397, 2881, 'Lesson', NULL, NULL, 'languages', '2017-12-17T04:17:30.236Z', '2017-12-17T04:17:30.236Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19806, 397, 2882, 'Lesson', NULL, NULL, 'languages', '2017-12-17T22:42:52.586Z', '2017-12-17T22:42:52.586Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19812, 397, 2885, 'Lesson', NULL, NULL, 'languages', '2017-12-18T17:51:18.876Z', '2017-12-18T17:51:18.876Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19856, 397, 2888, 'Lesson', NULL, NULL, 'languages', '2017-12-19T21:08:41.079Z', '2017-12-19T21:08:41.079Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19885, 397, 2897, 'Lesson', NULL, NULL, 'languages', '2017-12-20T18:40:24.059Z', '2017-12-20T18:40:24.059Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19808, 397, 2883, 'Lesson', NULL, NULL, 'languages', '2017-12-17T23:09:42.197Z', '2017-12-17T23:09:42.197Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (16068, 9, 76, 'Lesson', NULL, NULL, 'tags', '2017-06-22T07:23:00.257Z', '2017-06-22T07:23:00.257Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (16826, 9, 119, 'Lesson', NULL, NULL, 'tags', '2017-07-12T08:51:35.167Z', '2017-07-12T08:51:35.167Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (16835, 9, 352, 'Lesson', NULL, NULL, 'tags', '2017-07-12T08:52:19.538Z', '2017-07-12T08:52:19.538Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (16852, 9, 591, 'Lesson', NULL, NULL, 'tags', '2017-07-12T08:53:18.930Z', '2017-07-12T08:53:18.930Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (16081, 9, 100, 'Lesson', NULL, NULL, 'tags', '2017-06-22T07:23:05.509Z', '2017-06-22T07:23:05.509Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19755, 397, 2878, 'Lesson', NULL, NULL, 'languages', '2017-12-15T19:02:37.619Z', '2017-12-15T19:02:37.619Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (16085, 9, 231, 'Lesson', NULL, NULL, 'tags', '2017-06-22T07:23:07.870Z', '2017-06-22T07:23:07.870Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (15755, 9, 74, 'Lesson', NULL, NULL, 'tags', '2017-06-22T06:39:54.339Z', '2017-06-22T06:39:54.339Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (16278, 9, 335, 'Lesson', NULL, NULL, 'tags', '2017-06-22T07:29:00.196Z', '2017-06-22T07:29:00.196Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19918, 397, 2902, 'Lesson', NULL, NULL, 'languages', '2017-12-22T18:10:35.793Z', '2017-12-22T18:10:35.793Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19956, 397, 2905, 'Lesson', NULL, NULL, 'languages', '2017-12-27T00:09:08.833Z', '2017-12-27T00:09:08.833Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19996, 397, 2907, 'Lesson', NULL, NULL, 'languages', '2017-12-27T20:26:17.761Z', '2017-12-27T20:26:17.761Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (15812, 9, 88, 'Lesson', NULL, NULL, 'tags', '2017-06-22T06:40:40.903Z', '2017-06-22T06:40:40.903Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (16263, 9, 96, 'Lesson', NULL, NULL, 'tags', '2017-06-22T07:28:50.291Z', '2017-06-22T07:28:50.291Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (15810, 9, 82, 'Lesson', NULL, NULL, 'tags', '2017-06-22T06:40:39.195Z', '2017-06-22T06:40:39.195Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (9349, 9, 66, 'Lesson', NULL, NULL, 'libraries', '2017-02-03T06:08:18.356Z', '2017-02-03T06:08:18.356Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19694, 21, 2862, 'Lesson', NULL, NULL, 'tags', '2017-12-14T05:36:32.713Z', '2017-12-14T05:36:32.713Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (15774, 9, 150, 'Lesson', NULL, NULL, 'tags', '2017-06-22T06:40:10.583Z', '2017-06-22T06:40:10.583Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (19695, 397, 2861, 'Lesson', NULL, NULL, 'languages', '2017-12-14T05:51:56.348Z', '2017-12-14T05:51:56.348Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20669, 21, 3128, 'Lesson', NULL, NULL, 'tags', '2018-02-05T18:23:39.609Z', '2018-02-05T18:23:39.609Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20670, 397, 3128, 'Lesson', NULL, NULL, 'languages', '2018-02-05T18:24:29.174Z', '2018-02-05T18:24:29.174Z') ON CONFLICT (id) DO NOTHING;
INSERT INTO taggings (id, tag_id, taggable_id, taggable_type, tagger_id, tagger_type, context, created_at, updated_at) VALUES (20672, 397, 3129, 'Lesson', NULL, NULL, 'languages', '2018-02-05T19:09:38.266Z', '2018-02-05T19:09:38.266Z') ON CONFLICT (id) DO NOTHING;


-- Re-enable FK checks
SET session_replication_role = DEFAULT;

-- Reset sequences
SELECT setval('users_id_seq', COALESCE((SELECT MAX(id) FROM users), 1));
SELECT setval('instructors_id_seq', COALESCE((SELECT MAX(id) FROM instructors), 1));
SELECT setval('series_id_seq', COALESCE((SELECT MAX(id) FROM series), 1));
SELECT setval('lessons_id_seq', COALESCE((SELECT MAX(id) FROM lessons), 1));
SELECT setval('tags_id_seq', COALESCE((SELECT MAX(id) FROM tags), 1));
SELECT setval('taggings_id_seq', COALESCE((SELECT MAX(id) FROM taggings), 1));